var lae=Object.defineProperty,cae=Object.defineProperties,uae=Object.getOwnPropertyDescriptors,t6=Object.getOwnPropertySymbols,dae=Object.prototype.hasOwnProperty,hae=Object.prototype.propertyIsEnumerable,n6=(Ke,me,F)=>me in Ke?lae(Ke,me,{enumerable:!0,configurable:!0,writable:!0,value:F}):Ke[me]=F,i6=(Ke,me)=>{for(var F in me||(me={}))dae.call(me,F)&&n6(Ke,F,me[F]);if(t6)for(var F of t6(me))hae.call(me,F)&&n6(Ke,F,me[F]);return Ke},r6=(Ke,me)=>cae(Ke,uae(me));(self.webpackChunkURL_Frontend=self.webpackChunkURL_Frontend||[]).push([[179],{2011:(Ke,me,F)=>{"use strict";F.d(me,{xv:()=>_e,Dh:()=>le,GT:()=>we,cc:()=>Be,on:()=>Se,pX:()=>he});var u=F(5e3),te=F(127);Ke=F.hmd(Ke);const B=["ngOnDestroy"],he=(ee,Ee,We,et={})=>new Proxy(ee,{get:(Ie,ae)=>We.runOutsideAngular(()=>{var pe;if(ee[ae])return(null===(pe=null==et?void 0:et.spy)||void 0===pe?void 0:pe.get)&&et.spy.get(ae,ee[ae]),ee[ae];if(B.indexOf(ae)>-1)return()=>{};const Ne=Ee.toPromise().then(Ge=>{const j=Ge&&Ge[ae];return"function"==typeof j?j.bind(Ge):j&&j.then?j.then(fe=>We.run(()=>fe)):We.run(()=>j)});return new Proxy(()=>{},{get:(Ge,j)=>Ne[j],apply:(Ge,j,fe)=>Ne.then(W=>{var J;const Q=W&&W(...fe);return(null===(J=null==et?void 0:et.spy)||void 0===J?void 0:J.apply)&&et.spy.apply(ae,fe,Q),Q})})})}),we=(ee,Ee)=>{Ee.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(et=>{Object.defineProperty(ee.prototype,et,Object.getOwnPropertyDescriptor(We.prototype||We,et))})})};class be{constructor(Ee){return Ee}}const le=new u.OlP("angularfire2.app.options"),_e=new u.OlP("angularfire2.app.name");function Se(ee,Ee,We){const Ie="object"==typeof We&&We||{};Ie.name=Ie.name||"string"==typeof We&&We||"[DEFAULT]";const pe=te.Z.apps.filter(Ne=>Ne&&Ne.name===Ie.name)[0]||Ee.runOutsideAngular(()=>te.Z.initializeApp(ee,Ie));try{JSON.stringify(ee)!==JSON.stringify(pe.options)&&G("error",`${pe.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ne){}return new be(pe)}const G=(ee,...Ee)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ee](...Ee)};function Be(ee,Ee,We,et,Ie){const[,ae,pe]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===ee)||[];if(ae)return function Te(ee,Ee){try{return ee.toString()===Ee.toString()}catch(We){return ee===Ee}}(Ie,pe)||(Fe("error",`${Ee} was already initialized on the ${We} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:Ie,was:pe})),ae;{const Ne=et();return globalThis.\u0275AngularfireInstanceCache.push([ee,Ne,Ie]),Ne}}const Le=!!Ke.hot,Fe=(ee,...Ee)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ee](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2090:(Ke,me,F)=>{"use strict";F.d(me,{BH:()=>Nt,LL:()=>En,ZR:()=>Wn,gQ:()=>ti,zI:()=>j,hu:()=>te,g5:()=>B,US:()=>be,tV:()=>Se,h$:()=>le,L:()=>_e,$s:()=>$e,r3:()=>xs,Sg:()=>Ze,ne:()=>ds,p$:()=>G,vZ:()=>Br,ZB:()=>$,gK:()=>or,pd:()=>Ci,aH:()=>st,Pz:()=>Qt,m9:()=>Ft,z$:()=>Be,GJ:()=>us,jU:()=>Fe,ru:()=>ee,xb:()=>Rs,w1:()=>et,hl:()=>Ne,uI:()=>Te,UG:()=>Le,Yr:()=>ae,b$:()=>Ee,G6:()=>pe,w9:()=>sr,cI:()=>Gt,UI:()=>gt,xO:()=>Ua,zd:()=>Ha,DV:()=>Yo,ug:()=>ht,dS:()=>Ri,Wl:()=>Lt,Dv:()=>Mi,Wj:()=>Qo,lb:()=>xi,eu:()=>Ge});const te=function(U,L){if(!U)throw B(L)},B=function(U){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+U)},he=function(U){const L=[];let q=0;for(let de=0;de<U.length;de++){let ne=U.charCodeAt(de);ne<128?L[q++]=ne:ne<2048?(L[q++]=ne>>6|192,L[q++]=63&ne|128):55296==(64512&ne)&&de+1<U.length&&56320==(64512&U.charCodeAt(de+1))?(ne=65536+((1023&ne)<<10)+(1023&U.charCodeAt(++de)),L[q++]=ne>>18|240,L[q++]=ne>>12&63|128,L[q++]=ne>>6&63|128,L[q++]=63&ne|128):(L[q++]=ne>>12|224,L[q++]=ne>>6&63|128,L[q++]=63&ne|128)}return L},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let ne=0;ne<U.length;ne+=3){const Je=U[ne],It=ne+1<U.length,mn=It?U[ne+1]:0,Xt=ne+2<U.length,dn=Xt?U[ne+2]:0;let Dn=(15&mn)<<2|dn>>6,uo=63&dn;Xt||(uo=64,It||(Dn=64)),de.push(q[Je>>2],q[(3&Je)<<4|mn>>4],q[Dn],q[uo])}return de.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(he(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let q=0,de=0;for(;q<U.length;){const ne=U[q++];if(ne<128)L[de++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Je=U[q++];L[de++]=String.fromCharCode((31&ne)<<6|63&Je)}else if(ne>239&&ne<365){const Xt=((7&ne)<<18|(63&U[q++])<<12|(63&U[q++])<<6|63&U[q++])-65536;L[de++]=String.fromCharCode(55296+(Xt>>10)),L[de++]=String.fromCharCode(56320+(1023&Xt))}else{const Je=U[q++],It=U[q++];L[de++]=String.fromCharCode((15&ne)<<12|(63&Je)<<6|63&It)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let ne=0;ne<U.length;){const Je=q[U.charAt(ne++)],mn=ne<U.length?q[U.charAt(ne)]:0;++ne;const dn=ne<U.length?q[U.charAt(ne)]:64;++ne;const Ct=ne<U.length?q[U.charAt(ne)]:64;if(++ne,null==Je||null==mn||null==dn||null==Ct)throw Error();de.push(Je<<2|mn>>4),64!==dn&&(de.push(mn<<4&240|dn>>2),64!==Ct&&de.push(dn<<6&192|Ct))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},le=function(U){const L=he(U);return be.encodeByteArray(L,!0)},_e=function(U){return le(U).replace(/\./g,"")},Se=function(U){try{return be.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function G(U){return $(void 0,U)}function $(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!X(q)||(U[q]=$(U[q],L[q]));return U}function X(U){return"__proto__"!==U}function Be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Te(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Le(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Fe(){return"object"==typeof self&&self.self===self}function ee(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function et(){const U=Be();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function ae(){return!1}function pe(){return!Le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){return"object"==typeof indexedDB}function Ge(){return new Promise((U,L)=>{try{let q=!0;const de="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(de);ne.onsuccess=()=>{ne.result.close(),q||self.indexedDB.deleteDatabase(de),U(!0)},ne.onupgradeneeded=()=>{q=!1},ne.onerror=()=>{var Je;L((null===(Je=ne.error)||void 0===Je?void 0:Je.message)||"")}}catch(q){L(q)}})}function j(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const ce=()=>{try{return function fe(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if("undefined"==typeof document)return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(q){return}const L=U&&Se(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},st=()=>{var U;return null===(U=ce())||void 0===U?void 0:U.config},Qt=U=>{var L;return null===(L=ce())||void 0===L?void 0:L[`_${U}`]};class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,de)=>{q?this.reject(q):this.resolve(de),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,de))}}}function Ze(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=L||"demo-project",ne=U.iat||0,Je=U.sub||U.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const It=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:ne,exp:ne+3600,auth_time:ne,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},U);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(It)),""].join(".")}class Wn extends Error{constructor(L,q,de){super(q),this.code=L,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,En.prototype.create)}}class En{constructor(L,q,de){this.service=L,this.serviceName=q,this.errors=de}create(L,...q){const de=q[0]||{},ne=`${this.service}/${L}`,Je=this.errors[L],It=Je?function nn(U,L){return U.replace(Hi,(q,de)=>{const ne=L[de];return null!=ne?String(ne):`<${de}?>`})}(Je,de):"Error";return new Wn(ne,`${this.serviceName}: ${It} (${ne}).`,de)}}const Hi=/\{\$([^}]+)}/g;function Gt(U){return JSON.parse(U)}function Lt(U){return JSON.stringify(U)}const ir=function(U){let L={},q={},de={},ne="";try{const Je=U.split(".");L=Gt(Se(Je[0])||""),q=Gt(Se(Je[1])||""),ne=Je[2],de=q.d||{},delete q.d}catch(Je){}return{header:L,claims:q,data:de,signature:ne}},sr=function(U){const q=ir(U).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},us=function(U){const L=ir(U).claims;return"object"==typeof L&&!0===L.admin};function xs(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Yo(U,L){if(Object.prototype.hasOwnProperty.call(U,L))return U[L]}function Rs(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function gt(U,L,q){const de={};for(const ne in U)Object.prototype.hasOwnProperty.call(U,ne)&&(de[ne]=L.call(q,U[ne],ne,U));return de}function Br(U,L){if(U===L)return!0;const q=Object.keys(U),de=Object.keys(L);for(const ne of q){if(!de.includes(ne))return!1;const Je=U[ne],It=L[ne];if(Un(Je)&&Un(It)){if(!Br(Je,It))return!1}else if(Je!==It)return!1}for(const ne of de)if(!q.includes(ne))return!1;return!0}function Un(U){return null!==U&&"object"==typeof U}function Ua(U){const L=[];for(const[q,de]of Object.entries(U))Array.isArray(de)?de.forEach(ne=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(ne))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(de));return L.length?"&"+L.join("&"):""}function Ha(U){const L={};return U.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[ne,Je]=de.split("=");L[decodeURIComponent(ne)]=decodeURIComponent(Je)}}),L}function Ci(U){const L=U.indexOf("?");if(!L)return"";const q=U.indexOf("#",L);return U.substring(L,q>0?q:void 0)}class ti{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let L=1;L<this.blockSize;++L)this.pad_[L]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(L,q){q||(q=0);const de=this.W_;if("string"==typeof L)for(let Ct=0;Ct<16;Ct++)de[Ct]=L.charCodeAt(q)<<24|L.charCodeAt(q+1)<<16|L.charCodeAt(q+2)<<8|L.charCodeAt(q+3),q+=4;else for(let Ct=0;Ct<16;Ct++)de[Ct]=L[q]<<24|L[q+1]<<16|L[q+2]<<8|L[q+3],q+=4;for(let Ct=16;Ct<80;Ct++){const Dn=de[Ct-3]^de[Ct-8]^de[Ct-14]^de[Ct-16];de[Ct]=4294967295&(Dn<<1|Dn>>>31)}let dn,ni,ne=this.chain_[0],Je=this.chain_[1],It=this.chain_[2],mn=this.chain_[3],Xt=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(dn=mn^Je&(It^mn),ni=1518500249):(dn=Je^It^mn,ni=1859775393):Ct<60?(dn=Je&It|mn&(Je|It),ni=2400959708):(dn=Je^It^mn,ni=3395469782);const Dn=(ne<<5|ne>>>27)+dn+Xt+ni+de[Ct]&4294967295;Xt=mn,mn=It,It=4294967295&(Je<<30|Je>>>2),Je=ne,ne=Dn}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+Je&4294967295,this.chain_[2]=this.chain_[2]+It&4294967295,this.chain_[3]=this.chain_[3]+mn&4294967295,this.chain_[4]=this.chain_[4]+Xt&4294967295}update(L,q){if(null==L)return;void 0===q&&(q=L.length);const de=q-this.blockSize;let ne=0;const Je=this.buf_;let It=this.inbuf_;for(;ne<q;){if(0===It)for(;ne<=de;)this.compress_(L,ne),ne+=this.blockSize;if("string"==typeof L){for(;ne<q;)if(Je[It]=L.charCodeAt(ne),++It,++ne,It===this.blockSize){this.compress_(Je),It=0;break}}else for(;ne<q;)if(Je[It]=L[ne],++It,++ne,It===this.blockSize){this.compress_(Je),It=0;break}}this.inbuf_=It,this.total_+=q}digest(){const L=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&q,q/=256;this.compress_(this.buf_);let de=0;for(let ne=0;ne<5;ne++)for(let Je=24;Je>=0;Je-=8)L[de]=this.chain_[ne]>>Je&255,++de;return L}}function ds(U,L){const q=new Ko(U,L);return q.subscribe.bind(q)}class Ko{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(de=>{this.error(de)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,de){let ne;if(void 0===L&&void 0===q&&void 0===de)throw new Error("Missing Observer.");ne=function nt(U,L){if("object"!=typeof U||null===U)return!1;for(const q of L)if(q in U&&"function"==typeof U[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:de},void 0===ne.next&&(ne.next=_t),void 0===ne.error&&(ne.error=_t),void 0===ne.complete&&(ne.complete=_t);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(It){}}),this.observers.push(ne),Je}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _t(){}const Mi=function(U,L,q,de){let ne;if(de<L?ne="at least "+L:de>q&&(ne=0===q?"none":"no more than "+q),ne)throw new Error(U+" failed: Was called with "+de+(1===de?" argument.":" arguments.")+" Expects "+ne+".")};function or(U,L){return`${U} failed: ${L} argument `}function Qo(U,L,q,de){if((!de||q)&&"function"!=typeof q)throw new Error(or(U,L)+"must be a valid function.")}function xi(U,L,q,de){if((!de||q)&&("object"!=typeof q||null===q))throw new Error(or(U,L)+"must be a valid context object.")}const Ri=function(U){const L=[];let q=0;for(let de=0;de<U.length;de++){let ne=U.charCodeAt(de);if(ne>=55296&&ne<=56319){const Je=ne-55296;de++,te(de<U.length,"Surrogate pair missing trail surrogate."),ne=65536+(Je<<10)+(U.charCodeAt(de)-56320)}ne<128?L[q++]=ne:ne<2048?(L[q++]=ne>>6|192,L[q++]=63&ne|128):ne<65536?(L[q++]=ne>>12|224,L[q++]=ne>>6&63|128,L[q++]=63&ne|128):(L[q++]=ne>>18|240,L[q++]=ne>>12&63|128,L[q++]=ne>>6&63|128,L[q++]=63&ne|128)}return L},ht=function(U){let L=0;for(let q=0;q<U.length;q++){const de=U.charCodeAt(q);de<128?L++:de<2048?L+=2:de>=55296&&de<=56319?(L+=4,q++):L+=3}return L};function $e(U,L=1e3,q=2){const de=L*Math.pow(q,U),ne=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+ne)}function Ft(U){return U&&U._delegate?U._delegate:U}},859:(Ke,me,F)=>{"use strict";var u=F(5e3);let te=null;function B(){return te}const le=new u.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Se(){return(0,u.LFG)($)}()},providedIn:"platform"}),n})();const G=new u.OlP("Location Initialized");let $=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){X()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){X()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Be(){return new $((0,u.LFG)(le))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fe(n){return n&&"?"!==n[0]?"?"+n:n}let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,u.LFG)(le).location;return new et((0,u.LFG)(_e),e&&e.origin||"")}()},providedIn:"root"}),n})();const We=new u.OlP("appBaseHref");let et=(()=>{class n extends ee{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Fe(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const l=this.prepareExternalUrl(r+Fe(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){const l=this.prepareExternalUrl(r+Fe(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_e),u.LFG(We,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends ee{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Te(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let l=this.prepareExternalUrl(r+Fe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){let l=this.prepareExternalUrl(r+Fe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_e),u.LFG(We,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ae=(()=>{class n{constructor(t,i){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Le(Ge(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Fe(i))}normalize(t){return n.stripTrailingSlash(function Ne(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Fe,n.joinWithSlash=Te,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(u.LFG(ee),u.LFG(_e))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function pe(){return new ae((0,u.LFG)(ee),(0,u.LFG)(_e))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}function Ga(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let Os=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})(),Zn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new hn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){au("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){au("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class hn{constructor(){this.$implicit=null,this.ngIf=null}}function au(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class Jd{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ki=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Ir=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Jd(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(ki,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),ia=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const _o="browser";function Wa(n){return"server"===n}let rh=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Za((0,u.LFG)(le),window)}),n})();class Za{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=sh(this.window.history)||sh(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function sh(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gn{}class Wl extends class uu extends class be{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function we(n){te||(te=n)}(new Wl)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function oh(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function Ya(n){du=du||document.createElement("a"),du.setAttribute("href",n);const e=du.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ga(document.cookie,e)}}let du,ln=null;const $i=new u.OlP("TRANSITION_ID"),Ka=[{provide:u.ip1,useFactory:function ah(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const i=B(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[$i,le,u.zs3],multi:!0}];class ps{static init(){(0,u.VLi)(new ps)}addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const d=function(p){l=l||p,s--,0==s&&i(l)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?B().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let zi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ra=new u.OlP("EventManagerPlugins");let sa=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ra),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class hu{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=B().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Ns=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends Ns{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,r.push(i.appendChild(l))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(fu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(fu))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function fu(n){B().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zl=/%COMP%/g;function ve(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ve(n,r,t):(r=r.replace(Zl,n),t.push(r))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let yn=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new gu(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case u.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Kl(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case u.ifc.ShadowDom:return new ch(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=ve(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(sa),u.LFG(yo),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class gu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=pt[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=pt[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(i)):this.eventManager.addEventListener(e,t,Ot(i))}}class Kl extends gu{constructor(e,t,i,r){super(e),this.component=i;const s=ve(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function by(n){return"_ngcontent-%COMP%".replace(Zl,n)}(r+"-"+i.id),this.hostAttr=function lh(n){return"_nghost-%COMP%".replace(Zl,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class ch extends gu{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ve(r.id,r.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let CC=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=["alt","control","meta","shift"],vu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ri={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bu=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="";if(_u.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),l+=p+".")}),l+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=l,d}static getEventFullKey(t){let i="",r=function Qa(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ri.hasOwnProperty(e)&&(e=ri[e]))}return vu[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),_u.forEach(s=>{s!=r&&Fs[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const uh=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:_o},{provide:u.g9A,useValue:function Gr(){Wl.makeCurrent(),ps.init()},multi:!0},{provide:le,useFactory:function wu(){return(0,u.RDi)(document),document},deps:[]}]),dh=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function wy(){return new u.qLn},deps:[]},{provide:ra,useClass:CC,multi:!0,deps:[le,u.R0b,u.Lbi]},{provide:ra,useClass:bu,multi:!0,deps:[le]},{provide:yn,useClass:yn,deps:[sa,yo,u.AFp]},{provide:u.FYo,useExisting:yn},{provide:Ns,useExisting:yo},{provide:yo,useClass:yo,deps:[le]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:sa,useClass:sa,deps:[ra,u.R0b]},{provide:gn,useClass:zi,deps:[]}];let aa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:$i,useExisting:u.AFp},Ka]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:dh,imports:[ia,u.hGG]}),n})();"undefined"!=typeof window&&window;let ca=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):u.LFG(hh),i},providedIn:"root"}),n})(),hh=(()=>{class n extends ca{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(i),(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function Ja(n){return new hh(n.get(le))}(u.LFG(u.zs3)),i},providedIn:"root"}),n})();var fn=F(8996),el=F(3269);function Ye(...n){const e=(0,el.yG)(n);return(0,fn.D)(n,e)}var Mt=F(7579);class Fi extends Mt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}var cn=F(8306);const{isArray:_m}=Array,{getPrototypeOf:ym,prototype:gs,keys:Ay}=Object;function _n(n){if(1===n.length){const e=n[0];if(_m(e))return{args:e,keys:null};if(function fh(n){return n&&"object"==typeof n&&ym(n)===gs}(e)){const t=Ay(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Sr=F(4671),lt=F(4004);const{isArray:Du}=Array;function ph(n){return(0,lt.U)(e=>function vm(n,e){return Du(e)?n(...e):n(e)}(n,e))}function mh(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var sn=F(5403),tl=F(9672);function wo(n,e,t){n?(0,tl.f)(t,n,e):e()}var lr=F(576);function Bs(n,e){const t=(0,lr.m)(n)?n:()=>n,i=r=>r.error(t());return new cn.y(e?r=>e.schedule(i,0,r):i)}const ua=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var nc=F(8189);function ic(...n){return function _h(){return(0,nc.J)(1)}()((0,fn.D)(n,(0,el.yG)(n)))}var $r=F(8421);function da(n){return new cn.y(e=>{(0,$r.Xf)(n()).subscribe(e)})}var ha=F(515),si=F(727),Rn=F(4482);function fa(){return(0,Rn.e)((n,e)=>{let t=null;n._refCount++;const i=(0,sn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class bm extends cn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new si.w0;const t=this.getSubject();e.add(this.source.subscribe((0,sn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=si.w0.EMPTY)}return e}refCount(){return fa()(this)}}function vn(n,e){return(0,Rn.e)((t,i)=>{let r=null,s=0,l=!1;const d=()=>l&&!r&&i.complete();t.subscribe((0,sn.x)(i,p=>{null==r||r.unsubscribe();let y=0;const w=s++;(0,$r.Xf)(n(p,w)).subscribe(r=(0,sn.x)(i,D=>i.next(e?e(p,D,w,y++):D),()=>{r=null,d()}))},()=>{l=!0,d()}))})}function Yn(n){return n<=0?()=>ha.E:(0,Rn.e)((e,t)=>{let i=0;e.subscribe((0,sn.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function pi(...n){const e=(0,el.yG)(n);return(0,Rn.e)((t,i)=>{(e?ic(n,t,e):ic(n,t)).subscribe(i)})}function pa(n,e,t,i,r){return(s,l)=>{let d=t,p=e,y=0;s.subscribe((0,sn.x)(l,w=>{const D=y++;p=d?n(p,w,D):(d=!0,w),i&&l.next(p)},r&&(()=>{d&&l.next(p),l.complete()})))}}function Tr(n,e){return(0,Rn.e)(pa(n,e,arguments.length>=2,!0))}function kn(n,e){return(0,Rn.e)((t,i)=>{let r=0;t.subscribe((0,sn.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}function mi(n){return(0,Rn.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,sn.x)(t,void 0,void 0,l=>{s=(0,$r.Xf)(n(l,mi(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}var Sn=F(5577);function rc(n,e){return(0,lr.m)(e)?(0,Sn.z)(n,e,1):(0,Sn.z)(n,1)}function yh(n){return n<=0?()=>ha.E:(0,Rn.e)((e,t)=>{let i=[];e.subscribe((0,sn.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function bn(n=My){return(0,Rn.e)((e,t)=>{let i=!1;e.subscribe((0,sn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function My(){return new ua}function xy(n){return(0,Rn.e)((e,t)=>{let i=!1;e.subscribe((0,sn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function nl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?kn((r,s)=>n(r,s,i)):Sr.y,Yn(1),t?xy(e):bn(()=>new ua))}function gi(n,e,t){const i=(0,lr.m)(n)||e||t?{next:n,error:e,complete:t}:n;return i?(0,Rn.e)((r,s)=>{var l;null===(l=i.subscribe)||void 0===l||l.call(i);let d=!0;r.subscribe((0,sn.x)(s,p=>{var y;null===(y=i.next)||void 0===y||y.call(i,p),s.next(p)},()=>{var p;d=!1,null===(p=i.complete)||void 0===p||p.call(i),s.complete()},p=>{var y;d=!1,null===(y=i.error)||void 0===y||y.call(i,p),s.error(p)},()=>{var p,y;d&&(null===(p=i.unsubscribe)||void 0===p||p.call(i)),null===(y=i.finalize)||void 0===y||y.call(i)}))}):Sr.y}function wm(n){return(0,Rn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Co{constructor(e,t){this.id=e,this.url=t}}class ma extends Co{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Su extends Co{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class On extends Co{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vh extends Co{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ga extends Co{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xC extends Co{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bh extends Co{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ar extends Co{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr extends Co{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class il{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _a{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ya{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wh{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Cm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function oi(n){return new Cm(n)}const rl="ngNavigationCancelingError";function Vs(n){const e=Error("NavigationCancelingError: "+n);return e[rl]=!0,e}function Em(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],d=n[s];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function _s(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Au(n[r],e[r]))return!1;return!0}function Au(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Dm(n){return Array.prototype.concat.apply([],n)}function Mu(n){return n.length>0?n[n.length-1]:null}function Kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _i(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,fn.D)(Promise.resolve(n)):Ye(n)}const ac={exact:function Im(n,e,t){if(!ys(n.segments,e.segments)||!Eo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Im(n.children[i],e.children[i],t))return!1;return!0},subset:xu},sl={exact:function Dh(n,e){return _s(n,e)},subset:function Ih(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Au(n[t],e[t]))},ignored:()=>!0};function va(n,e,t){return ac[t.paths](n.root,e.root,t.matrixParams)&&sl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function xu(n,e,t){return Sh(n,e,e.segments,t)}function Sh(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!ys(r,t)||e.hasChildren()||!Eo(r,t,i))}if(n.segments.length===t.length){if(!ys(n.segments,t)||!Eo(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!xu(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ys(n.segments,r)&&Eo(n.segments,r,i)&&n.children[Pt])&&Sh(n.children[Pt],e,s,i)}}function Eo(n,e,t){return e.every((i,r)=>sl[t](n[r].parameters,i.parameters))}class Do{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oi(this.queryParams)),this._queryParamMap}toString(){return Ry.serialize(this)}}class Rt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return al(this)}}class Pn{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=oi(this.parameters)),this._parameterMap}toString(){return ul(this)}}function ys(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class ol{}class Ru{parse(e){const t=new Oy(e);return new Do(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${zr(e.root,!0)}`,i=function Am(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${ll(t)}=${ll(r)}`).join("&"):`${ll(t)}=${ll(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function ba(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ry=new Ru;function al(n){return n.segments.map(e=>ul(e)).join("/")}function zr(n,e){if(!n.hasChildren())return al(n);if(e){const t=n.children[Pt]?zr(n.children[Pt],!1):"",i=[];return Kn(n.children,(r,s)=>{s!==Pt&&i.push(`${s}:${zr(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Th(n,e){let t=[];return Kn(n.children,(i,r)=>{r===Pt&&(t=t.concat(e(i,r)))}),Kn(n.children,(i,r)=>{r!==Pt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Pt?[zr(n.children[Pt],!1)]:[`${r}:${zr(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${al(n)}/${t[0]}`:`${al(n)}/(${t.join("//")})`}}function Io(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ll(n){return Io(n).replace(/%3B/gi,";")}function Ah(n){return Io(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cl(n){return decodeURIComponent(n)}function lc(n){return cl(n.replace(/\+/g,"%20"))}function ul(n){return`${Ah(n.path)}${function Tm(n){return Object.keys(n).map(e=>`;${Ah(e)}=${Ah(n[e])}`).join("")}(n.parameters)}`}const Mh=/^[^\/()?;=#]+/;function Us(n){const e=n.match(Mh);return e?e[0]:""}const cc=/^[^=?&#]+/,Mm=/^[^&#]+/;class Oy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Pt]=new Rt(e,t)),i}parseSegment(){const e=Us(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Pn(cl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Us(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Us(this.remaining);r&&(i=r,this.capture(i))}e[cl(t)]=cl(i)}parseQueryParam(e){const t=function ky(n){const e=n.match(cc);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function xm(n){const e=n.match(Mm);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=lc(t),s=lc(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Us(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Pt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Pt]:new Rt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Rm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xh(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=xh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dl(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return dl(e,this._root).map(t=>t.value)}}function xh(n,e){if(n===e.value)return e;for(const t of e.children){const i=xh(n,t);if(i)return i}return null}function dl(n,e){if(n===e.value)return[e];for(const t of e.children){const i=dl(n,t);if(i.length)return i.unshift(e),i}return[]}class Hs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function js(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ku extends Rm{constructor(e,t){super(e),this.snapshot=t,Pu(this,e)}toString(){return this.snapshot.toString()}}function wa(n,e){const t=function Py(n,e){const l=new So([],{},{},"",{},Pt,e,null,n.root,-1,{});return new Rh("",new Hs(l,[]))}(n,e),i=new Fi([new Pn("",{})]),r=new Fi({}),s=new Fi({}),l=new Fi({}),d=new Fi(""),p=new hl(i,r,l,d,s,Pt,e,t.root);return p.snapshot=t.root,new ku(new Hs(p,[]),t)}class hl{constructor(e,t,i,r,s,l,d,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,lt.U)(e=>oi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,lt.U)(e=>oi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ny(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Ou(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class So{constructor(e,t,i,r,s,l,d,p,y,w,D){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=w,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rh extends Rm{constructor(e,t){super(t),this.url=e,Pu(this,t)}toString(){return kh(this._root)}}function Pu(n,e){e.value._routerState=n,e.children.forEach(t=>Pu(n,t))}function kh(n){const e=n.children.length>0?` { ${n.children.map(kh).join(", ")} } `:"";return`${n.value}${e}`}function Gs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_s(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_s(e.params,t.params)||n.params.next(t.params),function Ch(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_s(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_s(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Oh(n,e){const t=_s(n.params,e.params)&&function Sm(n,e){return ys(n,e)&&n.every((t,i)=>_s(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Oh(n.parent,e.parent))}function uc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Fy(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return uc(n,i,r);return uc(n,i)})}(n,e,t);return new Hs(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>uc(n,d)),l}}const i=function Ly(n){return new hl(new Fi(n.url),new Fi(n.params),new Fi(n.queryParams),new Fi(n.fragment),new Fi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>uc(n,s));return new Hs(i,r)}}function qr(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fl(n){return"object"==typeof n&&null!=n&&n.outlets}function dc(n,e,t,i,r){let s={};if(i&&Kn(i,(d,p)=>{s[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new Do(t,s,r);const l=Om(n,e,t);return new Do(l,s,r)}function Om(n,e,t){const i={};return Kn(n.children,(r,s)=>{i[s]=r===e?t:Om(r,e,t)}),new Rt(n.segments,i)}class Ph{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&qr(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(fl);if(r&&r!==Mu(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hc{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Lm(n,e,t){if(n||(n=new Rt([],{})),0===n.segments.length&&n.hasChildren())return Nu(n,e,t);const i=function OC(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const l=n.segments[r],d=t[i];if(fl(d))break;const p=`${d}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Wr(p,y,l))return s;i+=2}else{if(!Wr(p,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Rt(n.segments.slice(0,i.pathIndex),{});return s.children[Pt]=new Rt(n.segments.slice(i.pathIndex),n.children),Nu(s,0,r)}return i.match&&0===r.length?new Rt(n.segments,{}):i.match&&!n.hasChildren()?Nh(n,e,t):i.match?Nu(n,0,r):Nh(n,e,t)}function Nu(n,e,t){if(0===t.length)return new Rt(n.segments,{});{const i=function Fm(n){return fl(n[0])?n[0].outlets:{[Pt]:n}}(t),r={};return Kn(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=Lm(n.children[l],e,s))}),Kn(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new Rt(n.segments,r)}}function Nh(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(fl(s)){const p=fc(s.outlets);return new Rt(i,p)}if(0===r&&qr(t[0])){i.push(new Pn(n.segments[e].path,Fu(t[0]))),r++;continue}const l=fl(s)?s.outlets[Pt]:`${s}`,d=r<t.length-1?t[r+1]:null;l&&d&&qr(d)?(i.push(new Pn(l,Fu(d))),r+=2):(i.push(new Pn(l,{})),r++)}return new Rt(i,{})}function fc(n){const e={};return Kn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Nh(new Rt([],{}),0,t))}),e}function Fu(n){const e={};return Kn(n,(t,i)=>e[i]=`${t}`),e}function Wr(n,e,t){return n==t.path&&_s(e,t.parameters)}class To{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Gs(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=js(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),Kn(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=js(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=js(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=js(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new ya(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Tu(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Gs(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Gs(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function Bm(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=r,l.resolver=p,l.outlet&&l.outlet.activateWith(r,p),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}class Bu{constructor(e,t){this.routes=e,this.module=t}}function zs(n){return"function"==typeof n}function Ao(n){return n instanceof Do}const Vu=Symbol("INITIAL_VALUE");function Mo(){return vn(n=>function Iu(...n){const e=(0,el.yG)(n),t=(0,el.jO)(n),{args:i,keys:r}=_n(n);if(0===i.length)return(0,fn.D)([],e);const s=new cn.y(function bo(n,e,t=Sr.y){return i=>{wo(e,()=>{const{length:r}=n,s=new Array(r);let l=r,d=r;for(let p=0;p<r;p++)wo(e,()=>{const y=(0,fn.D)(n[p],e);let w=!1;y.subscribe((0,sn.x)(i,D=>{s[p]=D,w||(w=!0,d--),d||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>mh(r,l):Sr.y));return t?s.pipe(ph(t)):s}(n.map(e=>e.pipe(Yn(1),pi(Vu)))).pipe(Tr((e,t)=>{let i=!1;return t.reduce((r,s,l)=>r!==Vu?r:(s===Vu&&(i=!0),i||!1!==s&&l!==t.length-1&&!Ao(s)?r:s),e)},Vu),kn(e=>e!==Vu),(0,lt.U)(e=>Ao(e)?e:!0===e),Yn(1)))}class Vy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new mc,this.attachRef=null}}class mc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Vy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Bh=(()=>{class n{constructor(t,i,r,s,l){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=s||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new Uy(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(mc),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Uy{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===hl?this.route:e===mc?this.childContexts:this.parent.get(e,t)}}let Vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},directives:[Bh],encapsulation:2}),n})();function pl(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];Uu(i,Uh(e,i))}}function Uu(n,e){n.children&&pl(n.children,e)}function Uh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Hh(n){const e=n.children&&n.children.map(Hh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=Vh),t}function $t(n){return n.outlet||Pt}function Hu(n,e){const t=n.filter(i=>$t(i)===e);return t.push(...n.filter(i=>$t(i)!==e)),t}const Vm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ml(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Vm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Em)(t,n,e);if(!s)return Object.assign({},Vm);const l={};Kn(s.posParams,(p,y)=>{l[y]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function xo(n,e,t,i,r="corrected"){if(t.length>0&&function Gy(n,e,t){return t.some(i=>ju(n,e,i)&&$t(i)!==Pt)}(n,t,i)){const l=new Rt(e,function jy(n,e,t,i){const r={};r[Pt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&$t(s)!==Pt){const l=new Rt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,r[$t(s)]=l}return r}(n,e,i,new Rt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Um(n,e,t){return t.some(i=>ju(n,e,i))}(n,t,i)){const l=new Rt(n.segments,function Hy(n,e,t,i,r,s){const l={};for(const d of i)if(ju(n,t,d)&&!r[$t(d)]){const p=new Rt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[$t(d)]=p}return Object.assign(Object.assign({},r),l)}(n,e,t,i,n.children,r));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new Rt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ju(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $y(n,e,t,i){return!!($t(n)===i||i!==Pt&&ju(e,t,n))&&("**"===n.path||ml(e,n,t).matched)}function zy(n,e,t){return 0===e.length&&!n.children[t]}class Ro{constructor(e){this.segmentGroup=e||null}}class Hn{constructor(e){this.urlTree=e}}function Ca(n){return Bs(new Ro(n))}function Gu(n){return Bs(new Hn(n))}class jh{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=xo(this.urlTree.root,[],[],this.config).segmentGroup,t=new Rt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,lt.U)(s=>this.createUrlTree(_c(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mi(s=>{if(s instanceof Hn)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Ro?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,lt.U)(r=>this.createUrlTree(_c(r),e.queryParams,e.fragment))).pipe(mi(r=>{throw r instanceof Ro?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Rt([],{[Pt]:e}):e;return new Do(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,lt.U)(s=>new Rt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,fn.D)(r).pipe(rc(s=>{const l=i.children[s],d=Hu(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,lt.U)(p=>({segment:p,outlet:s})))}),Tr((s,l)=>(s[l.outlet]=l.segment,s),{}),function MC(n,e){const t=arguments.length>=2;return i=>i.pipe(n?kn((r,s)=>n(r,s,i)):Sr.y,yh(1),t?xy(e):bn(()=>new ua))}())}expandSegment(e,t,i,r,s,l){return(0,fn.D)(i).pipe(rc(d=>this.expandSegmentAgainstRoute(e,t,i,d,r,s,l).pipe(mi(y=>{if(y instanceof Ro)return Ye(null);throw y}))),nl(d=>!!d),mi((d,p)=>{if(d instanceof ua||"EmptyError"===d.name)return zy(t,r,s)?Ye(new Rt([],{})):Ca(t);throw d}))}expandSegmentAgainstRoute(e,t,i,r,s,l,d){return $y(r,t,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l):Ca(t):Ca(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Gu(s):this.lineralizeSegments(i,s).pipe((0,Sn.z)(l=>{const d=new Rt(l,{});return this.expandSegment(e,d,t,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:w}=ml(t,r,s);if(!d)return Ca(t);const D=this.applyRedirectCommands(p,r.redirectTo,w);return r.redirectTo.startsWith("/")?Gu(D):this.lineralizeSegments(r,D).pipe((0,Sn.z)(S=>this.expandSegment(e,t,i,S.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ye(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,lt.U)(D=>(i._loadedConfig=D,new Rt(r,{})))):Ye(new Rt(r,{}));const{matched:l,consumedSegments:d,remainingSegments:p}=ml(t,i,r);return l?this.getChildConfig(e,i,r).pipe((0,Sn.z)(w=>{const D=w.module,S=w.routes,{segmentGroup:R,slicedSegments:P}=xo(t,d,p,S),H=new Rt(R.segments,R.children);if(0===P.length&&H.hasChildren())return this.expandChildren(D,S,H).pipe((0,lt.U)(xe=>new Rt(d,xe)));if(0===S.length&&0===P.length)return Ye(new Rt(d,{}));const Y=$t(i)===s;return this.expandSegment(D,H,S,P,Y?Pt:s,!0).pipe((0,lt.U)(Pe=>new Rt(d.concat(Pe.segments),Pe.children)))})):Ca(t)}getChildConfig(e,t,i){return t.children?Ye(new Bu(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ye(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,Sn.z)(r=>r?this.configLoader.load(e.injector,t).pipe((0,lt.U)(s=>(t._loadedConfig=s,s))):function Di(n){return Bs(Vs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Ye(new Bu([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?Ye(r.map(l=>{const d=e.get(l);let p;if(function Fh(n){return n&&zs(n.canLoad)}(d))p=d.canLoad(t,i);else{if(!zs(d))throw new Error("Invalid CanLoad guard");p=d(t,i)}return _i(p)})).pipe(Mo(),gi(l=>{if(!Ao(l))return;const d=Vs(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,lt.U)(l=>!0===l)):Ye(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ye(i);if(r.numberOfChildren>1||!r.children[Pt])return Bs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));r=r.children[Pt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Do(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Kn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=t[d]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let l={};return Kn(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,i,r)}),new Rt(s,l)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function _c(n){const e={};for(const i of Object.keys(n.children)){const s=_c(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function jm(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new Rt(n.segments.concat(e.segments),e.children)}return n}(new Rt(n.segments,e))}class Gh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yc{constructor(e,t){this.component=e,this.route=t}}function $h(n,e,t){const i=n._root;return ko(i,e?e._root:null,t,[i.value])}function Ii(n,e,t){const i=function vc(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function ko(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=js(e);return n.children.forEach(l=>{(function qy(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function zh(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ys(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ys(n.url,e.url)||!_s(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oh(n,e)||!_s(n.queryParams,e.queryParams);default:return!Oh(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new Gh(i)):(s.data=l.data,s._resolvedData=l._resolvedData),ko(n,e,s.component?d?d.children:null:t,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new yc(d.outlet.component,l))}else l&&qs(e,d,r),r.canActivateChecks.push(new Gh(i)),ko(n,null,s.component?d?d.children:null:t,i,r)})(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),Kn(s,(l,d)=>qs(l,t.getContext(d),r)),r}function qs(n,e,t){const i=js(n),r=n.value;Kn(i,(s,l)=>{qs(s,r.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new yc(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class qh{}function Li(n){return new cn.y(e=>e.error(n))}class Zh{constructor(e,t,i,r,s,l){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=xo(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const i=new So([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Hs(i,t),s=new Rh(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=Ny(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const l=t.children[s],d=Hu(e,s),p=this.processSegmentGroup(d,l,s);if(null===p)return null;i.push(...p)}const r=Yh(i);return function Qy(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,i,r);if(null!==l)return l}return zy(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!$y(e,t,i,r))return null;let s,l=[],d=[];if("**"===e.path){const R=i.length>0?Mu(i).parameters:{};s=new So(i,R,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jy(e),$t(e),e.component,e,Ea(t),cr(t)+i.length,ev(e))}else{const R=ml(t,e,i);if(!R.matched)return null;l=R.consumedSegments,d=R.remainingSegments,s=new So(l,R.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jy(e),$t(e),e.component,e,Ea(t),cr(t)+l.length,ev(e))}const p=function Ws(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:w}=xo(t,l,d,p.filter(R=>void 0===R.redirectTo),this.relativeLinkResolution);if(0===w.length&&y.hasChildren()){const R=this.processChildren(p,y);return null===R?null:[new Hs(s,R)]}if(0===p.length&&0===w.length)return[new Hs(s,[])];const D=$t(e)===r,S=this.processSegment(p,y,w,D?Pt:r);return null===S?null:[new Hs(s,S)]}}function bc(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Yh(n){const e=[],t=new Set;for(const i of n){if(!bc(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Yh(i.children);e.push(new Hs(i.value,r))}return e.filter(i=>!t.has(i))}function Ea(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cr(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Jy(n){return n.data||{}}function ev(n){return n.resolve||{}}function g(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function T(n){return vn(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,lt.U)(()=>e)):Ye(e)})}class re extends class z{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Me=new u.OlP("ROUTES");class ze{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,lt.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=s.create(e);return new Bu(Dm(l.injector.get(Me,void 0,u.XFs.Self|u.XFs.Optional)).map(Hh),l)}),mi(s=>{throw t._loader$=void 0,s}));return t._loader$=new bm(r,()=>new Mt.x).pipe(fa()),t._loader$}loadModuleFactory(e){return _i(e()).pipe((0,Sn.z)(t=>t instanceof u.YKP?Ye(t):(0,fn.D)(this.compiler.compileModuleAsync(t))))}}class ct{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function wn(n){throw n}function ur(n,e,t){return e.parse("/")}function gl(n,e){return Ye(null)}const Wm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ai=(()=>{class n{constructor(t,i,r,s,l,d,p){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mt.x,this.errorHandler=wn,this.malformedUriErrorHandler=ur,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gl,afterPreactivation:gl},this.urlHandlingStrategy=new ct,this.routeReuseStrategy=new re,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(u.h0i),this.console=l.get(u.c2e);const D=l.get(u.R0b);this.isNgZoneEnabled=D instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function kC(){return new Do(new Rt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ze(l,d,S=>this.triggerEvent(new il(S)),S=>this.triggerEvent(new _a(S))),this.routerState=wa(this.currentUrlTree,this.rootComponentType),this.transitions=new Fi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(kn(r=>0!==r.id),(0,lt.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),vn(r=>{let s=!1,l=!1;return Ye(r).pipe(gi(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vn(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return qu(d.source)&&(this.browserUrlTree=d.extractedUrl),Ye(d).pipe(vn(D=>{const S=this.transitions.getValue();return i.next(new ma(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),S!==this.transitions.getValue()?ha.E:Promise.resolve(D)}),function $u(n,e,t,i){return vn(r=>function gc(n,e,t,i,r){return new jh(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,lt.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),gi(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function qm(n,e,t,i,r){return(0,Sn.z)(s=>function Wh(n,e,t,i,r="emptyOnly",s="legacy"){try{const l=new Zh(n,e,t,i,r,s).recognize();return null===l?Li(new qh):Ye(l)}catch(l){return Li(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,lt.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),gi(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const R=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(R,D)}this.browserUrlTree=D.urlAfterRedirects}const S=new ga(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(S)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:R,source:P,restoredState:H,extras:Y}=d,Ce=new ma(S,this.serializeUrl(R),P,H);i.next(Ce);const Pe=wa(R,this.rootComponentType).snapshot;return Ye(Object.assign(Object.assign({},d),{targetSnapshot:Pe,urlAfterRedirects:R,extras:Object.assign(Object.assign({},Y),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),ha.E}),T(d=>{const{targetSnapshot:p,id:y,extractedUrl:w,rawUrl:D,extras:{skipLocationChange:S,replaceUrl:R}}=d;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:w,rawUrlTree:D,skipLocationChange:!!S,replaceUrl:!!R})}),gi(d=>{const p=new xC(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,lt.U)(d=>Object.assign(Object.assign({},d),{guards:$h(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function Wy(n,e){return(0,Sn.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Ye(Object.assign(Object.assign({},t),{guardsResult:!0})):function $m(n,e,t,i){return(0,fn.D)(n).pipe((0,Sn.z)(r=>function Ky(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ye(s.map(d=>{const p=Ii(d,e,r);let y;if(function NC(n){return n&&zs(n.canDeactivate)}(p))y=_i(p.canDeactivate(n,e,t,i));else{if(!zs(p))throw new Error("Invalid CanDeactivate guard");y=_i(p(n,e,t,i))}return y.pipe(nl())})).pipe(Mo()):Ye(!0)}(r.component,r.route,t,e,i)),nl(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Sn.z)(d=>d&&function PC(n){return"boolean"==typeof n}(d)?function zu(n,e,t,i){return(0,fn.D)(e).pipe(rc(r=>ic(function zm(n,e){return null!==n&&e&&e(new sc(n)),Ye(!0)}(r.route.parent,i),function Oo(n,e){return null!==n&&e&&e(new oc(n)),Ye(!0)}(r.route,i),function Yy(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function Gm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>da(()=>Ye(l.guards.map(p=>{const y=Ii(p,l.node,t);let w;if(function pc(n){return n&&zs(n.canActivateChild)}(y))w=_i(y.canActivateChild(i,n));else{if(!zs(y))throw new Error("Invalid CanActivateChild guard");w=_i(y(i,n))}return w.pipe(nl())})).pipe(Mo())));return Ye(s).pipe(Mo())}(n,r.path,t),function Zy(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ye(!0);const r=i.map(s=>da(()=>{const l=Ii(s,e,t);let d;if(function Lh(n){return n&&zs(n.canActivate)}(l))d=_i(l.canActivate(e,n));else{if(!zs(l))throw new Error("Invalid CanActivate guard");d=_i(l(e,n))}return d.pipe(nl())}));return Ye(r).pipe(Mo())}(n,r.route,t))),nl(r=>!0!==r,!0))}(i,s,n,e):Ye(d)),(0,lt.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),gi(d=>{if(Ao(d.guardsResult)){const y=Vs(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const p=new bh(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),kn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),T(d=>{if(d.guards.canActivateChecks.length)return Ye(d).pipe(gi(p=>{const y=new Ar(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),vn(p=>{let y=!1;return Ye(p).pipe(function FC(n,e){return(0,Sn.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ye(t);let s=0;return(0,fn.D)(r).pipe(rc(l=>function v(n,e,t,i){return function m(n,e,t,i){const r=g(n);if(0===r.length)return Ye({});const s={};return(0,fn.D)(r).pipe((0,Sn.z)(l=>function C(n,e,t,i){const r=Ii(n,e,i);return _i(r.resolve?r.resolve(e,t):r(e,t))}(n[l],e,t,i).pipe(gi(d=>{s[l]=d}))),yh(1),(0,Sn.z)(()=>g(s).length===r.length?Ye(s):ha.E))}(n._resolve,n,e,i).pipe((0,lt.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Ny(n,t).resolve),null)))}(l.route,i,n,e)),gi(()=>s++),yh(1),(0,Sn.z)(l=>s===r.length?Ye(t):ha.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),gi({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),gi(p=>{const y=new Mr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),T(d=>{const{targetSnapshot:p,id:y,extractedUrl:w,rawUrl:D,extras:{skipLocationChange:S,replaceUrl:R}}=d;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:w,rawUrlTree:D,skipLocationChange:!!S,replaceUrl:!!R})}),(0,lt.U)(d=>{const p=function km(n,e,t){const i=uc(n,e._root,t?t._root:void 0);return new ku(i,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),gi(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,lt.U)(i=>(new To(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),gi({next(){s=!0},complete(){s=!0}}),wm(()=>{var d;s||l||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),mi(d=>{if(l=!0,function RC(n){return n&&n[rl]}(d)){const p=Ao(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new On(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(y),p?setTimeout(()=>{const w=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qu(r.source)};this.scheduleNavigation(w,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new vh(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(y){r.reject(y)}}return ha.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},l=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,i,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){pl(t),this.config=t.map(Hh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=i,y=r||this.routerState.root,w=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function $s(n,e,t,i,r){if(0===t.length)return dc(e.root,e.root,e.root,i,r);const s=function By(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ph(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Kn(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new Ph(t,e,i)}(t);if(s.toRoot())return dc(e.root,e.root,new Rt([],{}),i,r);const l=function Pm(n,e,t){if(n.isAbsolute)return new hc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new hc(s,s===e.root,0)}const i=qr(n.commands[0])?0:1;return function Nm(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new hc(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),d=l.processChildren?Nu(l.segmentGroup,l.index,s.commands):Lm(l.segmentGroup,l.index,s.commands);return dc(e.root,l.segmentGroup,d,i,r)}(y,this.currentUrlTree,t,D,null!=w?w:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ao(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Zm(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},Wm):!1===i?Object.assign({},wc):i,Ao(t))return va(this.currentUrlTree,t,r);const s=this.parseUrl(t);return va(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Su(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,l){var d,p;if(this.disposed)return Promise.resolve(!1);let y,w,D;l?(y=l.resolve,w=l.reject,D=l.promise):D=new Promise((P,H)=>{y=P,w=H});const S=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),R=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):R=0,this.setTransition({id:S,targetPageId:R,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(P=>Promise.reject(P))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new On(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function qu(n){return"imperative"!==n}let Po=(()=>{class n{constructor(t,i,r,s,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=l,this.commands=null,this.onChanges=new Mt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:No(this.skipLocationChange),replaceUrl:No(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:No(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai),u.Y36(hl),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&u.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),Wu=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new Mt.x,this.subscription=t.events.subscribe(s=>{s instanceof Su&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,l){if(0!==t||i||r||s||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:No(this.skipLocationChange),replaceUrl:No(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:No(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai),u.Y36(hl),u.Y36(ee))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&u.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&u.uIk("target",i.target)("href",i.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function No(n){return""===n||!!n}let Da=(()=>{class n{constructor(t,i,r,s,l,d){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=l,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof Su&&this.update()})}ngAfterContentInit(){Ye(this.links.changes,this.linksWithHrefs.changes,Ye(null)).pipe((0,nc.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const i=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,fn.D)(i).pipe((0,nc.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function Kh(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(Po,8),u.Y36(Wu,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,Po,5),u.Suo(r,Wu,5)),2&t){let s;u.iGM(s=u.CRH())&&(i.links=s),u.iGM(s=u.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[u.TTD]}),n})();class Cc{}class LC{preload(e,t){return Ye(null)}}let BC=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new ze(r,i,p=>t.triggerEvent(new il(p)),p=>t.triggerEvent(new _a(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(kn(t=>t instanceof Su),rc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;r.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return(0,fn.D)(r).pipe((0,nc.J)(),(0,lt.U)(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ye(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,Sn.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ai),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(Cc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ym=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ma?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Su&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new wh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Zr=new u.OlP("ROUTER_CONFIGURATION"),tv=new u.OlP("ROUTER_FORROOT_GUARD"),VC=[ae,{provide:ol,useClass:Ru},{provide:ai,useFactory:function iv(n,e,t,i,r,s,l={},d,p){const y=new ai(null,n,e,t,i,r,Dm(s));return d&&(y.urlHandlingStrategy=d),p&&(y.routeReuseStrategy=p),function jC(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,y),l.enableTracing&&y.events.subscribe(w=>{var D,S;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${w.constructor.name}`),console.log(w.toString()),console.log(w),null===(S=console.groupEnd)||void 0===S||S.call(console)}),y},deps:[ol,mc,ae,u.zs3,u.Sil,Me,Zr,[class ft{},new u.FiY],[class k{},new u.FiY]]},mc,{provide:hl,useFactory:function Km(n){return n.routerState.root},deps:[ai]},BC,LC,class Qh{preload(e,t){return t().pipe(mi(()=>Ye(null)))}},{provide:Zr,useValue:{enableTracing:!1}}];function qA(){return new u.PXZ("Router",ai)}let Xh=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[VC,nv(t),{provide:tv,useFactory:HC,deps:[[ai,new u.FiY,new u.tp0]]},{provide:Zr,useValue:i||{}},{provide:ee,useFactory:UC,deps:[_e,[new u.tBr(We),new u.FiY],Zr]},{provide:Ym,useFactory:WA,deps:[ai,rh,Zr]},{provide:Cc,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:LC},{provide:u.PXZ,multi:!0,useFactory:qA},[Zu,{provide:u.ip1,multi:!0,useFactory:GC,deps:[Zu]},{provide:sv,useFactory:rv,deps:[Zu]},{provide:u.tb,multi:!0,useExisting:sv}]]}}static forChild(t){return{ngModule:n,providers:[nv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(tv,8),u.LFG(ai,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function WA(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ym(n,e,t)}function UC(n,e,t={}){return t.useHash?new Ie(n,e):new et(n,e)}function HC(n){return"guarded"}function nv(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Me,multi:!0,useValue:n}]}let Zu=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mt.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(ai),l=this.injector.get(Zr);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ye(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Zr),r=this.injector.get(BC),s=this.injector.get(Ym),l=this.injector.get(ai),d=this.injector.get(u.z2F);t===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&l.initialNavigation(),r.setUpPreloading(),s.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function GC(n){return n.appInitializer.bind(n)}function rv(n){return n.bootstrapListener.bind(n)}const sv=new u.OlP("Router Initializer");function $C(...n){const e=(0,el.jO)(n),{args:t,keys:i}=_n(n),r=new cn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let p=l,y=l;for(let w=0;w<l;w++){let D=!1;(0,$r.Xf)(t[w]).subscribe((0,sn.x)(s,S=>{D||(D=!0,y--),d[w]=S},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(i?mh(i,d):d),s.complete())}))}});return e?r.pipe(ph(e)):r}let av=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Ec=(()=>{class n extends av{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Fo=new u.OlP("NgValueAccessor"),qC={provide:Fo,useExisting:(0,u.Gpc)(()=>Yu),multi:!0},WC=new u.OlP("CompositionEventMode");let Yu=(()=>{class n extends av{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function oB(){const n=B()?B().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(WC,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[u._Bn([qC]),u.qOj]}),n})();function Ia(n){return null==n||0===n.length}function ZC(n){return null!=n&&"number"==typeof n.length}const qi=new u.OlP("NgValidators"),Si=new u.OlP("NgAsyncValidators"),ZA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Jm{static min(e){return function YC(n){return e=>{if(Ia(e.value)||Ia(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function KC(n){return e=>{if(Ia(e.value)||Ia(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return QC(e)}static requiredTrue(e){return function XC(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return lv(e)}static minLength(e){return JC(e)}static maxLength(e){return function eE(n){return e=>ZC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function tE(n){if(!n)return Et;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Ia(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return nE(e)}static composeAsync(e){return Lo(e)}}function QC(n){return Ia(n.value)?{required:!0}:null}function lv(n){return Ia(n.value)||ZA.test(n.value)?null:{email:!0}}function JC(n){return e=>Ia(e.value)||!ZC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function Et(n){return null}function cv(n){return null!=n}function uv(n){const e=(0,u.QGY)(n)?(0,fn.D)(n):n;return(0,u.CqO)(e),e}function dv(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Jh(n,e){return e.map(t=>t(n))}function hv(n){return n.map(e=>function Zs(n){return!n.validate}(e)?e:t=>e.validate(t))}function nE(n){if(!n)return null;const e=n.filter(cv);return 0==e.length?null:function(t){return dv(Jh(t,e))}}function ef(n){return null!=n?nE(hv(n)):null}function Lo(n){if(!n)return null;const e=n.filter(cv);return 0==e.length?null:function(t){return $C(Jh(t,e).map(uv)).pipe((0,lt.U)(dv))}}function tf(n){return null!=n?Lo(hv(n)):null}function fv(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eg(n){return n._rawValidators}function YA(n){return n._rawAsyncValidators}function tg(n){return n?Array.isArray(n)?n:[n]:[]}function pv(n,e){return Array.isArray(n)?n.includes(e):n===e}function nf(n,e){const t=tg(e);return tg(n).forEach(r=>{pv(t,r)||t.push(r)}),t}function rf(n,e){return tg(e).filter(t=>!pv(n,t))}class ng{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ef(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ys extends ng{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bi extends ng{get formDirective(){return null}get path(){return null}}class KA{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let ig=(()=>{class n extends KA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ys,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[u.qOj]}),n})(),rg=(()=>{class n extends KA{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Bi,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[u.qOj]}),n})();function og(n,e){ag(n,e),e.valueAccessor.writeValue(n.value),function oE(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aE(n,e)})}(n,e),function _l(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function _v(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function eM(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ks(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Qu(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ku(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ag(n,e){const t=eg(n);null!==e.validator?n.setValidators(fv(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=YA(n);null!==e.asyncValidator?n.setAsyncValidators(fv(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ku(e._rawValidators,r),Ku(e._rawAsyncValidators,r)}function Qu(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=eg(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=YA(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Ku(e._rawValidators,i),Ku(e._rawAsyncValidators,i),t}function aE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yv(n,e){ag(n,e)}function bv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Dc(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function af(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Yu?t=s:function sf(n){return Object.getPrototypeOf(n.constructor)===Ec}(s)?i=s:r=s}),r||i||t||null}function yl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const lf="VALID",cf="INVALID",Ic="PENDING",Sc="DISABLED";function cg(n){return(Dv(n)?n.validators:n)||null}function uf(n){return Array.isArray(n)?ef(n):n||null}function Cv(n,e){return(Dv(e)?e.asyncValidators:n)||null}function Ev(n){return Array.isArray(n)?tf(n):n||null}function Dv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Iv=n=>n instanceof Tv,ug=n=>n instanceof Av;function Sv(n){return Iv(n)?n.value:n.getRawValue()}function cE(n,e){const t=ug(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[e])throw new u.vHH(1001,"")}function uE(n,e){ug(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new u.vHH(1002,"")})}class dr{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uf(this._rawValidators),this._composedAsyncValidatorFn=Ev(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lf}get invalid(){return this.status===cf}get pending(){return this.status==Ic}get disabled(){return this.status===Sc}get enabled(){return this.status!==Sc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uf(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ev(e)}addValidators(e){this.setValidators(nf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rf(e,this._rawAsyncValidators))}hasValidator(e){return pv(this._rawValidators,e)}hasAsyncValidator(e){return pv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ic,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sc,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lf,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lf||this.status===Ic)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sc:lf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ic,this._hasOwnPendingAsyncValidator=!0;const t=uv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function wv(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=ug(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof mB)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Sc:this.errors?cf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ic)?Ic:this._anyControlsHaveStatus(cf)?cf:lf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Tv extends dr{constructor(e=null,t,i){super(cg(t),Cv(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dv(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yl(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yl(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Av extends dr{constructor(e,t,i){super(cg(t),Cv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){uE(this,e),Object.keys(e).forEach(i=>{cE(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=Sv(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class mB extends dr{constructor(e,t,i){super(cg(t),Cv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){uE(this,e),e.forEach((i,r)=>{cE(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Sv(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const gB={provide:Bi,useExisting:(0,u.Gpc)(()=>Ju)},Xu=(()=>Promise.resolve(null))();let Ju=(()=>{class n extends Bi{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Av({},ef(t),tf(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Xu.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),og(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Xu.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Xu.then(()=>{const i=this._findContainer(t.path),r=new Av({});yv(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Xu.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Xu.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Dc(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qi,10),u.Y36(Si,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([gB]),u.qOj]}),n})();const oM={provide:Ys,useExisting:(0,u.Gpc)(()=>df)},xv=(()=>Promise.resolve(null))();let df=(()=>{class n extends Ys{constructor(t,i,r,s,l){super(),this._changeDetectorRef=l,this.control=new Tv,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=af(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){og(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xv.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;xv.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function gv(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Bi,9),u.Y36(qi,10),u.Y36(Si,10),u.Y36(Fo,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([oM]),u.qOj,u.TTD]}),n})(),dg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),hg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Ov=new u.OlP("NgModelWithFormControlWarning"),cM={provide:Ys,useExisting:(0,u.Gpc)(()=>Pv)};let Pv=(()=>{class n extends Ys{constructor(t,i,r,s){super(),this._ngModelWarningConfig=s,this.update=new u.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=af(0,r)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const i=t.form.previousValue;i&&Ks(i,this,!1),og(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}bv(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ks(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(qi,10),u.Y36(Si,10),u.Y36(Fo,10),u.Y36(Ov,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[u._Bn([cM]),u.qOj,u.TTD]}),n})();const Nv={provide:Bi,useExisting:(0,u.Gpc)(()=>fg)};let fg=(()=>{class n extends Bi{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return og(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ks(t.control||null,t,!1),yl(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Dc(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Ks(i||null,t),Iv(r)&&(og(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);yv(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function tM(n,e){return Qu(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ag(this.form,this),this._oldForm&&Qu(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qi,10),u.Y36(Si,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Nv]),u.qOj,u.TTD]}),n})();let td=(()=>{class n{constructor(){this._validator=Et}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Et,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const mM={provide:qi,useExisting:(0,u.Gpc)(()=>Tc),multi:!0};let Tc=(()=>{class n extends td{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function pM(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>QC}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&u.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([mM]),u.qOj]}),n})();const bE={provide:qi,useExisting:(0,u.Gpc)(()=>gg),multi:!0};let gg=(()=>{class n extends td{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=t=>""===t||!0===t||"true"===t,this.createValidator=t=>lv}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[u._Bn([bE]),u.qOj]}),n})();const Wv={provide:qi,useExisting:(0,u.Gpc)(()=>_g),multi:!0};let _g=(()=>{class n extends td{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function hf(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>JC(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&u.uIk("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[u._Bn([Wv]),u.qOj]}),n})(),wE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[hg]]}),n})(),yg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[wE]}),n})(),_M=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ov,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[wE]}),n})();const EE=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function DE(){return(0,u.f3M)(le)}}),IE=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let vg,rd=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function SE(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?IE.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(EE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();try{vg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){vg=!1}let sd,xr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function ar(n){return n===_o}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!vg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AE=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function vM(){if(sd)return sd;if("object"!=typeof document||!document)return sd=new Set(AE),sd;let n=document.createElement("input");return sd=new Set(AE.filter(e=>(n.setAttribute("type",e),n.type===e))),sd}let bg,bl,ME;function mf(n){return function Kv(){if(null==bg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bg=!0}))}finally{bg=bg||!1}return bg}()?n:!!n.capture}function DB(){if(null==bl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return bl=!1,bl;if("scrollBehavior"in document.documentElement.style)bl=!0;else{const n=Element.prototype.scrollTo;bl=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return bl}function wg(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function wl(n){return n.composedPath?n.composedPath()[0]:n.target}function Qv(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Ig(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class ZE extends si.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Af={setInterval(n,e,...t){const{delegate:i}=Af;return(null==i?void 0:i.setInterval)?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Af;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};var YE=F(8737);class Mf extends ZE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Af.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Af.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,YE.P)(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Sg={now:()=>(Sg.delegate||Date).now(),delegate:void 0};class cd{constructor(e,t=cd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}cd.now=Sg.now;class lb extends cd{constructor(e,t=cd.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const Ac=new lb(Mf),tx=Ac;function Tg(n,e=Ac){return(0,Rn.e)((t,i)=>{let r=null,s=null,l=null;const d=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function p(){const y=l+n,w=e.now();if(w<y)return r=this.schedule(void 0,y-w),void i.add(r);d()}t.subscribe((0,sn.x)(i,y=>{s=y,l=e.now(),r||(r=e.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function Qn(n,e=Sr.y){return n=null!=n?n:KE,(0,Rn.e)((t,i)=>{let r,s=!0;t.subscribe((0,sn.x)(i,l=>{const d=e(l);(s||!n(r,d))&&(s=!1,r=d,i.next(l))}))})}function KE(n,e){return n===e}var cb=F(5032);function Yr(n){return(0,Rn.e)((e,t)=>{(0,$r.Xf)(n).subscribe((0,sn.x)(t,()=>t.complete(),cb.Z)),!t.closed&&e.subscribe(t)})}function fr(n){return null!=n&&"false"!=`${n}`}function ub(n){return Array.isArray(n)?n:[n]}function Tn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Aa(n){return n instanceof u.SBq?n.nativeElement:n}class JE extends class Xs{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Mt.x,this._typeaheadSubscription=si.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Mt.x,this.change=new Mt.x,e instanceof u.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(gi(t=>this._pressedLetters.push(t)),Tg(e),kn(()=>this._pressedLetters.length>0),(0,lt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,l=i[s];if(!this._skipPredicateFn(l)&&0===l.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Ig(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let eD=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function cx(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function lx(n){try{return n.frameElement}catch(e){return null}}(function nD(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===mb(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=mb(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Ag(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function hx(n){return!function xf(n){return function tD(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function fb(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function ux(n){return function dx(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||pb(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pb(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function mb(n){if(!pb(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class iD{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Yn(1)).subscribe(e)}}let gb=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new iD(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(eD),u.LFG(u.R0b),u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mg(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function xg(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const rD=new u.OlP("cdk-input-modality-detector-options"),yx={ignoreKeys:[18,17,224,91,16]},ud=mf({passive:!0,capture:!0});let vx=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Fi(null),this._lastTouchMs=0,this._onKeydown=l=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(y=>y===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=wl(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Mg(l)?"keyboard":"mouse"),this._mostRecentTarget=wl(l))},this._onTouchstart=l=>{xg(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=wl(l))},this._options=Object.assign(Object.assign({},yx),s),this.modalityDetected=this._modality.pipe(function nx(n){return kn((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(Qn()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,ud),r.addEventListener("mousedown",this._onMousedown,ud),r.addEventListener("touchstart",this._onTouchstart,ud)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ud),document.removeEventListener("mousedown",this._onMousedown,ud),document.removeEventListener("touchstart",this._onTouchstart,ud))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr),u.LFG(u.R0b),u.LFG(le),u.LFG(rD,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wx=new u.OlP("cdk-focus-monitor-default-options"),Rg=mf({passive:!0,capture:!0});let kg=(()=>{class n{constructor(t,i,r,s,l){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Mt.x,this._rootNodeFocusAndBlurListener=d=>{const p=wl(d),y="focus"===d.type?this._onFocus:this._onBlur;for(let w=p;w;w=w.parentElement)y.call(this,d,w)},this._document=s,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(t,i=!1){const r=Aa(t);if(!this._platform.isBrowser||1!==r.nodeType)return Ye(null);const s=function xE(n){if(function IB(){if(null==ME){const n="undefined"!=typeof document?document.head:null;ME=!(!n||!n.createShadowRoot&&!n.attachShadow)}return ME}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const d={checkChildren:i,subject:new Mt.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const i=Aa(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Aa(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=wl(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Rg),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Rg)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Yr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Rg),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Rg),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(xr),u.LFG(vx),u.LFG(le,8),u.LFG(wx,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const oD="cdk-high-contrast-black-on-white",aD="cdk-high-contrast-white-on-black",yb="cdk-high-contrast-active";let Cx=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(yb),t.remove(oD),t.remove(aD),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(yb),t.add(oD)):2===i&&(t.add(yb),t.add(aD))}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr),u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class vb{}const Ho="*";function Cl(n,e){return{type:7,name:n,definitions:e,options:{}}}function Js(n,e=null){return{type:4,styles:e,timings:n}}function bb(n,e=null){return{type:3,steps:n,options:e}}function wb(n,e=null){return{type:2,steps:n,options:e}}function li(n){return{type:6,styles:n,offset:null}}function eo(n,e,t){return{type:0,name:n,styles:e,options:t}}function Kr(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Cb(n=null){return{type:9,options:n}}function El(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function Og(n){Promise.resolve(null).then(n)}class Pg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Og(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Eb{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?Og(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Wt=!1;function uD(n){return new u.vHH(3e3,Wt)}function Bx(){return"undefined"!=typeof window&&void 0!==window.document}function Ug(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dl(n){switch(n.length){case 0:return new Pg;case 1:return n[0];default:return new Eb(n)}}function wD(n,e,t,i,r={},s={}){const l=[],d=[];let p=-1,y=null;if(i.forEach(w=>{const D=w.offset,S=D==p,R=S&&y||{};Object.keys(w).forEach(P=>{let H=P,Y=w[P];if("offset"!==P)switch(H=e.normalizePropertyName(H,l),Y){case"!":Y=r[P];break;case Ho:Y=s[P];break;default:Y=e.normalizeStyleValue(P,H,Y,l)}R[H]=Y}),S||d.push(R),y=R,p=D}),l.length)throw function gD(n){return new u.vHH(3502,Wt)}();return d}function CD(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&ED(t,"start",n)));break;case"done":n.onDone(()=>i(t&&ED(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&ED(t,"destroy",n)))}}function ED(n,e,t){const i=t.totalTime,s=DD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function DD(n,e,t,i,r="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function bs(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function Db(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let hd=(n,e)=>!1,ID=(n,e,t)=>[],SD=null;function Hg(n){const e=n.parentNode||n.host;return e===SD?null:e}(Ug()||"undefined"!=typeof Element)&&(Bx()?(SD=(()=>document.documentElement)(),hd=(n,e)=>{for(;e;){if(e===n)return!0;e=Hg(e)}return!1}):hd=(n,e)=>n.contains(e),ID=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Mc=null,TD=!1;function AD(n){Mc||(Mc=function Ux(){return"undefined"!=typeof document?document.body:null}()||{},TD=!!Mc.style&&"WebkitAppearance"in Mc.style);let e=!0;return Mc.style&&!function Vx(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Mc.style,!e&&TD&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Mc.style)),e}const Ib=hd,MD=ID;let xc=(()=>{class n{validateStyleProperty(t){return AD(t)}matchesElement(t,i){return!1}containsElement(t,i){return Ib(t,i)}getParentElement(t){return Hg(t)}query(t,i,r){return MD(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,l,d=[],p){return new Pg(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Sb=(()=>{class n{}return n.NOOP=new xc,n})();const Tb="ng-enter",Pf="ng-leave",Gg="ng-trigger",fd=".ng-trigger",OD="ng-animating",$g=".ng-animating";function Il(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ab(parseFloat(e[1]),e[2])}function Ab(n,e){return"s"===e?1e3*n:n}function zg(n,e,t){return n.hasOwnProperty("duration")?n:function Hx(n,e,t){let r,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(uD()),{duration:0,delay:0,easing:""};r=Ab(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=Ab(parseFloat(p),d[4]));const y=d[5];y&&(l=y)}else r=n;if(!t){let d=!1,p=e.length;r<0&&(e.push(function Ex(){return new u.vHH(3100,Wt)}()),d=!0),s<0&&(e.push(function Dx(){return new u.vHH(3101,Wt)}()),d=!0),d&&e.splice(p,0,uD())}return{duration:r,delay:s,easing:l}}(n,e,t)}function Sl(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ra(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Sl(n,t);return t}function ND(n,e,t){return t?e+":"+t+";":""}function FD(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=ND(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ND(0,BD(t),n.style[t]));n.setAttribute("style",e)}function jo(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=xb(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),Ug()&&FD(n))}function Rc(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=xb(t);n.style[i]=""}),Ug()&&FD(n))}function Nf(n){return Array.isArray(n)?1==n.length?n[0]:wb(n):n}const Mb=new RegExp("{{\\s*(.+?)\\s*}}","g");function LD(n){let e=[];if("string"==typeof n){let t;for(;t=Mb.exec(n);)e.push(t[1]);Mb.lastIndex=0}return e}function Ff(n,e,t){const i=n.toString(),r=i.replace(Mb,(s,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(function Ix(n){return new u.vHH(3003,Wt)}()),d=""),d.toString()});return r==i?n:r}function Lf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Gx=/-+([a-z0-9])/g;function xb(n){return n.replace(Gx,(...e)=>e[1].toUpperCase())}function BD(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Qr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Lg(n){return new u.vHH(3004,Wt)}()}}function qg(n,e){return window.getComputedStyle(n)[e]}function Zx(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function UD(n,e,t){if(":"==n[0]){const p=function Yx(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function xx(n){return new u.vHH(3016,Wt)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Rf(n){return new u.vHH(3015,Wt)}()),e;const r=i[1],s=i[2],l=i[3];e.push(HD(r,l));"<"==s[0]&&!("*"==r&&"*"==l)&&e.push(HD(l,r))}(i,t,e)):t.push(n),t}const Uf=new Set(["true","1"]),kb=new Set(["false","0"]);function HD(n,e){const t=Uf.has(n)||kb.has(n),i=Uf.has(e)||kb.has(e);return(r,s)=>{let l="*"==n||n==r,d="*"==e||e==s;return!l&&t&&"boolean"==typeof r&&(l=r?Uf.has(n):kb.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?Uf.has(e):kb.has(e)),l&&d}}const Kx=new RegExp("s*:selfs*,?","g");function Tl(n,e,t,i){return new Qx(n).build(e,t,i)}class Qx{constructor(e){this._driver=e}build(e,t,i){const r=new Xx(t);this._resetContextStyleTimingState(r);const s=Qr(this,Nf(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function jn(){return new u.vHH(3006,Wt)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);i+=p.queryCount,r+=p.depCount,l.push(p)}else t.errors.push(function dV(){return new u.vHH(3007,Wt)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(d=>{if(Wg(d)){const p=d;Object.keys(p).forEach(y=>{LD(p[y]).forEach(w=>{l.hasOwnProperty(w)||s.add(w)})})}}),s.size&&(Lf(s.values()),t.errors.push(function dD(n,e){return new u.vHH(3008,Wt)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Qr(this,Nf(e.animation),t);return{type:1,matchers:Zx(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Al(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Qr(this,i,t)),options:Al(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(l=>{t.currentTime=i;const d=Qr(this,l,t);return r=Math.max(r,t.currentTime),d});return t.currentTime=r,{type:3,steps:s,options:Al(e.options)}}visitAnimate(e,t){const i=function eR(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Ob(zg(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Ob(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||zg(i,e),Ob(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:li({});if(5==s.type)r=this.visitKeyframes(s,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};i.easing&&(y.easing=i.easing),l=li(y)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(l,t);p.isEmptyStep=d,r=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==Ho?i.push(l):t.errors.push(function Sx(n){return new u.vHH(3002,Wt)}()):i.push(l)}):i.push(e.styles);let r=!1,s=null;return i.forEach(l=>{if(Wg(l)){const d=l,p=d.easing;if(p&&(s=p,delete d.easing),!r)for(let y in d)if(d[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void t.unsupportedCSSPropertiesFound.add(d);const p=t.collectedStyles[t.currentQuerySelector],y=p[d];let w=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(t.errors.push(function hD(n,e,t,i,r){return new u.vHH(3010,Wt)}()),w=!1),s=y.startTime),w&&(p[d]={startTime:s,endTime:r}),t.options&&function jx(n,e,t){const i=e.params||{},r=LD(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Fg(n){return new u.vHH(3001,Wt)}())})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function fD(){return new u.vHH(3011,Wt)}()),i;let s=0;const l=[];let d=!1,p=!1,y=0;const w=e.steps.map(Ce=>{const Pe=this._makeStyleAst(Ce,t);let xe=null!=Pe.offset?Pe.offset:function Jx(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Wg(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Wg(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Pe.styles),Re=0;return null!=xe&&(s++,Re=Pe.offset=xe),p=p||Re<0||Re>1,d=d||Re<y,y=Re,l.push(Re),Pe});p&&t.errors.push(function pD(){return new u.vHH(3012,Wt)}()),d&&t.errors.push(function mD(){return new u.vHH(3200,Wt)}());const D=e.steps.length;let S=0;s>0&&s<D?t.errors.push(function Tx(){return new u.vHH(3202,Wt)}()):0==s&&(S=1/(D-1));const R=D-1,P=t.currentTime,H=t.currentAnimateTimings,Y=H.duration;return w.forEach((Ce,Pe)=>{const xe=S>0?Pe==R?1:S*Pe:l[Pe],Re=xe*Y;t.currentTime=P+H.delay+Re,H.duration=Re,this._validateStyleAst(Ce,t),Ce.offset=xe,i.styles.push(Ce)}),i}visitReference(e,t){return{type:8,animation:Qr(this,Nf(e.animation),t),options:Al(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Al(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Al(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function mV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Kx,"")),n=n.replace(/@\*/g,fd).replace(/@\w+/g,t=>fd+"-"+t.substr(1)).replace(/:animating/g,$g),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,bs(t.collectedStyles,t.currentQuerySelector,{});const d=Qr(this,Nf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:Al(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Ax(){return new u.vHH(3013,Wt)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:zg(e.timings,t.errors,!0);return{type:12,animation:Qr(this,Nf(e.animation),t),timings:i,options:null}}}class Xx{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Wg(n){return!Array.isArray(n)&&"object"==typeof n}function Al(n){return n?(n=Sl(n)).params&&(n.params=function jD(n){return n?Sl(n):null}(n.params)):n={},n}function Ob(n,e,t){return{duration:n,delay:e,easing:t}}function jf(n,e,t,i,r,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:d}}class kc{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const GD=new RegExp(":enter","g"),nR=new RegExp(":leave","g");function Pb(n,e,t,i,r,s={},l={},d,p,y=[]){return(new Nb).buildKeyframes(n,e,t,i,r,s,l,d,p,y)}class Nb{buildKeyframes(e,t,i,r,s,l,d,p,y,w=[]){y=y||new kc;const D=new zD(e,t,y,r,s,w,[]);D.options=p,D.currentTimeline.setStyles([l],null,D.errors,p),Qr(this,i,D);const S=D.timelines.filter(R=>R.containsAnimation());if(Object.keys(d).length){let R;for(let P=S.length-1;P>=0;P--){const H=S[P];if(H.element===t){R=H;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([d],null,D.errors,p)}return S.length?S.map(R=>R.buildKeyframes()):[jf(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const l=null!=i.duration?Il(i.duration):null,d=null!=i.delay?Il(i.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Qr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Zg);const l=Il(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Qr(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Il(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),Qr(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return zg(t.params?Ff(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Il(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Zg);let l=i;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,w)=>{t.currentQueryIndex=w;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),Qr(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const w=t.currentTimeline;p&&w.delayNextStep(p);const D=w.currentTime;Qr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const Zg={};class zD{constructor(e,t,i,r,s,l,d,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Yg(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Il(i.duration)),null!=i.delay&&(r.delay=Il(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=Ff(s[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new zD(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Zg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new iR(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,l){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace(GD,"."+this._enterClassName)).replace(nR,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!s&&0==d.length&&l.push(function Mx(n){return new u.vHH(3014,Wt)}()),d}}class Yg{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Yg(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ho,this._currentKeyframe[t]=Ho}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},l=function qD(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Ho})):Ra(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const p=Ff(l[d],s,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Ho),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const y=Ra(d,!0);Object.keys(y).forEach(w=>{const D=y[w];"!"==D?e.add(w):D==Ho&&t.add(w)}),i||(y.offset=p/this.duration),r.push(y)});const s=e.size?Lf(e.values()):[],l=t.size?Lf(t.values()):[];if(i){const d=r[0],p=Sl(d);d.offset=0,p.offset=1,r=[d,p]}return jf(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class iR extends Yg{constructor(e,t,i,r,s,l,d=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=i+t,d=t/l,p=Ra(e[0],!1);p.offset=0,s.push(p);const y=Ra(e[0],!1);y.offset=Oc(d),s.push(y);const w=e.length-1;for(let D=1;D<=w;D++){let S=Ra(e[D],!1);S.offset=Oc((t+S.offset*i)/l),s.push(S)}i=l,t=0,r="",e=s}return jf(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function Oc(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class WD{}class sR extends WD{normalizePropertyName(e,t){return xb(e)}normalizeStyleValue(e,t,i,r){let s="";const l=i.toString().trim();if(gV[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function Bg(n,e){return new u.vHH(3005,Wt)}())}return l+s}}const gV=(()=>function ZD(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function oR(n,e,t,i,r,s,l,d,p,y,w,D,S){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:w,totalTime:D,errors:S}}const Kg={};class Qg{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function YD(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],l=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):l}build(e,t,i,r,s,l,d,p,y,w){const D=[],S=this.ast.options&&this.ast.options.params||Kg,P=this.buildStyles(i,d&&d.params||Kg,D),H=p&&p.params||Kg,Y=this.buildStyles(r,H,D),Ce=new Set,Pe=new Map,xe=new Map,Re="void"===r,Xe={params:Object.assign(Object.assign({},S),H)},rt=w?[]:Pb(e,t,this.ast.animation,s,l,P,Y,Xe,y,D);let jt=0;if(rt.forEach(lo=>{jt=Math.max(lo.duration+lo.delay,jt)}),D.length)return oR(t,this._triggerName,i,r,Re,P,Y,[],[],Pe,xe,jt,D);rt.forEach(lo=>{const ru=lo.element,QW=bs(Pe,ru,{});lo.preStyleProps.forEach(Xp=>QW[Xp]=!0);const hC=bs(xe,ru,{});lo.postStyleProps.forEach(Xp=>hC[Xp]=!0),ru!==t&&Ce.add(ru)});const wi=Lf(Ce.values());return oR(t,this._triggerName,i,r,Re,P,Y,rt,wi,Pe,xe,jt)}}class KD{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Sl(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!=l&&(r[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(d=>{let p=l[d];p.length>1&&(p=Ff(p,r,t));const y=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,y,p,t),i[y]=p})}}),i}}class lR{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new KD(r.style,r.options&&r.options.params||{},i)}),QD(this.states,"true","1"),QD(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Qg(e,r,this.states))}),this.fallbackTransition=function cR(n,e,t){return new Qg(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function QD(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const uR=new kc;class dR{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=Tl(this._driver,t,i,[]);if(i.length)throw function _D(n){return new u.vHH(3503,Wt)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=wD(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let l;const d=new Map;if(s?(l=Pb(this._driver,t,s,Tb,Pf,{},{},i,uR,r),l.forEach(w=>{const D=bs(d,w.element,{});w.postStyleProps.forEach(S=>D[S]=null)})):(r.push(function yD(){return new u.vHH(3300,Wt)}()),l=[]),r.length)throw function Ox(n){return new u.vHH(3504,Wt)}();d.forEach((w,D)=>{Object.keys(w).forEach(S=>{w[S]=this._driver.computeStyle(D,S,Ho)})});const y=Dl(l.map(w=>{const D=d.get(w.element);return this._buildPlayer(w,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function kf(n){return new u.vHH(3301,Wt)}();return t}listen(e,t,i,r){const s=DD(t,"","","");return CD(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const XD="ng-animate-queued",Pc="ng-animate-disabled",nI=[],Fb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fR={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ws="__ng_removed";class Lb{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Vb(n){return null!=n?n:null}(i?e.value:e),i){const s=Sl(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const zf="void",Bb=new Lb(zf);class pR{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Cs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function Of(n,e){return new u.vHH(3302,Wt)}();if(null==i||0==i.length)throw function Px(n){return new u.vHH(3303,Wt)}();if(!function _R(n){return"start"==n||"done"==n}(i))throw function Nx(n,e){return new u.vHH(3400,Wt)}();const s=bs(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};s.push(l);const d=bs(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Cs(e,Gg),Cs(e,Gg+"-"+t),d[t]=Bb),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Fx(n){return new u.vHH(3401,Wt)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),l=new Nc(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Cs(e,Gg),Cs(e,Gg+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const y=new Lb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d[t]=y,p||(p=Bb),y.value!==zf&&p.value===y.value){if(!function yR(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const H=[],Y=s.matchStyles(p.value,p.params,H),Ce=s.matchStyles(y.value,y.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{Rc(e,Y),jo(e,Ce)})}return}const S=bs(this._engine.playersByElement,e,[]);S.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let R=s.matchTransition(p.value,y.value,e,y.params),P=!1;if(!R){if(!r)return;R=s.fallbackTransition,P=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:R,fromState:p,toState:y,player:l,isFallbackTransition:P}),P||(Cs(e,XD),l.onStart(()=>{_d(e,XD)})),l.onDone(()=>{let H=this.players.indexOf(l);H>=0&&this.players.splice(H,1);const Y=this._engine.playersByElement.get(e);if(Y){let Ce=Y.indexOf(l);Ce>=0&&Y.splice(Ce,1)}}),this.players.push(l),S.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,fd,!0);i.forEach(r=>{if(r[ws])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(l.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,zf,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&Dl(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const p=this._triggers[l].fallbackTransition,y=i[l]||Bb,w=new Lb(zf),D=new Nc(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:w,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ws];(!s||s===Fb)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Cs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==i.triggerName){const p=DD(s,i.triggerName,i.fromState.value,i.toState.value);p._data=e,CD(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class mR{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new pR(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const p=r.get(d);if(p){const y=i.indexOf(p);i.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,t)){i.splice(d+1,0,e),l=!0;break}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const l=i[r[s]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,i,r){if(Xr(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Xr(t))return;const s=t[ws];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Cs(e,Pc)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),_d(e,Pc))}removeNode(e,t,i,r){if(Xr(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[ws]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Xr(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,fd,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,$g,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dl(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[ws];if(i&&i.setForRemoval){if(e[ws]=Fb,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(Pc))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Cs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Dl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function vD(n){return new u.vHH(3402,Wt)}()}_flushAnimations(e,t){const i=new kc,r=[],s=new Map,l=[],d=new Map,p=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(it=>{w.add(it);const mt=this.driver.query(it,".ng-animate-queued",!0);for(let Dt=0;Dt<mt.length;Dt++)w.add(mt[Dt])});const D=this.bodyNode,S=Array.from(this.statesByElement.keys()),R=iI(S,this.collectedEnterElements),P=new Map;let H=0;R.forEach((it,mt)=>{const Dt=Tb+H++;P.set(mt,Dt),it.forEach(rn=>Cs(rn,Dt))});const Y=[],Ce=new Set,Pe=new Set;for(let it=0;it<this.collectedLeaveElements.length;it++){const mt=this.collectedLeaveElements[it],Dt=mt[ws];Dt&&Dt.setForRemoval&&(Y.push(mt),Ce.add(mt),Dt.hasAnimation?this.driver.query(mt,".ng-star-inserted",!0).forEach(rn=>Ce.add(rn)):Pe.add(mt))}const xe=new Map,Re=iI(S,Array.from(Ce));Re.forEach((it,mt)=>{const Dt=Pf+H++;xe.set(mt,Dt),it.forEach(rn=>Cs(rn,Dt))}),e.push(()=>{R.forEach((it,mt)=>{const Dt=P.get(mt);it.forEach(rn=>_d(rn,Dt))}),Re.forEach((it,mt)=>{const Dt=xe.get(mt);it.forEach(rn=>_d(rn,Dt))}),Y.forEach(it=>{this.processLeaveNode(it)})});const Xe=[],rt=[];for(let it=this._namespaceList.length-1;it>=0;it--)this._namespaceList[it].drainQueuedTransitions(t).forEach(Dt=>{const rn=Dt.player,nr=Dt.element;if(Xe.push(rn),this.collectedEnterElements.length){const cs=nr[ws];if(cs&&cs.setForMove){if(cs.previousTriggersValues&&cs.previousTriggersValues.has(Dt.triggerName)){const Jp=cs.previousTriggersValues.get(Dt.triggerName),Qd=this.statesByElement.get(Dt.element);Qd&&Qd[Dt.triggerName]&&(Qd[Dt.triggerName].value=Jp)}return void rn.destroy()}}const $l=!D||!this.driver.containsElement(D,nr),co=xe.get(nr),Kd=P.get(nr),ei=this._buildInstruction(Dt,i,Kd,co,$l);if(ei.errors&&ei.errors.length)return void rt.push(ei);if($l)return rn.onStart(()=>Rc(nr,ei.fromStyles)),rn.onDestroy(()=>jo(nr,ei.toStyles)),void r.push(rn);if(Dt.isFallbackTransition)return rn.onStart(()=>Rc(nr,ei.fromStyles)),rn.onDestroy(()=>jo(nr,ei.toStyles)),void r.push(rn);const e6=[];ei.timelines.forEach(cs=>{cs.stretchStartingKeyframe=!0,this.disabledNodes.has(cs.element)||e6.push(cs)}),ei.timelines=e6,i.append(nr,ei.timelines),l.push({instruction:ei,player:rn,element:nr}),ei.queriedElements.forEach(cs=>bs(d,cs,[]).push(rn)),ei.preStyleProps.forEach((cs,Jp)=>{const Qd=Object.keys(cs);if(Qd.length){let em=p.get(Jp);em||p.set(Jp,em=new Set),Qd.forEach(sB=>em.add(sB))}}),ei.postStyleProps.forEach((cs,Jp)=>{const Qd=Object.keys(cs);let em=y.get(Jp);em||y.set(Jp,em=new Set),Qd.forEach(sB=>em.add(sB))})});if(rt.length){const it=[];rt.forEach(mt=>{it.push(function bD(n,e){return new u.vHH(3505,Wt)}())}),Xe.forEach(mt=>mt.destroy()),this.reportError(it)}const jt=new Map,wi=new Map;l.forEach(it=>{const mt=it.element;i.has(mt)&&(wi.set(mt,mt),this._beforeAnimationBuild(it.player.namespaceId,it.instruction,jt))}),r.forEach(it=>{const mt=it.element;this._getPreviousPlayers(mt,!1,it.namespaceId,it.triggerName,null).forEach(rn=>{bs(jt,mt,[]).push(rn),rn.destroy()})});const lo=Y.filter(it=>Ub(it,p,y)),ru=new Map;gd(ru,this.driver,Pe,y,Ho).forEach(it=>{Ub(it,p,y)&&lo.push(it)});const hC=new Map;R.forEach((it,mt)=>{gd(hC,this.driver,new Set(it),p,"!")}),lo.forEach(it=>{const mt=ru.get(it),Dt=hC.get(it);ru.set(it,Object.assign(Object.assign({},mt),Dt))});const Xp=[],XW=[],JW={};l.forEach(it=>{const{element:mt,player:Dt,instruction:rn}=it;if(i.has(mt)){if(w.has(mt))return Dt.onDestroy(()=>jo(mt,rn.toStyles)),Dt.disabled=!0,Dt.overrideTotalTime(rn.totalTime),void r.push(Dt);let nr=JW;if(wi.size>1){let co=mt;const Kd=[];for(;co=co.parentNode;){const ei=wi.get(co);if(ei){nr=ei;break}Kd.push(co)}Kd.forEach(ei=>wi.set(ei,nr))}const $l=this._buildAnimation(Dt.namespaceId,rn,jt,s,hC,ru);if(Dt.setRealPlayer($l),nr===JW)Xp.push(Dt);else{const co=this.playersByElement.get(nr);co&&co.length&&(Dt.parentPlayer=Dl(co)),r.push(Dt)}}else Rc(mt,rn.fromStyles),Dt.onDestroy(()=>jo(mt,rn.toStyles)),XW.push(Dt),w.has(mt)&&r.push(Dt)}),XW.forEach(it=>{const mt=s.get(it.element);if(mt&&mt.length){const Dt=Dl(mt);it.setRealPlayer(Dt)}}),r.forEach(it=>{it.parentPlayer?it.syncPlayerEvents(it.parentPlayer):it.destroy()});for(let it=0;it<Y.length;it++){const mt=Y[it],Dt=mt[ws];if(_d(mt,Pf),Dt&&Dt.hasAnimation)continue;let rn=[];if(d.size){let $l=d.get(mt);$l&&$l.length&&rn.push(...$l);let co=this.driver.query(mt,$g,!0);for(let Kd=0;Kd<co.length;Kd++){let ei=d.get(co[Kd]);ei&&ei.length&&rn.push(...ei)}}const nr=rn.filter($l=>!$l.destroyed);nr.length?Xg(this,mt,nr):this.processLeaveNode(mt)}return Y.length=0,Xp.forEach(it=>{this.players.push(it),it.onDone(()=>{it.destroy();const mt=this.players.indexOf(it);this.players.splice(mt,1)}),it.play()}),Xp}elementContainsData(e,t){let i=!1;const r=t[ws];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==zf;d.forEach(y=>{y.queued||!p&&y.triggerName!=r||l.push(y)})}}return(i||r)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(e,t,i){const s=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,w=y!==s,D=bs(i,y,[]);this._getPreviousPlayers(y,w,l,d,t.toState).forEach(R=>{const P=R.getRealPlayer();P.beforeDestroy&&P.beforeDestroy(),R.destroy(),D.push(R)})}Rc(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,l){const d=t.triggerName,p=t.element,y=[],w=new Set,D=new Set,S=t.timelines.map(P=>{const H=P.element;w.add(H);const Y=H[ws];if(Y&&Y.removedBeforeQueried)return new Pg(P.duration,P.delay);const Ce=H!==p,Pe=function Jg(n){const e=[];return rI(n,e),e}((i.get(H)||nI).map(jt=>jt.getRealPlayer())).filter(jt=>!!jt.element&&jt.element===H),xe=s.get(H),Re=l.get(H),Xe=wD(0,this._normalizer,0,P.keyframes,xe,Re),rt=this._buildPlayer(P,Xe,Pe);if(P.subTimeline&&r&&D.add(H),Ce){const jt=new Nc(e,d,H);jt.setRealPlayer(rt),y.push(jt)}return rt});y.forEach(P=>{bs(this.playersByQueriedElement,P.element,[]).push(P),P.onDone(()=>function gR(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,P.element,P))}),w.forEach(P=>Cs(P,OD));const R=Dl(S);return R.onDestroy(()=>{w.forEach(P=>_d(P,OD)),jo(p,t.toStyles)}),D.forEach(P=>{bs(r,P,[]).push(R)}),R}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Pg(e.duration,e.delay)}}class Nc{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Pg,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>CD(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){bs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Xr(n){return n&&1===n.nodeType}function qf(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function gd(n,e,t,i,r){const s=[];t.forEach(p=>s.push(qf(p)));const l=[];i.forEach((p,y)=>{const w={};p.forEach(D=>{const S=w[D]=e.computeStyle(y,D,r);(!S||0==S.length)&&(y[ws]=fR,l.push(y))}),n.set(y,w)});let d=0;return t.forEach(p=>qf(p,s[d++])),l}function iI(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=new Set(e),s=new Map;function l(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:r.has(y)?1:l(y),s.set(d,p),p}return e.forEach(d=>{const p=l(d);1!==p&&t.get(p).push(d)}),t}function Cs(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function _d(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Xg(n,e,t){Dl(t).onDone(()=>n.processLeaveNode(e))}function rI(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof Eb?rI(i.players,e):e.push(i)}}function Ub(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Wf{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new mR(e,t,i),this._timelineEngine=new dR(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const l=e+"-"+r;let d=this._triggerCache[l];if(!d){const p=[],w=Tl(this._driver,s,p,[]);if(p.length)throw function Vg(n,e){return new u.vHH(3404,Wt)}();d=function aR(n,e,t){return new lR(n,e,t)}(r,w,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,r,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,l]=Db(i);this._timelineEngine.command(s,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[l,d]=Db(i);return this._timelineEngine.listen(l,t,d,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let sI=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&jo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jo(this._element,this._initialStyles),this._endStyles&&(jo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Rc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rc(this._element,this._endStyles),this._endStyles=null),jo(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function jb(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];vR(r)&&(e=e||{},e[r]=n[r])}return e}function vR(n){return"display"===n||"position"===n}class bR{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:qg(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Gb{validateStyleProperty(e){return AD(e)}matchesElement(e,t){return!1}containsElement(e,t){return Ib(e,t)}getParentElement(e){return Hg(e)}query(e,t,i){return MD(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,l=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y={},w=l.filter(S=>S instanceof bR);(function $x(n,e){return 0===n||0===e})(i,r)&&w.forEach(S=>{let R=S.currentSnapshot;Object.keys(R).forEach(P=>y[P]=R[P])}),t=function zx(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],l=[];if(i.forEach(d=>{s.hasOwnProperty(d)||l.push(d),s[d]=t[d]}),l.length)for(var r=1;r<e.length;r++){let d=e[r];l.forEach(function(p){d[p]=qg(n,p)})}}return e}(e,t=t.map(S=>Ra(S,!1)),y);const D=function Hb(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=jb(e[0]),e.length>1&&(i=jb(e[e.length-1]))):e&&(t=jb(e)),t||i?new sI(n,t,i):null}(e,t);return new bR(e,t,p,D)}}let $b=(()=>{class n extends vb{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?wb(t):t;return e_(this._renderer,null,i,"register",[r]),new oI(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class oI extends class lD{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new zb(this._id,e,t||{},this._renderer)}}class zb{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return e_(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function e_(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const aI="@.disabled";let wR=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const d=null==l?void 0:l.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(s);return w||(w=new lI("",s,this.engine),this._rendererCache.set(s,w)),w}const l=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(l,d,t,w.name,w)};return i.data.animation.forEach(p),new cI(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(Wf),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class lI{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==aI?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class cI extends lI{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==aI?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function qb(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function uI(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(e,t,i)}}let dI=(()=>{class n extends Wf{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(Sb),u.LFG(WD))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Fc=new u.OlP("AnimationModuleType"),Wb=[{provide:vb,useClass:$b},{provide:WD,useFactory:function hI(){return new sR}},{provide:Wf,useClass:dI},{provide:u.FYo,useFactory:function fI(n,e,t){return new wR(n,e,t)},deps:[yn,Wf,u.R0b]}],Zb=[{provide:Sb,useFactory:()=>new Gb},{provide:Fc,useValue:"BrowserAnimations"},...Wb],CR=[{provide:Sb,useClass:xc},{provide:Fc,useValue:"NoopAnimations"},...Wb];let pI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?CR:Zb}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Zb,imports:[aa]}),n})();const gI=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function ER(){return!0}});let An=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!Qv()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cx),u.LFG(gI,8),u.LFG(le))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[pf],pf]}),n})();function Yb(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=fr(e)}}}function Lc(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function n_(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fr(e)}}}function yI(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Mt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let Kb=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wI{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const CI={enterDuration:225,exitDuration:150},r_=mf({passive:!0}),Qb=["mousedown","touchstart"],Xb=["mouseup","mouseleave","touchend","touchcancel"];class RR{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Aa(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},CI),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const l=i.radius||function TV(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),d=e-r.left,p=t-r.top,y=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=d-l+"px",w.style.top=p-l+"px",w.style.height=2*l+"px",w.style.width=2*l+"px",null!=i.color&&(w.style.backgroundColor=i.color),w.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(w),function kR(n){window.getComputedStyle(n).getPropertyValue("opacity")}(w),w.style.transform="scale(1)";const D=new wI(this,w,i);return D.state=0,this._activeRipples.add(D),i.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const S=D===this._mostRecentTransientRipple;D.state=1,!i.persistent&&(!S||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},CI),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Aa(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(Qb))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Xb),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=Mg(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!xg(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,r_)})})}_removeTriggerEvents(){this._triggerElement&&(Qb.forEach(e=>{this._triggerElement.removeEventListener(e,this,r_)}),this._pointerUpEventsRegistered&&Xb.forEach(e=>{this._triggerElement.removeEventListener(e,this,r_)}))}}const DI=new u.OlP("mat-ripple-global-options");let II=(()=>{class n{constructor(t,i,r,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new RR(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(xr),u.Y36(DI,8),u.Y36(Fc,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),SI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[An],An]}),n})(),AV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[An]]}),n})(),ew=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[SI,ia,An,AV]]}),n})();class tw{}class nw{}class ka{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ka?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ka;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ka?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class MI{encodeKey(e){return BR(e)}encodeValue(e){return BR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iw=/%(\d[a-f0-9])/gi,LR={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function BR(n){return encodeURIComponent(n).replace(iw,(e,t)=>{var i;return null!==(i=LR[t])&&void 0!==i?i:e})}function VR(n){return`${n}`}class Bc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new MI,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function FR(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],p=t.get(l)||[];p.push(d),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Bc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VR(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(VR(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class UR{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function jR(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function xI(n){return"undefined"!=typeof Blob&&n instanceof Blob}function s_(n){return"undefined"!=typeof FormData&&n instanceof FormData}class pr{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function HR(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ka),this.context||(this.context=new UR),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new Bc,this.urlWithParams=t}serializeBody(){return null===this.body?null:jR(this.body)||xI(this.body)||s_(this.body)||function GR(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||s_(this.body)?null:xI(this.body)?this.body.type||null:jR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,w=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((S,R)=>S.set(R,e.setHeaders[R]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((S,R)=>S.set(R,e.setParams[R]),w)),new pr(i,r,l,{params:w,headers:y,context:D,reportProgress:p,responseType:s,withCredentials:d})}}var ci=(()=>((ci=ci||{})[ci.Sent=0]="Sent",ci[ci.UploadProgress=1]="UploadProgress",ci[ci.ResponseHeader=2]="ResponseHeader",ci[ci.DownloadProgress=3]="DownloadProgress",ci[ci.Response=4]="Response",ci[ci.User=5]="User",ci))();class Kf{constructor(e,t=200,i="OK"){this.headers=e.headers||new ka,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class rw extends Kf{constructor(e={}){super(e),this.type=ci.ResponseHeader}clone(e={}){return new rw({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class o_ extends Kf{constructor(e={}){super(e),this.type=ci.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new o_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class a_ extends Kf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function l_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Qf=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof pr)s=t;else{let p,y;p=r.headers instanceof ka?r.headers:new ka(r.headers),r.params&&(y=r.params instanceof Bc?r.params:new Bc({fromObject:r.params})),s=new pr(t,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=Ye(s).pipe(rc(p=>this.handler.handle(p)));if(t instanceof pr||"events"===r.observe)return l;const d=l.pipe(kn(p=>p instanceof o_));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,lt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,lt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,lt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,lt.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Bc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,l_(r,i))}post(t,i,r={}){return this.request("POST",t,l_(r,i))}put(t,i,r={}){return this.request("PUT",t,l_(r,i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(tw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class RI{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const sw=new u.OlP("HTTP_INTERCEPTORS");let kI=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const zR=/^\)\]\}',?\n/;let ow=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new cn.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((R,P)=>r.setRequestHeader(R,P.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const R=t.detectContentTypeHeader();null!==R&&r.setRequestHeader("Content-Type",R)}if(t.responseType){const R=t.responseType.toLowerCase();r.responseType="json"!==R?R:"text"}const s=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const R=r.statusText||"OK",P=new ka(r.getAllResponseHeaders()),H=function qR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return l=new rw({headers:P,status:r.status,statusText:R,url:H}),l},p=()=>{let{headers:R,status:P,statusText:H,url:Y}=d(),Ce=null;204!==P&&(Ce=void 0===r.response?r.responseText:r.response),0===P&&(P=Ce?200:0);let Pe=P>=200&&P<300;if("json"===t.responseType&&"string"==typeof Ce){const xe=Ce;Ce=Ce.replace(zR,"");try{Ce=""!==Ce?JSON.parse(Ce):null}catch(Re){Ce=xe,Pe&&(Pe=!1,Ce={error:Re,text:Ce})}}Pe?(i.next(new o_({body:Ce,headers:R,status:P,statusText:H,url:Y||void 0})),i.complete()):i.error(new a_({error:Ce,headers:R,status:P,statusText:H,url:Y||void 0}))},y=R=>{const{url:P}=d(),H=new a_({error:R,status:r.status||0,statusText:r.statusText||"Unknown Error",url:P||void 0});i.error(H)};let w=!1;const D=R=>{w||(i.next(d()),w=!0);let P={type:ci.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(P.total=R.total),"text"===t.responseType&&!!r.responseText&&(P.partialText=r.responseText),i.next(P)},S=R=>{let P={type:ci.UploadProgress,loaded:R.loaded};R.lengthComputable&&(P.total=R.total),i.next(P)};return r.addEventListener("load",p),r.addEventListener("error",y),r.addEventListener("timeout",y),r.addEventListener("abort",y),t.reportProgress&&(r.addEventListener("progress",D),null!==s&&r.upload&&r.upload.addEventListener("progress",S)),r.send(s),i.next({type:ci.Sent}),()=>{r.removeEventListener("error",y),r.removeEventListener("abort",y),r.removeEventListener("load",p),r.removeEventListener("timeout",y),t.reportProgress&&(r.removeEventListener("progress",D),null!==s&&r.upload&&r.upload.removeEventListener("progress",S)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const aw=new u.OlP("XSRF_COOKIE_NAME"),PI=new u.OlP("XSRF_HEADER_NAME");class lw{}let NI=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ga(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(u.Lbi),u.LFG(aw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),cw=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lw),u.LFG(PI))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),WR=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(sw,[]);this.chain=i.reduceRight((r,s)=>new RI(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(nw),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),uw=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:cw,useClass:kI}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:aw,useValue:t.cookieName}:[],t.headerName?{provide:PI,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[cw,{provide:sw,useExisting:cw,multi:!0},{provide:lw,useClass:NI},{provide:aw,useValue:"XSRF-TOKEN"},{provide:PI,useValue:"X-XSRF-TOKEN"}]}),n})(),LI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Qf,{provide:tw,useClass:WR},ow,{provide:nw,useExisting:ow}],imports:[[uw.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();let Xf=(()=>{class n{constructor(t){this.http=t,this.apiUrl="http://localhost:3000"}getUsers(){return this.http.get(`${this.apiUrl}/login`)}userSignup(t){return console.log("servc"),this.http.post(`${this.apiUrl}/signup`,t)}userLogin(t){return this.http.post(`${this.apiUrl}/login`,t,this.requestOptions())}forgetPassword(t){return this.http.post(`${this.apiUrl}/forget-password`,t).pipe(mi(i=>this.catchAuthError(i)))}resetPassword(t,i){return this.http.patch(`${this.apiUrl}/reset-password/${i}`,t).pipe(mi(r=>this.catchAuthError(r)))}getUserData(t){return this.http.post(`${this.apiUrl}/getUser`,t,{responseType:"text"})}userLogOut(t,i){return this.http.patch(`${this.apiUrl}/logoutAll/${i}`,t,{responseType:"text"}).pipe(mi(r=>this.catchAuthError(r)))}generateURL(t){return this.http.post(`${this.apiUrl}/home/generate_URL`,t,{responseType:"text"})}getAllUrls(t){return this.http.post(`${this.apiUrl}/home/allUrls`,t,{responseType:"text"})}requestOptions(){let t;return t=new ka,t=t.append("Content-Type","Application/json"),t}catchAuthError(t){return t&&t.error&&t.error.message?alert(t.error.message):t&&t.message?alert(t.message):alert(JSON.stringify(t)),Bs(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qf))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jf=(()=>{class n{constructor(){this.isUserLoggedIn=new Fi(!1)}sendIsLoginValue(t){console.log(t),this.isUserLoggedIn=t}getIsLoginValue(){return this.isUserLoggedIn}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NV=["*",[["mat-toolbar-row"]]],FV=["*","mat-toolbar-row"],BI=Lc(class{constructor(n){this._elementRef=n}});let KR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),QR=(()=>{class n extends BI{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(xr),u.Y36(le))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&u.Suo(r,KR,5),2&t){let s;u.iGM(s=u.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&u.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:FV,decls:2,vars:0,template:function(t,i){1&t&&(u.F$t(NV),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),BV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[An],An]}),n})();const VV=["mat-button",""],UV=["*"],XR=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],c_=Lc(Yb(n_(class{constructor(n){this._elementRef=n}})));let u_=(()=>{class n extends c_{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of XR)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(kg),u.Y36(Fc,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&u.Gf(II,5),2&t){let r;u.iGM(r=u.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(u.uIk("disabled",i.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:VV,ngContentSelectors:UV,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1)(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),u.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[II],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),VI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[SI,An],An]}),n})();var kr=F(6451);let ep,UI=1;const vd={};function HI(n){return n in vd&&(delete vd[n],!0)}const hw={setImmediate(n){const e=UI++;return vd[e]=!0,ep||(ep=Promise.resolve()),ep.then(()=>HI(e)&&n()),e},clearImmediate(n){HI(n)}},{setImmediate:d_,clearImmediate:GV}=hw,fw={setImmediate(...n){const{delegate:e}=fw;return((null==e?void 0:e.setImmediate)||d_)(...n)},clearImmediate(n){const{delegate:e}=fw;return((null==e?void 0:e.clearImmediate)||GV)(n)},delegate:void 0},h_=new class zV extends lb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class $V extends Mf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=fw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(fw.clearImmediate(t),e._scheduled=void 0)}});function GI(n,e){return e?t=>ic(e.pipe(Yn(1),function JR(){return(0,Rn.e)((n,e)=>{n.subscribe((0,sn.x)(e,cb.Z))})}()),t.pipe(GI(n))):(0,Sn.z)((t,i)=>n(t,i).pipe(Yn(1),function ek(n){return(0,lt.U)(()=>n)}(t)))}var $I=F(3532);function pw(n=0,e,t=tx){let i=-1;return null!=e&&((0,$I.K)(e)?t=e:i=e),new cn.y(r=>{let s=function zI(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function qI(n,e=Ac){const t=pw(n,e);return GI(()=>t)}class mw{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class gw extends mw{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class YI extends mw{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class ZV extends mw{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class KI{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof gw?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof YI?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof ZV?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ik extends KI{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const d=l.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let rk=(()=>{class n extends KI{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const l=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(le))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),QI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var KV=F(1144);const QV=["addListener","removeListener"],XV=["addEventListener","removeEventListener"],o=["on","off"];function a(n,e,t,i){if((0,lr.m)(t)&&(i=t,t=void 0),i)return a(n,e,t).pipe(ph(i));const[r,s]=function _(n){return(0,lr.m)(n.addEventListener)&&(0,lr.m)(n.removeEventListener)}(n)?XV.map(l=>d=>n[l](e,d,t)):function h(n){return(0,lr.m)(n.addListener)&&(0,lr.m)(n.removeListener)}(n)?QV.map(c(n,e)):function f(n){return(0,lr.m)(n.on)&&(0,lr.m)(n.off)}(n)?o.map(c(n,e)):[];if(!r&&(0,KV.z)(n))return(0,Sn.z)(l=>a(l,e,t))((0,$r.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new cn.y(l=>{const d=(...p)=>l.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function c(n,e){return t=>i=>n[t](e,i)}const b={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=b;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new si.w0(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=b;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=b;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};new class I extends lb{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class E extends Mf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=b.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(b.cancelAnimationFrame(t),e._scheduled=void 0)}});function V(n,e=Ac){return function N(n){return(0,Rn.e)((e,t)=>{let i=!1,r=null,s=null,l=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,t.next(y)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe((0,sn.x)(t,y=>{i=!0,r=y,s||(0,$r.Xf)(n(y)).subscribe(s=(0,sn.x)(t,d,p))},()=>{l=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>pw(n,e))}let Vt=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Mt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new cn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(V(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ye()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(kn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Aa(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>a(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(xr),u.LFG(le,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oa=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Mt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(V(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr),u.LFG(u.R0b),u.LFG(le,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ml=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),tp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[pf,Ml],pf,Ml]}),n})();const f_=DB();class _w{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Tn(-this._previousScrollPosition.left),e.style.top=Tn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),f_&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),f_&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class F6{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class JV{enable(){}disable(){}attach(){}}function sk(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function e2(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class L6{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();sk(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let B6=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new JV,this.close=l=>new F6(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new _w(this._viewportRuler,this._document),this.reposition=l=>new L6(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Vt),u.LFG(Oa),u.LFG(u.R0b),u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ok{constructor(e){if(this.scrollStrategy=new JV,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class V6{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class U6{constructor(e,t,i,r,s,l,d,p,y){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new Mt.x,this._attachments=new Mt.x,this._detachments=new Mt.x,this._locationChanges=si.w0.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._backdropTransitionendHandler=w=>{this._disposeBackdrop(w.target)},this._keydownEvents=new Mt.x,this._outsidePointerEvents=new Mt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Yn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Tn(this._config.width),e.height=Tn(this._config.height),e.minWidth=Tn(this._config.minWidth),e.minHeight=Tn(this._config.minHeight),e.maxWidth=Tn(this._config.maxWidth),e.maxHeight=Tn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=ub(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Yr((0,kr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let ak=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Qv()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),Qv()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(xr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const t2="cdk-overlay-connected-position-bounding-box",H6=/([A-Za-z%]+)$/;class j6{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Mt.x,this._resizeSubscription=si.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(t2),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let d of this._preferredPositions){let p=this._getOriginPoint(e,r,d),y=this._getOverlayPoint(p,t,d),w=this._getOverlayFit(y,t,i,d);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(w,y,i)?s.push({position:d,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!l||l.overlayFit.visibleArea<w.visibleArea)&&(l={overlayFit:w,overlayPoint:y,originPoint:p,position:d,overlayRect:t})}if(s.length){let d=null,p=-1;for(const y of s){const w=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);w>p&&(p=w,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&np(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(t2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==i.originX?l:d}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=r2(t);let{x:l,y:d}=e,p=this._getOffset(r,"x"),y=this._getOffset(r,"y");p&&(l+=p),y&&(d+=y);let S=0-d,R=d+s.height-i.height,P=this._subtractOverflows(s.width,0-l,l+s.width-i.width),H=this._subtractOverflows(s.height,S,R),Y=P*H;return{visibleArea:Y,isCompletelyWithinViewport:s.width*s.height===Y,fitsInViewportVertically:H===s.height,fitsInViewportHorizontally:P==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,l=n2(this._overlayRef.getConfig().minHeight),d=n2(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=l&&l<=r)&&y}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=r2(t),s=this._viewportRect,l=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),p=Math.max(s.top-i.top-e.y,0),y=Math.max(s.left-i.left-e.x,0);let w=0,D=0;return w=r.width<=s.width?y||-l:e.x<this._viewportMargin?s.left-i.left-e.x:0,D=r.height<=s.height?p||-d:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:w,y:D},{x:e.x+w,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new V6(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,l,d,w,D,S;if("top"===t.overlayY)l=e.y,s=i.height-l+this._viewportMargin;else if("bottom"===t.overlayY)d=i.height-e.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const R=Math.min(i.bottom-e.y+i.top,e.y),P=this._lastBoundingBoxSize.height;s=2*R,l=e.y-R,s>P&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-P/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)S=i.width-e.x+this._viewportMargin,w=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)D=e.x,w=i.right-e.x;else{const R=Math.min(i.right-e.x+i.left,e.x),P=this._lastBoundingBoxSize.width;w=2*R,D=e.x-R,w>P&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-P/2)}return{top:l,left:D,bottom:d,right:S,width:w,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=Tn(i.height),r.top=Tn(i.top),r.bottom=Tn(i.bottom),r.width=Tn(i.width),r.left=Tn(i.left),r.right=Tn(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Tn(s)),l&&(r.maxWidth=Tn(l))}this._lastBoundingBoxSize=i,np(this._boundingBox.style,r)}_resetBoundingBoxStyles(){np(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){np(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const w=this._viewportRuler.getViewportScrollPosition();np(i,this._getExactOverlayY(t,e,w)),np(i,this._getExactOverlayX(t,e,w))}else i.position="static";let d="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(d+=`translateX(${p}px) `),y&&(d+=`translateY(${y}px)`),i.transform=d.trim(),l.maxHeight&&(r?i.maxHeight=Tn(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=Tn(l.maxWidth):s&&(i.maxWidth="")),np(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Tn(s.y),r}_getExactOverlayX(e,t,i){let l,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Tn(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:e2(e,i),isOriginOutsideView:sk(e,i),isOverlayClipped:e2(t,i),isOverlayOutsideView:sk(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ub(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function np(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function n2(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(H6);return t&&"px"!==t?null:parseFloat(e)}return n||null}function r2(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const s2="cdk-global-overlay-wrapper";class G6{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(s2),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(s2),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let $6=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new G6}flexibleConnectedTo(t){return new j6(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Oa),u.LFG(le),u.LFG(xr),u.LFG(ak))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),o2=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z6=(()=>{class n extends o2{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q6=(()=>{class n extends o2{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=wl(s)},this._clickListener=s=>{const l=wl(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const w=p[y];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(l)||w.overlayElement.contains(d))break;const D=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(xr),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W6=0,ip=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,S){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=p,this._document=y,this._directionality=w,this._location=D,this._outsideClickDispatcher=S}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new ok(t);return l.direction=l.direction||this._directionality.value,new U6(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+W6++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new ik(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(B6),u.LFG(ak),u.LFG(u._Vd),u.LFG($6),u.LFG(z6),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(le),u.LFG(rd),u.LFG(ae),u.LFG(q6))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const K6={provide:new u.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ip],useFactory:function Y6(n){return()=>n.scrollStrategies.reposition()}};let lk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ip,K6],imports:[[pf,QI,tp],tp]}),n})();const Q6=["mat-menu-item",""];function X6(n,e){1&n&&(u.O4$(),u.TgZ(0,"svg",2),u._UZ(1,"polygon",3),u.qZA())}const a2=["*"];function J6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",0),u.NdJ("keydown",function(r){return u.CHM(t),u.oxw()._handleKeydown(r)})("click",function(){return u.CHM(t),u.oxw().closed.emit("click")})("@transformMenu.start",function(r){return u.CHM(t),u.oxw()._onAnimationStart(r)})("@transformMenu.done",function(r){return u.CHM(t),u.oxw()._onAnimationDone(r)}),u.TgZ(1,"div",1),u.Hsn(2),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),u.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const iS={transformMenu:Cl("transformMenu",[eo("void",li({opacity:0,transform:"scale(0.8)"})),Kr("void => enter",Js("120ms cubic-bezier(0, 0, 0.2, 1)",li({opacity:1,transform:"scale(1)"}))),Kr("* => void",Js("100ms 25ms linear",li({opacity:0})))]),fadeInItems:Cl("fadeInItems",[eo("showing",li({opacity:1})),Kr("void => *",[li({opacity:0}),Js("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},e4=new u.OlP("MatMenuContent"),ck=new u.OlP("MAT_MENU_PANEL"),t4=n_(Yb(class{}));let rS=(()=>{class n extends t4{constructor(t,i,r,s,l){var d;super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=l,this.role="menuitem",this._hovered=new Mt.x,this._focused=new Mt.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(d=null==s?void 0:s.addItem)||void 0===d||d.call(s,this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const i=this._elementRef.nativeElement.cloneNode(!0),r=i.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++)r[s].remove();return(null===(t=i.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var i;this._highlighted=t,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(le),u.Y36(kg),u.Y36(ck,8),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,i){1&t&&u.NdJ("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(u.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),u.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[u.qOj],attrs:Q6,ngContentSelectors:a2,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(u.F$t(),u.Hsn(0),u._UZ(1,"div",0),u.YNc(2,X6,2,0,"svg",1)),2&t&&(u.xp6(1),u.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),u.xp6(1),u.Q6J("ngIf",i._triggersSubmenu))},directives:[II,Zn],encapsulation:2,changeDetection:0}),n})();const l2=new u.OlP("mat-menu-default-options",{providedIn:"root",factory:function n4(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let r4=0,yw=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new u.n_E,this._tabSubscription=si.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Mt.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new u.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+r4++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=fr(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=fr(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new JE(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(pi(this._directDescendantItems),vn(t=>(0,kr.T)(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var i;const r=this._keyManager;if("enter"===this._panelAnimationState&&(null===(i=r.activeItem)||void 0===i?void 0:i._hasFocus())){const s=t.toArray(),l=Math.max(0,Math.min(s.length-1,r.activeItemIndex||0));s[l]&&!s[l].disabled?r.setActiveItem(l):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(pi(this._directDescendantItems),vn(i=>(0,kr.T)(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:Ig(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(Yn(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(l=>l.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){var r;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===i,s["mat-menu-below"]="below"===i,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(pi(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(l2),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,e4,5),u.Suo(r,rS,5),u.Suo(r,rS,4)),2&t){let s;u.iGM(s=u.CRH())&&(i.lazyContent=s.first),u.iGM(s=u.CRH())&&(i._allItems=s),u.iGM(s=u.CRH())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&u.Gf(u.Rgc,5),2&t){let r;u.iGM(r=u.CRH())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),s4=(()=>{class n extends yw{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(l2),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&u.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[u._Bn([{provide:ck,useExisting:n}]),u.qOj],ngContentSelectors:a2,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,i){1&t&&(u.F$t(),u.YNc(0,J6,3,6,"ng-template"))},directives:[Os],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[iS.transformMenu,iS.fadeInItems]},changeDetection:0}),n})();const c2=new u.OlP("mat-menu-scroll-strategy"),a4={provide:c2,deps:[ip],useFactory:function o4(n){return()=>n.scrollStrategies.reposition()}},d2=mf({passive:!0});let l4=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=d,this._dir=p,this._focusMonitor=y,this._ngZone=w,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=si.w0.EMPTY,this._hoverSubscription=si.w0.EMPTY,this._menuCloseSubscription=si.w0.EMPTY,this._handleTouchStart=D=>{xg(D)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new u.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new u.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=l instanceof yw?l:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,d2),d&&(d._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,d2),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),i=t.getConfig(),r=i.positionStrategy;this._setPosition(r),i.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof yw&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Yr(this.menu.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof yw?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(kn(r=>"void"===r.toState),Yn(1),Yr(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i.lazyContent&&i.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,i=this.menu.parentMenu;for(;i;)t++,i=i.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new ok({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(i=>{const r="start"===i.connectionPair.overlayX?"after":"before",s="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(r,s)):this.menu.setPositionClasses(r,s)})}_setPosition(t){let[i,r]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,l]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[d,p]=[s,l],[y,w]=[i,r],D=0;this.triggersSubmenu()?(w=i="before"===this.menu.xPosition?"start":"end",r=y="end"===i?"start":"end",D="bottom"===s?8:-8):this.menu.overlapTrigger||(d="top"===s?"bottom":"top",p="top"===l?"bottom":"top"),t.withPositions([{originX:i,originY:d,overlayX:y,overlayY:s,offsetY:D},{originX:r,originY:d,overlayX:w,overlayY:s,offsetY:D},{originX:i,originY:p,overlayX:y,overlayY:l,offsetY:-D},{originX:r,originY:p,overlayX:w,overlayY:l,offsetY:-D}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:Ye(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(kn(l=>l!==this._menuItemInstance),kn(()=>this._menuOpen)):Ye();return(0,kr.T)(t,r,s,i)}_handleMousedown(t){Mg(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(kn(t=>t===this._menuItemInstance&&!t.disabled),qI(0,h_)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof yw&&this.menu._isAnimating?this.menu._animationDone.pipe(Yn(1),qI(0,h_),Yr(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new YI(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ip),u.Y36(u.SBq),u.Y36(u.s_b),u.Y36(c2),u.Y36(ck,8),u.Y36(rS,10),u.Y36(rd,8),u.Y36(kg),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,i){1&t&&u.NdJ("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&u.uIk("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),c4=(()=>{class n extends l4{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[u.qOj]}),n})(),u4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[a4],imports:[[ia,An,SI,lk],Ml,An]}),n})();var uk=F(3099);const d4=["*"];let sS;function vw(n){var e;return(null===(e=function h4(){if(void 0===sS&&(sS=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(sS=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return sS}())||void 0===e?void 0:e.createHTML(n))||n}function h2(n){return Error(`Unable to find icon with the name "${n}"`)}function f2(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function p2(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class rp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let oS=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new rp(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const l=this._sanitizer.sanitize(u.q3G.HTML,r);if(!l)throw p2(r);const d=vw(l);return this._addSvgIconConfig(t,i,new rp("",d,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new rp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(u.q3G.HTML,i);if(!s)throw p2(i);const l=vw(s);return this._addSvgIconSetConfig(t,new rp("",l,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!i)throw f2(t);const r=this._cachedIconsByUrl.get(i);return r?Ye(aS(r)):this._loadSvgIconFromConfig(new rp(t,null)).pipe(gi(s=>this._cachedIconsByUrl.set(i,s)),(0,lt.U)(s=>aS(s)))}getNamedSvgIcon(t,i=""){const r=m2(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(t,l):Bs(h2(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ye(aS(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,lt.U)(i=>aS(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Ye(r):$C(i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(mi(d=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(y)),Ye(null)})))).pipe((0,lt.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,i);if(!l)throw h2(t);return l}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(l,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(gi(i=>t.svgText=i),(0,lt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ye(null):this._fetchIcon(t).pipe(gi(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,r);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),r);const d=this._svgElementFromString(vw("<svg></svg>"));return d.appendChild(l),this._setSvgAttributes(d,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(vw("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:l,value:d}=r[s];"id"!==l&&i.setAttribute(l,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,l=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function f4(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,r);if(!d)throw f2(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const y=this._httpClient.get(d,{responseType:"text",withCredentials:l}).pipe((0,lt.U)(w=>vw(w)),wm(()=>this._inProgressUrlFetches.delete(d)),(0,uk.B)());return this._inProgressUrlFetches.set(d,y),y}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(m2(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return m4(s)?new rp(s.url,null,s.options):new rp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qf,8),u.LFG(ca),u.LFG(le,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aS(n){return n.cloneNode(!0)}function m2(n,e){return n+":"+e}function m4(n){return!(!n.url||!n.options)}const g4=Lc(class{constructor(n){this._elementRef=n}}),_4=new u.OlP("mat-icon-location",{providedIn:"root",factory:function y4(){const n=(0,u.f3M)(le),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),g2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],v4=g2.map(n=>`[${n}]`).join(", "),b4=/^url\(['"]?#(.*?)['"]?\)$/;let w4=(()=>{class n extends g4{constructor(t,i,r,s,l){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=l,this._inline=!1,this._currentIconFetch=si.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=fr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(v4),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)g2.forEach(l=>{const d=i[s],p=d.getAttribute(l),y=p?p.match(b4):null;if(y){let w=r.get(d);w||(w=[],r.set(d,w)),w.push({name:l,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Yn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(oS),u.$8M("aria-hidden"),u.Y36(_4),u.Y36(u.qLn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),u.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:d4,decls:1,vars:0,template:function(t,i){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),C4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[An],An]}),n})();function E4(n,e){1&n&&(u.TgZ(0,"mat-icon",14),u._uU(1,"more_vert"),u.qZA())}function D4(n,e){1&n&&(u.TgZ(0,"mat-icon",15),u._uU(1,"account_circle"),u.qZA())}function I4(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.firstName)}}const S4=function(){return["/login"]};function T4(n,e){1&n&&(u.TgZ(0,"button",16)(1,"mat-icon"),u._uU(2,"email"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Login"),u.qZA()()),2&n&&u.Q6J("routerLink",u.DdM(1,S4))}function A4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",function(){return u.CHM(t),u.oxw().loggedOut()}),u.TgZ(1,"mat-icon"),u._uU(2,"email"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Logout"),u.qZA()()}}const M4=function(n){return[n]};function x4(n,e){if(1&n&&(u.TgZ(0,"button",18)(1,"mat-icon"),u._uU(2,"edit"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Reset Password"),u.qZA()()),2&n){const t=u.oxw();u.Q6J("routerLink",u.VKq(1,M4,"/reset-password/"+t.id))}}const R4=function(){return["/"]};function k4(n,e){1&n&&(u.TgZ(0,"button",16)(1,"mat-icon"),u._uU(2,"cancel"),u.qZA(),u.TgZ(3,"span"),u._uU(4,"Cancel"),u.qZA()()),2&n&&u.Q6J("routerLink",u.DdM(1,R4))}let dk=(()=>{class n{constructor(t,i,r){this.router=t,this.http=i,this.sharedata=r,console.log(this.router.url),this.isLoginPge=Boolean("/login"==this.router.url),this.isResetPwdPge=Boolean(this.router.url.includes("reset-password/")),console.log(this.isLoginPge),this.isUser=Boolean(localStorage.getItem("user")),console.log(localStorage.getItem("user")),Boolean(localStorage.getItem("user"))&&this.http.getUserData({email:JSON.parse(localStorage.getItem("user")).email}).subscribe(s=>{this.id=JSON.parse(s)._id,this.firstName=JSON.parse(s).firstName,console.log(JSON.parse(s))})}ngOnInit(){this.router.events.subscribe(t=>{t.url&&(this.isUser=!!localStorage.getItem("user"))})}moveToHome(){this.router.navigate(["/"])}loggedOut(){this.email=JSON.parse(localStorage.getItem("user")).email,console.log(this.email),this.http.getUserData({email:this.email}).subscribe(t=>{console.log(JSON.parse(t)._id),this.http.userLogOut({email:this.email},JSON.parse(t)._id)}),localStorage.removeItem("user"),this.sharedata.sendIsLoginValue(!1),this.isUser=!1,this.router.navigate(["/login"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai),u.Y36(Xf),u.Y36(Jf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-header"]],inputs:{isLoggedIn:"isLoggedIn"},decls:20,vars:8,consts:[["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon"],["href","",2,"text-decoration","none",3,"click"],["routerLinkActive","active",2,"cursor","poineter","color","rgb(240, 87, 17)","font-weight","bolder","font-size","150%"],[1,"example-spacer"],["mat-icon-button","","mat-icon-button","","aria-label","Example icon-button with a menu",1,"menuForLogin",3,"matMenuTriggerFor"],["id","dropdownIcon",4,"ngIf"],[2,"display","flex","font-size","150%"],["id","dropdownIcon_login",4,"ngIf"],[4,"ngIf"],[1,"mat-menu"],["menu","matMenu"],["routerLinkActive","active","mat-menu-item","",3,"routerLink",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","routerLinkActive","active",3,"routerLink",4,"ngIf"],["id","dropdownIcon"],["id","dropdownIcon_login"],["routerLinkActive","active","mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-menu-item","","routerLinkActive","active",3,"routerLink"]],template:function(t,i){if(1&t&&(u.TgZ(0,"mat-toolbar"),u._UZ(1,"button",0),u.TgZ(2,"a",1),u.NdJ("click",function(){return i.moveToHome()}),u.TgZ(3,"span",2),u._uU(4,"URL Shortner"),u.qZA()(),u._UZ(5,"span",3),u.TgZ(6,"button",4),u.YNc(7,E4,2,0,"mat-icon",5),u.TgZ(8,"div",6),u.YNc(9,D4,2,0,"mat-icon",7),u.TgZ(10,"span"),u._uU(11,"\xa0\xa0\xa0\xa0"),u.qZA(),u.YNc(12,I4,2,1,"span",8),u.qZA()(),u.TgZ(13,"div",9)(14,"mat-menu",null,10),u.YNc(16,T4,5,2,"button",11),u.YNc(17,A4,5,0,"button",12),u.YNc(18,x4,5,3,"button",13),u.YNc(19,k4,5,2,"button",11),u.qZA()()()),2&t){const r=u.MAs(15);u.xp6(6),u.Q6J("matMenuTriggerFor",r),u.xp6(1),u.Q6J("ngIf",!i.isUser),u.xp6(2),u.Q6J("ngIf",i.isUser),u.xp6(3),u.Q6J("ngIf",i.isUser),u.xp6(4),u.Q6J("ngIf",!i.isUser&&!i.isLoginPge),u.xp6(1),u.Q6J("ngIf",i.isUser),u.xp6(1),u.Q6J("ngIf",i.isUser&&!i.isResetPwdPge),u.xp6(1),u.Q6J("ngIf",!i.isUser&&i.isLoginPge)}},directives:[QR,u_,Da,c4,Zn,w4,s4,rS,Po],styles:[".menuForLogin[_ngcontent-%COMP%]{margin-left:70%;border:none}#dropdownIcon[_ngcontent-%COMP%]{font-size:270%!important}#dropdownIcon_login[_ngcontent-%COMP%]{font-size:170%!important;margin-top:20%}.mat-menu[_ngcontent-%COMP%]{position:absolute;margin-left:500%}.mat-select-arrow[_ngcontent-%COMP%]{border:none}  .mat-select-arrow{display:none}"]}),n})();const O4=["*",[["mat-card-footer"]]],P4=["*","mat-card-footer"];let hk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),fk=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fc,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:P4,decls:2,vars:0,template:function(t,i){1&t&&(u.F$t(O4),u.Hsn(0),u.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),N4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[An],An]}),n})(),_2=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F4=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Aa(t);return new cn.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Mt.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_2))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L4=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=fr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function ix(n,e=0){return function QE(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Tg(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(F4),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),B4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[_2]}),n})();const V4=["connectionContainer"],U4=["inputContainer"],H4=["label"];function j4(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15)(3,"div",16)(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15)(7,"div",16)(8,"div",17),u.qZA(),u.BQk())}function G4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function $4(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function z4(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function q4(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function W4(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.YNc(2,$4,4,1,"ng-container",12),u.YNc(3,z4,1,0,"ng-content",12),u.YNc(4,q4,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function Z4(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function Y4(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function K4(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function Q4(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function X4(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,Q4,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const J4=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],eZ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let tZ=0;const y2=new u.OlP("MatError");let pk=(()=>{class n{constructor(t,i){this.id="mat-error-"+tZ++,t||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(u.$8M("aria-live"),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,i){2&t&&u.uIk("id",i.id)},inputs:{id:"id"},features:[u._Bn([{provide:y2,useExisting:n}])]}),n})();const nZ={transitionMessages:Cl("transitionMessages",[eo("enter",li({opacity:1,transform:"translateY(0%)"})),Kr("void => enter",[li({opacity:0,transform:"translateY(-5px)"}),Js("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const iZ=new u.OlP("MatHint");let bw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),rZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const sZ=new u.OlP("MatPrefix"),oZ=new u.OlP("MatSuffix");let v2=0;const lZ=Lc(class{constructor(n){this._elementRef=n}},"primary"),cZ=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),w2=new u.OlP("MatFormField");let gk=(()=>{class n extends lZ{constructor(t,i,r,s,l,d,p){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=l,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Mt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+v2++,this._labelId="mat-form-field-label-"+v2++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=fr(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(pi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Yr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Yr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,kr.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(pi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(pi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Yr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,a(this._label.nativeElement,"transitionend").pipe(Yn(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const w=i.querySelectorAll(`${r}, ${s}`);for(let D=0;D<w.length;D++)w[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,d=0;const p=i.querySelectorAll(r),y=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const w=i.getBoundingClientRect();if(0===w.width&&0===w.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(w),S=t.children,R=this._getStartEnd(S[0].getBoundingClientRect());let P=0;for(let H=0;H<S.length;H++)P+=S[H].offsetWidth;l=Math.abs(R-D)-5,d=P>0?.75*P+10:0}for(let w=0;w<p.length;w++)p[w].style.width=`${l}px`;for(let w=0;w<y.length;w++)y[w].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(rd,8),u.Y36(cZ,8),u.Y36(xr),u.Y36(u.R0b),u.Y36(Fc,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,mk,5),u.Suo(r,mk,7),u.Suo(r,bw,5),u.Suo(r,bw,7),u.Suo(r,rZ,5),u.Suo(r,y2,5),u.Suo(r,iZ,5),u.Suo(r,sZ,5),u.Suo(r,oZ,5)),2&t){let s;u.iGM(s=u.CRH())&&(i._controlNonStatic=s.first),u.iGM(s=u.CRH())&&(i._controlStatic=s.first),u.iGM(s=u.CRH())&&(i._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(i._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(i._placeholderChild=s.first),u.iGM(s=u.CRH())&&(i._errorChildren=s),u.iGM(s=u.CRH())&&(i._hintChildren=s),u.iGM(s=u.CRH())&&(i._prefixChildren=s),u.iGM(s=u.CRH())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(u.Gf(V4,7),u.Gf(U4,5),u.Gf(H4,5)),2&t){let r;u.iGM(r=u.CRH())&&(i._connectionContainerRef=r.first),u.iGM(r=u.CRH())&&(i._inputContainerRef=r.first),u.iGM(r=u.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:w2,useExisting:n}]),u.qOj],ngContentSelectors:eZ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(u.F$t(J4),u.TgZ(0,"div",0)(1,"div",1,2),u.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),u.YNc(3,j4,9,0,"ng-container",3),u.YNc(4,G4,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,W4,5,16,"label",8),u.qZA()(),u.YNc(10,Z4,2,0,"div",9),u.qZA(),u.YNc(11,Y4,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,K4,2,1,"div",12),u.YNc(14,X4,5,2,"div",13),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==i.appearance),u.xp6(1),u.Q6J("ngIf",i._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",i._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",i._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=i.appearance),u.xp6(1),u.Q6J("ngSwitch",i._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[Zn,L4,ki,Ir],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[nZ.transitionMessages]},changeDetection:0}),n})(),lS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ia,An,B4],An]}),n})();const C2=mf({passive:!0});let uZ=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return ha.E;const i=Aa(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Mt.x,l="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,C2),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,C2)}}),s}stopMonitoring(t){const i=Aa(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const dZ=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),hZ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let fZ=0;const pZ=yI(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let _k=(()=>{class n extends pZ{constructor(t,i,r,s,l,d,p,y,w,D){super(d,s,l,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+fZ++,this.focused=!1,this.stateChanges=new Mt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(P=>vM().has(P)),this._iOSKeyupListener=P=>{const H=P.target;!H.value&&0===H.selectionStart&&0===H.selectionEnd&&(H.setSelectionRange(1,1),H.setSelectionRange(0,0))};const S=this._elementRef.nativeElement,R=S.nodeName.toLowerCase();this._inputValueAccessor=p||S,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&w.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===R,this._isTextarea="textarea"===R,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=S.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=fr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(Jm.required))&&void 0!==s&&s}set required(t){this._required=fr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&vM().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=fr(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){hZ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(xr),u.Y36(Ys,10),u.Y36(Ju,8),u.Y36(fg,8),u.Y36(Kb),u.Y36(dZ,10),u.Y36(uZ),u.Y36(u.R0b),u.Y36(w2,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&u.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(u.Ikx("disabled",i.disabled)("required",i.required),u.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),u.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:mk,useExisting:n}]),u.qOj,u.TTD]}),n})(),mZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Kb],imports:[[E2,lS,An],E2,lS]}),n})();function gZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-card",2)(1,"mat-card-content",3)(2,"mat-label"),u._uU(3),u.qZA()(),u.TgZ(4,"button",4),u.NdJ("click",function(){return u.CHM(t),u.oxw().backToLogin()}),u._uU(5,"Close"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(3),u.Oqu(t.httpStatus)}}function _Z(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Please enter Valid Name "),u.qZA())}function yZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-form-field",10)(1,"mat-label",9),u._uU(2,"First Name"),u.qZA(),u.TgZ(3,"input",18,19),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw(3).firstName=r}),u.qZA(),u.YNc(5,_Z,2,0,"mat-error",12),u.qZA()}if(2&n){const t=u.MAs(4),i=u.oxw(3);u.xp6(3),u.ekj("is-invalid",t.invalid&&t.touched),u.Q6J("ngModel",i.firstName),u.xp6(2),u.Q6J("ngIf",t.valid||!t.untouched)}}function vZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-form-field",10)(1,"mat-label",9),u._uU(2,"Last Name"),u.qZA(),u.TgZ(3,"input",20),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw(3).lastName=r}),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(3),u.Q6J("ngModel",t.lastName)}}function bZ(n,e){if(1&n&&(u.TgZ(0,"div",17),u.YNc(1,yZ,6,4,"mat-form-field",14),u.YNc(2,vZ,4,1,"mat-form-field",14),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",!t.isForgetPassword),u.xp6(1),u.Q6J("ngIf",!t.isForgetPassword)}}function wZ(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Please enter a valid email address "),u.qZA())}function CZ(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Email is "),u.TgZ(2,"strong"),u._uU(3,"required"),u.qZA()())}function EZ(n,e){1&n&&(u.TgZ(0,"mat-label",9),u._uU(1,"Password"),u.qZA())}function DZ(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Password is Required "),u.qZA())}function IZ(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Length of Password should be more than 7 "),u.qZA())}function SZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-form-field",10)(1,"input",21,22),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw(2).password=r}),u.qZA(),u.YNc(3,DZ,2,0,"mat-error",12),u.YNc(4,IZ,2,0,"mat-error",12),u.qZA()}if(2&n){const t=u.MAs(2),i=u.oxw(2);u.xp6(1),u.ekj("is-invalid",t.invalid&&t.touched),u.Q6J("ngModel",i.password),u.xp6(2),u.Q6J("ngIf",t.touched&&!i.password),u.xp6(1),u.Q6J("ngIf",!t.valid&&i.password)}}function TZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-form-field",10)(1,"input",23),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw(2).ConfirmPassword=r}),u.qZA()()}if(2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngModel",t.ConfirmPassword)}}function AZ(n,e){1&n&&(u.TgZ(0,"h4",24),u._uU(1," Both Password Should be same"),u.qZA())}const MZ=function(){return["/login"]};function xZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"button",25),u._uU(2),u.qZA(),u.TgZ(3,"span"),u._uU(4,"\xa0\xa0\xa0"),u.qZA(),u.TgZ(5,"button",26),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).onSwitchMode()}),u._uU(6),u.qZA(),u.TgZ(7,"span"),u._uU(8,"\xa0\xa0\xa0"),u.qZA(),u.TgZ(9,"button",27),u._uU(10," Cancel"),u.qZA(),u.TgZ(11,"span",28),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).onForgetPassword()}),u._uU(12,"\xa0 \xa0 Forget Password:"),u.qZA()()}if(2&n){u.oxw();const t=u.MAs(2),i=u.oxw();u.xp6(1),u.Q6J("disabled",!t.valid&&i.password!=i.ConfirmPassword&&!i.isLoginMode&&!i.isForgetPassword),u.xp6(1),u.hij(" ",i.isLoginMode?"Login":"Sign Up",""),u.xp6(4),u.hij(" Switch To ",i.isLoginMode?"Sign Up":"Login",""),u.xp6(3),u.Q6J("routerLink",u.DdM(4,MZ))}}function RZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",26),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).forgetPassword()}),u._uU(1," send Link to Email "),u.qZA()}}function kZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",26),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).cancel()}),u._uU(1," cancel "),u.qZA()}}function OZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-card",5)(1,"form",6,7),u.NdJ("ngSubmit",function(){u.CHM(t);const r=u.MAs(2);return u.oxw().onSubmit(r)}),u.TgZ(3,"mat-card-content"),u.YNc(4,bZ,3,2,"div",8),u.TgZ(5,"mat-label",9),u._uU(6,"Email"),u.qZA(),u.TgZ(7,"mat-form-field",10)(8,"input",11),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw().email=r}),u.qZA(),u.YNc(9,wZ,2,0,"mat-error",12),u.YNc(10,CZ,4,0,"mat-error",12),u.qZA(),u.YNc(11,EZ,2,0,"mat-label",13),u.YNc(12,SZ,5,5,"mat-form-field",14),u.YNc(13,TZ,2,1,"mat-form-field",14),u.qZA(),u.YNc(14,AZ,2,0,"h4",15),u.YNc(15,xZ,13,5,"div",12),u.YNc(16,RZ,2,0,"button",16),u.TgZ(17,"span"),u._uU(18,"\xa0\xa0\xa0"),u.qZA(),u.YNc(19,kZ,2,0,"button",16),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(4),u.Q6J("ngIf",!t.isLoginMode),u.xp6(4),u.Q6J("ngModel",t.email)("formControl",t.emailFormControl)("errorStateMatcher",t.matcher),u.xp6(1),u.Q6J("ngIf",t.emailFormControl.hasError("email")&&!t.emailFormControl.hasError("required")),u.xp6(1),u.Q6J("ngIf",t.emailFormControl.hasError("required")),u.xp6(1),u.Q6J("ngIf",!t.isForgetPassword),u.xp6(1),u.Q6J("ngIf",!t.isForgetPassword),u.xp6(1),u.Q6J("ngIf",!t.isLoginMode&&!t.isForgetPassword),u.xp6(1),u.Q6J("ngIf",t.password!=t.ConfirmPassword&&!t.isLoginMode&&!t.isForgetPassword),u.xp6(1),u.Q6J("ngIf",!t.isForgetPassword),u.xp6(1),u.Q6J("ngIf",t.isForgetPassword),u.xp6(3),u.Q6J("ngIf",t.isForgetPassword)}}let PZ=(()=>{class n{constructor(t,i,r){this.router=t,this.appHttp=i,this.sharedata=r,this.emailFormControl=new Tv("",[Jm.required,Jm.email]),this.isBothPasswordSame=!1,this.matcher=new Kb,this.isLoginMode=!0,this.isLogin=!1,this.isForgetPassword=!1}ngOnInit(){console.log(Boolean(localStorage.getItem("user"))),Boolean(localStorage.getItem("user"))&&this.router.navigate(["/"])}backToLogin(){this.httpStatus=""}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(t){this.isLoginMode?this.appHttp.userLogin({email:this.email,password:this.password}).subscribe(i=>{this.httpStatus=i.result,200==i.status?(console.log("dfjbgdfj"),localStorage.setItem("user",JSON.stringify({email:this.email})),this.isLogin=!0,this.sharedata.sendIsLoginValue(this.isLogin),this.router.navigate(["/"])):400==i.status&&(this.httpStatus=i.result)}):this.appHttp.userSignup({email:this.email,password:this.password,confirmPassword:this.ConfirmPassword,firstName:this.firstName,lastName:this.lastName}).subscribe(i=>{this.httpStatus=i.result,201==i.status&&(localStorage.setItem("user",JSON.stringify({email:this.email,firstName:this.firstName,lastName:this.lastName})),this.isLogin=!0,this.sharedata.sendIsLoginValue(this.isLogin),this.router.navigate(["/"]))}),this.password==this.ConfirmPassword&&(this.isBothPasswordSame=!0)}onLogin(){console.log(this.isLoginMode),this.router.navigate(["/"]),this.isLogin=!0}onForgetPassword(){this.isForgetPassword=!0}forgetPassword(){this.appHttp.forgetPassword({email:this.email}).subscribe(t=>{this.httpStatus=t.result,console.log(t)})}cancel(){this.isForgetPassword=!1}updatePassword(){this.user_Id=this.user_Id.replace('"',""),this.user_Id=this.user_Id.replace('"',"")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai),u.Y36(Xf),u.Y36(Jf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:3,vars:2,consts:[["style","width:40%;height: 20%; margin-left: 25%;margin-top: 8%;",4,"ngIf"],["style"," padding-top:2%;padding-bottom: 2%;width:40%; margin-left: 25%;margin-top: 10%;",4,"ngIf"],[2,"width","40%","height","20%","margin-left","25%","margin-top","8%"],[2,"text-align","center","font-size","130%","margin-top","8%"],["mat-flat-button","","color","primary",2,"float","right","margin-top","2%",3,"click"],[2,"padding-top","2%","padding-bottom","2%","width","40%","margin-left","25%","margin-top","10%"],[2,"margin-top","5%",3,"ngSubmit"],["authForm","ngForm"],["style"," display: flex;",4,"ngIf"],["for","email",2,"font-weight","bold","font-size","15px"],[2,"margin-top","10px","width","100%"],["type","email","id","email","name","email","matInput","","placeholder","Ex. bala@example.com","ngModel","","required","","email","","matInput","","email","",1,"form-control",3,"ngModel","formControl","errorStateMatcher","ngModelChange"],[4,"ngIf"],["for","email","style","font-weight: bold;font-size: 15px;",4,"ngIf"],["style"," margin-top: 10px;\n            width: 100%;",4,"ngIf"],["style","color:red;",4,"ngIf"],["type","button","mat-stroked-button","","color","accent",3,"click",4,"ngIf"],[2,"display","flex"],["type","text","id","firstName","name","firstName","matInput","","placeholder","First Name","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["fname","ngModel"],["type","text","id","lastName","name","lastName","matInput","","placeholder","Last Name","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","id","password","name","password","matInput","","placeholder","Password","ngModel","","required","","minlength","8",1,"form-control",3,"ngModel","ngModelChange"],["pwd","ngModel"],["type","password","id","ConfirmPassword","name","ConfirmPassword","matInput","","placeholder","Confirm Password","ngModel","","required","","minlength","8",1,"form-control",3,"ngModel","ngModelChange"],[2,"color","red"],["mat-stroked-button","","color","accent","type","submit",3,"disabled"],["type","button","mat-stroked-button","","color","accent",3,"click"],["type","button","mat-stroked-button","","color","accent","routerLinkActive","active",3,"routerLink"],[2,"color","blue","cursor","pointer",3,"click"]],template:function(t,i){1&t&&(u._UZ(0,"app-header"),u.YNc(1,gZ,6,1,"mat-card",0),u.YNc(2,OZ,20,13,"mat-card",1)),2&t&&(u.xp6(1),u.Q6J("ngIf",i.httpStatus),u.xp6(1),u.Q6J("ngIf",!i.httpStatus))},directives:[dk,Zn,fk,hk,bw,u_,dg,rg,Ju,gk,_k,Yu,Tc,_g,ig,df,pk,gg,Pv,Da,Po],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.signupcontainer[_ngcontent-%COMP%]{box-shadow:#0e0a0a;border:#4CAF50;background-color:#ebfafa;width:55%;margin-left:6%;padding:30px;border-radius:12px;align-items:center}.validPassword[_ngcontent-%COMP%]{background-color:#fcb9b9;margin-bottom:2%;height:2%;padding:1px}"]}),n})();function yk(n){return n&&"function"==typeof n.connect}class D2{applyChanges(e,t,i,r,s){e.forEachOperation((l,d,p)=>{let y,w;if(null==l.previousIndex){const D=i(l,d,p);y=t.createEmbeddedView(D.templateRef,D.context,D.index),w=1}else null==p?(t.remove(d),w=3):(y=t.get(d),t.move(y,p),w=2);s&&s({context:null==y?void 0:y.context,operation:w,record:l})})}detach(){}}const ww=new u.OlP("_ViewRepeater"),FZ=[[["caption"]],[["colgroup"],["col"]]],LZ=["caption","colgroup, col"];function vk(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=fr(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const p_=new u.OlP("CDK_TABLE");let m_=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),g_=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),cS=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class HZ{}const jZ=vk(HZ);let Vc=(()=>{class n extends jZ{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=fr(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(p_,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,m_,5),u.Suo(r,g_,5),u.Suo(r,cS,5)),2&t){let s;u.iGM(s=u.CRH())&&(i.cell=s.first),u.iGM(s=u.CRH())&&(i.headerCell=s.first),u.iGM(s=u.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[u._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),u.qOj]}),n})();class bk{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let wk=(()=>{class n extends bk{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vc),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[u.qOj]}),n})(),Ck=(()=>{class n extends bk{constructor(t,i){var r;if(super(t,i),1===(null===(r=t._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const s=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vc),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[u.qOj]}),n})();class T2{constructor(){this.tasks=[],this.endTasks=[]}}const Ek=new u.OlP("_COALESCED_STYLE_SCHEDULER");let A2=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new Mt.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new T2,this._getScheduleObservable().pipe(Yr(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new T2;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,fn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Yn(1))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Dk=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Cw?t.headerCell.template:this instanceof Ew?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();class GZ extends Dk{}const $Z=vk(GZ);let Cw=(()=>{class n extends $Z{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(p_,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[u.qOj,u.TTD]}),n})();class zZ extends Dk{}const qZ=vk(zZ);let Ew=(()=>{class n extends qZ{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(p_,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[u.qOj,u.TTD]}),n})(),uS=(()=>{class n extends Dk{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc),u.Y36(u.ZZ4),u.Y36(p_,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[u.qOj]}),n})(),Uc=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),Ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[Uc],encapsulation:2}),n})(),Tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[Uc],encapsulation:2}),n})(),dS=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const M2=["top","bottom","left","right"];class WZ{constructor(e,t,i,r,s=!0,l=!0,d){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=l,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(S=>S)&&!i.some(S=>S))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],l=s.children.length,d=this._getCellWidths(s,r),p=this._getStickyStartColumnPositions(d,t),y=this._getStickyEndColumnPositions(d,i),w=t.lastIndexOf(!0),D=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const S="rtl"===this.direction,R=S?"right":"left",P=S?"left":"right";for(const H of e)for(let Y=0;Y<l;Y++){const Ce=H.children[Y];t[Y]&&this._addStickyStyle(Ce,R,p[Y],Y===w),i[Y]&&this._addStickyStyle(Ce,P,y[Y],Y===D)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===w?[]:d.slice(0,w+1).map((H,Y)=>t[Y]?H:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===D?[]:d.slice(D).map((H,Y)=>i[Y+D]?H:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,l=[],d=[],p=[];for(let w=0,D=0;w<r.length;w++){if(!s[w])continue;l[w]=D;const S=r[w];p[w]=this._isNativeHtmlTable?Array.from(S.children):[S];const R=S.getBoundingClientRect().height;D+=R,d[w]=R}const y=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var w,D;for(let S=0;S<r.length;S++){if(!s[S])continue;const R=l[S],P=S===y;for(const H of p[S])this._addStickyStyle(H,i,R,P)}"top"===i?null===(w=this._positionListener)||void 0===w||w.stickyHeaderRowsUpdated({sizes:d,offsets:l,elements:p}):null===(D=this._positionListener)||void 0===D||D.stickyFooterRowsUpdated({sizes:d,offsets:l,elements:p})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);M2.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of M2)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const Ak=new u.OlP("CDK_SPL");let hS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),fS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),pS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),mS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),gS=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,S,R){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=l,this._platform=p,this._viewRepeater=y,this._coalescedStyleScheduler=w,this._viewportRuler=D,this._stickyPositioningListener=S,this._ngZone=R,this._onDestroy=new Mt.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new u.vpe,this.viewChange=new Fi({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=fr(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=fr(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Yr(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),yk(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,l)=>this._getEmbeddedViewArgs(r.item,l),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&u.R0b.isInAngularZone()?this._ngZone.onStable.pipe(Yn(1),Yr(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(l=>l.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(l=>l.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(l=>l.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(l=>l.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,l)=>{this._addStickyColumnStyles([s],this._headerRowDefs[l])}),this._rowDefs.forEach(s=>{const l=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&l.push(i[d]);this._addStickyColumnStyles(l,s)}),r.forEach((s,l)=>{this._addStickyColumnStyles([s],this._footerRowDefs[l])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const l=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<l.length;d++){let p=l[d];const y=this._cachedRenderRowsMap.get(p.data);y.has(p.rowDef)?y.get(p.rowDef).push(p):y.set(p.rowDef,[p]),t.push(p)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(l=>{const d=r&&r.has(l)?r.get(l):[];if(d.length){const p=d.shift();return p.dataIndex=i,p}return{data:t,rowDef:l,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),_S(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=_S(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=_S(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=_S(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(l,d)=>l||!!d.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],yk(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;yk(this.dataSource)?t=this.dataSource.connect(this):function NZ(n){return!!n&&(n instanceof cn.y||(0,lr.m)(n.lift)&&(0,lr.m)(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=Ye(this.dataSource)),this._renderChangeSubscription=t.pipe(Yr(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),l=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,l,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(l=>l.when&&l.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const l=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),l}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))Uc.mostRecentCellOutlet&&Uc.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const l=t.get(i).context;l.count=r,l.first=0===i,l.last=i===r-1,l.even=i%2==0,l.odd=!l.even,this.multiTemplateDataRows?(l.dataIndex=this._renderRows[i].dataIndex,l.renderIndex=i):l.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const l of r.outlets)s.appendChild(l.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new WZ(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Ye()).pipe(Yr(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),l=s.rootNodes[0];1===s.rootNodes.length&&(null==l?void 0:l.nodeType)===this._document.ELEMENT_NODE&&(l.setAttribute("role","row"),l.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.sBO),u.Y36(u.SBq),u.$8M("role"),u.Y36(rd,8),u.Y36(le),u.Y36(xr),u.Y36(ww),u.Y36(Ek),u.Y36(Oa),u.Y36(Ak,12),u.Y36(u.R0b,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,dS,5),u.Suo(r,Vc,5),u.Suo(r,uS,5),u.Suo(r,Cw,5),u.Suo(r,Ew,5)),2&t){let s;u.iGM(s=u.CRH())&&(i._noDataRow=s.first),u.iGM(s=u.CRH())&&(i._contentColumnDefs=s),u.iGM(s=u.CRH())&&(i._contentRowDefs=s),u.iGM(s=u.CRH())&&(i._contentHeaderRowDefs=s),u.iGM(s=u.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(u.Gf(hS,7),u.Gf(fS,7),u.Gf(pS,7),u.Gf(mS,7)),2&t){let r;u.iGM(r=u.CRH())&&(i._rowOutlet=r.first),u.iGM(r=u.CRH())&&(i._headerRowOutlet=r.first),u.iGM(r=u.CRH())&&(i._footerRowOutlet=r.first),u.iGM(r=u.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[u._Bn([{provide:p_,useExisting:n},{provide:ww,useClass:D2},{provide:Ek,useClass:A2},{provide:Ak,useValue:null}])],ngContentSelectors:LZ,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(u.F$t(FZ),u.Hsn(0),u.Hsn(1,1),u.GkF(2,0)(3,1)(4,2)(5,3))},directives:[fS,hS,mS,pS],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function _S(n,e){return n.concat(Array.from(e))}let YZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[tp]]}),n})();const KZ=[[["caption"]],[["colgroup"],["col"]]],QZ=["caption","colgroup, col"];let R2=(()=>{class n extends gS{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[u._Bn([{provide:ww,useClass:D2},{provide:gS,useExisting:n},{provide:p_,useExisting:n},{provide:Ek,useClass:A2},{provide:Ak,useValue:null}]),u.qOj],ngContentSelectors:QZ,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(u.F$t(KZ),u.Hsn(0),u.Hsn(1,1),u.GkF(2,0)(3,1)(4,2)(5,3))},directives:[fS,hS,mS,pS],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),Mk=(()=>{class n extends m_{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matCellDef",""]],features:[u._Bn([{provide:m_,useExisting:n}]),u.qOj]}),n})(),xk=(()=>{class n extends g_{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[u._Bn([{provide:g_,useExisting:n}]),u.qOj]}),n})(),Rk=(()=>{class n extends Vc{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[u._Bn([{provide:Vc,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),u.qOj]}),n})(),kk=(()=>{class n extends wk{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[u.qOj]}),n})(),Ok=(()=>{class n extends Ck{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[u.qOj]}),n})(),k2=(()=>{class n extends Cw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[u._Bn([{provide:Cw,useExisting:n}]),u.qOj]}),n})(),O2=(()=>{class n extends uS{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[u._Bn([{provide:uS,useExisting:n}]),u.qOj]}),n})(),P2=(()=>{class n extends Ik{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[u._Bn([{provide:Ik,useExisting:n}]),u.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[Uc],encapsulation:2}),n})(),N2=(()=>{class n extends Tk{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[u._Bn([{provide:Tk,useExisting:n}]),u.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&u.GkF(0,0)},directives:[Uc],encapsulation:2}),n})(),l8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[YZ,An],An]}),n})();function u8(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," URL is "),u.TgZ(2,"strong"),u._uU(3,"required"),u.qZA()())}function d8(n,e){1&n&&(u.TgZ(0,"h2",16),u._uU(1,"Here is your short URL"),u.qZA())}const h8=function(){return["/login"]};function f8(n,e){1&n&&(u.TgZ(0,"button",17),u._uU(1," Login "),u.qZA()),2&n&&u.Q6J("routerLink",u.DdM(1,h8))}function p8(n,e){if(1&n&&(u.TgZ(0,"mat-card",12),u.YNc(1,d8,2,0,"h2",13),u.TgZ(2,"mat-card-content",14),u._uU(3),u.qZA(),u.YNc(4,f8,2,2,"button",15),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.isShortUrl),u.xp6(2),u.hij("",t.shortUrl," "),u.xp6(1),u.Q6J("ngIf",!t.isLoggedIn)}}function m8(n,e){1&n&&(u.TgZ(0,"h3",18),u._uU(1,"Yout All Urls"),u.qZA())}function g8(n,e){1&n&&(u.TgZ(0,"th",27),u._uU(1," No. "),u.qZA())}function _8(n,e){if(1&n&&(u.TgZ(0,"td",28),u._uU(1),u.qZA()),2&n){const t=e.index;u.xp6(1),u.hij(" ",t+1," ")}}function y8(n,e){1&n&&(u.TgZ(0,"th",27),u._uU(1," Long Urls "),u.qZA())}function v8(n,e){if(1&n&&(u.TgZ(0,"td",28),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.longUrl," ")}}function b8(n,e){1&n&&(u.TgZ(0,"th",27),u._uU(1," Short Urls "),u.qZA())}function w8(n,e){if(1&n&&(u.TgZ(0,"td",28),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t.shortUrl," ")}}function C8(n,e){1&n&&u._UZ(0,"tr",29)}function E8(n,e){1&n&&u._UZ(0,"tr",30)}function D8(n,e){if(1&n&&(u.TgZ(0,"table",19),u.ynx(1,20),u.YNc(2,g8,2,0,"th",21),u.YNc(3,_8,2,1,"td",22),u.BQk(),u.ynx(4,23),u.YNc(5,y8,2,0,"th",21),u.YNc(6,v8,2,1,"td",22),u.BQk(),u.ynx(7,24),u.YNc(8,b8,2,0,"th",21),u.YNc(9,w8,2,1,"td",22),u.BQk(),u.YNc(10,C8,1,0,"tr",25),u.YNc(11,E8,1,0,"tr",26),u.qZA()),2&n){const t=u.oxw();u.Q6J("dataSource",t.dataSource),u.xp6(10),u.Q6J("matHeaderRowDef",t.displayedColumns),u.xp6(1),u.Q6J("matRowDefColumns",t.displayedColumns)}}const yS=F(9185);let I8=(()=>{class n{constructor(t,i){this.httpservice=t,this.sharedataService=i,this.isShortUrl=!1,this.isLoggedIn=!1,this.isCardShow=!1,this.displayedColumns=["position","longUrl","shortUrl"],this.isValidUrl=yS(this.longUrl)}ngOnInit(){this.isValidUrl=yS(this.longUrl),this.isLoggedIn=Boolean(JSON.parse(localStorage.getItem("user"))),this.isLoggedIn&&this.httpservice.getAllUrls({email:JSON.parse(localStorage.getItem("user")).email.toLowerCase()}).subscribe(t=>{this.allUrlData=JSON.parse(t),this.dataSource=this.allUrlData,console.log(this.allUrlData),this.lengthOfUrlsArray=this.allUrlData.length})}onSubmit(t){try{Boolean(localStorage.getItem("user"))?(this.isValidUrl=yS(t.form.value.longUrl),console.log(this.isValidUrl),this.isValidUrl?(console.log(t.form.value.longUrl),this.isValidUrl=yS(this.longUrl),this.httpservice.generateURL({longUrl:this.longUrl,email:JSON.parse(localStorage.getItem("user")).email}).subscribe(i=>{console.log(i,typeof i),this.isCardShow=!0;try{this.shortUrl=JSON.parse(i).shortUrl,this.isShortUrl=!0}catch(r){this.shortUrl=i,this.isShortUrl=!1}})):(this.isCardShow=!0,this.shortUrl="Please Enter Valid URL")):(this.isCardShow=!0,this.shortUrl="Please Login First")}catch(i){this.isCardShow=!0,this.shortUrl="Please Login First"}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xf),u.Y36(Jf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:21,vars:5,consts:[[2,"margin-left","23%","margin-top","5%"],["name","form",2,"margin-top","5%","padding","0 !important","height","15%","margin-left","23%","margin-right","23%",3,"ngSubmit"],["authForm","ngForm"],[2,"margin-top","10px","width","100%"],["for","longUrl",2,"font-weight","bold","font-size","15px"],[2,"display","flex"],["type","text","placeholder","Paste your Long URL here","type","url","name","longUrl","ngModel","","required","","email","","matInput","","id","longUrl",1,"form-control",2,"font-size","20px",3,"ngModel","ngModelChange"],["type","submit","mat-raised-button","","color","primary",1,"generatebtn"],[4,"ngIf"],["class","shortUrlCard",4,"ngIf"],["style","margin-left:5.5%;margin-top: 5%;",4,"ngIf"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],[1,"shortUrlCard"],["style","margin-left:15%;display: inline-block; color: blue;  word-wrap:normal;white-space: initial;",4,"ngIf"],[2,"margin-left","15%","white-space","break-spaces","margin-top","3%","font-size","120%"],["type","button","mat-stroked-button","","color","accent","style","float:right;margin-right: 4%;","routerLinkActive","active",3,"routerLink",4,"ngIf"],[2,"margin-left","15%","display","inline-block","color","blue","word-wrap","normal","white-space","initial"],["type","button","mat-stroked-button","","color","accent","routerLinkActive","active",2,"float","right","margin-right","4%",3,"routerLink"],[2,"margin-left","5.5%","margin-top","5%"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","longUrl"],["matColumnDef","shortUrl"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,i){if(1&t){const r=u.EpF();u._UZ(0,"app-header"),u.TgZ(1,"h2",0),u._uU(2," Free URL Shortner to create perfect URLs for your business"),u.qZA(),u.TgZ(3,"form",1,2),u.NdJ("ngSubmit",function(){u.CHM(r);const l=u.MAs(4);return i.onSubmit(l)}),u.TgZ(5,"mat-form-field",3)(6,"mat-label",4),u._uU(7,"LongUrl"),u.qZA(),u.TgZ(8,"div",5)(9,"input",6),u.NdJ("ngModelChange",function(l){return i.longUrl=l}),u.qZA(),u.TgZ(10,"button",7),u._uU(11,"Generate URL"),u.qZA()(),u.YNc(12,u8,4,0,"mat-error",8),u.qZA(),u._UZ(13,"br"),u.qZA(),u.YNc(14,p8,5,3,"mat-card",9),u.YNc(15,m8,2,0,"h3",10),u.YNc(16,D8,12,3,"table",11),u._UZ(17,"br")(18,"br"),u.TgZ(19,"h6"),u._uU(20,"."),u.qZA()}2&t&&(u.xp6(9),u.Q6J("ngModel",i.longUrl),u.xp6(3),u.Q6J("ngIf",!i.longUrl),u.xp6(2),u.Q6J("ngIf",i.isCardShow),u.xp6(1),u.Q6J("ngIf",i.lengthOfUrlsArray>0),u.xp6(1),u.Q6J("ngIf",i.isLoggedIn&&i.lengthOfUrlsArray>0))},directives:[dk,dg,rg,Ju,gk,bw,Yu,_k,ig,df,Tc,gg,u_,Zn,pk,fk,hk,Da,Po,R2,Rk,xk,kk,Mk,Ok,k2,P2,O2,N2],styles:["input[_ngcontent-%COMP%]{border-radius:12px;padding:1.5%}.urlInput[_ngcontent-%COMP%]{border-radius:12px;border:2px solid rgb(0,1,5);box-sizing:border-box;margin-left:23%;width:40%}.generatebtn[_ngcontent-%COMP%]{padding:12px 4% 12px 12px;cursor:pointer;border-radius:12px;font-weight:700}.example-button-row[_ngcontent-%COMP%]{display:table-cell;max-width:600px}.shortUrlCard[_ngcontent-%COMP%]{margin-left:23%;width:40%;margin-top:3%;white-space:nowrap;overflow:hidden;position:relative;font-weight:700}.shortUrlCard1[_ngcontent-%COMP%]{margin-left:23%;width:40%;margin-top:2%;white-space:inherit;overflow:auto;position:relative;display:flex}table[_ngcontent-%COMP%]{margin-top:2%;width:90%;margin-left:5%}input[_ngcontent-%COMP%]:focus::placeholder{color:transparent}.mat-form-field-infix[_ngcontent-%COMP%]{padding:0!important;border-top:.84375em!important}.mat-input-element[_ngcontent-%COMP%]{border:dimgray!important}"]}),n})();function S8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-card",3)(1,"mat-card-content",4)(2,"mat-label"),u._uU(3),u.qZA()(),u.TgZ(4,"button",5),u.NdJ("click",function(){return u.CHM(t),u.oxw().backToLogin()}),u._uU(5,"Close"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(3),u.Oqu(t.httpStatus)}}function T8(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Password is Required "),u.qZA())}function A8(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Password is Required "),u.qZA())}function M8(n,e){1&n&&(u.TgZ(0,"mat-error"),u._uU(1," Length of Password should be more than 7 "),u.qZA())}function x8(n,e){1&n&&(u.TgZ(0,"h4",20),u._uU(1," Both Password Should be same"),u.qZA())}const R8=function(){return["/login"]};function k8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"mat-card",6)(1,"form",7,8),u.NdJ("ngSubmit",function(){u.CHM(t);const r=u.MAs(2);return u.oxw().onSubmit(r)}),u.TgZ(3,"mat-card-content")(4,"mat-label",9),u._uU(5,"Password"),u.qZA(),u.TgZ(6,"mat-form-field",10)(7,"input",11,12),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw().password=r}),u.qZA(),u.YNc(9,T8,2,0,"mat-error",13),u.qZA(),u.TgZ(10,"mat-form-field",10)(11,"input",14,15),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw().newPassword=r}),u.qZA(),u.YNc(13,A8,2,0,"mat-error",13),u.YNc(14,M8,2,0,"mat-error",13),u.qZA(),u.TgZ(15,"mat-form-field",10)(16,"input",16),u.NdJ("ngModelChange",function(r){return u.CHM(t),u.oxw().ConfirmPassword=r}),u.qZA()()(),u.YNc(17,x8,2,0,"h4",17),u.TgZ(18,"button",18),u._uU(19," Save\n"),u.qZA(),u.TgZ(20,"span"),u._uU(21,"\xa0\xa0\xa0"),u.qZA(),u.TgZ(22,"button",19),u._uU(23," Cancel"),u.qZA()()()}if(2&n){const t=u.MAs(8),i=u.MAs(12),r=u.oxw();u.xp6(7),u.ekj("is-invalid",t.invalid&&t.touched),u.Q6J("ngModel",r.password),u.xp6(2),u.Q6J("ngIf",t.touched&&!r.password),u.xp6(2),u.ekj("is-invalid",i.invalid&&i.touched),u.Q6J("ngModel",r.newPassword),u.xp6(2),u.Q6J("ngIf",i.touched&&!r.newPassword),u.xp6(1),u.Q6J("ngIf",!i.valid&&r.newPassword),u.xp6(2),u.Q6J("ngModel",r.ConfirmPassword),u.xp6(1),u.Q6J("ngIf",r.newPassword!=r.ConfirmPassword),u.xp6(5),u.Q6J("routerLink",u.DdM(12,R8))}}const O8=[{path:"login",component:PZ},{path:"",component:I8},{path:"reset-password/:id",component:(()=>{class n{constructor(t,i,r){this.sharedata=t,this.router=i,this.appHttp=r}ngOnInit(){this.emailId=JSON.parse(localStorage.getItem("user")).email,console.log(this.emailId),this.appHttp.getUserData({email:this.emailId}).subscribe(t=>{this.id=JSON.parse(t)._id})}backToLogin(){this.httpStatus=""}onSubmit(t){this.emailId=JSON.parse(localStorage.getItem("user")).email,console.log(this.emailId,this.password,this.newPassword),console.log(1),this.appHttp.resetPassword({email:this.emailId,currentPassword:this.password,newPassword:this.newPassword},this.id).subscribe(i=>{console.log(i),this.httpStatus=i.result,200==i.status&&setTimeout(()=>{this.router.navigate(["/"])},1e3),console.log(2)}),this.password==this.ConfirmPassword&&(this.isBothPasswordSame=!0)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Jf),u.Y36(ai),u.Y36(Xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-reset-password"]],decls:5,vars:2,consts:[["style","width:40%;height: 20%; margin-left: 25%;margin-top: 8%;",4,"ngIf"],["id","myDialog"],["style"," padding-top:2%;padding-bottom: 2%;width:40%; margin-left: 25%;margin-top: 10%;",4,"ngIf"],[2,"width","40%","height","20%","margin-left","25%","margin-top","8%"],[2,"text-align","center","font-size","130%","margin-top","8%"],["mat-flat-button","","color","primary",2,"float","right",3,"click"],[2,"padding-top","2%","padding-bottom","2%","width","40%","margin-left","25%","margin-top","10%"],[2,"margin-top","5%",3,"ngSubmit"],["authForm","ngForm"],["for","email",2,"font-weight","bold","font-size","15px"],[2,"margin-top","10px","width","100%"],["type","password","id","password","name","password","matInput","","placeholder","Current Password","required","","minlength","8",1,"form-control",3,"ngModel","ngModelChange"],["cpwd","ngModel"],[4,"ngIf"],["type","password","id","newPassword","name","newPassword","matInput","","placeholder","New Password","required","","minlength","8",1,"form-control",3,"ngModel","ngModelChange"],["npwd","ngModel"],["type","password","id","ConfirmPassword","name","ConfirmPassword","matInput","","placeholder","Confirmed Password","ngModel","","required","","minlength","8",1,"form-control",3,"ngModel","ngModelChange"],["style","color:red;",4,"ngIf"],["type","submit","mat-stroked-button","","color","accent"],["type","button","mat-stroked-button","","color","accent","routerLinkActive","active",3,"routerLink"],[2,"color","red"]],template:function(t,i){1&t&&(u._UZ(0,"app-header"),u.YNc(1,S8,6,1,"mat-card",0),u.TgZ(2,"dialog",1),u._uU(3,"This is an open dialog window"),u.qZA(),u.YNc(4,k8,24,13,"mat-card",2)),2&t&&(u.xp6(1),u.Q6J("ngIf",i.httpStatus),u.xp6(3),u.Q6J("ngIf",!i.httpStatus))},directives:[dk,Zn,fk,hk,bw,u_,dg,rg,Ju,gk,_k,Yu,Tc,_g,ig,df,pk,Da,Po],styles:[""]}),n})()}];let P8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Xh.forRoot(O8),yg],Xh]}),n})(),N8=(()=>{class n{constructor(t){this.router=t,this.title="URL_Frontend",this.name="ok",this.isLoginOrNot=!1,console.log(this.router.url)}setLoginValue(t){this.isLoginOrNot=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ai))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},directives:[Bh],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;height:100vh}*[_ngcontent-%COMP%]{box-sizing:border-box}"]}),n})(),L8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[ia,An,Ml],Ml,An]}),n})();var __=F(5363);class B8 extends Mt.x{constructor(e=1/0,t=1/0,i=Sg){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=t.now();let d=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)d=p;d&&i.splice(0,d+1)}}}function F2(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,uk.B)({connector:()=>new B8(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function L2(n,e){return(0,lr.m)(e)?vn(()=>n,e):vn(()=>n)}var vS=F(9468),Zt=F(9681);(0,Zt.registerVersion)("firebase","9.14.0","app");var Z=F(5861),O=F(2090),Wi=F(4859),Es=F(1877),y_=F(8766);const B2="@firebase/installations",Pk="0.5.16",U2=`w:${Pk}`,H2="FIS_v2",Hc=new O.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function j2(n){return n instanceof O.ZR&&n.code.includes("request-failed")}function Nk({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function G2(n){return{token:n.token,requestStatus:2,expiresIn:q8(n.expiresIn),creationTime:Date.now()}}function Fk(n,e){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,Z.Z)(function*(n,e){const i=(yield e.json()).error;return Hc.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function $2({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function z2(n,{refreshToken:e}){const t=$2(n);return t.append("Authorization",function W8(n){return`${H2} ${n}`}(e)),t}function Bk(n){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,Z.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function q8(n){return Number(n.replace("s","000"))}function Z8(n,e){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,Z.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Nk(n),r=$2(n),s=e.getImmediate({optional:!0});if(s){const y=yield s.getHeartbeatsHeader();y&&r.append("x-firebase-client",y)}const d={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:H2,appId:n.appId,sdkVersion:U2})},p=yield Bk(()=>fetch(i,d));if(p.ok){const y=yield p.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:G2(y.authToken)}}throw yield Fk("Create Installation",p)})).apply(this,arguments)}function q2(n){return new Promise(e=>{setTimeout(e,n)})}const K8=/^[cdef][\w-]{21}$/;function Q8(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function X8(n){return function Y8(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return K8.test(t)?t:""}catch(n){return""}}function v_(n){return`${n.appName}!${n.appId}`}const b_=new Map;function W2(n,e){const t=v_(n);Z2(t,e),function t5(n,e){const t=function Y2(){return!sp&&"BroadcastChannel"in self&&(sp=new BroadcastChannel("[Firebase] FID Change"),sp.onmessage=n=>{Z2(n.data.key,n.data.fid)}),sp}();t&&t.postMessage({key:n,fid:e}),function K2(){0===b_.size&&sp&&(sp.close(),sp=null)}()}(t,e)}function Z2(n,e){const t=b_.get(n);if(t)for(const i of t)i(e)}let sp=null;const op="firebase-installations-store";let jk=null;function Gk(){return jk||(jk=(0,y_.X3)("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(op)}})),jk}function bS(n,e){return $k.apply(this,arguments)}function $k(){return($k=(0,Z.Z)(function*(n,e){const t=v_(n),r=(yield Gk()).transaction(op,"readwrite"),s=r.objectStore(op),l=yield s.get(t);return yield s.put(e,t),yield r.done,(!l||l.fid!==e.fid)&&W2(n,e.fid),e})).apply(this,arguments)}function zk(n){return qk.apply(this,arguments)}function qk(){return(qk=(0,Z.Z)(function*(n){const e=v_(n),i=(yield Gk()).transaction(op,"readwrite");yield i.objectStore(op).delete(e),yield i.done})).apply(this,arguments)}function Dw(n,e){return Wk.apply(this,arguments)}function Wk(){return(Wk=(0,Z.Z)(function*(n,e){const t=v_(n),r=(yield Gk()).transaction(op,"readwrite"),s=r.objectStore(op),l=yield s.get(t),d=e(l);return void 0===d?yield s.delete(t):yield s.put(d,t),yield r.done,d&&(!l||l.fid!==d.fid)&&W2(n,d.fid),d})).apply(this,arguments)}function Zk(n){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,Z.Z)(function*(n){let e;const t=yield Dw(n.appConfig,i=>{const r=s5(i),s=o5(n,r);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function s5(n){return X2(n||{fid:Q8(),registrationStatus:0})}function o5(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Hc.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function a5(n,e){return Kk.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:l5(n)}:{installationEntry:e}}function Kk(){return(Kk=(0,Z.Z)(function*(n,e){try{const t=yield Z8(n,e);return bS(n.appConfig,t)}catch(t){throw j2(t)&&409===t.customData.serverCode?yield zk(n.appConfig):yield bS(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function l5(n){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,Z.Z)(function*(n){let e=yield Q2(n.appConfig);for(;1===e.registrationStatus;)yield q2(100),e=yield Q2(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield Zk(n);return i||t}return e})).apply(this,arguments)}function Q2(n){return Dw(n,e=>{if(!e)throw Hc.create("installation-not-found");return X2(e)})}function X2(n){return function c5(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function u5(n,e){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,Z.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=d5(n,t),r=z2(n,t),s=e.getImmediate({optional:!0});if(s){const y=yield s.getHeartbeatsHeader();y&&r.append("x-firebase-client",y)}const d={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:U2,appId:n.appId}})},p=yield Bk(()=>fetch(i,d));if(p.ok)return G2(yield p.json());throw yield Fk("Generate Auth Token",p)})).apply(this,arguments)}function d5(n,{fid:e}){return`${Nk(n)}/${e}/authTokens:generate`}function Jk(n){return eO.apply(this,arguments)}function eO(){return(eO=(0,Z.Z)(function*(n,e=!1){let t;const i=yield Dw(n.appConfig,s=>{if(!eU(s))throw Hc.create("not-registered");const l=s.authToken;if(!e&&p5(l))return s;if(1===l.requestStatus)return t=h5(n,e),s;{if(!navigator.onLine)throw Hc.create("app-offline");const d=g5(s);return t=f5(n,d),d}});return t?yield t:i.authToken})).apply(this,arguments)}function h5(n,e){return tO.apply(this,arguments)}function tO(){return(tO=(0,Z.Z)(function*(n,e){let t=yield J2(n.appConfig);for(;1===t.authToken.requestStatus;)yield q2(100),t=yield J2(n.appConfig);const i=t.authToken;return 0===i.requestStatus?Jk(n,e):i})).apply(this,arguments)}function J2(n){return Dw(n,e=>{if(!eU(e))throw Hc.create("not-registered");return function _5(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function f5(n,e){return nO.apply(this,arguments)}function nO(){return(nO=(0,Z.Z)(function*(n,e){try{const t=yield u5(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield bS(n.appConfig,i),t}catch(t){if(!j2(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield bS(n.appConfig,i)}else yield zk(n.appConfig);throw t}})).apply(this,arguments)}function eU(n){return void 0!==n&&2===n.registrationStatus}function p5(n){return 2===n.requestStatus&&!function m5(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function g5(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function iO(){return(iO=(0,Z.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield Zk(e);return i?i.catch(console.error):Jk(e).catch(console.error),t.fid})).apply(this,arguments)}function rO(){return(rO=(0,Z.Z)(function*(n,e=!1){const t=n;return yield b5(t),(yield Jk(t,e)).token})).apply(this,arguments)}function b5(n){return sO.apply(this,arguments)}function sO(){return(sO=(0,Z.Z)(function*(n){const{registrationPromise:e}=yield Zk(n);e&&(yield e)})).apply(this,arguments)}function lO(n){return Hc.create("missing-app-config-values",{valueName:n})}const tU="installations",I5=n=>{const e=n.getProvider("app").getImmediate(),t=function E5(n){if(!n||!n.options)throw lO("App Configuration");if(!n.name)throw lO("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw lO(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,Zt._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},S5=n=>{const e=n.getProvider("app").getImmediate(),t=(0,Zt._getProvider)(e,tU).getImmediate();return{getId:()=>function y5(n){return iO.apply(this,arguments)}(t),getToken:r=>function v5(n){return rO.apply(this,arguments)}(t,r)}};(function T5(){(0,Zt._registerComponent)(new Wi.wA(tU,I5,"PUBLIC")),(0,Zt._registerComponent)(new Wi.wA("installations-internal",S5,"PRIVATE"))})(),(0,Zt.registerVersion)(B2,Pk),(0,Zt.registerVersion)(B2,Pk,"esm2017");const cO="@firebase/remote-config",Ds=new O.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class B5{constructor(e,t,i,r){this.client=e,this.storage=t,this.storageCache=i,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-t,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,Z.Z)(function*(){const[i,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&l.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(l),s})()}}function V5(n=navigator){return n.languages&&n.languages[0]||n.language}class U5{constructor(e,t,i,r,s,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=l}fetch(e){var t=this;return(0,Z.Z)(function*(){var i,r,s;const[l,d]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),y=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,w={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},D={sdk_version:t.sdkVersion,app_instance_id:l,app_instance_id_token:d,app_id:t.appId,language_code:V5()},S={method:"POST",headers:w,body:JSON.stringify(D)},R=fetch(y,S),P=new Promise((Re,Xe)=>{e.signal.addEventListener(()=>{const rt=new Error("The operation was aborted.");rt.name="AbortError",Xe(rt)})});let H;try{yield Promise.race([R,P]),H=yield R}catch(Re){let Xe="fetch-client-network";throw"AbortError"===(null===(i=Re)||void 0===i?void 0:i.name)&&(Xe="fetch-timeout"),Ds.create(Xe,{originalErrorMessage:null===(r=Re)||void 0===r?void 0:r.message})}let Y=H.status;const Ce=H.headers.get("ETag")||void 0;let Pe,xe;if(200===H.status){let Re;try{Re=yield H.json()}catch(Xe){throw Ds.create("fetch-client-parse",{originalErrorMessage:null===(s=Xe)||void 0===s?void 0:s.message})}Pe=Re.entries,xe=Re.state}if("INSTANCE_STATE_UNSPECIFIED"===xe?Y=500:"NO_CHANGE"===xe?Y=304:("NO_TEMPLATE"===xe||"EMPTY_CONFIG"===xe)&&(Pe={}),304!==Y&&200!==Y)throw Ds.create("fetch-status",{httpStatus:Y});return{status:Y,eTag:Ce,config:Pe}})()}}class G5{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,Z.Z)(function*(){const i=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:i}){var r=this;return(0,Z.Z)(function*(){yield function H5(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Ds.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function j5(n){if(!(n instanceof O.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const l={throttleEndTimeMillis:Date.now()+(0,O.$s)(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(l),r.attemptFetch(e,l)}})()}}class q5{constructor(e,t,i,r,s){this.app=e,this._client=t,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function CS(n,e){var t;const i=n.target.error||void 0;return Ds.create(e,{originalErrorMessage:i&&(null===(t=i)||void 0===t?void 0:t.message)})}const ap="app_namespace_store";class K5{constructor(e,t,i,r=function Y5(){return new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase_remote_config",1);i.onerror=r=>{e(CS(r,"storage-open"))},i.onsuccess=r=>{n(r.target.result)},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ap,{keyPath:"compositeKey"})}}catch(i){e(Ds.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,Z.Z)(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{var l;const p=i.transaction([ap],"readonly").objectStore(ap),y=t.createCompositeKey(e);try{const w=p.get(y);w.onerror=D=>{s(CS(D,"storage-get"))},w.onsuccess=D=>{const S=D.target.result;r(S?S.value:void 0)}}catch(w){s(Ds.create("storage-get",{originalErrorMessage:null===(l=w)||void 0===l?void 0:l.message}))}})})()}set(e,t){var i=this;return(0,Z.Z)(function*(){const r=yield i.openDbPromise;return new Promise((s,l)=>{var d;const y=r.transaction([ap],"readwrite").objectStore(ap),w=i.createCompositeKey(e);try{const D=y.put({compositeKey:w,value:t});D.onerror=S=>{l(CS(S,"storage-set"))},D.onsuccess=()=>{s()}}catch(D){l(Ds.create("storage-set",{originalErrorMessage:null===(d=D)||void 0===d?void 0:d.message}))}})})()}delete(e){var t=this;return(0,Z.Z)(function*(){const i=yield t.openDbPromise;return new Promise((r,s)=>{var l;const p=i.transaction([ap],"readwrite").objectStore(ap),y=t.createCompositeKey(e);try{const w=p.delete(y);w.onerror=D=>{s(CS(D,"storage-delete"))},w.onsuccess=()=>{r()}}catch(w){s(Ds.create("storage-delete",{originalErrorMessage:null===(l=w)||void 0===l?void 0:l.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Q5{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,Z.Z)(function*(){const t=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const l=yield i;l&&(e.lastSuccessfulFetchTimestampMillis=l);const d=yield r;d&&(e.activeConfig=d)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function J5(){return pO.apply(this,arguments)}function pO(){return(pO=(0,Z.Z)(function*(){if(!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(n){return!1}})).apply(this,arguments)}!function X5(){(0,Zt._registerComponent)(new Wi.wA("remote-config",function n(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ds.create("registration-window");if(!(0,O.hl)())throw Ds.create("indexed-db-unavailable");const{projectId:s,apiKey:l,appId:d}=i.options;if(!s)throw Ds.create("registration-project-id");if(!l)throw Ds.create("registration-api-key");if(!d)throw Ds.create("registration-app-id");const p=new K5(d,i.name,t=t||"firebase"),y=new Q5(p),w=new Es.Yd(cO);w.logLevel=Es.in.ERROR;const D=new U5(r,Zt.SDK_VERSION,t,s,l,d),S=new G5(D,p),R=new B5(S,p,y,w),P=new q5(i,R,y,p,w);return function N5(n){const e=(0,O.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(P),P},"PUBLIC").setMultipleInstances(!0)),(0,Zt.registerVersion)(cO,"0.3.15"),(0,Zt.registerVersion)(cO,"0.3.15","esm2017")}();const eY="/firebase-messaging-sw.js",tY="/firebase-cloud-messaging-push-scope",sU="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oU="google.c.a.c_id",iY="google.c.a.c_l",rY="google.c.a.ts",sY="google.c.a.e";var w_=(()=>{return(n=w_||(w_={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",w_;var n})();function jc(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oY(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const mO="fcm_token_details_db",aU="fcm_token_object_Store";function lY(n){return gO.apply(this,arguments)}function gO(){return gO=(0,Z.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(mO))return null;let e=null;return(yield(0,y_.X3)(mO,5,{upgrade:(i=(0,Z.Z)(function*(r,s,l,d){var p;if(s<2||!r.objectStoreNames.contains(aU))return;const y=d.objectStore(aU),w=yield y.index("fcmSenderId").get(n);if(yield y.clear(),w)if(2===s){const D=w;if(!D.auth||!D.p256dh||!D.endpoint)return;e={token:D.fcmToken,createTime:null!==(p=D.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:D.auth,p256dh:D.p256dh,endpoint:D.endpoint,swScope:D.swScope,vapidKey:"string"==typeof D.vapidKey?D.vapidKey:jc(D.vapidKey)}}}else if(3===s){const D=w;e={token:D.fcmToken,createTime:D.createTime,subscriptionOptions:{auth:jc(D.auth),p256dh:jc(D.p256dh),endpoint:D.endpoint,swScope:D.swScope,vapidKey:jc(D.vapidKey)}}}else if(4===s){const D=w;e={token:D.fcmToken,createTime:D.createTime,subscriptionOptions:{auth:jc(D.auth),p256dh:jc(D.p256dh),endpoint:D.endpoint,swScope:D.swScope,vapidKey:jc(D.vapidKey)}}}}),function(s,l,d,p){return i.apply(this,arguments)})})).close(),yield(0,y_.Lj)(mO),yield(0,y_.Lj)("fcm_vapid_details_db"),yield(0,y_.Lj)("undefined"),cY(e)?e:null;var i}),gO.apply(this,arguments)}function cY(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const lp="firebase-messaging-store";let _O=null;function yO(){return _O||(_O=(0,y_.X3)("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(lp)}})),_O}function lU(n){return vO.apply(this,arguments)}function vO(){return(vO=(0,Z.Z)(function*(n){const e=EO(n),i=yield(yield yO()).transaction(lp).objectStore(lp).get(e);if(i)return i;{const r=yield lY(n.appConfig.senderId);if(r)return yield bO(n,r),r}})).apply(this,arguments)}function bO(n,e){return wO.apply(this,arguments)}function wO(){return(wO=(0,Z.Z)(function*(n,e){const t=EO(n),r=(yield yO()).transaction(lp,"readwrite");return yield r.objectStore(lp).put(e,t),yield r.done,e})).apply(this,arguments)}function hY(n){return CO.apply(this,arguments)}function CO(){return(CO=(0,Z.Z)(function*(n){const e=EO(n),i=(yield yO()).transaction(lp,"readwrite");yield i.objectStore(lp).delete(e),yield i.done})).apply(this,arguments)}function EO({appConfig:n}){return n.appId}const mr=new O.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pY(n,e){return DO.apply(this,arguments)}function DO(){return(DO=(0,Z.Z)(function*(n,e){var t;const i=yield AO(n),r=uU(e),s={method:"POST",headers:i,body:JSON.stringify(r)};let l;try{l=yield(yield fetch(TO(n.appConfig),s)).json()}catch(d){throw mr.create("token-subscribe-failed",{errorInfo:null===(t=d)||void 0===t?void 0:t.toString()})}if(l.error)throw mr.create("token-subscribe-failed",{errorInfo:l.error.message});if(!l.token)throw mr.create("token-subscribe-no-token");return l.token})).apply(this,arguments)}function mY(n,e){return IO.apply(this,arguments)}function IO(){return(IO=(0,Z.Z)(function*(n,e){var t;const i=yield AO(n),r=uU(e.subscriptionOptions),s={method:"PATCH",headers:i,body:JSON.stringify(r)};let l;try{l=yield(yield fetch(`${TO(n.appConfig)}/${e.token}`,s)).json()}catch(d){throw mr.create("token-update-failed",{errorInfo:null===(t=d)||void 0===t?void 0:t.toString()})}if(l.error)throw mr.create("token-update-failed",{errorInfo:l.error.message});if(!l.token)throw mr.create("token-update-no-token");return l.token})).apply(this,arguments)}function cU(n,e){return SO.apply(this,arguments)}function SO(){return(SO=(0,Z.Z)(function*(n,e){var t;const r={method:"DELETE",headers:yield AO(n)};try{const l=yield(yield fetch(`${TO(n.appConfig)}/${e}`,r)).json();if(l.error)throw mr.create("token-unsubscribe-failed",{errorInfo:l.error.message})}catch(s){throw mr.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}})).apply(this,arguments)}function TO({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function AO(n){return MO.apply(this,arguments)}function MO(){return(MO=(0,Z.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function uU({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const r={web:{endpoint:t,auth:e,p256dh:n}};return i!==sU&&(r.web.applicationPubKey=i),r}const gY=6048e5;function _Y(n){return xO.apply(this,arguments)}function xO(){return(xO=(0,Z.Z)(function*(n){const e=yield vY(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:jc(e.getKey("auth")),p256dh:jc(e.getKey("p256dh"))},i=yield lU(n.firebaseDependencies);if(i){if(bY(i.subscriptionOptions,t))return Date.now()>=i.createTime+gY?yY(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{yield cU(n.firebaseDependencies,i.token)}catch(r){console.warn(r)}return hU(n.firebaseDependencies,t)}return hU(n.firebaseDependencies,t)})).apply(this,arguments)}function dU(n){return RO.apply(this,arguments)}function RO(){return(RO=(0,Z.Z)(function*(n){const e=yield lU(n.firebaseDependencies);e&&(yield cU(n.firebaseDependencies,e.token),yield hY(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function yY(n,e){return kO.apply(this,arguments)}function kO(){return(kO=(0,Z.Z)(function*(n,e){try{const t=yield mY(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield bO(n.firebaseDependencies,i),t}catch(t){throw yield dU(n),t}})).apply(this,arguments)}function hU(n,e){return OO.apply(this,arguments)}function OO(){return(OO=(0,Z.Z)(function*(n,e){const i={token:yield pY(n,e),createTime:Date.now(),subscriptionOptions:e};return yield bO(n,i),i.token})).apply(this,arguments)}function vY(n,e){return PO.apply(this,arguments)}function PO(){return(PO=(0,Z.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oY(e)})})).apply(this,arguments)}function bY(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function fU(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function wY(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const r=e.notification.image;r&&(n.notification.image=r);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function CY(n,e){!e.data||(n.data=e.data)}(e,n),function EY(n,e){var t,i,r,s,l;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const d=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;d&&(n.fcmOptions.link=d);const p=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;p&&(n.fcmOptions.analyticsLabel=p)}(e,n),e}function DY(n){return"object"==typeof n&&!!n&&oU in n}function pU(n,e){const t=[];for(let i=0;i<n.length;i++)t.push(n.charAt(i)),i<e.length&&t.push(e.charAt(i));return t.join("")}function NO(n){return mr.create("missing-app-config-values",{valueName:n})}pU("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pU("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class SY{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function IY(n){if(!n||!n.options)throw NO("App Configuration Object");if(!n.name)throw NO("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw NO(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}function mU(n){return FO.apply(this,arguments)}function FO(){return(FO=(0,Z.Z)(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(eY,{scope:tY}),n.swRegistration.update().catch(()=>{})}catch(t){throw mr.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function TY(n,e){return LO.apply(this,arguments)}function LO(){return(LO=(0,Z.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield mU(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw mr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function AY(n,e){return BO.apply(this,arguments)}function BO(){return(BO=(0,Z.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=sU)})).apply(this,arguments)}function VO(){return(VO=(0,Z.Z)(function*(n,e){if(!navigator)throw mr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mr.create("permission-blocked");return yield AY(n,null==e?void 0:e.vapidKey),yield TY(n,null==e?void 0:e.serviceWorkerRegistration),_Y(n)})).apply(this,arguments)}function MY(n,e,t){return UO.apply(this,arguments)}function UO(){return(UO=(0,Z.Z)(function*(n,e,t){const i=xY(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[oU],message_name:t[iY],message_time:t[rY],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xY(n){switch(n){case w_.NOTIFICATION_CLICKED:return"notification_open";case w_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function HO(){return(HO=(0,Z.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===w_.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(fU(t)):n.onMessageHandler.next(fU(t)));const i=t.data;DY(i)&&"1"===i[sY]&&(yield MY(n,t.messageType,i))})).apply(this,arguments)}const _U="@firebase/messaging",kY=n=>{const e=new SY(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function RY(n,e){return HO.apply(this,arguments)}(e,t)),e},OY=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>function gU(n,e){return VO.apply(this,arguments)}(e,i)}};function vU(){return jO.apply(this,arguments)}function jO(){return(jO=(0,Z.Z)(function*(){try{yield(0,O.eu)()}catch(n){return!1}return"undefined"!=typeof window&&(0,O.hl)()&&(0,O.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function PY(){(0,Zt._registerComponent)(new Wi.wA("messaging",kY,"PUBLIC")),(0,Zt._registerComponent)(new Wi.wA("messaging-internal",OY,"PRIVATE")),(0,Zt.registerVersion)(_U,"0.11.0"),(0,Zt.registerVersion)(_U,"0.11.0","esm2017")}();const ES="analytics",LY="firebase_id",UY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bU="https://www.googletagmanager.com/gtag/js",gr=new Es.Yd("@firebase/analytics");function wU(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function HY(n,e){const t=document.createElement("script");t.src=`${bU}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function GY(n,e,t,i,r,s){return zO.apply(this,arguments)}function zO(){return(zO=(0,Z.Z)(function*(n,e,t,i,r,s){const l=i[r];try{if(l)yield e[l];else{const p=(yield wU(t)).find(y=>y.measurementId===r);p&&(yield e[p.appId])}}catch(d){gr.error(d)}n("config",r,s)})).apply(this,arguments)}function $Y(n,e,t,i,r){return qO.apply(this,arguments)}function qO(){return(qO=(0,Z.Z)(function*(n,e,t,i,r){try{let s=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const d=yield wU(t);for(const p of l){const y=d.find(D=>D.measurementId===p),w=y&&e[y.appId];if(!w){s=[];break}s.push(w)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){gr.error(s)}})).apply(this,arguments)}function WY(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(bU)&&t.src.includes(n))return t;return null}const to=new O.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),CU=new class QY{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function XY(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function JY(n){return WO.apply(this,arguments)}function WO(){return(WO=(0,Z.Z)(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:XY(i)},s=UY.replace("{app-id}",t),l=yield fetch(s,r);if(200!==l.status&&304!==l.status){let d="";try{const p=yield l.json();(null===(e=p.error)||void 0===e?void 0:e.message)&&(d=p.error.message)}catch(p){}throw to.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()})).apply(this,arguments)}function eK(n){return ZO.apply(this,arguments)}function ZO(){return(ZO=(0,Z.Z)(function*(n,e=CU,t){const{appId:i,apiKey:r,measurementId:s}=n.options;if(!i)throw to.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw to.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new iK;return setTimeout((0,Z.Z)(function*(){d.abort()}),void 0!==t?t:6e4),EU({appId:i,apiKey:r,measurementId:s},l,d,e)})).apply(this,arguments)}function EU(n,e,t){return YO.apply(this,arguments)}function YO(){return(YO=(0,Z.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=CU){var s,l;const{appId:d,measurementId:p}=n;try{yield tK(i,e)}catch(y){if(p)return gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${null===(s=y)||void 0===s?void 0:s.message}]`),{appId:d,measurementId:p};throw y}try{const y=yield JY(n);return r.deleteThrottleMetadata(d),y}catch(y){const w=y;if(!nK(w)){if(r.deleteThrottleMetadata(d),p)return gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${null==w?void 0:w.message}]`),{appId:d,measurementId:p};throw y}const D=503===Number(null===(l=null==w?void 0:w.customData)||void 0===l?void 0:l.httpStatus)?(0,O.$s)(t,r.intervalMillis,30):(0,O.$s)(t,r.intervalMillis),S={throttleEndTimeMillis:Date.now()+D,backoffCount:t+1};return r.setThrottleMetadata(d,S),gr.debug(`Calling attemptFetch again in ${D} millis`),EU(n,S,i,r)}})).apply(this,arguments)}function tK(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(to.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nK(n){if(!(n instanceof O.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class iK{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let KO,nP;function QO(){return(QO=(0,Z.Z)(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const s=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:s}))}})).apply(this,arguments)}function DU(n){nP=n}function IU(n){KO=n}function cK(){return iP.apply(this,arguments)}function iP(){return(iP=(0,Z.Z)(function*(){var n;if(!(0,O.hl)())return gr.warn(to.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,O.eu)()}catch(e){return gr.warn(to.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function rP(){return(rP=(0,Z.Z)(function*(n,e,t,i,r,s,l){var d;const p=eK(n);p.then(R=>{t[R.measurementId]=R.appId,n.options.measurementId&&R.measurementId!==n.options.measurementId&&gr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>gr.error(R)),e.push(p);const y=cK().then(R=>{if(R)return i.getId()}),[w,D]=yield Promise.all([p,y]);WY(s)||HY(s,w.measurementId),nP&&(r("consent","default",nP),DU(void 0)),r("js",new Date);const S=null!==(d=null==l?void 0:l.config)&&void 0!==d?d:{};return S.origin="firebase",S.update=!0,null!=D&&(S[LY]=D),r("config",w.measurementId,S),KO&&(r("set",KO),IU(void 0)),w.measurementId})).apply(this,arguments)}class dK{constructor(e){this.app=e}_delete(){return delete Gc[this.app.options.appId],Promise.resolve()}}let Gc={},SU=[];const TU={};let MU,$c,DS="dataLayer",sP=!1;function fK(n,e,t){!function hK(){const n=[];if((0,O.ru)()&&n.push("This is a browser extension environment."),(0,O.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=to.create("invalid-analytics-context",{errorInfo:e});gr.warn(t.message)}}();const i=n.options.appId;if(!i)throw to.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw to.create("no-api-key");gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gc[i])throw to.create("already-exists",{id:i});if(!sP){!function jY(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(DS);const{wrappedGtag:s,gtagCore:l}=function qY(n,e,t,i,r){let s=function(...l){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function zY(n,e,t,i){function s(){return(s=(0,Z.Z)(function*(l,d,p){try{"event"===l?yield $Y(n,e,t,d,p):"config"===l?yield GY(n,e,t,i,d,p):"consent"===l?n("consent","update",p):n("set",d)}catch(y){gr.error(y)}})).apply(this,arguments)}return function r(l,d,p){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}(Gc,SU,TU,DS,"gtag");$c=s,MU=l,sP=!0}return Gc[i]=function uK(n,e,t,i,r,s,l){return rP.apply(this,arguments)}(n,SU,TU,e,MU,DS,t),new dK(n)}function mK(){return oP.apply(this,arguments)}function oP(){return(oP=(0,Z.Z)(function*(){if((0,O.ru)()||!(0,O.zI)()||!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(n){return!1}})).apply(this,arguments)}const xU="@firebase/analytics";!function _K(){(0,Zt._registerComponent)(new Wi.wA(ES,(e,{options:t})=>fK(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,Zt._registerComponent)(new Wi.wA("analytics-internal",function n(e){try{const t=e.getProvider(ES).getImmediate();return{logEvent:(i,r,s)=>function gK(n,e,t,i){n=(0,O.m9)(n),function rK(n,e,t,i,r){return QO.apply(this,arguments)}($c,Gc[n.app.options.appId],e,t,i).catch(r=>gr.error(r))}(t,i,r,s)}}catch(t){throw to.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,Zt.registerVersion)(xU,"0.8.4"),(0,Zt.registerVersion)(xU,"0.8.4","esm2017")}();const bK=new class vK extends lb{}(class yK extends Mf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),IS=new u.GfV("7.5.0"),aP="__angularfire_symbol__analyticsIsSupportedValue",lP="__angularfire_symbol__analyticsIsSupported",cP="__angularfire_symbol__remoteConfigIsSupportedValue",uP="__angularfire_symbol__remoteConfigIsSupported",dP="__angularfire_symbol__messagingIsSupportedValue",hP="__angularfire_symbol__messagingIsSupported";function C_(){}globalThis[lP]||(globalThis[lP]=mK().then(n=>globalThis[aP]=n).catch(()=>globalThis[aP]=!1)),globalThis[hP]||(globalThis[hP]=vU().then(n=>globalThis[dP]=n).catch(()=>globalThis[dP]=!1)),globalThis[uP]||(globalThis[uP]=J5().then(n=>globalThis[cP]=n).catch(()=>globalThis[cP]=!1));class kU{constructor(e,t=bK){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(l){r.runGuarded(()=>{e.apply(this,[l])})},t,i)}}class EK{constructor(e){this.zone=e,this.task=null}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",C_,{},C_,C_)),t.pipe(gi({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let SS=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new kU(Zone.current)),this.insideAngular=t.run(()=>new kU(Zone.current,Ac)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cp(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function OU(n){return n.pipe((0,__.Q)(cp().outsideAngular))}function yi(n){return cp(),function IK(n){return function(t){return(t=t.lift(new EK(n.ngZone))).pipe((0,vS.R)(n.outsideAngular),(0,__.Q)(n.insideAngular))}}(cp())(n)}var Zi=F(2011);const mP=new Map,PU={activated:!1,tokenObservers:[]},RK={initialized:!1,enabled:!1};function _r(n){return mP.get(n)||Object.assign({},PU)}function AS(){return RK}class LK{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Z.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function BK(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const es=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function FU(n){if(!_r(n).activated)throw es.create("use-before-activation",{appName:n.name})}function yP(n,e){return vP.apply(this,arguments)}function vP(){return(vP=(0,Z.Z)(function*({url:n,body:e},t){var i,r;const s={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const R=yield l.getHeartbeatsHeader();R&&(s["X-Firebase-Client"]=R)}const d={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,d)}catch(R){throw es.create("fetch-network-error",{originalErrorMessage:null===(i=R)||void 0===i?void 0:i.message})}if(200!==p.status)throw es.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(R){throw es.create("fetch-parse-error",{originalErrorMessage:null===(r=R)||void 0===r?void 0:r.message})}const w=y.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw es.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(w[1]),S=Date.now();return{token:y.token,expireTimeMillis:S+D,issuedAtTimeMillis:S}})).apply(this,arguments)}function jK(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Iw="firebase-app-check-store";let RS=null;function BU(){return RS||(RS=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;e(es.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Iw,{keyPath:"compositeKey"})}}catch(i){e(es.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),RS)}function bP(){return(bP=(0,Z.Z)(function*(n,e){const i=(yield BU()).transaction(Iw,"readwrite"),s=i.objectStore(Iw).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=p=>{l()},i.onerror=p=>{var y;d(es.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Sw=new Es.Yd("@firebase/app-check");function EP(n,e){return(0,O.hl)()?function qK(n,e){return function VU(n,e){return bP.apply(this,arguments)}(function HU(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Sw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jU(){return AS().enabled}function GU(){return IP.apply(this,arguments)}function IP(){return(IP=(0,Z.Z)(function*(){const n=AS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const XK={error:"UNKNOWN_ERROR"};function JK(n){return O.US.encodeString(JSON.stringify(n),!1)}function kS(n){return SP.apply(this,arguments)}function SP(){return(SP=(0,Z.Z)(function*(n,e=!1){const t=n.app;FU(t);const i=_r(t);let s,r=i.token;if(r&&!E_(r)&&(i.token=void 0,r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(E_(p)?r=p:yield EP(t,void 0))}if(!e&&r&&E_(r))return{token:r.token};let d,l=!1;if(jU()){i.exchangeTokenPromise||(i.exchangeTokenPromise=yP(jK(t,yield GU()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const p=yield i.exchangeTokenPromise;return yield EP(t,p),i.token=p,{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=yield _r(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Sw.warn(p.message):Sw.error(p),s=p}return r?s?d=E_(r)?{token:r.token,internalError:s}:qU(s):(d={token:r.token},i.token=r,yield EP(t,r)):d=qU(s),l&&zU(t,d),d})).apply(this,arguments)}function AP(n,e){const t=_r(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function $U(n){const{app:e}=n,t=_r(e);let i=t.tokenRefresher;i||(i=function e7(n){const{app:e}=n;return new LK((0,Z.Z)(function*(){let i;if(i=_r(e).token?yield kS(n,!0):yield kS(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=_r(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function zU(n,e){const t=_r(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function E_(n){return n.expireTimeMillis-Date.now()>0}function qU(n){return{token:JK(XK),error:n}}class t7{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_r(this.app);for(const t of e)AP(this.app,t.next);return Promise.resolve()}}const eH="app-check-internal";!function g7(){(0,Zt._registerComponent)(new Wi.wA("app-check",n=>function n7(n,e){return new t7(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eH).initialize()})),(0,Zt._registerComponent)(new Wi.wA(eH,n=>function r7(n){return{getToken:e=>kS(n,e),addTokenListener:e=>function TP(n,e,t,i){const{app:r}=n,s=_r(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&E_(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),$U(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>$U(n))}(n,"INTERNAL",e),removeTokenListener:e=>AP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zt.registerVersion)("@firebase/app-check","0.5.17")}();class Tw{constructor(){return((n,e)=>{const t=(0,Zt.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider("app-check").instances.forEach(l=>{i.includes(l)||i.push(l)})}),i})()}}"undefined"!=typeof window&&window;var PS=F(127);const OP=new u.OlP("angularfire2.auth.use-emulator"),PP=new u.OlP("angularfire2.auth.settings"),NP=new u.OlP("angularfire2.auth.tenant-id"),FP=new u.OlP("angularfire2.auth.langugage-code"),LP=new u.OlP("angularfire2.auth.use-device-language"),BP=new u.OlP("angularfire.auth.persistence"),VP=(n,e,t,i,r,s,l,d)=>(0,Zi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),l)for(const[y,w]of Object.entries(l))p.settings[y]=w;return d&&p.setPersistence(d),p},[t,i,r,s,l,d]);let NS=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,S,R){const P=new Mt.x,H=Ye(void 0).pipe((0,__.Q)(l.outsideAngular),vn(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1277)))),(0,lt.U)(()=>(0,Zi.on)(t,s,i)),(0,lt.U)(Y=>VP(Y,s,d,y,w,D,p,S)),F2({bufferSize:1,refCount:!1}));if(Wa(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ye(null);else{H.pipe(nl()).subscribe();const Ce=H.pipe(vn(Re=>Re.getRedirectResult().then(Xe=>Xe,()=>null)),yi,F2({bufferSize:1,refCount:!1})),Pe=H.pipe(vn(Re=>new cn.y(Xe=>({unsubscribe:s.runOutsideAngular(()=>Re.onAuthStateChanged(rt=>Xe.next(rt),rt=>Xe.error(rt),()=>Xe.complete()))})))),xe=H.pipe(vn(Re=>new cn.y(Xe=>({unsubscribe:s.runOutsideAngular(()=>Re.onIdTokenChanged(rt=>Xe.next(rt),rt=>Xe.error(rt),()=>Xe.complete()))}))));this.authState=Ce.pipe(L2(Pe),(0,vS.R)(l.outsideAngular),(0,__.Q)(l.insideAngular)),this.user=Ce.pipe(L2(xe),(0,vS.R)(l.outsideAngular),(0,__.Q)(l.insideAngular)),this.idToken=this.user.pipe(vn(Re=>Re?(0,fn.D)(Re.getIdToken()):Ye(null))),this.idTokenResult=this.user.pipe(vn(Re=>Re?(0,fn.D)(Re.getIdTokenResult()):Ye(null))),this.credential=(0,kr.T)(Ce,P,this.authState.pipe(kn(Re=>!Re))).pipe((0,lt.U)(Re=>(null==Re?void 0:Re.user)?Re:null),(0,vS.R)(l.outsideAngular),(0,__.Q)(l.insideAngular))}return(0,Zi.pX)(this,H,s,{spy:{apply:(Y,Ce,Pe)=>{(Y.startsWith("signIn")||Y.startsWith("createUser"))&&Pe.then(xe=>P.next(xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zi.Dh),u.LFG(Zi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(SS),u.LFG(OP,8),u.LFG(PP,8),u.LFG(NP,8),u.LFG(FP,8),u.LFG(LP,8),u.LFG(BP,8),u.LFG(Tw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),C7=(()=>{class n{constructor(){PS.Z.registerVersion("angularfire",IS.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[NS]}),n})();var UP=F(3942);const nH="firebasestorage.googleapis.com",iH="storageBucket";class Xn extends O.ZR{constructor(e,t,i=0){super(HP(e),`Firebase Storage: ${t} (${HP(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return HP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function HP(n){return"storage/"+n}function jP(){return new Xn("unknown","An unknown error occurred, please check the error payload for server response.")}function rH(){return new Xn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function sH(){return new Xn("canceled","User canceled the upload/download.")}function oH(){return new Xn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function D_(n){return new Xn("invalid-argument",n)}function aH(){return new Xn("app-deleted","The Firebase app was deleted.")}function lH(n){return new Xn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Aw(n,e){return new Xn("invalid-format","String does not match format '"+n+"': "+e)}function Mw(n){throw new Xn("internal-error","Internal error: "+n)}class Or{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Or.makeFromUrl(e,t)}catch(r){return new Or(e,"")}if(""===i.path)return i;throw function k7(n){return new Xn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Re){Re.path_=decodeURIComponent(Re.path)}const D=t.replace(/[.]/g,"\\."),xe=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Re){"/"===Re.path.charAt(Re.path.length-1)&&(Re.path_=Re.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===nH?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Re=0;Re<xe.length;Re++){const Xe=xe[Re],rt=Xe.regex.exec(e);if(rt){let wi=rt[Xe.indices.path];wi||(wi=""),i=new Or(rt[Xe.indices.bucket],wi),Xe.postModify(i);break}}if(null==i)throw function R7(n){return new Xn("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class L7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function FS(n){return"string"==typeof n||n instanceof String}function cH(n){return GP()&&n instanceof Blob}function GP(){return"undefined"!=typeof Blob&&!(0,O.UG)()}function $P(n,e,t,i){if(i<e)throw D_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw D_(`Invalid value for '${n}'. Expected ${t} or less.`)}function zc(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function uH(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var bd=(()=>{return(n=bd||(bd={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",bd;var n})();function dH(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class G7{constructor(e,t,i,r,s,l,d,p,y,w,D,S=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=D,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,l=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function U7(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=jP();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(r.canceled?this.appDelete_?aH():sH():rH())};this.canceled_?t(0,new LS(!1,null,!0)):this.backoffId_=function B7(n,e,t){let i=1,r=null,s=null,l=!1,d=0;function p(){return 2===d}let y=!1;function w(...Y){y||(y=!0,e.apply(null,Y))}function D(Y){r=setTimeout(()=>{r=null,n(R,p())},Y)}function S(){s&&clearTimeout(s)}function R(Y,...Ce){if(y)return void S();if(Y)return S(),void w.call(null,Y,...Ce);if(p()||l)return S(),void w.call(null,Y,...Ce);let xe;i<64&&(i*=2),1===d?(d=2,xe=0):xe=1e3*(i+Math.random()),D(xe)}let P=!1;function H(Y){P||(P=!0,S(),!y&&(null!==r?(Y||(d=2),clearTimeout(r),D(0)):Y||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,H(!0)},t),H}((i,r)=>{if(r)return void i(!1,new LS(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===bd.NO_ERROR,p=s.getStatus();if((!d||dH(p,this.additionalRetryCodes_))&&this.retry){const w=s.getErrorCode()===bd.ABORT;return void i(!1,new LS(!1,null,w))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new LS(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function V7(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class LS{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function K7(...n){const e=function Y7(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(GP())return new Blob(n);throw new Xn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const no={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zP{constructor(e,t){this.data=e,this.contentType=t||null}}function qP(n,e){switch(n){case no.RAW:return new zP(hH(e));case no.BASE64:case no.BASE64URL:return new zP(fH(n,e));case no.DATA_URL:return new zP(function eQ(n){const e=new pH(n);return e.base64?fH(no.BASE64,e.rest):function J7(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Aw(no.DATA_URL,"Malformed data URL.")}return hH(e)}(e.rest)}(e),function tQ(n){return new pH(n).contentType}(e))}throw jP()}function hH(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function fH(n,e){switch(n){case no.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Aw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case no.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Aw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function X7(n){if("undefined"==typeof atob)throw function F7(n){return new Xn("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:Aw(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class pH{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Aw(no.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function nQ(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class xl{constructor(e,t){let i=0,r="";cH(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(cH(this.data_)){const r=function Q7(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new xl(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new xl(i,!0)}}static getBlob(...e){if(GP()){const t=e.map(i=>i instanceof xl?i.data_:i);return new xl(K7.apply(null,t))}{const t=e.map(l=>FS(l)?qP(no.RAW,l).data:l.data_);let i=0;t.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)r[s++]=l[d]}),new xl(r,!0)}}uploadData(){return this.data_}}function WP(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function j7(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function mH(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function sQ(n,e){return e}class ts{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||sQ}}let BS=null;function xw(){if(BS)return BS;const n=[];n.push(new ts("bucket")),n.push(new ts("generation")),n.push(new ts("metageneration")),n.push(new ts("name","fullPath",!0));const t=new ts("name");t.xform=function e(s,l){return function oQ(n){return!FS(n)||n.length<2?n:mH(n)}(l)},n.push(t);const r=new ts("size");return r.xform=function i(s,l){return void 0!==l?Number(l):l},n.push(r),n.push(new ts("timeCreated")),n.push(new ts("updated")),n.push(new ts("md5Hash",null,!0)),n.push(new ts("cacheControl",null,!0)),n.push(new ts("contentDisposition",null,!0)),n.push(new ts("contentEncoding",null,!0)),n.push(new ts("contentLanguage",null,!0)),n.push(new ts("contentType",null,!0)),n.push(new ts("metadata","customMetadata",!0)),BS=n,BS}function gH(n,e,t){const i=WP(e);return null===i?null:function lQ(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const l=t[s];i[l.local]=l.xform(i,e[l.server])}return function aQ(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Or(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function ZP(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const _H="prefixes";class Rl{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kl(n){if(!n)throw jP()}function VS(n,e){return function t(i,r){const s=gH(n,r,e);return kl(null!==s),s}}function I_(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function M7(){return new Xn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function A7(){return new Xn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function T7(n){return new Xn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function x7(n){return new Xn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function Rw(n){const e=I_(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function S7(n){return new Xn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function vH(n,e,t){const r=zc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Rl(r,"GET",VS(n,t),l);return d.errorHandler=Rw(e),d}function pQ(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=zc(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new Rl(d,"GET",function hQ(n,e){return function t(i,r){const s=function dQ(n,e,t){const i=WP(t);return null===i?null:function uQ(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[_H])for(const r of t[_H]){const s=r.replace(/\/$/,""),l=n._makeStorageReference(new Or(e,s));i.prefixes.push(l)}if(t.items)for(const r of t.items){const s=n._makeStorageReference(new Or(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return kl(null!==s),s}}(n,e.bucket),y);return w.urlParams=s,w.errorHandler=I_(e),w}function wH(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function yQ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class US{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function YP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){kl(!1)}return kl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const CQ={STATE_CHANGED:"state_changed"},ns={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KP(n){switch(n){case"running":case"pausing":case"canceling":return ns.RUNNING;case"paused":return ns.PAUSED;case"success":return ns.SUCCESS;case"canceled":return ns.CANCELED;default:return ns.ERROR}}class EQ{constructor(e,t,i){if(function H7(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function S_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class IQ extends class DQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Mw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Mw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Pa(){return new IQ}class IH{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=xw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(dH(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=rH()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function vQ(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),l=wH(e,i,r),d={name:l.fullPath},p=zc(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=ZP(l,t),P=new Rl(p,"POST",function R(H){let Y;YP(H);try{Y=H.getResponseHeader("X-Goog-Upload-URL")}catch(Ce){kl(!1)}return kl(FS(Y)),Y},n.maxUploadRetryTime);return P.urlParams=d,P.headers=w,P.body=D,P.errorHandler=I_(e),P}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Pa,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function bQ(n,e,t,i){const p=new Rl(t,"POST",function s(y){const w=YP(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(R){kl(!1)}D||kl(!1);const S=Number(D);return kl(!isNaN(S)),new US(S,i.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=I_(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Pa,t,i);this._request=s,s.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new US(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let l;try{l=function wQ(n,e,t,i,r,s,l,d){const p=new US(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function P7(){return new Xn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let w=y;r>0&&(w=Math.min(w,r));const D=p.current;let R="";R=0===w?"finalize":y===w?"upload, finalize":"upload";const P={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${p.current}`},H=i.slice(D,D+w);if(null===H)throw oH();const xe=new Rl(t,"POST",function Y(Re,Xe){const rt=YP(Re,["active","final"]),jt=p.current+w,wi=i.size();let lo;return lo="final"===rt?VS(e,s)(Re,Xe):null,new US(jt,wi,"final"===rt,lo)},e.maxUploadRetryTime);return xe.headers=P,xe.body=H.uploadData(),xe.progressCallback=d||null,xe.errorHandler=I_(n),xe}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Pa,r,s,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=vH(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Pa,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function CH(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let xe="";for(let Re=0;Re<2;Re++)xe+=Math.random().toString().slice(2);return xe}();l["Content-Type"]="multipart/related; boundary="+p;const y=wH(e,i,r),w=ZP(y,t),R=xl.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===R)throw oH();const P={name:y.fullPath},H=zc(s,n.host,n._protocol),Ce=n.maxUploadRetryTime,Pe=new Rl(H,"POST",VS(n,t),Ce);return Pe.urlParams=P,Pe.headers=l,Pe.body=R.uploadData(),Pe.errorHandler=I_(e),Pe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Pa,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=sH(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=KP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new EQ(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(KP(this._state)){case ns.SUCCESS:S_(this._resolve.bind(null,this.snapshot))();break;case ns.CANCELED:case ns.ERROR:S_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(KP(this._state)){case ns.RUNNING:case ns.PAUSED:e.next&&S_(e.next.bind(e,this.snapshot))();break;case ns.SUCCESS:e.complete&&S_(e.complete.bind(e))();break;default:e.error&&S_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class dp{constructor(e,t){this._service=e,this._location=t instanceof Or?t:Or.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new dp(e,t)}get root(){const e=new Or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mH(this._location.path)}get storage(){return this._service}get parent(){const e=function iQ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Or(this._location.bucket,e);return new dp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw lH(e)}}function TH(n,e,t){return QP.apply(this,arguments)}function QP(){return(QP=(0,Z.Z)(function*(n,e,t){const r=yield AH(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield TH(n,e,r.nextPageToken))})).apply(this,arguments)}function AH(n,e){null!=e&&"number"==typeof e.maxResults&&$P("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=pQ(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Pa)}function LQ(n){n._throwIfRoot("getDownloadURL");const e=function mQ(n,e,t){const r=zc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Rl(r,"GET",function fQ(n,e){return function t(i,r){const s=gH(n,r,e);return kl(null!==s),function cQ(n,e,t,i){const r=WP(e);if(null===r||!FS(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return zc("/b/"+l(n.bucket)+"/o/"+l(D),t,i)+uH({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,t),l);return d.errorHandler=Rw(e),d}(n.storage,n._location,xw());return n.storage.makeRequestWithTokens(e,Pa).then(t=>{if(null===t)throw function N7(){return new Xn("no-download-url","The given file does not have any download URLs.")}();return t})}function MH(n,e){const t=function rQ(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Or(n._location.bucket,t);return new dp(n.storage,i)}function xH(n,e){if(n instanceof XP){const t=n;if(null==t._bucket)throw function O7(){return new Xn("no-default-bucket","No default bucket found. Did you set the '"+iH+"' property when initializing the app?")}();const i=new dp(t,t._bucket);return null!=e?xH(i,e):i}return void 0!==e?MH(n,e):n}function HQ(n,e){if(e&&function VQ(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof XP)return function UQ(n,e){return new dp(n,e)}(n,e);throw D_("To use ref(service, url), the first argument must be a Storage instance.")}return xH(n,e)}function RH(n,e){const t=null==e?void 0:e[iH];return null==t?null:Or.makeFromBucketSpec(t,n)}class XP{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=nH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Or.makeFromBucketSpec(r,this._host):RH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Or.makeFromBucketSpec(this._url,e):RH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$P("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$P("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Z.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Z.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dp(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new L7(aH());{const l=function Z7(n,e,t,i,r,s,l=!0){const d=uH(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function q7(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function $7(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function z7(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,s),function W7(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,i),new G7(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,l)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var i=this;return(0,Z.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const kH="@firebase/storage";function NH(n,e){return HQ(n=(0,O.m9)(n),e)}function QQ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new XP(t,i,r,e,Zt.SDK_VERSION)}!function XQ(){(0,Zt._registerComponent)(new Wi.wA("storage",QQ,"PUBLIC").setMultipleInstances(!0)),(0,Zt.registerVersion)(kH,"0.9.14",""),(0,Zt.registerVersion)(kH,"0.9.14","esm2017")}();class HS{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class LH{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new HS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new HS(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?l=>t(new HS(l,this,this._ref)):{next:t.next?l=>t.next(new HS(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class BH{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new qc(e,this._service))}get items(){return this._delegate.items.map(e=>new qc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class qc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function KQ(n,e){return MH(n,e)}(this._delegate,e);return new qc(t,this.storage)}get root(){return new qc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new qc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new LH(function GQ(n,e,t){return function kQ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new IH(n,new xl(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=no.RAW,i){this._throwIfRoot("putString");const r=qP(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new LH(new IH(this._delegate,new xl(r.data,!0),s),this)}listAll(){return function WQ(n){return function PQ(n){const e={prefixes:[],items:[]};return TH(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new BH(e,this.storage))}list(e){return function qQ(n,e){return AH(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new BH(t,this.storage))}getMetadata(){return function $Q(n){return function NQ(n){n._throwIfRoot("getMetadata");const e=vH(n.storage,n._location,xw());return n.storage.makeRequestWithTokens(e,Pa)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function zQ(n,e){return function FQ(n,e){n._throwIfRoot("updateMetadata");const t=function gQ(n,e,t,i){const s=zc(e.fullServerUrl(),n.host,n._protocol),d=ZP(t,i),y=n.maxOperationRetryTime,w=new Rl(s,"PATCH",VS(n,i),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=Rw(e),w}(n.storage,n._location,e,xw());return n.storage.makeRequestWithTokens(t,Pa)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ZQ(n){return LQ(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function YQ(n){return function BQ(n){n._throwIfRoot("deleteObject");const e=function _Q(n,e){const i=zc(e.fullServerUrl(),n.host,n._protocol),d=new Rl(i,"DELETE",function l(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Rw(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Pa)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw lH(e)}}class VH{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UH(e))throw D_("ref() expected a child path but got a URL, use refFromURL instead.");return new qc(NH(this._delegate,e),this)}refFromURL(e){if(!UH(e))throw D_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Or.makeFromUrl(e,this._delegate.host)}catch(t){throw D_("refFromUrl() expected a valid full URL but got an invalid one.")}return new qc(NH(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function FH(n,e,t,i={}){!function jQ(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,O.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function UH(n){return/^[A-Za-z]+:\/\//.test(n)}function n9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new VH(t,i)}function HH(n){const e=function r9(n){return new cn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(Tg(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,lt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function jS(n){return{getDownloadURL:()=>Ye(void 0).pipe(OU,vn(()=>n.getDownloadURL()),yi),getMetadata:()=>Ye(void 0).pipe(OU,vn(()=>n.getMetadata()),yi),delete:()=>(0,fn.D)(n.delete()),child:e=>jS(n.child(e)),updateMetadata:e=>(0,fn.D)(n.updateMetadata(e)),put:(e,t)=>HH(n.put(e,t)),putString:(e,t,i)=>HH(n.putString(e,t,i)),list:e=>(0,fn.D)(n.list(e)),listAll:()=>(0,fn.D)(n.listAll())}}!function i9(n){const e={TaskState:ns,TaskEvent:CQ,StringFormat:no,Storage:VH,Reference:qc};n.INTERNAL.registerComponent(new Wi.wA("storage-compat",n9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(UP.Z);const s9=new u.OlP("angularfire2.storageBucket"),o9=new u.OlP("angularfire2.storage.maxUploadRetryTime"),a9=new u.OlP("angularfire2.storage.maxOperationRetryTime"),l9=new u.OlP("angularfire2.storage.use-emulator");let c9=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D){const S=(0,Zi.on)(t,l,i);this.storage=(0,Zi.cc)(`${S.name}.storage.${r}`,"AngularFireStorage",S.name,()=>{const R=l.runOutsideAngular(()=>S.storage(r||void 0)),P=w;return P&&R.useEmulator(...P),p&&R.setMaxUploadRetryTime(p),y&&R.setMaxOperationRetryTime(y),R},[p,y])}ref(t){return jS(this.storage.ref(t))}refFromURL(t){return jS(this.storage.refFromURL(t))}upload(t,i,r){return jS(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zi.Dh),u.LFG(Zi.xv,8),u.LFG(s9,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(SS),u.LFG(o9,8),u.LFG(a9,8),u.LFG(l9,8),u.LFG(Tw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),u9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),d9=(()=>{class n{constructor(){PS.Z.registerVersion("angularfire",IS.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[c9],imports:[u9]}),n})();function JP(){return(0,Rn.e)((n,e)=>{let t,i=!1;n.subscribe((0,sn.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}F(1277);var ot,h9="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wc={},eN=eN||{},Tt=h9||self;function GS(){}function $S(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var tN="closure_uid_"+(1e9*Math.random()>>>0),p9=0;function m9(n,e,t){return n.call.apply(n.bind,arguments)}function g9(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Pr(n,e,t){return(Pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m9:g9).apply(null,arguments)}function zS(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function yr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[r].apply(i,l)}}function wd(){this.s=this.s,this.o=this.o}wd.prototype.s=!1,wd.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function f9(n){Object.prototype.hasOwnProperty.call(n,tN)&&n[tN]||(n[tN]=++p9)}(this)},wd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jH=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nN(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function GH(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if($S(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let l=0;l<s;l++)n[r+l]=i[l]}else n.push(i)}}function Nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Nr.prototype.h=function(){this.defaultPrevented=!0};var y9=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",GS,e),Tt.removeEventListener("test",GS,e)}catch(t){}return n}();function qS(n){return/^[\s\xa0]*$/.test(n)}var $H=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function iN(n,e){return n<e?-1:n>e?1:0}function WS(){var n=Tt.navigator;return n&&(n=n.userAgent)?n:""}function Ol(n){return-1!=WS().indexOf(n)}function rN(n){return rN[" "](n),n}rN[" "]=GS;var ZS,n,b9=Ol("Opera"),T_=Ol("Trident")||Ol("MSIE"),zH=Ol("Edge"),sN=zH||T_,qH=Ol("Gecko")&&!(-1!=WS().toLowerCase().indexOf("webkit")&&!Ol("Edge"))&&!(Ol("Trident")||Ol("MSIE"))&&!Ol("Edge"),w9=-1!=WS().toLowerCase().indexOf("webkit")&&!Ol("Edge");function WH(){var n=Tt.document;return n?n.documentMode:void 0}e:{var oN="",aN=(n=WS(),qH?/rv:([^\);]+)(\)|;)/.exec(n):zH?/Edge\/([\d\.]+)/.exec(n):T_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):w9?/WebKit\/(\S+)/.exec(n):b9?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(aN&&(oN=aN?aN[1]:""),T_){var lN=WH();if(null!=lN&&lN>parseFloat(oN)){ZS=String(lN);break e}}ZS=oN}var C9={};var D9=Tt.document&&T_&&(WH()||parseInt(ZS,10))||void 0;function Ow(n,e){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qH){e:{try{rN(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:I9[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ow.X.h.call(this)}}yr(Ow,Nr);var I9={2:"touch",3:"pen",4:"mouse"};Ow.prototype.h=function(){Ow.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pw="closure_listenable_"+(1e6*Math.random()|0),S9=0;function T9(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++S9,this.ba=this.ea=!1}function YS(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function uN(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function YH(n){const e={};for(const t in n)e[t]=n[t];return e}const KH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QH(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<KH.length;s++)t=KH[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function KS(n){this.src=n,this.g={},this.h=0}function dN(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=jH(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(YS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hN(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==i)return r}return-1}KS.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=hN(n,e,i,r);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new T9(e,this.src,s,!!i,r)).ea=t,n.push(e)),e};var fN="closure_lm_"+(1e6*Math.random()|0),pN={};function XH(n,e,t,i,r){if(i&&i.once)return ej(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)XH(n,e[s],t,i,r);return null}return t=yN(t),n&&n[Pw]?n.N(e,t,kw(i)?!!i.capture:!!i,r):JH(n,e,t,!1,i,r)}function JH(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var l=kw(r)?!!r.capture:!!r,d=gN(n);if(d||(n[fN]=d=new KS(n)),(t=d.add(e,t,i,l,s)).proxy)return t;if(i=function A9(){const e=M9;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)y9||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(nj(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function ej(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ej(n,e[s],t,i,r);return null}return t=yN(t),n&&n[Pw]?n.O(e,t,kw(i)?!!i.capture:!!i,r):JH(n,e,t,!0,i,r)}function tj(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)tj(n,e[s],t,i,r);else i=kw(i)?!!i.capture:!!i,t=yN(t),n&&n[Pw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hN(s=n.g[e],t,i,r))&&(YS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=gN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hN(e,t,i,r)),(t=-1<n?e[n]:null)&&mN(t))}function mN(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Pw])dN(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(nj(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=gN(e))?(dN(t,n),0==t.h&&(t.src=null,e[fN]=null)):YS(n)}}}function nj(n){return n in pN?pN[n]:pN[n]="on"+n}function M9(n,e){if(n.ba)n=!0;else{e=new Ow(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&mN(n),n=t.call(i,e)}return n}function gN(n){return(n=n[fN])instanceof KS?n:null}var _N="__closure_events_fn_"+(1e9*Math.random()>>>0);function yN(n){return"function"==typeof n?n:(n[_N]||(n[_N]=function(e){return n.handleEvent(e)}),n[_N])}function Yi(){wd.call(this),this.i=new KS(this),this.P=this,this.I=null}function vr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Nr(e,n);else if(e instanceof Nr)e.target=e.target||n;else{var r=e;QH(e=new Nr(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];r=QS(l,i,!0,e)&&r}if(r=QS(l=e.g=n,i,!0,e)&&r,r=QS(l,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=QS(l=e.g=t[s],i,!1,e)&&r}function QS(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ba&&l.capture==t){var d=l.listener,p=l.ha||l.src;l.ea&&dN(n.i,l),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}yr(Yi,wd),Yi.prototype[Pw]=!0,Yi.prototype.removeEventListener=function(n,e,t,i){tj(this,n,e,t,i)},Yi.prototype.M=function(){if(Yi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)YS(t[i]);delete n.g[e],n.h--}}this.I=null},Yi.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Yi.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var vN=Tt.JSON.stringify;function x9(){var n=sj;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bN,ij=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new k9,n=>n.reset());class k9{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function O9(n){Tt.setTimeout(()=>{throw n},0)}function rj(n,e){bN||function P9(){var n=Tt.Promise.resolve(void 0);bN=function(){n.then(N9)}}(),wN||(bN(),wN=!0),sj.add(n,e)}var wN=!1,sj=new class R9{constructor(){this.h=this.g=null}add(e,t){const i=ij.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function N9(){for(var n;n=x9();){try{n.h.call(n.g)}catch(t){O9(t)}var e=ij;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}wN=!1}function XS(n,e){Yi.call(this),this.h=n||1,this.g=e||Tt,this.j=Pr(this.lb,this),this.l=Date.now()}function CN(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function EN(n,e,t){if("function"==typeof n)t&&(n=Pr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Pr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function oj(n){n.g=EN(()=>{n.g=null,n.i&&(n.i=!1,oj(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}yr(XS,Yi),(ot=XS.prototype).ca=!1,ot.R=null,ot.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vr(this,"tick"),this.ca&&(CN(this),this.start()))}},ot.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){XS.X.M.call(this),CN(this),delete this.g};class F9 extends wd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oj(this)}M(){super.M(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nw(n){wd.call(this),this.h=n,this.g={}}yr(Nw,wd);var aj=[];function lj(n,e,t,i){Array.isArray(t)||(t&&(aj[0]=t.toString()),t=aj);for(var r=0;r<t.length;r++){var s=XH(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function cj(n){uN(n.g,function(e,t){this.g.hasOwnProperty(t)&&mN(e)},n),n.g={}}function JS(){this.g=!0}function A_(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function U9(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return vN(t)}catch(d){return e}}(n,t)+(i?" "+i:"")})}Nw.prototype.M=function(){Nw.X.M.call(this),cj(this)},Nw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},JS.prototype.Aa=function(){this.g=!1},JS.prototype.info=function(){};var hp={},uj=null;function eT(){return uj=uj||new Yi}function dj(n){Nr.call(this,hp.Pa,n)}function Fw(n){const e=eT();vr(e,new dj(e))}function hj(n,e){Nr.call(this,hp.STAT_EVENT,n),this.stat=e}function is(n){const e=eT();vr(e,new hj(e,n))}function fj(n,e){Nr.call(this,hp.Qa,n),this.size=e}function Lw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}hp.Pa="serverreachability",yr(dj,Nr),hp.STAT_EVENT="statevent",yr(hj,Nr),hp.Qa="timingevent",yr(fj,Nr);var tT={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},pj={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function DN(){}function gj(){}DN.prototype.h=null;var TN,Bw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function IN(){Nr.call(this,"d")}function SN(){Nr.call(this,"c")}function nT(){}function Vw(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Nw(this),this.O=H9,this.T=new XS(n=sN?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new _j}function _j(){this.i=null,this.g="",this.h=!1}yr(IN,Nr),yr(SN,Nr),yr(nT,DN),nT.prototype.g=function(){return new XMLHttpRequest},nT.prototype.i=function(){return{}},TN=new nT;var H9=45e3,AN={},iT={};function MN(n,e,t){n.K=1,n.v=aT(Zc(e)),n.s=t,n.P=!0,yj(n,null)}function yj(n,e){n.F=Date.now(),Uw(n),n.A=Zc(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),Aj(t.i,"t",i),n.C=0,t=n.l.H,n.h=new _j,n.g=Xj(n.l,t?e:null,!n.s),0<n.N&&(n.L=new F9(Pr(n.La,n,n.g),n.N)),lj(n.S,n.g,"readystatechange",n.ib),e=n.H?YH(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Fw(),function L9(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var w=y[0];y=y[1];var D=w.split("_");l=2<=D.length&&"type"==D[1]?l+(w+"=")+y+"&":l+(w+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function vj(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function bj(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=j9(n,t),r==iT){4==e&&(n.o=4,is(14),i=!1),A_(n.j,n.m,null,"[Incomplete Response]");break}if(r==AN){n.o=4,is(15),A_(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}A_(n.j,n.m,r,null),xN(n,r)}vj(n)&&r!=iT&&r!=AN&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,is(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),BN(e),e.K=!0,is(11))):(A_(n.j,n.m,t,"[Invalid Chunked Response]"),fp(n),Hw(n))}function j9(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?iT:(t=Number(e.substring(t,i)),isNaN(t)?AN:(i+=1)+t>e.length?iT:(e=e.substr(i,t),n.C=i+t,e))}function Uw(n){n.V=Date.now()+n.O,wj(n,n.O)}function wj(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Lw(Pr(n.gb,n),e)}function rT(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Hw(n){0==n.l.G||n.I||Zj(n.l,n)}function fp(n){rT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,CN(n.T),cj(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xN(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||RN(t.h,n)))if(!n.J&&RN(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=Lw(Pr(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;fT(t),dT(t)}LN(t),is(18)}if(1>=Rj(t.h)&&t.ja){try{t.ja()}catch(y){}t.ja=void 0}}else mp(t,11)}else if((n.J||t.g==n)&&fT(t),!qS(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const w=y[3];null!=w&&(t.ma=w,t.j.info("VER="+t.ma));const D=y[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const S=y[5];null!=S&&"number"==typeof S&&0<S&&(t.J=i=1.5*S,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const R=n.g;if(R){const P=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=i.h;s.g||-1==P.indexOf("spdy")&&-1==P.indexOf("quic")&&-1==P.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(kN(s,s.h),s.h=null))}if(i.D){const H=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(i.za=H,Gn(i.F,i.D,H))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((i=t).sa=Qj(i,i.H?i.ka:null,i.V),l.J){kj(i.h,l);var d=l,p=i.J;p&&d.setTimeout(p),d.B&&(rT(d),Uw(d)),i.g=l}else qj(i);0<t.i.length&&hT(t)}else"stop"!=y[0]&&"close"!=y[0]||mp(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?mp(t,7):FN(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}Fw()}catch(y){}}function Cj(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if($S(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function $9(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if($S(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function G9(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if($S(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(ot=Vw.prototype).setTimeout=function(n){this.O=n},ot.ib=function(n){n=n.target;const e=this.L;e&&3==Yc(n)?e.l():this.La(n)},ot.La=function(n){try{if(n==this.g)e:{const w=Yc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>w)&&(3!=w||sN||this.g&&(this.h.h||this.g.fa()||Uj(this.g)))){this.I||4!=w||7==e||Fw(),rT(this);var t=this.g.aa();this.Y=t;t:if(vj(this)){var i=Uj(this.g);n="";var r=i.length,s=4==Yc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fp(this),Hw(this);var l="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function B9(n,e,t,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.U,w,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qS(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,is(12),fp(this),Hw(this);break e}A_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xN(this,t)}this.P?(bj(this,w,l),sN&&this.i&&3==w&&(lj(this.S,this.T,"tick",this.hb),this.T.start())):(A_(this.j,this.m,l,null),xN(this,l)),4==w&&fp(this),this.i&&!this.I&&(4==w?Zj(this.l,this):(this.i=!1,Uw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,is(12)):(this.o=0,is(13)),fp(this),Hw(this)}}}catch(w){}},ot.hb=function(){if(this.g){var n=Yc(this.g),e=this.g.fa();this.C<e.length&&(rT(this),bj(this,n,e),this.i&&4!=n&&Uw(this))}},ot.cancel=function(){this.I=!0,fp(this)},ot.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function V9(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Fw(),is(17)),fp(this),this.o=2,Hw(this)):wj(this,this.V-n)};var Ej=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof pp){this.h=void 0!==e?e:n.h,sT(this,n.j),this.s=n.s,this.g=n.g,oT(this,n.m),this.l=n.l,e=n.i;var t=new $w;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Dj(this,t),this.o=n.o}else n&&(t=String(n).match(Ej))?(this.h=!!e,sT(this,t[1]||"",!0),this.s=jw(t[2]||""),this.g=jw(t[3]||"",!0),oT(this,t[4]),this.l=jw(t[5]||"",!0),Dj(this,t[6]||"",!0),this.o=jw(t[7]||"")):(this.h=!!e,this.i=new $w(null,this.h))}function Zc(n){return new pp(n)}function sT(n,e,t){n.j=t?jw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function oT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Dj(n,e,t){e instanceof $w?(n.i=e,function Q9(n,e){e&&!n.j&&(Cd(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(Sj(this,i),Aj(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Gw(e,Y9)),n.i=new $w(e,n.h))}function Gn(n,e,t){n.i.set(e,t)}function aT(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Gw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,q9),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function q9(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Gw(e,Ij,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Gw(e,Ij,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Gw(t,"/"==t.charAt(0)?Z9:W9,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Gw(t,K9)),n.join("")};var Ij=/[#\/\?@]/g,W9=/[#\?:]/g,Z9=/[#\?]/g,Y9=/[#\?@]/g,K9=/#/g;function $w(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cd(n){n.g||(n.g=new Map,n.h=0,n.i&&function z9(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Sj(n,e){Cd(n),e=M_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Tj(n,e){return Cd(n),e=M_(n,e),n.g.has(e)}function Aj(n,e,t){Sj(n,e),0<t.length&&(n.i=null,n.g.set(M_(n,e),nN(t)),n.h+=t.length)}function M_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Mj(n){this.l=n||J9,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ga&&Tt.g.Ga()&&Tt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=$w.prototype).add=function(n,e){Cd(this),this.i=null,n=M_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Cd(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},ot.oa=function(){Cd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},ot.W=function(n){Cd(this);let e=[];if("string"==typeof n)Tj(this,n)&&(e=e.concat(this.g.get(M_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Cd(this),this.i=null,Tj(this,n=M_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var r=s;""!==l[i]&&(r+="="+encodeURIComponent(String(l[i]))),n.push(r)}}return this.i=n.join("&")};var J9=10;function xj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Rj(n){return n.h?1:n.g?n.g.size:0}function RN(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kN(n,e){n.g?n.g.add(e):n.h=e}function kj(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Oj(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nN(n.i)}function ON(){}function eX(){this.g=new ON}function tX(n,e,t){const i=t||"";try{Cj(n,function(r,s){let l=r;kw(r)&&(l=vN(r)),e.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function lT(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function zw(n){this.l=n.ac||null,this.j=n.jb||!1}function cT(n,e){Yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=PN,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mj.prototype.cancel=function(){if(this.i=Oj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ON.prototype.stringify=function(n){return Tt.JSON.stringify(n,void 0)},ON.prototype.parse=function(n){return Tt.JSON.parse(n,void 0)},yr(zw,DN),zw.prototype.g=function(){return new cT(this.l,this.j)},zw.prototype.i=function(n){return function(){return n}}({}),yr(cT,Yi);var PN=0;function Pj(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function qw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ww(n)}function Ww(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=cT.prototype).open=function(n,e){if(this.readyState!=PN)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ww(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qw(this)),this.readyState=PN},ot.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ww(this)),this.g&&(this.readyState=3,Ww(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pj(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ot.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qw(this):Ww(this),3==this.readyState&&Pj(this)}},ot.Va=function(n){this.g&&(this.response=this.responseText=n,qw(this))},ot.Ua=function(n){this.g&&(this.response=n,qw(this))},ot.ga=function(){this.g&&qw(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(cT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iX=Tt.JSON.parse;function ui(n){Yi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Nj,this.K=this.L=!1}yr(ui,Yi);var Nj="",rX=/^https?$/i,sX=["POST","PUT"];function Fj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Lj(n),uT(n)}function Lj(n){n.D||(n.D=!0,vr(n,"complete"),vr(n,"error"))}function Bj(n){if(n.h&&void 0!==eN&&(!n.C[1]||4!=Yc(n)||2!=n.aa()))if(n.v&&4==Yc(n))EN(n.Ha,0,n);else if(vr(n,"readystatechange"),4==Yc(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===d){var r=String(n.H).match(Ej)[1]||null;if(!r&&Tt.self&&Tt.self.location){var s=Tt.self.location.protocol;r=s.substr(0,s.length-1)}i=!rX.test(r?r.toLowerCase():"")}t=i}if(t)vr(n,"complete"),vr(n,"success");else{n.m=6;try{var l=2<Yc(n)?n.g.statusText:""}catch(p){l=""}n.j=l+" ["+n.aa()+"]",Lj(n)}}finally{uT(n)}}}function uT(n,e){if(n.g){Vj(n);const t=n.g,i=n.C[0]?GS:null;n.g=null,n.C=null,e||vr(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function Vj(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function Yc(n){return n.g?n.g.readyState:0}function Uj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Nj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hj(n){let e="";return uN(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function NN(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Hj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Gn(n,e,t))}function Zw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jj(n){this.Ca=0,this.i=[],this.j=new JS,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Zw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Zw("baseRetryDelayMs",5e3,n),this.bb=Zw("retryDelaySeedMs",1e4,n),this.$a=Zw("forwardChannelMaxRetries",2,n),this.ta=Zw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Mj(n&&n.concurrentRequestLimit),this.Fa=new eX,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function FN(n){if(Gj(n),3==n.G){var e=n.U++,t=Zc(n.F);Gn(t,"SID",n.I),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),Yw(n,t),(e=new Vw(n,n.j,e,void 0)).K=2,e.v=aT(Zc(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(t=Tt.navigator.sendBeacon(e.v.toString(),"")),!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Xj(e.l,null),e.g.da(e.v)),e.F=Date.now(),Uw(e)}Kj(n)}function dT(n){n.g&&(BN(n),n.g.cancel(),n.g=null)}function Gj(n){dT(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),fT(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function hT(n){xj(n.h)||n.m||(n.m=!0,rj(n.Ja,n),n.C=0)}function $j(n,e){var t;t=e?e.m:n.U++;const i=Zc(n.F);Gn(i,"SID",n.I),Gn(i,"RID",t),Gn(i,"AID",n.T),Yw(n,i),n.o&&n.s&&NN(i,n.o,n.s),t=new Vw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=zj(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),kN(n.h,t),MN(t,i,e)}function Yw(n,e){n.ia&&uN(n.ia,function(t,i){Gn(e,i,t)}),n.l&&Cj({},function(t,i){Gn(e,i,t)})}function zj(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Pr(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=r[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=r[p].h;const w=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),d=!1;else try{tX(w,l,"req"+y+"_")}catch(D){i&&i(w)}}if(d){i=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function qj(n){n.g||n.u||(n.Z=1,rj(n.Ia,n),n.A=0)}function LN(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Lw(Pr(n.Ia,n),Yj(n,n.A)),n.A++,0))}function BN(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Wj(n){n.g=new Vw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Zc(n.sa);Gn(e,"RID","rpc"),Gn(e,"SID",n.I),Gn(e,"CI",n.L?"0":"1"),Gn(e,"AID",n.T),Gn(e,"TYPE","xmlhttp"),Yw(n,e),n.o&&n.s&&NN(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=aT(Zc(e)),t.s=null,t.P=!0,yj(t,n)}function fT(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function Zj(n,e){var t=null;if(n.g==e){fT(n),BN(n),n.g=null;var i=2}else{if(!RN(n.h,e))return;t=e.D,kj(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;vr(i=eT(),new fj(i,t)),hT(n)}else qj(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function aX(n,e){return!(Rj(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Lw(Pr(n.Ja,n,e),Yj(n,n.C)),n.C++,0)))}(n,e)||2==i&&LN(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:mp(n,5);break;case 4:mp(n,10);break;case 3:mp(n,6);break;default:mp(n,2)}}function Yj(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function mp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Pr(n.kb,n);t||(t=new pp("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||sT(t,"https"),aT(t)),function nX(n,e){const t=new JS;if(Tt.Image){const i=new Image;i.onload=zS(lT,t,i,"TestLoadImage: loaded",!0,e),i.onerror=zS(lT,t,i,"TestLoadImage: error",!1,e),i.onabort=zS(lT,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=zS(lT,t,i,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else is(2);n.G=0,n.l&&n.l.va(e),Kj(n),Gj(n)}function Kj(n){if(n.G=0,n.la=[],n.l){const e=Oj(n.h);(0!=e.length||0!=n.i.length)&&(GH(n.la,e),GH(n.la,n.i),n.h.i.length=0,nN(n.i),n.i.length=0),n.l.ua()}}function Qj(n,e,t){var i=t instanceof pp?Zc(t):new pp(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),oT(i,i.m);else{var r=Tt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new pp(null,void 0);i&&sT(s,i),e&&(s.g=e),r&&oT(s,r),t&&(s.l=t),i=s}return e=n.za,(t=n.D)&&e&&Gn(i,t,e),Gn(i,"VER",n.ma),Yw(n,i),i}function Xj(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ui(t&&n.Da&&!n.ra?new zw({jb:!0}):n.ra)).Ka(n.H),e}function Jj(){}function pT(){if(T_&&!(10<=Number(D9)))throw Error("Environmental error: no available transport.")}function io(n,e){Yi.call(this),this.g=new jj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!qS(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qS(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new x_(this)}function eG(n){IN.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tG(){SN.call(this),this.status=1}function x_(n){this.g=n}(ot=ui.prototype).Ka=function(n){this.L=n},ot.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():TN.g(),this.C=function mj(n){return n.h||(n.h=n.i())}(this.u?this.u:TN),this.g.onreadystatechange=Pr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Fj(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=Tt.FormData&&n instanceof Tt.FormData,!(0<=jH(sX,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Vj(this),0<this.B&&((this.K=function oX(n){return T_&&function E9(){return function v9(n){var e=C9;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=$H(String(ZS)).split("."),t=$H("9").split("."),i=Math.max(e.length,t.length);for(let l=0;0==n&&l<i;l++){var r=e[l]||"",s=t[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=iN(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||iN(0==r[2].length,0==s[2].length)||iN(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pr(this.qa,this)):this.A=EN(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Fj(this,s)}},ot.qa=function(){void 0!==eN&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vr(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vr(this,"complete"),vr(this,"abort"),uT(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uT(this,!0)),ui.X.M.call(this)},ot.Ha=function(){this.s||(this.F||this.v||this.l?Bj(this):this.fb())},ot.fb=function(){Bj(this)},ot.aa=function(){try{return 2<Yc(this)?this.g.status:-1}catch(n){return-1}},ot.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iX(e)}},ot.Ea=function(){return this.m},ot.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=jj.prototype).ma=8,ot.G=1,ot.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Vw(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=YH(s),QH(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zj(this,r,e),Gn(t=Zc(this.F),"RID",n),Gn(t,"CVER",22),this.D&&Gn(t,"X-HTTP-Session-Id",this.D),Yw(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(Hj(s)))+"&"+e:this.o&&NN(t,this.o,s)),kN(this.h,r),this.Ya&&Gn(t,"TYPE","init"),this.O?(Gn(t,"$req",e),Gn(t,"SID","null"),r.Z=!0,MN(r,t,null)):MN(r,t,e),this.G=2}}else 3==this.G&&(n?$j(this,n):0==this.i.length||xj(this.h)||$j(this))},ot.Ia=function(){if(this.u=null,Wj(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Lw(Pr(this.eb,this),n)}},ot.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,is(10),dT(this),Wj(this))},ot.cb=function(){null!=this.v&&(this.v=null,dT(this),LN(this),is(19))},ot.kb=function(n){n?(this.j.info("Successfully pinged google.com"),is(2)):(this.j.info("Failed to ping google.com"),is(1))},(ot=Jj.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Ra=function(){},pT.prototype.g=function(n,e){return new io(n,e)},yr(io,Yi),io.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;is(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Qj(n,null,n.V),hT(n)},io.prototype.close=function(){FN(this.g)},io.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=vN(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&hT(e)},io.prototype.M=function(){this.g.l=null,delete this.j,FN(this.g),delete this.g,io.X.M.call(this)},yr(eG,IN),yr(tG,SN),yr(x_,Jj),x_.prototype.xa=function(){vr(this.g,"a")},x_.prototype.wa=function(n){vr(this.g,new eG(n))},x_.prototype.va=function(n){vr(this.g,new tG)},x_.prototype.ua=function(){vr(this.g,"b")},pT.prototype.createWebChannel=pT.prototype.g,io.prototype.send=io.prototype.u,io.prototype.open=io.prototype.m,io.prototype.close=io.prototype.close,tT.NO_ERROR=0,tT.TIMEOUT=8,tT.HTTP_ERROR=6,pj.COMPLETE="complete",gj.EventType=Bw,Bw.OPEN="a",Bw.CLOSE="b",Bw.ERROR="c",Bw.MESSAGE="d",Yi.prototype.listen=Yi.prototype.N,ui.prototype.listenOnce=ui.prototype.O,ui.prototype.getLastError=ui.prototype.Oa,ui.prototype.getLastErrorCode=ui.prototype.Ea,ui.prototype.getStatus=ui.prototype.aa,ui.prototype.getResponseJson=ui.prototype.Sa,ui.prototype.getResponseText=ui.prototype.fa,ui.prototype.send=ui.prototype.da,ui.prototype.setWithCredentials=ui.prototype.Ka;var lX=Wc.createWebChannelTransport=function(){return new pT},cX=Wc.getStatEventTarget=function(){return eT()},VN=Wc.ErrorCode=tT,uX=Wc.EventType=pj,dX=Wc.Event=hp,nG=Wc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},hX=Wc.FetchXmlHttpFactory=zw,mT=Wc.WebChannel=gj,fX=Wc.XhrIo=ui;const iG="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let R_="9.14.0";const Ed=new Es.Yd("@firebase/firestore");function UN(){return Ed.logLevel}function Ae(n,...e){if(Ed.logLevel<=Es.in.DEBUG){const t=e.map(HN);Ed.debug(`Firestore (${R_}): ${n}`,...t)}}function vi(n,...e){if(Ed.logLevel<=Es.in.ERROR){const t=e.map(HN);Ed.error(`Firestore (${R_}): ${n}`,...t)}}function gp(n,...e){if(Ed.logLevel<=Es.in.WARN){const t=e.map(HN);Ed.warn(`Firestore (${R_}): ${n}`,...t)}}function HN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${R_}) INTERNAL ASSERTION FAILED: `+n;throw vi(e),new Error(e)}function bt(n,e){n||tt()}function je(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class _X{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yX{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,Z.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt("string"==typeof i.accessToken),new rG(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Ki(e)}}class vX{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(bt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class bX{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r}getToken(){return Promise.resolve(new vX(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wX{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=s=>{null!=s.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.A;return this.A=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.A=t.token,new sG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function CX(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class oG{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=CX(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function At(n,e){return n<e?-1:n>e?1:0}function k_(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function aG(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new $n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new $n(0,0))}static max(){return new wt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kw{constructor(e,t,i){void 0===t?t=0:t>e.length&&tt(),void 0===i?i=e.length-t:i>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Kw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kw?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),l=t.get(r);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Kw{construct(e,t,i){return new Jt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new De(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const EX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class di extends Kw{construct(e,t,i){return new di(e,t,i)}static isValidIdentifier(e){return EX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new di(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new De(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new De(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new De(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else"`"===d?(l=!l,r++):"."!==d||l?(i+=d,r++):(s(),r++)}if(s(),l)throw new De(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new di(t)}static emptyPath(){return new di([])}}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Jt.fromString(e))}static fromName(e){return new Ue(Jt.fromString(e).popFirst(5))}static empty(){return new Ue(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Jt(e.slice()))}}class gT{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function jN(n){return n.fields.find(e=>2===e.kind)}function _p(n){return n.fields.filter(e=>2!==e.kind)}gT.UNKNOWN_ID=-1;class _T{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qw(0,ro.min())}}function lG(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=wt.fromTimestamp(1e9===i?new $n(t+1,0):new $n(t,i));return new ro(r,Ue.empty(),e)}function cG(n){return new ro(n.readTime,n.key,-1)}class ro{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ro(wt.min(),Ue.empty(),-1)}static max(){return new ro(wt.max(),Ue.empty(),-1)}}function GN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const uG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Dd(n){return $N.apply(this,arguments)}function $N(){return $N=(0,Z.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==uG)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}),$N.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,i)=>{t(e)})}static reject(e){return new ie((t,i)=>{i(e)})}static waitFor(e){return new ie((t,i)=>{let r=0,s=0,l=!1;e.forEach(d=>{++r,d.next(()=>{++s,l&&s===r&&t()},p=>i(p))}),l=!0,s===r&&t()})}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next(r=>r?ie.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new ie((i,r)=>{const s=e.length,l=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(w=>{l[y]=w,++d,d===s&&i(l)},w=>r(w))}})}static doWhile(e,t){return new ie((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class yT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Vi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Xw(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=zN(i.target.error);this.P.reject(new Xw(e,r))}}static open(e,t,i,r){try{return new yT(t,e.transaction(r,i))}catch(s){throw new Xw(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new TX(t)}}class Na{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===Na.D((0,O.z$)())&&vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),yp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,O.hl)())return!1;if(Na.N())return!0;const e=(0,O.z$)(),t=Na.D(e),i=0<t&&t<10,r=Na.k(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,Z.Z)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new Xw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;r("VersionError"===d.name?new De(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new De(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Xw(e,d))},s.onupgradeneeded=l=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Z.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.F(e);const p=yT.open(s.db,e,l?"readonly":"readwrite",i),y=r(p).next(w=>(p.V(),w)).catch(w=>(p.abort(w),ie.reject(w))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,w="FirebaseError"!==y.name&&d<3;if(Ae("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),s.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SX{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return yp(this.U.delete())}}class Xw extends De{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Id(n){return"IndexedDbTransactionError"===n.name}class TX{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),yp(i)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),yp(this.store.add(e))}get(e){return yp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),yp(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),yp(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(l,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ie((s,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ie((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}Y(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,(s,l,d)=>d.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}tt(e){const t=this.cursor({});return new ie((i,r)=>{t.onerror=s=>{const l=zN(s.target.error);r(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}H(e,t){const i=[];return new ie((r,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void r();const p=new SX(d),y=t(d.primaryKey,d.value,p);if(y instanceof ie){const w=y.catch(D=>(p.done(),ie.reject(D)));i.push(w)}p.isDone?r():null===p.G?d.continue():d.continue(p.G)}}).next(()=>ie.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yp(n){return new ie((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=zN(i.target.error);t(r)}})}let hG=!1;function zN(n){const e=Na.D((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hG||(hG=!0,setTimeout(()=>{throw i},0)),i}}return n}class AX{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ae("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Z.Z)(function*(){t.task=null;try{Ae("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Id(i)?Ae("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Dd(i)}yield t.nt(6e4)}))}}class MX{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Z.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let r=t,s=!0;return ie.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!i.has(l))return Ae("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,r).next(d=>{r-=d,i.add(l)});s=!1})).next(()=>t-r)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(r,s)).next(d=>(Ae("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let i=e;return t.changes.forEach((r,s)=>{const l=cG(s);GN(l,i)>0&&(i=l)}),new ro(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Is{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function fG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Is.at=-1;class hi{constructor(e,t){this.comparator=e,this.root=t||br.EMPTY}insert(e,t){return new hi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new hi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vT(this.root,e,this.comparator,!1)}getReverseIterator(){return new vT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vT(this.root,e,this.comparator,!0)}}class vT{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class br{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:br.RED,this.left=null!=r?r:br.EMPTY,this.right=null!=s?s:br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new br(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return br.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}br.EMPTY=null,br.RED=!0,br.BLACK=!1,br.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new br(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new hi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mG(this.data.getIterator())}getIteratorFrom(e){return new mG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class mG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function O_(n){return n.hasNext()?n.getNext():void 0}class so{constructor(e){this.fields=e,e.sort(di.comparator)}static empty(){return new so([])}unionWith(e){let t=new Cn(di.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new so(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return k_(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ui(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ui.EMPTY_BYTE_STRING=new Ui("");const RX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sd(n){if(bt(!!n),"string"==typeof n){let e=0;const t=RX.exec(n);if(bt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:fi(n.seconds),nanos:fi(n.nanos)}}function fi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bp(n){return"string"==typeof n?Ui.fromBase64String(n):Ui.fromUint8Array(n)}function qN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gG(n){const e=n.mapValue.fields.__previous_value__;return qN(e)?gG(e):e}function Jw(n){const e=Sd(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class kX{constructor(e,t,i,r,s,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Td{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Td("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Td&&e.projectId===this.projectId&&e.database===this.database}}function e0(n){return null==n}function t0(n){return 0===n&&1/n==-1/0}function _G(n){return"number"==typeof n&&Number.isInteger(n)&&!t0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ad={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bT={nullValue:"NULL_VALUE"};function wp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qN(n)?4:wG(n)?9007199254740991:10:tt()}function Pl(n,e){if(n===e)return!0;const t=wp(n);if(t!==wp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jw(n).isEqual(Jw(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Sd(i.timestampValue),l=Sd(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,bp(n.bytesValue).isEqual(bp(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return fi(i.geoPointValue.latitude)===fi(r.geoPointValue.latitude)&&fi(i.geoPointValue.longitude)===fi(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return fi(i.integerValue)===fi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=fi(i.doubleValue),l=fi(r.doubleValue);return s===l?t0(s)===t0(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return k_(n.arrayValue.values||[],e.arrayValue.values||[],Pl);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(fG(s)!==fG(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!Pl(s[d],l[d])))return!1;return!0}(n,e);default:return tt()}var r}function n0(n,e){return void 0!==(n.values||[]).find(t=>Pl(t,e))}function Md(n,e){if(n===e)return 0;const t=wp(n),i=wp(e);if(t!==i)return At(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(r,s){const l=fi(r.integerValue||r.doubleValue),d=fi(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return yG(n.timestampValue,e.timestampValue);case 4:return yG(Jw(n),Jw(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(r,s){const l=bp(r),d=bp(s);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const l=r.split("/"),d=s.split("/");for(let p=0;p<l.length&&p<d.length;p++){const y=At(l[p],d[p]);if(0!==y)return y}return At(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const l=At(fi(r.latitude),fi(s.latitude));return 0!==l?l:At(fi(r.longitude),fi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const l=r.values||[],d=s.values||[];for(let p=0;p<l.length&&p<d.length;++p){const y=Md(l[p],d[p]);if(y)return y}return At(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Ad.mapValue&&s===Ad.mapValue)return 0;if(r===Ad.mapValue)return 1;if(s===Ad.mapValue)return-1;const l=r.fields||{},d=Object.keys(l),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const D=At(d[w],y[w]);if(0!==D)return D;const S=Md(l[d[w]],p[y[w]]);if(0!==S)return S}return At(d.length,y.length)}(n.mapValue,e.mapValue);default:throw tt()}}function yG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Sd(n),i=Sd(e),r=At(t.seconds,i.seconds);return 0!==r?r:At(t.nanos,i.nanos)}function P_(n){return WN(n)}function WN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Sd(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bp(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=WN(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const d of r)l?l=!1:s+=",",s+=`${d}:${WN(i.fields[d])}`;return s+"}"}(n.mapValue):tt();var e}function Cp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZN(n){return!!n&&"integerValue"in n}function r0(n){return!!n&&"arrayValue"in n}function vG(n){return!!n&&"nullValue"in n}function bG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wT(n){return!!n&&"mapValue"in n}function s0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vp(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=s0(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=s0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function OX(n){return"nullValue"in n?bT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cp(Td.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function PX(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cp(Td.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ad:tt()}function CG(n,e){const t=Md(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EG(n,e){const t=Md(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!wT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=s0(t)}setAll(e){let t=di.emptyPath(),i={},r=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=d.popLast()}l?i[d.lastSegment()]=s0(l):r.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());wT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];wT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){vp(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new wr(s0(this.value))}}function DG(n){const e=[];return vp(n.fields,(t,i)=>{const r=new di([t]);if(wT(i)){const s=DG(i.mapValue).fields;if(0===s.length)e.push(r);else for(const l of s)e.push(r.child(l))}else e.push(r)}),new so(e)}class Nn{constructor(e,t,i,r,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Nn(e,0,wt.min(),wt.min(),wr.empty(),0)}static newFoundDocument(e,t,i){return new Nn(e,1,t,wt.min(),i,0)}static newNoDocument(e,t){return new Nn(e,2,t,wt.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,wt.min(),wr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class NX{constructor(e,t=null,i=[],r=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=d,this.ht=null}}function IG(n,e=null,t=[],i=[],r=null,s=null,l=null){return new NX(n,e,t,i,r,s,l)}function Ep(n){const e=je(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+P_(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),e0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>P_(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>P_(i)).join(",")),e.ht=t}return e.ht}function o0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!$X(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!Pl(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xG(n.startAt,e.startAt)&&xG(n.endAt,e.endAt)}function CT(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ET(n,e){return n.filters.filter(t=>t instanceof Cr&&t.field.isEqual(e))}function SG(n,e,t){let i=bT,r=!0;for(const s of ET(n,e)){let l=bT,d=!0;switch(s.op){case"<":case"<=":l=OX(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=bT}CG({value:i,inclusive:r},{value:l,inclusive:d})<0&&(i=l,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];CG({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function TG(n,e,t){let i=Ad,r=!0;for(const s of ET(n,e)){let l=Ad,d=!0;switch(s.op){case">=":case">":l=PX(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Ad}EG({value:i,inclusive:r},{value:l,inclusive:d})>0&&(i=l,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];EG({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class Cr extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new LX(e,t,i):"array-contains"===t?new UX(e,i):"in"===t?new HX(e,i):"not-in"===t?new jX(e,i):"array-contains-any"===t?new GX(e,i):new Cr(e,t,i)}static lt(e,t,i){return"in"===t?new BX(e,i):new VX(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Md(t,this.value)):null!==t&&wp(this.value)===wp(t)&&this.ft(Md(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class LX extends Cr{constructor(e,t,i){super(e,t,i),this.key=Ue.fromName(i.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.ft(t)}}class BX extends Cr{constructor(e,t){super(e,"in",t),this.keys=AG(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VX extends Cr{constructor(e,t){super(e,"not-in",t),this.keys=AG(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AG(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ue.fromName(i.referenceValue))}class UX extends Cr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return r0(t)&&n0(t.arrayValue,this.value)}}class HX extends Cr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&n0(this.value.arrayValue,t)}}class jX extends Cr{constructor(e,t){super(e,"not-in",t)}matches(e){if(n0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!n0(this.value.arrayValue,t)}}class GX extends Cr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!r0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>n0(this.value.arrayValue,i))}}class xd{constructor(e,t){this.position=e,this.inclusive=t}}class N_{constructor(e,t="asc"){this.field=e,this.dir=t}}function $X(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function MG(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],l=n.position[r];if(i=s.field.isKeyField()?Ue.comparator(Ue.fromName(l.referenceValue),t.key):Md(l,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function xG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pl(n.position[t],e.position[t]))return!1;return!0}class Kc{constructor(e,t=null,i=[],r=[],s=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function RG(n,e,t,i,r,s,l,d){return new Kc(n,e,t,i,r,s,l,d)}function F_(n){return new Kc(n)}function kG(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function YN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function KN(n){for(const e of n.filters)if(e.dt())return e.field;return null}function QN(n){return null!==n.collectionGroup}function L_(n){const e=je(n);if(null===e._t){e._t=[];const t=KN(e),i=YN(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new N_(t)),e._t.push(new N_(di.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new N_(di.keyField(),s))}}}return e._t}function rs(n){const e=je(n);if(!e.wt)if("F"===e.limitType)e.wt=IG(e.path,e.collectionGroup,L_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of L_(e))t.push(new N_(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new xd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new xd(e.startAt.position,e.startAt.inclusive):null;e.wt=IG(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.wt}function DT(n,e,t){return new Kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function a0(n,e){return o0(rs(n),rs(e))&&n.limitType===e.limitType}function OG(n){return`${Ep(rs(n))}|lt:${n.limitType}`}function XN(n){return`Query(target=${function FX(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${P_(i.value)}`;var i}).join(", ")}]`),e0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>P_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>P_(t)).join(",")),`Target(${e})`}(rs(n))}; limitType=${n.limitType})`}function JN(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Ue.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,l){const d=MG(r,s,l);return r.inclusive?d<=0:d<0}(t.startAt,L_(t),i)||t.endAt&&!function(r,s,l){const d=MG(r,s,l);return r.inclusive?d>=0:d>0}(t.endAt,L_(t),i)));var t,i}function PG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NG(n){return(e,t)=>{let i=!1;for(const r of L_(n)){const s=zX(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function zX(n,e,t){const i=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(r,s,l){const d=s.data.field(r),p=l.data.field(r);return null!==d&&null!==p?Md(d,p):tt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return tt()}}function FG(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t0(e)?"-0":e}}function LG(n){return{integerValue:""+n}}function BG(n,e){return _G(e)?LG(e):FG(n,e)}class IT{constructor(){this._=void 0}}function qX(n,e,t){return n instanceof B_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Dp?UG(n,e):n instanceof Ip?HG(n,e):function(i,r){const s=VG(i,r),l=jG(s)+jG(i.yt);return ZN(s)&&ZN(i.yt)?LG(l):FG(i.It,l)}(n,e)}function WX(n,e,t){return n instanceof Dp?UG(n,e):n instanceof Ip?HG(n,e):t}function VG(n,e){return n instanceof V_?ZN(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class B_ extends IT{}class Dp extends IT{constructor(e){super(),this.elements=e}}function UG(n,e){const t=GG(e);for(const i of n.elements)t.some(r=>Pl(r,i))||t.push(i);return{arrayValue:{values:t}}}class Ip extends IT{constructor(e){super(),this.elements=e}}function HG(n,e){let t=GG(e);for(const i of n.elements)t=t.filter(r=>!Pl(r,i));return{arrayValue:{values:t}}}class V_ extends IT{constructor(e,t){super(),this.It=e,this.yt=t}}function jG(n){return fi(n.integerValue||n.doubleValue)}function GG(n){return r0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class l0{constructor(e,t){this.field=e,this.transform=t}}class YX{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ST(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class TT{}function $G(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new H_(n.key,zn.none()):new U_(n.key,n.data,zn.none());{const t=n.data,i=wr.empty();let r=new Cn(di.comparator);for(let s of e.fields)if(!r.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new Qc(n.key,i,new so(r.toArray()),zn.none())}}function KX(n,e,t){n instanceof U_?function(i,r,s){const l=i.value.clone(),d=WG(i.fieldTransforms,r,s.transformResults);l.setAll(d),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Qc?function(i,r,s){if(!ST(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=WG(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(qG(i)),d.setAll(l),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function c0(n,e,t,i){return n instanceof U_?function(r,s,l,d){if(!ST(r.precondition,s))return l;const p=r.value.clone(),y=ZG(r.fieldTransforms,d,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Qc?function(r,s,l,d){if(!ST(r.precondition,s))return l;const p=ZG(r.fieldTransforms,d,s),y=s.data;return y.setAll(qG(r)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,e,t,i):(l=t,ST(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function QX(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=VG(i.transform,r||null);null!=s&&(null===t&&(t=wr.empty()),t.set(i.field,s))}return t||null}function zG(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&k_(t,i,(r,s)=>function ZX(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Dp&&i instanceof Dp||t instanceof Ip&&i instanceof Ip?k_(t.elements,i.elements,Pl):t instanceof V_&&i instanceof V_?Pl(t.yt,i.yt):t instanceof B_&&i instanceof B_);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class U_ extends TT{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qc extends TT{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function WG(n,e,t){const i=new Map;bt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],l=s.transform,d=e.data.field(s.field);i.set(s.field,WX(l,d,t[r]))}return i}function ZG(n,e,t){const i=new Map;for(const r of n){const s=r.transform,l=t.data.field(r.field);i.set(r.field,qX(s,l,e))}return i}class H_ extends TT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e1 extends TT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XX{constructor(e){this.count=e}}var Ti,en;function YG(n){switch(n){default:return tt();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function KG(n){if(void 0===n)return vi("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Ti.OK:return oe.OK;case Ti.CANCELLED:return oe.CANCELLED;case Ti.UNKNOWN:return oe.UNKNOWN;case Ti.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Ti.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Ti.INTERNAL:return oe.INTERNAL;case Ti.UNAVAILABLE:return oe.UNAVAILABLE;case Ti.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Ti.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Ti.NOT_FOUND:return oe.NOT_FOUND;case Ti.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Ti.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Ti.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Ti.ABORTED:return oe.ABORTED;case Ti.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Ti.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Ti.DATA_LOSS:return oe.DATA_LOSS;default:return tt()}}(en=Ti||(Ti={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Rd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vp(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return pG(this.inner)}size(){return this.innerSize}}const JX=new hi(Ue.comparator);function Ss(){return JX}const QG=new hi(Ue.comparator);function u0(...n){let e=QG;for(const t of n)e=e.insert(t.key,t);return e}function XG(n){let e=QG;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Nl(){return d0()}function JG(){return d0()}function d0(){return new Rd(n=>n.toString(),(n,e)=>n.isEqual(e))}const eJ=new hi(Ue.comparator),tJ=new Cn(Ue.comparator);function kt(...n){let e=tJ;for(const t of n)e=e.add(t);return e}const nJ=new Cn(At);function AT(){return nJ}class h0{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,f0.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new h0(wt.min(),r,AT(),Ss(),kt())}}class f0{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new f0(i,t,kt(),kt(),kt())}}class MT{constructor(e,t,i,r){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=r}}class e3{constructor(e,t){this.targetId=e,this.At=t}}class t3{constructor(e,t,i=Ui.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class n3{constructor(){this.Rt=0,this.bt=s3(),this.Pt=Ui.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=kt(),t=kt(),i=kt();return this.bt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:tt()}}),new f0(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=s3()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class iJ{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ss(),this.qt=r3(),this.Kt=new Cn(At)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,r)=>{this.Ht(r)&&t(r)})}Yt(e){const t=e.targetId,i=e.At.count,r=this.Xt(t);if(r){const s=r.target;if(CT(s))if(0===i){const l=new Ue(s.path);this.jt(t,l,Nn.newNoDocument(l,wt.min()))}else bt(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,l)=>{const d=this.Xt(l);if(d){if(s.current&&CT(d.target)){const p=new Ue(d.target.path);null!==this.Ut.get(p)||this.ee(l,p)||this.jt(l,p,Nn.newNoDocument(p,e))}s.Dt&&(t.set(l,s.xt()),s.Nt())}});let i=kt();this.qt.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const y=this.Xt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.Ut.forEach((s,l)=>l.setReadTime(e));const r=new h0(e,t,this.Kt,this.Ut,i);return this.Ut=Ss(),this.qt=r3(),this.Kt=new Cn(At),r}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new n3,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Cn(At),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new n3),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function r3(){return new hi(Ue.comparator)}function s3(){return new hi(Ue.comparator)}const rJ={asc:"ASCENDING",desc:"DESCENDING"},sJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class oJ{constructor(e,t){this.databaseId=e,this.gt=t}}function p0(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o3(n,e){return n.gt?e.toBase64():e.toUint8Array()}function aJ(n,e){return p0(n,e.toTimestamp())}function Qi(n){return bt(!!n),wt.fromTimestamp(function(e){const t=Sd(e);return new $n(t.seconds,t.nanos)}(n))}function t1(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function a3(n){const e=Jt.fromString(n);return bt(m3(e)),e}function m0(n,e){return t1(n.databaseId,e.path)}function Fl(n,e){const t=a3(e);if(t.get(1)!==n.databaseId.projectId)throw new De(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(c3(t))}function n1(n,e){return t1(n.databaseId,e)}function l3(n){const e=a3(n);return 4===e.length?Jt.emptyPath():c3(e)}function g0(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function c3(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function u3(n,e,t){return{name:m0(n,e),fields:t.value.mapValue.fields}}function d3(n,e,t){const i=Fl(n,e.name),r=Qi(e.updateTime),s=new wr({mapValue:{fields:e.fields}}),l=Nn.newFoundDocument(i,r,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function _0(n,e){let t;if(e instanceof U_)t={update:u3(n,e.key,e.value)};else if(e instanceof H_)t={delete:m0(n,e.key)};else if(e instanceof Qc)t={update:u3(n,e.key,e.data),updateMask:gJ(e.fieldMask)};else{if(!(e instanceof e1))return tt();t={verify:m0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof B_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Dp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ip)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof V_)return{fieldPath:s.field.canonicalString(),increment:l.yt};throw tt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:aJ(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:tt()),t;var r}function r1(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?zn.updateTime(Qi(r.updateTime)):void 0!==r.exists?zn.exists(r.exists):zn.none():zn.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,l){let d=null;"setToServerValue"in l?(bt("REQUEST_TIME"===l.setToServerValue),d=new B_):"appendMissingElements"in l?d=new Dp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Ip(l.removeAllFromArray.values||[]):"increment"in l?d=new V_(s,l.increment):tt();const p=di.fromServerFormat(l.fieldPath);return new l0(p,d)}(n,r)):[];var r;if(e.update){const r=Fl(n,e.update.name),s=new wr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new so((e.updateMask.fieldPaths||[]).map(y=>di.fromServerFormat(y)));return new Qc(r,s,l,t,i)}return new U_(r,s,t,i)}if(e.delete){const r=Fl(n,e.delete);return new H_(r,t)}if(e.verify){const r=Fl(n,e.verify);return new e1(r,t)}return tt()}function h3(n,e){return{documents:[n1(n,e.path)]}}function s1(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=n1(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=n1(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(w=>function(D){if("=="===D.op){if(bG(D.value))return{unaryFilter:{field:j_(D.field),op:"IS_NAN"}};if(vG(D.value))return{unaryFilter:{field:j_(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(bG(D.value))return{unaryFilter:{field:j_(D.field),op:"IS_NOT_NAN"}};if(vG(D.value))return{unaryFilter:{field:j_(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:j_(D.field),op:fJ(D.op),value:D.value}}}(w));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:j_((w=y).field),direction:hJ(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.gt||e0(y)?y:{value:y});var y,d,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function f3(n){let e=l3(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){bt(1===i);const w=t.from[0];w.allDescendants?r=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=p3(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(w=>{return new N_(G_((D=w).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(w){let D;return D="object"==typeof w?w.value:w,e0(D)?null:D}(t.limit));let p=null;var w;t.startAt&&(p=new xd((w=t.startAt).values||[],!!w.before));let y=null;return t.endAt&&(y=function(w){return new xd(w.values||[],!w.before)}(t.endAt)),RG(e,r,l,s,d,"F",p,y)}function p3(n){return n?void 0!==n.unaryFilter?[mJ(n)]:void 0!==n.fieldFilter?[pJ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>p3(e)).reduce((e,t)=>e.concat(t)):tt():[]}function hJ(n){return rJ[n]}function fJ(n){return sJ[n]}function j_(n){return{fieldPath:n.canonicalString()}}function G_(n){return di.fromServerFormat(n.fieldPath)}function pJ(n){return Cr.create(G_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function mJ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=G_(n.unaryFilter.field);return Cr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=G_(n.unaryFilter.field);return Cr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=G_(n.unaryFilter.field);return Cr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=G_(n.unaryFilter.field);return Cr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function gJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function m3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ss(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=g3(e)),e=_J(n.get(t),e);return g3(e)}function _J(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function g3(n){return n+"\x01\x01"}function Ll(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&tt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:tt()}s=l+2}return new Jt(i)}const _3=["userId","batchId"];function xT(n,e){return[n,ss(e)]}function y3(n,e,t){return[n,ss(e),t]}const yJ={},vJ=["prefixPath","collectionGroup","readTime","documentId"],bJ=["prefixPath","collectionGroup","documentId"],wJ=["collectionGroup","readTime","prefixPath","documentId"],CJ=["canonicalId","targetId"],EJ=["targetId","path"],DJ=["path","targetId"],IJ=["collectionId","parent"],SJ=["indexId","uid"],TJ=["uid","sequenceNumber"],AJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MJ=["indexId","uid","orderedDocumentKey"],xJ=["userId","collectionPath","documentId"],RJ=["userId","collectionPath","largestBatchId"],kJ=["userId","collectionGroup","largestBatchId"],v3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OJ=[...v3,"documentOverlays"],b3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],w3=b3,PJ=[...w3,"indexConfiguration","indexState","indexEntries"];class o1 extends dG{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Xi(n,e){const t=je(n);return Na.M(t.ie,e)}class a1{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&KX(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=c0(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=c0(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=JG();return this.mutations.forEach(r=>{const s=e.get(r.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=t.has(r.key)?null:d;const p=$G(l,d);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(wt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&k_(this.mutations,e.mutations,(t,i)=>zG(t,i))&&k_(this.baseMutations,e.baseMutations,(t,i)=>zG(t,i))}}class l1{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){bt(e.mutations.length===i.length);let r=eJ;const s=e.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new l1(e,t,i,r)}}class c1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kd{constructor(e,t,i,r,s=wt.min(),l=wt.min(),d=Ui.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class C3{constructor(e){this.re=e}}function E3(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:RT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:m0(r=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:p0(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Sp(e.version)};else{if(!e.isUnknownDocument())return tt();i.unknownDocument={path:t.path.toArray(),version:Sp(e.version)}}var r,s;return i}function RT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Sp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tp(n){const e=new $n(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function Ap(n,e){const t=(e.baseMutations||[]).map(s=>r1(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>r1(n.re,s)),r=$n.fromMillis(e.localWriteTimeMs);return new a1(e.batchId,r,t,i)}function y0(n){const e=Tp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tp(n.lastLimboFreeSnapshotVersion):wt.min();let i;var r;return void 0!==n.query.documents?(bt(1===(r=n.query).documents.length),i=rs(F_(l3(r.documents[0])))):i=rs(f3(n.query)),new kd(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Ui.fromBase64String(n.resumeToken))}function D3(n,e){const t=Sp(e.snapshotVersion),i=Sp(e.lastLimboFreeSnapshotVersion);let r;r=CT(e.target)?h3(n.re,e.target):s1(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ep(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function u1(n){const e=f3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DT(e,e.limit,"L"):e}function d1(n,e){return new c1(e.largestBatchId,r1(n.re,e.overlayMutation))}function I3(n,e){const t=e.path.lastSegment();return[n,ss(e.path.popLast()),t]}function S3(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Sp(i.readTime),documentKey:ss(i.documentKey.path),largestBatchId:i.largestBatchId}}class FJ{getBundleMetadata(e,t){return T3(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Tp(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return T3(e).put({bundleId:(i=t).id,createTime:Sp(Qi(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return A3(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:u1(r.bundledQuery),readTime:Tp(r.readTime)};var r})}saveNamedQuery(e,t){return A3(e).put({name:(i=t).name,readTime:Sp(Qi(i.readTime)),bundledQuery:i.bundledQuery});var i}}function T3(n){return Xi(n,"bundles")}function A3(n){return Xi(n,"namedQueries")}class kT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new kT(e,t.uid||"")}getOverlay(e,t){return v0(e).get(I3(this.userId,t)).next(i=>i?d1(this.It,i):null)}getOverlays(e,t){const i=Nl();return ie.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,l)=>{const d=new c1(t,l);r.push(this.ue(e,d))}),ie.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(ss(l.getCollectionPath())));const s=[];return r.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(v0(e).Y("collectionPathOverlayIndex",d))}),ie.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Nl(),s=ss(t),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return v0(e).W("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const y=d1(this.It,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Nl();let l;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return v0(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,y,w)=>{const D=d1(this.It,y);s.size()<r||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):w.done()}).next(()=>s)}ue(e,t){return v0(e).put(function(i,r,s){const[l,d,p]=I3(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:_0(i.re,s.mutation)}}(this.It,this.userId,t))}}function v0(n){return Xi(n,"documentOverlays")}class Mp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(fi(e.integerValue));else if("doubleValue"in e){const i=fi(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),t0(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(bp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?wG(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):tt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const r of Object.keys(i))this._e(r,t),this.ae(i[r],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const r of i)this.ae(r,t)}ge(e,t){this.le(t,37),Ue.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function LJ(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function M3(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=LJ(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Mp.Te=new Mp;class BJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=t.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(e){const t=this.Ce(e),i=M3(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ne(e){const t=this.Ce(e),i=M3(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class VJ{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class UJ{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class b0{constructor(){this.Be=new BJ,this.Le=new VJ(this.Be),this.Ue=new UJ(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class xp{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new xp(this.indexId,this.documentKey,this.arrayValue,i)}}function Rp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=x3(n.arrayValue,e.arrayValue),0!==t?t:(t=x3(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function x3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class HJ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=jN(e);if(void 0!==t&&!this.ze(t))return!1;const i=_p(e);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const l=i[r];if(!this.He(this.je,l)||!this.Je(this.Ge[s++],l))return!1;++r}for(;r<i.length;++r){const l=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class jJ{constructor(){this.Ye=new h1}addToCollectionParentIndex(e,t){return this.Ye.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ro.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class h1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Cn(Jt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Cn(Jt.comparator)).toArray()}}const OT=new Uint8Array(0);class GJ{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new h1,this.Ze=new Rd(i=>Ep(i),(i,r)=>o0(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:i,parent:ss(r)};return R3(e).put(s)}return ie.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[aG(t),""],!1,!0);return R3(e).W(r).next(s=>{for(const l of s){if(l.collectionId!==t)break;i.push(Ll(l.parent))}return i})}addFieldIndex(e,t){const i=PT(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete r.indexId;const s=i.add(r);if(t.indexState){const l=C0(e);return s.next(d=>{l.put(S3(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=PT(e),r=C0(e),s=w0(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=w0(e);let r=!0;const s=new Map;return ie.forEach(this.tn(t),l=>this.en(e,l).next(d=>{r&&(r=!!d),s.set(l,d)})).next(()=>{if(r){let l=kt();const d=[];return ie.forEach(s,(p,y)=>{var w;Ae("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(xe=>`${xe.fieldPath}:${xe.kind}`).join(",")}`} to execute ${Ep(t)}`);const D=function(xe,Re){const Xe=jN(Re);if(void 0===Xe)return null;for(const rt of ET(xe,Xe.fieldPath))switch(rt.op){case"array-contains-any":return rt.value.arrayValue.values||[];case"array-contains":return[rt.value]}return null}(y,p),S=function(xe,Re){const Xe=new Map;for(const rt of _p(Re))for(const jt of ET(xe,rt.fieldPath))switch(jt.op){case"==":case"in":Xe.set(rt.fieldPath.canonicalString(),jt.value);break;case"not-in":case"!=":return Xe.set(rt.fieldPath.canonicalString(),jt.value),Array.from(Xe.values())}return null}(y,p),R=function(xe,Re){const Xe=[];let rt=!0;for(const jt of _p(Re)){const wi=0===jt.kind?SG(xe,jt.fieldPath,xe.startAt):TG(xe,jt.fieldPath,xe.startAt);Xe.push(wi.value),rt&&(rt=wi.inclusive)}return new xd(Xe,rt)}(y,p),P=function(xe,Re){const Xe=[];let rt=!0;for(const jt of _p(Re)){const wi=0===jt.kind?TG(xe,jt.fieldPath,xe.endAt):SG(xe,jt.fieldPath,xe.endAt);Xe.push(wi.value),rt&&(rt=wi.inclusive)}return new xd(Xe,rt)}(y,p),H=this.nn(p,y,R),Y=this.nn(p,y,P),Ce=this.sn(p,y,S),Pe=this.rn(p.indexId,D,H,R.inclusive,Y,P.inclusive,Ce);return ie.forEach(Pe,xe=>i.J(xe,t.limit).next(Re=>{Re.forEach(Xe=>{const rt=Ue.fromSegments(Xe.documentKey);l.has(rt)||(l=l.add(rt),d.push(rt))})}))}).next(()=>d)}return ie.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,r,s,l,d){const p=(null!=t?t.length:1)*Math.max(i.length,s.length),y=p/(null!=t?t.length:1),w=[];for(let D=0;D<p;++D){const S=t?this.on(t[D/y]):OT,R=this.un(e,S,i[D%y],r),P=this.cn(e,S,s[D%y],l),H=d.map(Y=>this.un(e,S,Y,!0));w.push(...this.createRange(R,P,H))}return w}un(e,t,i,r){const s=new xp(e,Ue.empty(),t,i);return r?s:s.Ke()}cn(e,t,i,r){const s=new xp(e,Ue.empty(),t,i);return r?s.Ke():s}en(e,t){const i=new HJ(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let l=null;for(const d of s)i.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let i=2;return ie.forEach(this.tn(t),r=>this.en(e,r).next(s=>{s?0!==i&&s.fields.length<function(l){let d=new Cn(di.comparator),p=!1;for(const y of l.filters){const w=y;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?p=!0:d=d.add(w.field))}for(const y of l.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new b0;for(const r of _p(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const l=i.qe(r.kind);Mp.Te.ce(s,l)}return i.$e()}on(e){const t=new b0;return Mp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new b0;return Mp.Te.ce(Cp(this.databaseId,t),i.qe(function(r){const s=_p(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let r=[];r.push(new b0);let s=0;for(const l of _p(e)){const d=i[s++];for(const p of r)if(this.ln(t,l.fieldPath)&&r0(d))r=this.fn(r,l,d);else{const y=p.qe(l.kind);Mp.Te.ce(d,y)}}return this.dn(r)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const r=[...e],s=[];for(const l of i.arrayValue.values||[])for(const d of r){const p=new b0;p.seed(d.$e()),Mp.Te.ce(l,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(i=>i instanceof Cr&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=PT(e),r=C0(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{const l=[];return ie.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{l.push(function(y,w){const D=w?new Qw(w.sequenceNumber,new ro(Tp(w.readTime),new Ue(Ll(w.documentKey)),w.largestBatchId)):Qw.empty(),S=y.fields.map(([R,P])=>new _T(di.fromServerFormat(R),P));return new gT(y.indexId,y.collectionGroup,S,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:At(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=PT(e),s=C0(e);return this._n(e).next(l=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ie.forEach(d,p=>s.put(S3(p.indexId,this.user,l,i)))))}updateIndexEntries(e,t){const i=new Map;return ie.forEach(t,(r,s)=>{const l=i.get(r.collectionGroup);return(l?ie.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ie.forEach(d,p=>this.wn(e,r,p).next(y=>{const w=this.mn(s,p);return y.isEqual(w)?ie.resolve():this.gn(e,s,p,y,w)}))))})}yn(e,t,i,r){return w0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,r){return w0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const r=w0(e);let s=new Cn(Rp);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(l,d)=>{s=s.add(new xp(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(e,t){let i=new Cn(Rp);const r=this.an(t,e);if(null==r)return i;const s=jN(t);if(null!=s){const l=e.data.field(s.fieldPath);if(r0(l))for(const d of l.arrayValue.values||[])i=i.add(new xp(t.indexId,e.key,this.on(d),r))}else i=i.add(new xp(t.indexId,e.key,OT,r));return i}gn(e,t,i,r,s){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,y,w,D){const S=d.getIterator(),R=p.getIterator();let P=O_(S),H=O_(R);for(;P||H;){let Y=!1,Ce=!1;if(P&&H){const Pe=y(P,H);Pe<0?Ce=!0:Pe>0&&(Y=!0)}else null!=P?Ce=!0:Y=!0;Y?(w(H),H=O_(R)):Ce?(D(P),P=O_(S)):(P=O_(S),H=O_(R))}}(r,s,Rp,d=>{l.push(this.yn(e,t,i,d))},d=>{l.push(this.pn(e,t,i,d))}),ie.waitFor(l)}_n(e){let t=1;return C0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,d)=>Rp(l,d)).filter((l,d,p)=>!d||0!==Rp(l,p[d-1]));const r=[];r.push(e);for(const l of i){const d=Rp(l,e),p=Rp(l,t);if(0===d)r[0]=e.Ke();else if(d>0&&p<0)r.push(l),r.push(l.Ke());else if(p>0)break}r.push(t);const s=[];for(let l=0;l<r.length;l+=2)s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,OT,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,OT,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(k3)}getMinOffset(e,t){return ie.mapArray(this.tn(t),i=>this.en(e,i).next(r=>r||tt())).next(k3)}}function R3(n){return Xi(n,"collectionParents")}function w0(n){return Xi(n,"indexEntries")}function PT(n){return Xi(n,"indexConfiguration")}function C0(n){return Xi(n,"indexState")}function k3(n){bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;GN(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new ro(e.readTime,e.documentKey,t)}const O3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ts{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Ts(e,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function P3(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=i.Z({range:l},(w,D,S)=>(d++,S.delete()));s.push(p.next(()=>{bt(1===d)}));const y=[];for(const w of t.mutations){const D=y3(e,w.key.path,t.batchId);s.push(r.delete(D)),y.push(w.key)}return ie.waitFor(s).next(()=>y)}function NT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Ts.DEFAULT_COLLECTION_PERCENTILE=10,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ts.DEFAULT=new Ts(41943040,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ts.DISABLED=new Ts(-1,0,0);class FT{constructor(e,t,i,r){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(e,t,i,r){bt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new FT(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Od(e).Z({index:"userMutationsIndex",range:i},(r,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=$_(e),l=Od(e);return l.add({}).next(d=>{bt("number"==typeof d);const p=new a1(d,t,i,r),y=function(S,R,P){const H=P.baseMutations.map(Ce=>_0(S.re,Ce)),Y=P.mutations.map(Ce=>_0(S.re,Ce));return{userId:R,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:H,mutations:Y}}(this.It,this.userId,p),w=[];let D=new Cn((S,R)=>At(S.canonicalString(),R.canonicalString()));for(const S of r){const R=y3(this.userId,S.key.path,d);D=D.add(S.key.path.popLast()),w.push(l.put(y)),w.push(s.put(R,yJ))}return D.forEach(S=>{w.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),ie.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return Od(e).get(t).next(i=>i?(bt(i.userId===this.userId),Ap(this.It,i)):null)}Tn(e,t){return this.In[t]?ie.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.In[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Od(e).Z({index:"userMutationsIndex",range:r},(l,d,p)=>{d.userId===this.userId&&(bt(d.batchId>=i),s=Ap(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Od(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Od(e).W("userMutationsIndex",t).next(i=>i.map(r=>Ap(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=xT(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return $_(e).Z({range:r},(l,d,p)=>{const[y,w,D]=l,S=Ll(w);if(y===this.userId&&t.path.isEqual(S))return Od(e).get(D).next(R=>{if(!R)throw tt();bt(R.userId===this.userId),s.push(Ap(this.It,R))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Cn(At);const r=[];return t.forEach(s=>{const l=xT(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=$_(e).Z({range:d},(y,w,D)=>{const[S,R,P]=y,H=Ll(R);S===this.userId&&s.path.isEqual(H)?i=i.add(P):D.done()});r.push(p)}),ie.waitFor(r).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=xT(this.userId,i),l=IDBKeyRange.lowerBound(s);let d=new Cn(At);return $_(e).Z({range:l},(p,y,w)=>{const[D,S,R]=p,P=Ll(S);D===this.userId&&i.isPrefixOf(P)?P.length===r&&(d=d.add(R)):w.done()}).next(()=>this.En(e,d))}En(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Od(e).get(s).next(l=>{if(null===l)throw tt();bt(l.userId===this.userId),i.push(Ap(this.It,l))}))}),ie.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return P3(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ie.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return $_(e).Z({range:i},(s,l,d)=>{if(s[0]===this.userId){const p=Ll(s[1]);r.push(p)}else d.done()}).next(()=>{bt(0===r.length)})})}containsKey(e,t){return N3(e,this.userId,t)}Rn(e){return F3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function N3(n,e,t){const i=xT(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return $_(n).Z({range:s,X:!0},(d,p,y)=>{const[w,D,S]=d;w===e&&D===r&&(l=!0),y.done()}).next(()=>l)}function Od(n){return Xi(n,"mutations")}function $_(n){return Xi(n,"documentMutations")}function F3(n){return Xi(n,"mutationQueues")}class kp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kp(0)}static vn(){return new kp(-1)}}class $J{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new kp(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>wt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>z_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(bt(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return z_(e).Z((l,d)=>{const p=y0(d);p.sequenceNumber<=t&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(e,p)))}).next(()=>ie.waitFor(s)).next(()=>r)}forEachTarget(e,t){return z_(e).Z((i,r)=>{const s=y0(r);t(s)})}Vn(e){return L3(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}Sn(e,t){return L3(e).put("targetGlobalKey",t)}Dn(e,t){return z_(e).put(D3(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ep(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return z_(e).Z({range:r,index:"queryTargetsIndex"},(l,d,p)=>{const y=y0(d);o0(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Pd(e);return t.forEach(l=>{const d=ss(l.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(e,i,l))}),ie.waitFor(r)}removeMatchingKeys(e,t,i){const r=Pd(e);return ie.forEach(t,s=>{const l=ss(s.path);return ie.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Pd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Pd(e);let s=kt();return r.Z({range:i,X:!0},(l,d,p)=>{const y=Ll(l[1]),w=new Ue(y);s=s.add(w)}).next(()=>s)}containsKey(e,t){const i=ss(t.path),r=IDBKeyRange.bound([i],[aG(i)],!1,!0);let s=0;return Pd(e).Z({index:"documentTargetsIndex",X:!0,range:r},([l,d],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}se(e,t){return z_(e).get(t).next(i=>i?y0(i):null)}}function z_(n){return Xi(n,"targets")}function L3(n){return Xi(n,"targetGlobal")}function Pd(n){return Xi(n,"targetDocuments")}function B3([n,e],[t,i]){const r=At(n,t);return 0===r?At(e,i):r}class zJ{constructor(e){this.xn=e,this.buffer=new Cn(B3),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();B3(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qJ{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Z.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Id(i)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Dd(i)}yield t.Fn(3e5)}))}}class WJ{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(Is.at);const i=new zJ(t);return this.$n.forEachTarget(e,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(e,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(O3)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O3):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,r,s,l,d,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,l=Date.now(),this.nthSequenceNumber(e,r))).next(D=>(i=D,d=Date.now(),this.removeTargets(e,i,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(D=>(y=Date.now(),UN()<=Es.in.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${r} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-w}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class ZJ{constructor(e,t){this.db=e,this.garbageCollector=new WJ(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,r)=>t(r))}addReference(e,t,i){return LT(e,i)}removeReference(e,t,i){return LT(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return LT(e,t)}Gn(e,t){return function(i,r){let s=!1;return F3(i).tt(l=>N3(i,l,r).next(d=>(d&&(s=!0),ie.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(e,(l,d)=>{if(d<=t){const p=this.Gn(e,l).next(y=>{if(!y)return s++,i.getEntry(e,l).next(()=>(i.removeEntry(l,wt.min()),Pd(e).delete([0,ss(l.path)])))});r.push(p)}}).next(()=>ie.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return LT(e,t)}Kn(e,t){const i=Pd(e);let r,s=Is.at;return i.Z({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:y})=>{0===l?(s!==Is.at&&t(new Ue(Ll(r)),s),s=y,r=p):s=Is.at}).next(()=>{s!==Is.at&&t(new Ue(Ll(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LT(n,e){return Pd(n).put((i=n.currentSequenceNumber,{targetId:0,path:ss(e.path),sequenceNumber:i}));var i}class V3{constructor(){this.changes=new Rd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YJ{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Op(e).put(i)}removeEntry(e,t,i){return Op(e).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],RT(s),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=Nn.newInvalidDocument(t);return Op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(E0(t))},(r,s)=>{i=this.jn(t,s)}).next(()=>i)}Wn(e,t){let i={size:0,document:Nn.newInvalidDocument(t)};return Op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(E0(t))},(r,s)=>{i={document:this.jn(t,s),size:NT(s)}}).next(()=>i)}getEntries(e,t){let i=Ss();return this.zn(e,t,(r,s)=>{const l=this.jn(r,s);i=i.insert(r,l)}).next(()=>i)}Hn(e,t){let i=Ss(),r=new hi(Ue.comparator);return this.zn(e,t,(s,l)=>{const d=this.jn(s,l);i=i.insert(s,d),r=r.insert(s,NT(l))}).next(()=>({documents:i,Jn:r}))}zn(e,t,i){if(t.isEmpty())return ie.resolve();let r=new Cn(G3);t.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(E0(r.first()),E0(r.last())),l=r.getIterator();let d=l.getNext();return Op(e).Z({index:"documentKeyIndex",range:s},(p,y,w)=>{const D=Ue.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&G3(d,D)<0;)i(d,null),d=l.getNext();d&&d.isEqual(D)&&(i(d,y),d=l.hasNext()?l.getNext():null),d?w.j(E0(d)):w.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),RT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Op(e).W(IDBKeyRange.bound(r,s,!0)).next(l=>{let d=Ss();for(const p of l){const y=this.jn(Ue.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,i,r){let s=Ss();const l=j3(t,i),d=j3(t,ro.max());return Op(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,y,w)=>{const D=this.jn(Ue.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(e){return new KJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return H3(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}Qn(e,t){return H3(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function NJ(n,e){let t;if(e.document)t=d3(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ue.fromSegments(e.noDocument.path),r=Tp(e.noDocument.readTime);t=Nn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const i=Ue.fromSegments(e.unknownDocument.path),r=Tp(e.unknownDocument.version);t=Nn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new $n(i[0],i[1]);return wt.fromTimestamp(r)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(wt.min()))return i}return Nn.newInvalidDocument(e)}}function U3(n){return new YJ(n)}class KJ extends V3{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Rd(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Cn((s,l)=>At(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,d.readTime)),l.isValidDocument()){const p=E3(this.Yn.It,l);r=r.add(s.path.popLast()),i+=NT(p)-d.size,t.push(this.Yn.addEntry(e,s,p))}else if(i-=d.size,this.trackRemovals){const p=E3(this.Yn.It,l.convertToNoDocument(wt.min()));t.push(this.Yn.addEntry(e,s,p))}}),r.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,i)),ie.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:r})=>(r.forEach((s,l)=>{this.Xn.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function H3(n){return Xi(n,"remoteDocumentGlobal")}function Op(n){return Xi(n,"remoteDocumentsV14")}function E0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function j3(n,e){const t=e.documentKey.path.toArray();return[n,RT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function G3(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=At(t[s],i[s]),r)return r;return r=At(t.length,i.length),r||(r=At(t[t.length-2],i[i.length-2]),r||At(t[t.length-1],i[i.length-1]))}class QJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $3{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&c0(i.mutation,r,so.empty(),$n.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,kt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=kt()){const r=Nl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let l=u0();return s.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=Nl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,kt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,i,r){let s=Ss();const l=d0(),d=d0();return t.forEach((p,y)=>{const w=i.get(y.key);r.has(y.key)&&(void 0===w||w.mutation instanceof Qc)?s=s.insert(y.key,y):void 0!==w&&(l.set(y.key,w.mutation.getFieldMask()),c0(w.mutation,y,w.mutation.getFieldMask(),$n.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,w)=>l.set(y,w)),t.forEach((y,w)=>{var D;return d.set(y,new QJ(w,null!==(D=l.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const i=d0();let r=new hi((l,d)=>l-d),s=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let w=i.get(p)||so.empty();w=d.applyToLocalView(y,w),i.set(p,w);const D=(r.get(d.batchId)||kt()).add(p);r=r.insert(d.batchId,D)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,w=p.value,D=JG();w.forEach(S=>{if(!s.has(S)){const R=$G(t.get(S),i.get(S));null!==R&&D.set(S,R),s=s.add(S)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return ie.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Ue.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):QN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):ie.resolve(Nl());let d=-1,p=s;return l.next(y=>ie.forEach(y,(w,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(w)?ie.resolve():this.getBaseDocument(e,w,D).next(S=>{p=p.insert(w,S)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,kt())).next(w=>({batchId:d,changes:XG(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next(i=>{let r=u0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=u0();return this.indexManager.getCollectionParents(e,r).next(l=>ie.forEach(l,d=>{const p=(y=t,w=d.child(r),new Kc(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(e,p,i).next(y=>{y.forEach((w,D)=>{s=s.insert(w,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const y=p.getKey();null===r.get(y)&&(r=r.insert(y,Nn.newInvalidDocument(y)))});let l=u0();return r.forEach((d,p)=>{const y=s.get(d);void 0!==y&&c0(y.mutation,p,so.empty(),$n.now()),JN(t,p)&&(l=l.insert(d,p))}),l})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):ie.resolve(Nn.newInvalidDocument(t))}}class XJ{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ie.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Qi(i.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:u1(i.bundledQuery),readTime:Qi(i.readTime)}),ie.resolve();var i}}class JJ{constructor(){this.overlays=new hi(Ue.comparator),this.es=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Nl();return ie.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ue(e,t,s)}),ie.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const r=Nl(),s=t.length+1,l=new Ue(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return ie.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new hi((y,w)=>y-w);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=s.get(y.largestBatchId);null===w&&(w=Nl(),s=s.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=Nl(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=r)););return ie.resolve(d)}ue(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new c1(t,i));let s=this.es.get(t);void 0===s&&(s=kt(),this.es.set(t,s)),this.es.set(t,s.add(i.key))}}class f1{constructor(){this.ns=new Cn(Ji.ss),this.rs=new Cn(Ji.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Ji(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Ji(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Ue(new Jt([])),i=new Ji(t,e),r=new Ji(t,e+1),s=[];return this.rs.forEachInRange([i,r],l=>{this.cs(l),s.push(l.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ue(new Jt([])),i=new Ji(t,e),r=new Ji(t,e+1);let s=kt();return this.rs.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Ji(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Ji{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ue.comparator(e.key,t.key)||At(e._s,t._s)}static os(e,t){return At(e._s,t._s)||Ue.comparator(e.key,t.key)}}class eee{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Cn(Ji.ss)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.ws;this.ws++;const l=new a1(s,t,i,r);this.mutationQueue.push(l);for(const d of r)this.gs=this.gs.add(new Ji(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ps(t+1),s=r<0?0:r;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ji(t,0),r=new Ji(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],l=>{const d=this.ys(l._s);s.push(d)}),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Cn(At);return t.forEach(r=>{const s=new Ji(r,0),l=new Ji(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,l],d=>{i=i.add(d._s)})}),ie.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Ue.isDocumentKey(s)||(s=s.child(""));const l=new Ji(new Ue(s),0);let d=new Cn(At);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(p._s)),!0)},l),ie.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(i=>{const r=this.ys(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){bt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return ie.forEach(t.mutations,r=>{const s=new Ji(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Ji(t,0),r=this.gs.firstAfterOrEqual(i);return ie.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ie.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tee{constructor(e){this.Es=e,this.docs=new hi(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,l=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let i=Ss();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Nn.newInvalidDocument(r))}),ie.resolve(i)}getAllFromCollection(e,t,i){let r=Ss();const s=new Ue(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||GN(cG(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return ie.resolve(r)}getAllFromCollectionGroup(e,t,i,r){tt()}As(e,t){return ie.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new nee(this)}getSize(e){return ie.resolve(this.size)}}class nee extends V3{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(i)}),ie.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class iee{constructor(e){this.persistence=e,this.Rs=new Rd(t=>Ep(t),o0),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new f1,this.targetCount=0,this.vs=kp.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,r)=>t(r)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),ie.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Dn(t),ie.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===i.get(d.targetId)&&(this.Rs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),ie.waitFor(s).next(()=>r)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(l=>{s.push(r.markPotentiallyOrphaned(e,l))}),ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.Ps.containsKey(t))}}class z3{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Is(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new iee(this),this.indexManager=new jJ,this.remoteDocumentCache=new tee(i=>this.referenceDelegate.xs(i)),this.It=new C3(t),this.Ns=new XJ(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new eee(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ae("MemoryPersistence","Starting transaction:",e);const r=new ree(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(e,t){return ie.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class ree extends dG{constructor(e){super(),this.currentSequenceNumber=e}}class BT{constructor(e){this.persistence=e,this.Fs=new f1,this.$s=null}static Bs(e){return new BT(e)}get Ls(){if(this.$s)return this.$s;throw tt()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ls,i=>{const r=Ue.fromPath(i);return this.Us(e,r).next(s=>{s||t.removeEntry(r,wt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ie.or([()=>ie.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class see{constructor(e){this.It=e}$(e,t,i,r){const s=new yT("createOrUpgrade",t);var d;i<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_3,{unique:!0}),d.createObjectStore("documentMutations"),q3(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=ie.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),q3(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(d,p){return p.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_3,{unique:!0});const w=p.store("mutations"),D=y.map(S=>w.put(S));return ie.waitFor(D)})}(e,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.qs(s))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),i<7&&r>=7&&(l=l.next(()=>this.Gs(s))),i<8&&r>=8&&(l=l.next(()=>this.Qs(e,s))),i<9&&r>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.js(s))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:xJ});p.createIndex("collectionPathOverlayIndex",RJ,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",kJ,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:vJ});p.createIndex("documentKeyIndex",bJ),p.createIndex("collectionGroupIndex",wJ)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.zs(e,s))),i<15&&r>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:SJ}).createIndex("sequenceNumberIndex",TJ,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:AJ}).createIndex("documentKeyIndex",MJ,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=NT(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>ie.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",l).next(d=>ie.forEach(d,p=>{bt(p.userId===s.userId);const y=Ap(this.It,p);return P3(e,s.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((l,d)=>{const p=new Jt(l),y=[0,ss(p)];s.push(t.get(y).next(w=>w?ie.resolve():t.put({targetId:0,path:ss(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ie.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:IJ});const i=t.store("collectionParents"),r=new h1,s=l=>{if(r.add(l)){const d=l.lastSegment(),p=l.popLast();return i.put({collectionId:d,parent:ss(p)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const p=new Jt(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,p],y)=>{const w=Ll(d);return s(w.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,r)=>{const s=y0(r),l=D3(this.It,s);return t.put(l)})}Ws(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((s,l)=>{const d=t.store("remoteDocumentsV14"),p=(y=l,y.document?new Ue(Jt.fromString(y.document.name).popFirst(5)):y.noDocument?Ue.fromSegments(y.noDocument.path):y.unknownDocument?Ue.fromSegments(y.unknownDocument.path):tt()).path.toArray();var y;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(d.put(w))}).next(()=>ie.waitFor(r))}zs(e,t){const i=t.store("mutations"),r=U3(this.It),s=new z3(BT.Bs,this.It.re);return i.W().next(l=>{const d=new Map;return l.forEach(p=>{var y;let w=null!==(y=d.get(p.userId))&&void 0!==y?y:kt();Ap(this.It,p).keys().forEach(D=>w=w.add(D)),d.set(p.userId,w)}),ie.forEach(d,(p,y)=>{const w=new Ki(y),D=kT.oe(this.It,w),S=s.getIndexManager(w),R=FT.oe(w,this.It,S,s.referenceDelegate);return new $3(r,R,D,S).recalculateAndSaveOverlaysForDocumentKeys(new o1(t,Is.at),p).next()})})}}function q3(n){n.createObjectStore("targetDocuments",{keyPath:EJ}).createIndex("documentTargetsIndex",DJ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CJ,{unique:!0}),n.createObjectStore("targetGlobal")}const p1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class m1{constructor(e,t,i,r,s,l,d,p,y,w,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=s,this.window=l,this.document=d,this.Js=y,this.Ys=w,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=S=>Promise.resolve(),!m1.C())throw new De(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZJ(this,r),this.ii=t+"main",this.It=new C3(p),this.ri=new Na(this.ii,this.Xs,new see(this.It)),this.Cs=new $J(this.referenceDelegate,this.It),this.remoteDocumentCache=U3(this.It),this.Ns=new FJ,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===w&&vi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(oe.FAILED_PRECONDITION,p1);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Is(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,Z.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Z.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Z.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>VT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Id(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return D0(e).get("owner").next(t=>ie.resolve(this.mi(t)))}gi(e){return VT(e).delete(this.clientId)}yi(){var e=this;return(0,Z.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Xi(i,"clientMetadata");return r.W().next(s=>{const l=e.Ii(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return ie.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ie.resolve(!0):D0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new De(oe.FAILED_PRECONDITION,p1);return!1}}return!(!this.networkEnabled||!this.inForeground)||VT(e).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const l=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Z.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new o1(t,Is.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>VT(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return FT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new GJ(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return kT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ae("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.Xs)?PJ:14===l?w3:13===l?b3:12===l?OJ:11===l?v3:void tt();var l;let d;return this.ri.runTransaction(e,r,s,p=>(d=new o1(p,this.Ss?this.Ss.next():Is.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw vi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new De(oe.FAILED_PRECONDITION,uG);return i(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return D0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(oe.FAILED_PRECONDITION,p1)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return D0(e).put("owner",t)}static C(){return Na.C()}_i(e){const t=D0(e);return t.get("owner").next(i=>this.mi(i)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(vi(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return vi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function D0(n){return Xi(n,"owner")}function VT(n){return Xi(n,"clientMetadata")}function g1(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _1{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=r}static Ci(e,t){let i=kt(),r=kt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new _1(e,t.fromCache,i,r)}}class W3{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.ki(e,t).next(s=>s||this.Oi(e,t,r,i)).next(s=>s||this.Mi(e,t))}ki(e,t){if(kG(t))return ie.resolve(null);let i=rs(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=DT(t,null,"F"),i=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const l=kt(...s);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.Fi(t,d);return this.$i(t,y,l,p.readTime)?this.ki(e,DT(t,null,"F")):this.Bi(e,y,t,p)}))})))}Oi(e,t,i,r){return kG(t)||r.isEqual(wt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(s=>{const l=this.Fi(t,s);return this.$i(t,l,i,r)?this.Mi(e,t):(UN()<=Es.in.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),XN(t)),this.Bi(e,l,t,lG(r,-1)))})}Fi(e,t){let i=new Cn(NG(e));return t.forEach((r,s)=>{JN(e,s)&&(i=i.add(s))}),i}$i(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(e,t){return UN()<=Es.in.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",XN(t)),this.Ni.getDocumentsMatchingQuery(e,t,ro.min())}Bi(e,t,i,r){return this.Ni.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class oee{constructor(e,t,i,r){this.persistence=e,this.Li=t,this.It=r,this.Ui=new hi(At),this.qi=new Rd(s=>Ep(s),o0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $3(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Z3(n,e,t,i){return new oee(n,e,t,i)}function Y3(n,e){return y1.apply(this,arguments)}function y1(){return y1=(0,Z.Z)(function*(n,e){const t=je(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],d=[];let p=kt();for(const y of r){l.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of s){d.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:d}))})})}),y1.apply(this,arguments)}function aee(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,p,y){const w=p.batch,D=w.keys();let S=ie.resolve();return D.forEach(R=>{S=S.next(()=>y.getEntry(d,R)).next(P=>{const H=p.docVersions.get(R);bt(null!==H),P.version.compareTo(H)<0&&(w.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),y.addEntry(P)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(d,w))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=kt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function K3(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function lee(n,e){const t=je(n),i=e.snapshotVersion;let r=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.Ui;const d=[];e.targetChanges.forEach((w,D)=>{const S=r.get(D);if(!S)return;d.push(t.Cs.removeMatchingKeys(s,w.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(s,w.addedDocuments,D)));let R=S.withSequenceNumber(s.currentSequenceNumber);var P,H,Y;e.targetMismatches.has(D)?R=R.withResumeToken(Ui.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):w.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(w.resumeToken,i)),r=r.insert(D,R),H=R,Y=w,(0===(P=S).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(s,R))});let p=Ss(),y=kt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(Q3(s,l,e.documentUpdates).next(w=>{p=w.Wi,y=w.zi})),!i.isEqual(wt.min())){const w=t.Cs.getLastRemoteSnapshotVersion(s).next(D=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(w)}return ie.waitFor(d).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.Ui=r,s))}function Q3(n,e,t){let i=kt(),r=kt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let l=Ss();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(wt.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):Ae("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Wi:l,zi:r}})}function cee(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function q_(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Cs.getTargetData(i,e).next(s=>s?(r=s,ie.resolve(r)):t.Cs.allocateTargetId(i).next(l=>(r=new kd(e,l,0,i.currentSequenceNumber),t.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function W_(n,e,t){return v1.apply(this,arguments)}function v1(){return v1=(0,Z.Z)(function*(n,e,t){const i=je(n),r=i.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Id(l))throw l;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ui=i.Ui.remove(e),i.qi.delete(r.target)}),v1.apply(this,arguments)}function UT(n,e,t){const i=je(n);let r=wt.min(),s=kt();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,p,y){const w=je(d),D=w.qi.get(y);return void 0!==D?ie.resolve(w.Ui.get(D)):w.Cs.getTargetData(p,y)}(i,l,rs(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>i.Li.getDocumentsMatchingQuery(l,e,t?r:wt.min(),t?s:kt())).next(d=>(e$(i,PG(e),d),{documents:d,Hi:s})))}function X3(n,e){const t=je(n),i=je(t.Cs),r=t.Ui.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.se(s,e).next(l=>l?l.target:null))}function J3(n,e){const t=je(n),i=t.Ki.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Gi.getAllFromCollectionGroup(r,e,lG(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(e$(t,e,r),r))}function e$(n,e,t){let i=n.Ki.get(e)||wt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(e,i)}function b1(){return b1=(0,Z.Z)(function*(n,e,t,i){const r=je(n);let s=kt(),l=Ss();for(const y of t){const w=e.Ji(y.metadata.name);y.document&&(s=s.add(w));const D=e.Yi(y);D.setReadTime(e.Xi(y.metadata.readTime)),l=l.insert(w,D)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),p=yield q_(r,(y=i,rs(F_(Jt.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>Q3(y,d,l).next(w=>(d.apply(y),w)).next(w=>r.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.Cs.addMatchingKeys(y,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,w.Wi,w.zi)).next(()=>w.Wi)))}),b1.apply(this,arguments)}function dee(n,e){return w1.apply(this,arguments)}function w1(){return w1=(0,Z.Z)(function*(n,e,t=kt()){const i=yield q_(n,rs(u1(e.bundledQuery))),r=je(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=Qi(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ns.saveNamedQuery(s,e);const d=i.withResumeToken(Ui.EMPTY_BYTE_STRING,l);return r.Ui=r.Ui.insert(d.targetId,d),r.Cs.updateTargetData(s,d).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,t,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,e))})}),w1.apply(this,arguments)}function t$(n,e){return`firestore_clients_${n}_${e}`}function n$(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function C1(n,e){return`firestore_targets_${n}_${e}`}class HT{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new De(r.error.code,r.error.message))),l?new HT(e,t,r.state,s):(vi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class I0{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new De(i.error.code,i.error.message))),s?new I0(e,i.state,r):(vi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=AT();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=_G(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new jT(e,s):(vi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class E1{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new E1(t.clientId,t.onlineState):(vi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class D1{constructor(){this.activeTargetIds=AT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I1{constructor(e,t,i,r,s){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new hi(At),this.started=!1,this.cr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=t$(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new D1),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Z.Z)(function*(){const t=yield e.syncEngine.vi();for(const r of t){if(r===e.sr)continue;const s=e.getItem(t$(e.persistenceKey,r));if(s){const l=jT.Zi(r,s);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const r=e.yr(i);r&&e.pr(r)}for(const r of e.cr)e.rr(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(C1(this.persistenceKey,e));if(i){const r=I0.Zi(e,i);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(C1(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Er(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ae("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Z.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Vr(r,null)}{const r=t.Sr(i.key,i.newValue);if(r)return t.Vr(r.clientId,r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Nr(i.key,i.newValue);if(r)return t.kr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.yr(i.newValue);if(r)return t.pr(r)}}else if(i.key===t.hr){const r=function(s){let l=Is.at;if(null!=s)try{const d=JSON.parse(s);bt("number"==typeof d),l=d}catch(d){vi("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);r!==Is.at&&t.sequenceNumberHandler(r)}else if(i.key===t.mr){const r=t.Or(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const r=new HT(this.currentUser,e,t,i),s=n$(this.persistenceKey,this.currentUser,e);this.setItem(s,r.tr())}Er(e){const t=n$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const r=C1(this.persistenceKey,e),s=new I0(e,t,i);this.setItem(r,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return jT.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return HT.Zi(new Ki(void 0!==i[2]?i[2]:null),r,t)}Nr(e,t){const i=this._r.exec(e),r=Number(i[1]);return I0.Zi(r,t)}yr(e){return E1.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Z.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),s=this.Ir(i),l=[],d=[];return s.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(l,d).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=AT();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class i${constructor(){this.Lr=new D1,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new D1,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hee{qr(e){}shutdown(){}}class r${constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pee{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class mee extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,r,s){const l=this.ho(e,t);Ae("RestConnection","Sending: ",l,i);const d={};return this.lo(d,r,s),this.fo(e,l,d,i).then(p=>(Ae("RestConnection","Received: ",p),p),p=>{throw gp("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",i),p})}_o(e,t,i,r,s,l){return this.ao(e,t,i,r,s)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+R_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}ho(e,t){return`${this.oo}/v1/${t}:${fee[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,r){return new Promise((s,l)=>{const d=new fX;d.setWithCredentials(!0),d.listenOnce(uX.COMPLETE,()=>{var y;try{switch(d.getLastErrorCode()){case VN.NO_ERROR:const w=d.getResponseJson();Ae("Connection","XHR received:",JSON.stringify(w)),s(w);break;case VN.TIMEOUT:Ae("Connection",'RPC "'+e+'" timed out'),l(new De(oe.DEADLINE_EXCEEDED,"Request time out"));break;case VN.HTTP_ERROR:const D=d.getStatus();if(Ae("Connection",'RPC "'+e+'" failed with status:',D,"response text:",d.getResponseText()),D>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=null===(y=S)||void 0===y?void 0:y.error;if(R&&R.status&&R.message){const P=function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Y)>=0?Y:oe.UNKNOWN}(R.status);l(new De(P,R.message))}else l(new De(oe.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new De(oe.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Ae("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(r);d.send(t,"POST",p,i,15)})}wo(e,t,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=lX(),l=cX(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new hX({})),this.lo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const p=r.join("");Ae("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let w=!1,D=!1;const S=new pee({Hr:P=>{D?Ae("Connection","Not sending because WebChannel is closed:",P):(w||(Ae("Connection","Opening WebChannel transport."),y.open(),w=!0),Ae("Connection","WebChannel sending:",P),y.send(P))},Jr:()=>y.close()}),R=(P,H,Y)=>{P.listen(H,Ce=>{try{Y(Ce)}catch(Pe){setTimeout(()=>{throw Pe},0)}})};return R(y,mT.EventType.OPEN,()=>{D||Ae("Connection","WebChannel transport opened.")}),R(y,mT.EventType.CLOSE,()=>{D||(D=!0,Ae("Connection","WebChannel transport closed"),S.io())}),R(y,mT.EventType.ERROR,P=>{D||(D=!0,gp("Connection","WebChannel transport errored:",P),S.io(new De(oe.UNAVAILABLE,"The operation could not be completed")))}),R(y,mT.EventType.MESSAGE,P=>{var H;if(!D){const Y=P.data[0];bt(!!Y);const Ce=Y,Pe=Ce.error||(null===(H=Ce[0])||void 0===H?void 0:H.error);if(Pe){Ae("Connection","WebChannel received error:",Pe);const xe=Pe.status;let Re=function(rt){const jt=Ti[rt];if(void 0!==jt)return KG(jt)}(xe),Xe=Pe.message;void 0===Re&&(Re=oe.INTERNAL,Xe="Unknown error status: "+xe+" with message "+Pe.message),D=!0,S.io(new De(Re,Xe)),y.close()}else Ae("Connection","WebChannel received:",Y),S.ro(Y)}}),R(l,dX.STAT_EVENT,P=>{P.stat===nG.PROXY?Ae("Connection","Detected buffering proxy"):P.stat===nG.NOPROXY&&Ae("Connection","Detected no buffering proxy")}),setTimeout(()=>{S.so()},0),S}}function s$(){return"undefined"!=typeof window?window:null}function GT(){return"undefined"!=typeof document?document:null}function S0(n){return new oJ(n,!0)}class S1{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-i);r>0&&Ae("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class o${constructor(e,t,i,r,s,l,d,p){this.Hs=e,this.vo=i,this.Vo=r,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new S1(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Z.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Z.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,Z.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===oe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===t&&this.Go(i,r)},i=>{e(()=>{const r=new De(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Z.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gee extends o${constructor(e,t,i,r,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.It=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function cJ(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:tt(),r=e.targetChange.targetIds||[],s=function(p,y){return p.gt?(bt(void 0===y||"string"==typeof y),Ui.fromBase64String(y||"")):(bt(void 0===y||y instanceof Uint8Array),Ui.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(p){const y=void 0===p.code?oe.UNKNOWN:KG(p.code);return new De(y,p.message||"")}(l);t=new t3(i,r,s,d||null)}else if("documentChange"in e){const i=e.documentChange,r=Fl(n,i.document.name),s=Qi(i.document.updateTime),l=new wr({mapValue:{fields:i.document.fields}}),d=Nn.newFoundDocument(r,s,l);t=new MT(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const i=e.documentDelete,r=Fl(n,i.document),s=i.readTime?Qi(i.readTime):wt.min(),l=Nn.newNoDocument(r,s);t=new MT([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=Fl(n,i.document);t=new MT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return tt();{const i=e.filter,s=new XX(i.count||0);t=new e3(i.targetId,s)}}var p;return t}(this.It,e),i=function(r){if(!("targetChange"in r))return wt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?wt.min():s.readTime?Qi(s.readTime):wt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=g0(this.It),t.addTarget=function(r,s){let l;const d=s.target;return l=CT(d)?{documents:h3(r,d)}:{query:s1(r,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=o3(r,s.resumeToken):s.snapshotVersion.compareTo(wt.min())>0&&(l.readTime=p0(r,s.snapshotVersion.toTimestamp())),l}(this.It,e);const i=function dJ(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=g0(this.It),t.removeTarget=e,this.Bo(t)}}class _ee extends o${constructor(e,t,i,r,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function uJ(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(i,r){let s=Qi(i.updateTime?i.updateTime:r);return s.isEqual(wt.min())&&(s=Qi(r)),new YX(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Qi(e.commitTime);return this.listener.Zo(i,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=g0(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>_0(this.It,i))};this.Bo(t)}}class yee extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new De(oe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.ao(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new De(oe.UNKNOWN,r.toString())})}_o(e,t,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection._o(e,t,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new De(oe.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class bee{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(vi(t),this.ou=!1):Ae("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class wee{constructor(e,t,i,r,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(d=>{i.enqueueAndForget((0,Z.Z)(function*(){var p;Xc(l)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Z.Z)(function*(y){const w=je(y);w._u.add(4),yield Z_(w),w.gu.set("Unknown"),w._u.delete(4),yield T0(w)}),function(y){return p.apply(this,arguments)})(l))}))}),this.gu=new bee(i,r)}}function T0(n){return A1.apply(this,arguments)}function A1(){return A1=(0,Z.Z)(function*(n){if(Xc(n))for(const e of n.wu)yield e(!0)}),A1.apply(this,arguments)}function Z_(n){return M1.apply(this,arguments)}function M1(){return M1=(0,Z.Z)(function*(n){for(const e of n.wu)yield e(!1)}),M1.apply(this,arguments)}function $T(n,e){const t=je(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),k1(t)?R1(t):K_(t).ko()&&x1(t,e))}function A0(n,e){const t=je(n),i=K_(t);t.du.delete(e),i.ko()&&a$(t,e),0===t.du.size&&(i.ko()?i.Fo():Xc(t)&&t.gu.set("Unknown"))}function x1(n,e){n.yu.Mt(e.targetId),K_(n).zo(e)}function a$(n,e){n.yu.Mt(e),K_(n).Ho(e)}function R1(n){n.yu=new iJ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),K_(n).start(),n.gu.uu()}function k1(n){return Xc(n)&&!K_(n).No()&&n.du.size>0}function Xc(n){return 0===je(n)._u.size}function l$(n){n.yu=void 0}function Cee(n){return O1.apply(this,arguments)}function O1(){return O1=(0,Z.Z)(function*(n){n.du.forEach((e,t)=>{x1(n,e)})}),O1.apply(this,arguments)}function Eee(n,e){return P1.apply(this,arguments)}function P1(){return P1=(0,Z.Z)(function*(n,e){l$(n),k1(n)?(n.gu.hu(e),R1(n)):n.gu.set("Unknown")}),P1.apply(this,arguments)}function Dee(n,e,t){return N1.apply(this,arguments)}function N1(){return N1=(0,Z.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof t3&&2===e.state&&e.cause)try{yield(i=(0,Z.Z)(function*(r,s){const l=s.cause;for(const d of s.targetIds)r.du.has(d)&&(yield r.remoteSyncer.rejectListen(d,l),r.du.delete(d),r.yu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield zT(n,i)}else if(e instanceof MT?n.yu.Gt(e):e instanceof e3?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(wt.min()))try{const i=yield K3(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const l=r.yu.te(s);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=r.du.get(p);y&&r.du.set(p,y.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const p=r.du.get(d);if(!p)return;r.du.set(d,p.withResumeToken(Ui.EMPTY_BYTE_STRING,p.snapshotVersion)),a$(r,d);const y=new kd(p.target,d,1,p.sequenceNumber);x1(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){Ae("RemoteStore","Failed to raise snapshot:",i),yield zT(n,i)}var i}),N1.apply(this,arguments)}function zT(n,e,t){return F1.apply(this,arguments)}function F1(){return F1=(0,Z.Z)(function*(n,e,t){if(!Id(e))throw e;n._u.add(1),yield Z_(n),n.gu.set("Offline"),t||(t=()=>K3(n.localStore)),n.asyncQueue.enqueueRetryable((0,Z.Z)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield T0(n)}))}),F1.apply(this,arguments)}function c$(n,e){return e().catch(t=>zT(n,t,e))}function Y_(n){return L1.apply(this,arguments)}function L1(){return L1=(0,Z.Z)(function*(n){const e=je(n),t=Nd(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Iee(e);)try{const r=yield cee(e.localStore,i);if(null===r){0===e.fu.length&&t.Fo();break}i=r.batchId,See(e,r)}catch(r){yield zT(e,r)}u$(e)&&d$(e)}),L1.apply(this,arguments)}function Iee(n){return Xc(n)&&n.fu.length<10}function See(n,e){n.fu.push(e);const t=Nd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function u$(n){return Xc(n)&&!Nd(n).No()&&n.fu.length>0}function d$(n){Nd(n).start()}function Tee(n){return B1.apply(this,arguments)}function B1(){return B1=(0,Z.Z)(function*(n){Nd(n).eu()}),B1.apply(this,arguments)}function Aee(n){return V1.apply(this,arguments)}function V1(){return V1=(0,Z.Z)(function*(n){const e=Nd(n);for(const t of n.fu)e.Xo(t.mutations)}),V1.apply(this,arguments)}function Mee(n,e,t){return U1.apply(this,arguments)}function U1(){return U1=(0,Z.Z)(function*(n,e,t){const i=n.fu.shift(),r=l1.from(i,e,t);yield c$(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Y_(n)}),U1.apply(this,arguments)}function xee(n,e){return H1.apply(this,arguments)}function H1(){return H1=(0,Z.Z)(function*(n,e){var t;e&&Nd(n).Yo&&(yield(t=(0,Z.Z)(function*(i,r){if(YG(s=r.code)&&s!==oe.ABORTED){const l=i.fu.shift();Nd(i).Mo(),yield c$(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield Y_(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),u$(n)&&d$(n)}),H1.apply(this,arguments)}function h$(n,e){return j1.apply(this,arguments)}function j1(){return j1=(0,Z.Z)(function*(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const i=Xc(t);t._u.add(3),yield Z_(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield T0(t)}),j1.apply(this,arguments)}function G1(n,e){return $1.apply(this,arguments)}function $1(){return $1=(0,Z.Z)(function*(n,e){const t=je(n);e?(t._u.delete(2),yield T0(t)):e||(t._u.add(2),yield Z_(t),t.gu.set("Unknown"))}),$1.apply(this,arguments)}function K_(n){return n.pu||(n.pu=function(e,t,i){const r=je(e);return r.su(),new gee(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Cee.bind(null,n),Zr:Eee.bind(null,n),Wo:Dee.bind(null,n)}),n.wu.push(function(){var e=(0,Z.Z)(function*(t){t?(n.pu.Mo(),k1(n)?R1(n):n.gu.set("Unknown")):(yield n.pu.stop(),l$(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Nd(n){return n.Iu||(n.Iu=function(e,t,i){const r=je(e);return r.su(),new _ee(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:Tee.bind(null,n),Zr:xee.bind(null,n),tu:Aee.bind(null,n),Zo:Mee.bind(null,n)}),n.wu.push(function(){var e=(0,Z.Z)(function*(t){t?(n.Iu.Mo(),yield Y_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class z1{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,s){const l=Date.now()+i,d=new z1(e,t,l,r,s);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Q_(n,e){if(vi("AsyncQueue",`${e}: ${n}`),Id(n))return new De(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class X_{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ue.comparator(t.key,i.key):(t,i)=>Ue.comparator(t.key,i.key),this.keyedMap=u0(),this.sortedSet=new hi(this.comparator)}static emptySet(e){return new X_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof X_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new X_;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class f${constructor(){this.Tu=new hi(Ue.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):tt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class J_{constructor(e,t,i,r,s,l,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,r,s){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new J_(e,t,X_.emptySet(t),l,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&a0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class Ree{constructor(){this.Au=void 0,this.listeners=[]}}class kee{constructor(){this.queries=new Rd(e=>OG(e),a0),this.onlineState="Unknown",this.Ru=new Set}}function q1(n,e){return W1.apply(this,arguments)}function W1(){return W1=(0,Z.Z)(function*(n,e){const t=je(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new Ree),r)try{s.Au=yield t.onListen(i)}catch(l){const d=Q_(l,`Initialization of query '${XN(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&K1(t)}),W1.apply(this,arguments)}function Z1(n,e){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,Z.Z)(function*(n,e){const t=je(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),Y1.apply(this,arguments)}function Oee(n,e){const t=je(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const d of l.listeners)d.Pu(r)&&(i=!0);l.Au=r}}i&&K1(t)}function Pee(n,e,t){const i=je(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function K1(n){n.Ru.forEach(e=>{e.next()})}class Q1{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new J_(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=J_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Nee{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class p${constructor(e){this.It=e}Ji(e){return Fl(this.It,e)}Yi(e){return e.metadata.exists?d3(this.It,e.document,!1):Nn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Qi(e)}}class Fee{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=m$(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new p$(this.It);for(const r of e)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const l of r.metadata.queries){const d=(t.get(l)||kt()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,Z.Z)(function*(){const t=yield function uee(n,e,t,i){return b1.apply(this,arguments)}(e.localStore,new p$(e.It),e.documents,e.Mu.id),i=e.$u(e.documents);for(const r of e.queries)yield dee(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function m$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class g${constructor(e){this.key=e}}class _${constructor(e){this.key=e}}class y${constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=kt(),this.mutatedKeys=kt(),this.Gu=NG(e),this.Qu=new X_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new f$,r=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,l=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((w,D)=>{const S=r.get(w),R=JN(this.query,D)?D:null,P=!!S&&this.mutatedKeys.has(S.key),H=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let Y=!1;S&&R?S.data.isEqual(R.data)?P!==H&&(i.track({type:3,doc:R}),Y=!0):this.Hu(S,R)||(i.track({type:2,doc:R}),Y=!0,(p&&this.Gu(R,p)>0||y&&this.Gu(R,y)<0)&&(d=!0)):!S&&R?(i.track({type:0,doc:R}),Y=!0):S&&!R&&(i.track({type:1,doc:S}),Y=!0,(p||y)&&(d=!0)),Y&&(R?(l=l.add(R),s=H?s.add(w):s.delete(w)):(l=l.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{Qu:l,zu:i,$i:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((y,w)=>function(D,S){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return R(D)-R(S)}(y.type,w.type)||this.Gu(y.doc,w.doc)),this.Ju(i);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new J_(this.query,e.Qu,r,s,e.mutatedKeys,0===d,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new f$,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=kt(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new _$(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new g$(i))}),t}tc(e){this.Uu=e.Hi,this.Ku=kt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return J_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Lee{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Bee{constructor(e){this.key=e,this.nc=!1}}class Vee{constructor(e,t,i,r,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Rd(d=>OG(d),a0),this.rc=new Map,this.oc=new Set,this.uc=new hi(Ue.comparator),this.cc=new Map,this.ac=new f1,this.hc={},this.lc=new Map,this.fc=kp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Uee(n,e){return X1.apply(this,arguments)}function X1(){return X1=(0,Z.Z)(function*(n,e){const t=wF(n);let i,r;const s=t.ic.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const l=yield q_(t.localStore,rs(e));t.isPrimaryClient&&$T(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield J1(t,e,i,"current"===d,l.resumeToken)}return r}),X1.apply(this,arguments)}function J1(n,e,t,i,r){return eF.apply(this,arguments)}function eF(){return eF=(0,Z.Z)(function*(n,e,t,i,r){n._c=(D,S,R)=>{return(P=(0,Z.Z)(function*(H,Y,Ce,Pe){let xe=Y.view.Wu(Ce);xe.$i&&(xe=yield UT(H.localStore,Y.query,!1).then(({documents:rt})=>Y.view.Wu(rt,xe)));const Re=Pe&&Pe.targetChanges.get(Y.targetId),Xe=Y.view.applyChanges(xe,H.isPrimaryClient,Re);return uF(H,Y.targetId,Xe.Xu),Xe.snapshot}),function(H,Y,Ce,Pe){return P.apply(this,arguments)})(n,D,S,R);var P};const s=yield UT(n.localStore,e,!0),l=new y$(e,s.Hi),d=l.Wu(s.documents),p=f0.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),y=l.applyChanges(d,n.isPrimaryClient,p);uF(n,t,y.Xu);const w=new Lee(e,t,l);return n.ic.set(e,w),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),eF.apply(this,arguments)}function Hee(n,e){return tF.apply(this,arguments)}function tF(){return tF=(0,Z.Z)(function*(n,e){const t=je(n),i=t.ic.get(e),r=t.rc.get(i.targetId);if(r.length>1)return t.rc.set(i.targetId,r.filter(s=>!a0(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield W_(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),A0(t.remoteStore,i.targetId),ey(t,i.targetId)}).catch(Dd))):(ey(t,i.targetId),yield W_(t.localStore,i.targetId,!0))}),tF.apply(this,arguments)}function nF(){return nF=(0,Z.Z)(function*(n,e,t){const i=CF(n);try{const r=yield function(s,l){const d=je(s),p=$n.now(),y=l.reduce((S,R)=>S.add(R.key),kt());let w,D;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=Ss(),P=kt();return d.Gi.getEntries(S,y).next(H=>{R=H,R.forEach((Y,Ce)=>{Ce.isValidDocument()||(P=P.add(Y))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,R)).next(H=>{w=H;const Y=[];for(const Ce of l){const Pe=QX(Ce,w.get(Ce.key).overlayedDocument);null!=Pe&&Y.push(new Qc(Ce.key,Pe,DG(Pe.value.mapValue),zn.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,Y,l)}).next(H=>{D=H;const Y=H.applyToLocalDocumentSet(w,P);return d.documentOverlayCache.saveOverlays(S,H.batchId,Y)})}).then(()=>({batchId:D.batchId,changes:XG(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,d){let p=s.hc[s.currentUser.toKey()];p||(p=new hi(At)),p=p.insert(l,d),s.hc[s.currentUser.toKey()]=p}(i,r.batchId,t),yield Jc(i,r.changes),yield Y_(i.remoteStore)}catch(r){const s=Q_(r,"Failed to persist write");t.reject(s)}}),nF.apply(this,arguments)}function v$(n,e){return iF.apply(this,arguments)}function iF(){return iF=(0,Z.Z)(function*(n,e){const t=je(n);try{const i=yield lee(t.localStore,e);e.targetChanges.forEach((r,s)=>{const l=t.cc.get(s);l&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.nc=!0:r.modifiedDocuments.size>0?bt(l.nc):r.removedDocuments.size>0&&(bt(l.nc),l.nc=!1))}),yield Jc(t,i,e)}catch(i){yield Dd(i)}}),iF.apply(this,arguments)}function b$(n,e,t){const i=je(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ic.forEach((s,l)=>{const d=l.view.bu(e);d.snapshot&&r.push(d.snapshot)}),function(s,l){const d=je(s);d.onlineState=l;let p=!1;d.queries.forEach((y,w)=>{for(const D of w.listeners)D.bu(l)&&(p=!0)}),p&&K1(d)}(i.eventManager,e),r.length&&i.sc.Wo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Gee(n,e,t){return rF.apply(this,arguments)}function rF(){return rF=(0,Z.Z)(function*(n,e,t){const i=je(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.cc.get(e),s=r&&r.key;if(s){let l=new hi(Ue.comparator);l=l.insert(s,Nn.newNoDocument(s,wt.min()));const d=kt().add(s),p=new h0(wt.min(),new Map,new Cn(At),l,d);yield v$(i,p),i.uc=i.uc.remove(s),i.cc.delete(e),dF(i)}else yield W_(i.localStore,e,!1).then(()=>ey(i,e,t)).catch(Dd)}),rF.apply(this,arguments)}function $ee(n,e){return sF.apply(this,arguments)}function sF(){return sF=(0,Z.Z)(function*(n,e){const t=je(n),i=e.batch.batchId;try{const r=yield aee(t.localStore,e);cF(t,i,null),lF(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Jc(t,r)}catch(r){yield Dd(r)}}),sF.apply(this,arguments)}function zee(n,e,t){return oF.apply(this,arguments)}function oF(){return oF=(0,Z.Z)(function*(n,e,t){const i=je(n);try{const r=yield function(s,l){const d=je(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,l).next(w=>(bt(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(i.localStore,e);cF(i,e,t),lF(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Jc(i,r)}catch(r){yield Dd(r)}}),oF.apply(this,arguments)}function aF(){return aF=(0,Z.Z)(function*(n,e){const t=je(n);Xc(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=je(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===i)return void e.resolve();const r=t.lc.get(i)||[];r.push(e),t.lc.set(i,r)}catch(i){const r=Q_(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),aF.apply(this,arguments)}function lF(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function cF(n,e,t){const i=je(n);let r=i.hc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.hc[i.currentUser.toKey()]=r}}function ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||w$(n,i)})}function w$(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(A0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),dF(n))}function uF(n,e,t){for(const i of t)i instanceof g$?(n.ac.addReference(i.key,e),Wee(n,i)):i instanceof _$?(Ae("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||w$(n,i.key)):tt()}function Wee(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Ae("SyncEngine","New document in limbo: "+t),n.oc.add(i),dF(n))}function dF(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ue(Jt.fromString(e)),i=n.fc.next();n.cc.set(i,new Bee(t)),n.uc=n.uc.insert(t,i),$T(n.remoteStore,new kd(rs(F_(t.path)),i,2,Is.at))}}function Jc(n,e,t){return hF.apply(this,arguments)}function hF(){return hF=(0,Z.Z)(function*(n,e,t){const i=je(n),r=[],s=[],l=[];var d;i.ic.isEmpty()||(i.ic.forEach((d,p)=>{l.push(i._c(p,e,t).then(y=>{if((y||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,(null==y?void 0:y.fromCache)?"not-current":"current"),y){r.push(y);const w=_1.Ci(p.targetId,y);s.push(w)}}))}),yield Promise.all(l),i.sc.Wo(r),yield(d=(0,Z.Z)(function*(p,y){const w=je(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ie.forEach(y,S=>ie.forEach(S.Si,R=>w.persistence.referenceDelegate.addReference(D,S.targetId,R)).next(()=>ie.forEach(S.Di,R=>w.persistence.referenceDelegate.removeReference(D,S.targetId,R)))))}catch(D){if(!Id(D))throw D;Ae("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const S=D.targetId;if(!D.fromCache){const R=w.Ui.get(S),H=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);w.Ui=w.Ui.insert(S,H)}}}),function(p,y){return d.apply(this,arguments)})(i.localStore,s))}),hF.apply(this,arguments)}function Zee(n,e){return fF.apply(this,arguments)}function fF(){return fF=(0,Z.Z)(function*(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const i=yield Y3(t.localStore,e);t.currentUser=e,(r=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new De(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Jc(t,i.ji)}var r}),fF.apply(this,arguments)}function Yee(n,e){const t=je(n),i=t.cc.get(e);if(i&&i.nc)return kt().add(i.key);{let r=kt();const s=t.rc.get(e);if(!s)return r;for(const l of s){const d=t.ic.get(l);r=r.unionWith(d.view.ju)}return r}}function Kee(n,e){return pF.apply(this,arguments)}function pF(){return pF=(0,Z.Z)(function*(n,e){const t=je(n),i=yield UT(t.localStore,e.query,!0),r=e.view.tc(i);return t.isPrimaryClient&&uF(t,e.targetId,r.Xu),r}),pF.apply(this,arguments)}function Qee(n,e){return mF.apply(this,arguments)}function mF(){return mF=(0,Z.Z)(function*(n,e){const t=je(n);return J3(t.localStore,e).then(i=>Jc(t,i))}),mF.apply(this,arguments)}function Xee(n,e,t,i){return gF.apply(this,arguments)}function gF(){return gF=(0,Z.Z)(function*(n,e,t,i){const r=je(n),s=yield function(l,d){const p=je(l),y=je(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.Tn(w,d).next(D=>D?p.localDocuments.getDocuments(w,D):ie.resolve(null)))}(r.localStore,e);var d;null!==s?("pending"===t?yield Y_(r.remoteStore):"acknowledged"===t||"rejected"===t?(cF(r,e,i||null),lF(r,e),d=e,je(je(r.localStore).mutationQueue).An(d)):tt(),yield Jc(r,s)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),gF.apply(this,arguments)}function _F(){return _F=(0,Z.Z)(function*(n,e){const t=je(n);if(wF(t),CF(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield C$(t,i.toArray());t.dc=!0,yield G1(t.remoteStore,!0);for(const s of r)$T(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const i=[];let r=Promise.resolve();t.rc.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(ey(t,l),W_(t.localStore,l,!0))),A0(t.remoteStore,l)}),yield r,yield C$(t,i),function(s){const l=je(s);l.cc.forEach((d,p)=>{A0(l.remoteStore,p)}),l.ac.fs(),l.cc=new Map,l.uc=new hi(Ue.comparator)}(t),t.dc=!1,yield G1(t.remoteStore,!1)}}),_F.apply(this,arguments)}function C$(n,e,t){return yF.apply(this,arguments)}function yF(){return yF=(0,Z.Z)(function*(n,e,t){const i=je(n),r=[],s=[];for(const l of e){let d;const p=i.rc.get(l);if(p&&0!==p.length){d=yield q_(i.localStore,rs(p[0]));for(const y of p){const w=i.ic.get(y),D=yield Kee(i,w);D.snapshot&&s.push(D.snapshot)}}else{const y=yield X3(i.localStore,l);d=yield q_(i.localStore,y),yield J1(i,E$(y),l,!1,d.resumeToken)}r.push(d)}return i.sc.Wo(s),r}),yF.apply(this,arguments)}function E$(n){return RG(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ete(n){const e=je(n);return je(je(e.localStore).persistence).vi()}function tte(n,e,t,i){return vF.apply(this,arguments)}function vF(){return vF=(0,Z.Z)(function*(n,e,t,i){const r=je(n);if(r.dc)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield J3(r.localStore,PG(s[0])),d=h0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ui.EMPTY_BYTE_STRING);yield Jc(r,l,d);break}case"rejected":yield W_(r.localStore,e,!0),ey(r,e,i);break;default:tt()}}),vF.apply(this,arguments)}function nte(n,e,t){return bF.apply(this,arguments)}function bF(){return bF=(0,Z.Z)(function*(n,e,t){const i=wF(n);if(i.dc){for(const r of e){if(i.rc.has(r)){Ae("SyncEngine","Adding an already active target "+r);continue}const s=yield X3(i.localStore,r),l=yield q_(i.localStore,s);yield J1(i,E$(s),l.targetId,!1,l.resumeToken),$T(i.remoteStore,l)}for(const r of t)i.rc.has(r)&&(yield W_(i.localStore,r,!1).then(()=>{A0(i.remoteStore,r),ey(i,r)}).catch(Dd))}}),bF.apply(this,arguments)}function wF(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gee.bind(null,e),e.sc.Wo=Oee.bind(null,e.eventManager),e.sc.wc=Pee.bind(null,e.eventManager),e}function CF(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$ee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zee.bind(null,e),e}class D${constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Z.Z)(function*(){t.It=S0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Z3(this.persistence,new W3,e.initialUser,this.It)}yc(e){return new z3(BT.Bs,this.It)}gc(e){return new i$}terminate(){var e=this;return(0,Z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class I$ extends D${constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Z.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield CF(i.Ac.syncEngine),yield Y_(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Z3(this.persistence,new W3,e.initialUser,this.It)}Tc(e,t){return new qJ(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new MX(t,this.persistence);return new AX(e.asyncQueue,i)}yc(e){const t=g1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ts.withCacheSize(this.cacheSizeBytes):Ts.DEFAULT;return new m1(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,s$(),GT(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new i$}}class rte extends I${constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Z.Z)(function*(){yield t().call(i,e);const r=i.Ac.syncEngine;i.sharedClientState instanceof I1&&(i.sharedClientState.syncEngine={Fr:Xee.bind(null,r),$r:tte.bind(null,r),Br:nte.bind(null,r),vi:ete.bind(null,r),Mr:Qee.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,Z.Z)(function*(l){yield function Jee(n,e){return _F.apply(this,arguments)}(i.Ac.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}gc(e){const t=s$();if(!I1.C(t))throw new De(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=g1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new I1(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class EF{initialize(e,t){var i=this;return(0,Z.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>b$(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=Zee.bind(null,i.syncEngine),yield G1(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kee}createDatastore(e){const t=S0(e.databaseInfo.databaseId),i=new mee(e.databaseInfo);return new yee(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=d=>b$(this.syncEngine,d,0),l=r$.C()?new r$:new hee,new wee(t,i,r,s,l);var t,i,r,s,l}createSyncEngine(e,t){return function(i,r,s,l,d,p,y){const w=new Vee(i,r,s,l,d,p);return y&&(w.dc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Z.Z)(function*(t){const i=je(t);Ae("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Z_(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function DF(n,e,t){if(!t)throw new De(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function S$(n,e,t,i){if(!0===e&&!0===i)throw new De(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function T$(n){if(!Ue.isDocumentKey(n))throw new De(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function A$(n){if(Ue.isDocumentKey(n))throw new De(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qT(n);throw new De(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function M$(n,e){if(e<=0)throw new De(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const x$=new Map;class R${constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new De(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,S$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class M0{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R$(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gX;switch(t.type){case"gapi":return new bX(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=x$.get(e);t&&(Ae("ComponentProvider","Removing Datastore"),x$.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Fr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class Bl extends Fr{constructor(e,t,i){super(e,t,F_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ue(e))}withConverter(e){return new Bl(this.firestore,e,this._path)}}function O$(n,e,...t){if(n=(0,O.m9)(n),DF("collection","path",e),n instanceof M0){const i=Jt.fromString(e,...t);return A$(i),new Bl(n,null,i)}{if(!(n instanceof Bn||n instanceof Bl))throw new De(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(e,...t));return A$(i),new Bl(n.firestore,null,i)}}function WT(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=oG.R()),DF("doc","path",e),n instanceof M0){const i=Jt.fromString(e,...t);return T$(i),new Bn(n,null,new Ue(i))}{if(!(n instanceof Bn||n instanceof Bl))throw new De(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(e,...t));return T$(i),new Bn(n.firestore,n instanceof Bl?n.converter:null,new Ue(i))}}function P$(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof Bn||n instanceof Bl)&&(e instanceof Bn||e instanceof Bl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IF(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof Fr&&e instanceof Fr&&n.firestore===e.firestore&&a0(n._query,e._query)&&n.converter===e.converter}function N$(n,e=10240){let t=0;return{read:()=>(0,Z.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Z.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ZT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ote{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Vi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Z.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Z.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Z.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),r=Number(i);isNaN(r)&&e.Dc(`length string (${i}) is not valid number`);const s=yield e.Cc(r);return new Nee(JSON.parse(s),t.length+r)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Z.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,Z.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Z.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class cte{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Z.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Z.Z)(function*(s,l){const d=je(s),p=g0(d.It)+"/documents",y={documents:l.map(R=>m0(d.It,R))},w=yield d._o("BatchGetDocuments",p,y,l.length),D=new Map;w.forEach(R=>{const P=function lJ(n,e){return"found"in e?function(t,i){bt(!!i.found);const r=Fl(t,i.found.name),s=Qi(i.found.updateTime),l=new wr({mapValue:{fields:i.found.fields}});return Nn.newFoundDocument(r,s,l)}(n,e):"missing"in e?function(t,i){bt(!!i.missing),bt(!!i.readTime);const r=Fl(t,i.missing),s=Qi(i.readTime);return Nn.newNoDocument(r,s)}(n,e):tt()}(d.It,R);D.set(P.key.toString(),P)});const S=[];return l.forEach(R=>{const P=D.get(R.toString());bt(!!P),S.push(P)}),S}),function(s,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new H_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Ue.fromPath(r);e.mutations.push(new e1(s,e.precondition(s)))}),yield(i=(0,Z.Z)(function*(r,s){const l=je(r),d=g0(l.It)+"/documents",p={writes:s.map(y=>_0(l.It,y))};yield l.ao("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=wt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new De(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wt.min())?zn.exists(!1):zn.updateTime(t):zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new De(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zn.updateTime(t)}return zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ute{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.kc=i.maxAttempts,this.xo=new S1(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Z.Z)(function*(){const t=new cte(e.datastore),i=e.Mc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Fc(s)}))}).catch(r=>{e.Fc(r)})}))}Mc(e){try{const t=this.updateFunction(e);return!e0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!YG(t)}return!1}}class dte{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ki.UNAUTHENTICATED,this.clientId=oG.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Z.Z)(function*(d){Ae("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Ae("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Q_(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function F$(n,e){return SF.apply(this,arguments)}function SF(){return SF=(0,Z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Z.Z)(function*(s){i.isEqual(s)||(yield Y3(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),SF.apply(this,arguments)}function L$(n,e){return TF.apply(this,arguments)}function TF(){return TF=(0,Z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield AF(n);Ae("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>h$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>h$(e.remoteStore,s)),n.onlineComponents=e}),TF.apply(this,arguments)}function AF(n){return MF.apply(this,arguments)}function MF(){return MF=(0,Z.Z)(function*(n){return n.offlineComponents||(Ae("FirestoreClient","Using default OfflineComponentProvider"),yield F$(n,new D$)),n.offlineComponents}),MF.apply(this,arguments)}function YT(n){return xF.apply(this,arguments)}function xF(){return xF=(0,Z.Z)(function*(n){return n.onlineComponents||(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield L$(n,new EF)),n.onlineComponents}),xF.apply(this,arguments)}function B$(n){return AF(n).then(e=>e.persistence)}function KT(n){return AF(n).then(e=>e.localStore)}function RF(n){return YT(n).then(e=>e.remoteStore)}function kF(n){return YT(n).then(e=>e.syncEngine)}function ty(n){return OF.apply(this,arguments)}function OF(){return OF=(0,Z.Z)(function*(n){const e=yield YT(n),t=e.eventManager;return t.onListen=Uee.bind(null,e.syncEngine),t.onUnlisten=Hee.bind(null,e.syncEngine),t}),OF.apply(this,arguments)}function U$(n,e,t={}){const i=new Vi;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(r,s,l,d,p){const y=new ZT({next:D=>{s.enqueueAndForget(()=>Z1(r,w));const S=D.docs.has(l);!S&&D.fromCache?p.reject(new De(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&D.fromCache&&d&&"server"===d.source?p.reject(new De(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),w=new Q1(F_(l.path),y,{includeMetadataChanges:!0,Nu:!0});return q1(r,w)}(yield ty(n),n.asyncQueue,e,t,i)})),i.promise}function H$(n,e,t={}){const i=new Vi;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(r,s,l,d,p){const y=new ZT({next:D=>{s.enqueueAndForget(()=>Z1(r,w)),D.fromCache&&"server"===d.source?p.reject(new De(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),w=new Q1(l,y,{includeMetadataChanges:!0,Nu:!0});return q1(r,w)}(yield ty(n),n.asyncQueue,e,t,i)})),i.promise}class vte{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new S1(this,"async_queue_retry"),this.Wc=()=>{const t=GT();t&&Ae("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=GT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=GT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Vi;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Z.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Id(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,vi("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=z1.createAndSchedule(this,e,t,i,s=>this.Yc(s));return this.qc.push(r),r}zc(){this.Kc&&tt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Z.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function PF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class bte{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vn extends M0{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new vte,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||j$(this),this._firestoreClient.terminate()}}function bi(n){return n._firestoreClient||j$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function j$(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kX(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new dte(n._authCredentials,n._appCheckCredentials,n._queue,i)}function G$(n,e,t){const i=new Vi;return n.asyncQueue.enqueue((0,Z.Z)(function*(){try{yield F$(n,t),yield L$(n,e),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(l=s).name?l.code===oe.FAILED_PRECONDITION||l.code===oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;gp("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var l})).then(()=>i.promise)}function $$(n){if(n._initialized||n._terminated)throw new De(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vl(Ui.fromBase64String(e))}catch(t){throw new De(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vl(Ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pp{constructor(e){this._methodName=e}}class QT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const xte=/^__.*__$/;class Rte{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Qc(e,this.data,this.fieldMask,t,this.fieldTransforms):new U_(e,this.data,t,this.fieldTransforms)}}class z${constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function q$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class XT{constructor(e,t,i,r,s,l){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new XT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.ua(e),r}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return tA(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(q$(this.sa)&&xte.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class kte{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||S0(e)}da(e,t,i,r=!1){return new XT({sa:e,methodName:t,fa:i,path:di.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Np(n){const e=n._freezeSettings(),t=S0(n._databaseId);return new kte(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JT(n,e,t,i,r,s={}){const l=n.da(s.merge||s.mergeFields?2:0,e,t,r);BF("Data must be an object, but it was:",l,i);const d=Y$(i,l);let p,y;if(s.merge)p=new so(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const w=[];for(const D of s.mergeFields){const S=VF(e,D,t);if(!l.contains(S))throw new De(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Q$(w,S)||w.push(S)}p=new so(w),y=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=l.fieldTransforms;return new Rte(new wr(d),p,y)}class x0 extends Pp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof x0}}function W$(n,e,t){return new XT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class NF extends Pp{_toFieldTransform(e){return new l0(e.path,new B_)}isEqual(e){return e instanceof NF}}class Ote extends Pp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=W$(this,e,!0),i=this._a.map(s=>Fp(s,t)),r=new Dp(i);return new l0(e.path,r)}isEqual(e){return this===e}}class Pte extends Pp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=W$(this,e,!0),i=this._a.map(s=>Fp(s,t)),r=new Ip(i);return new l0(e.path,r)}isEqual(e){return this===e}}class Nte extends Pp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new V_(e.It,BG(e.It,this.wa));return new l0(e.path,t)}isEqual(e){return this===e}}function FF(n,e,t,i){const r=n.da(1,e,t);BF("Data must be an object, but it was:",r,i);const s=[],l=wr.empty();vp(i,(p,y)=>{const w=eA(e,p,t);y=(0,O.m9)(y);const D=r.ca(w);if(y instanceof x0)s.push(w);else{const S=Fp(y,D);null!=S&&(s.push(w),l.set(w,S))}});const d=new so(s);return new z$(l,d,r.fieldTransforms)}function LF(n,e,t,i,r,s){const l=n.da(1,e,t),d=[VF(e,i,t)],p=[r];if(s.length%2!=0)throw new De(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<s.length;S+=2)d.push(VF(e,s[S])),p.push(s[S+1]);const y=[],w=wr.empty();for(let S=d.length-1;S>=0;--S)if(!Q$(y,d[S])){const R=d[S];let P=p[S];P=(0,O.m9)(P);const H=l.ca(R);if(P instanceof x0)y.push(R);else{const Y=Fp(P,H);null!=Y&&(y.push(R),w.set(R,Y))}}const D=new so(y);return new z$(w,D,l.fieldTransforms)}function Z$(n,e,t,i=!1){return Fp(t,n.da(i?4:3,e))}function Fp(n,e){if(K$(n=(0,O.m9)(n)))return BF("Unsupported field value:",e,n),Y$(n,e);if(n instanceof Pp)return function(t,i){if(!q$(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const l of t){let d=Fp(l,i.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return BG(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=$n.fromDate(t);return{timestampValue:p0(i.It,r)}}if(t instanceof $n){const r=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:p0(i.It,r)}}if(t instanceof QT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vl)return{bytesValue:o3(i.It,t._byteString)};if(t instanceof Bn){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:t1(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${qT(t)}`)}(n,e)}function Y$(n,e){const t={};return pG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vp(n,(i,r)=>{const s=Fp(r,e.ra(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function K$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof QT||n instanceof Vl||n instanceof Bn||n instanceof Pp)}function BF(n,e,t){if(!K$(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=qT(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function VF(n,e,t){if((e=(0,O.m9)(e))instanceof eu)return e._internalPath;if("string"==typeof e)return eA(n,e);throw tA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fte=new RegExp("[~\\*/\\[\\]]");function eA(n,e,t){if(e.search(Fte)>=0)throw tA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eu(...e.split("."))._internalPath}catch(i){throw tA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tA(n,e,t,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new De(oe.INVALID_ARGUMENT,d+n+p)}function Q$(n,e){return n.some(t=>t.isEqual(e))}class R0{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lte extends R0{data(){return super.data()}}function nA(n,e){return"string"==typeof e?eA(n,e):e instanceof eu?e._internalPath:e._delegate._internalPath}function X$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k0{}function Fd(n,...e){for(const t of e)n=t._apply(n);return n}class Bte extends k0{constructor(e,t,i){super(),this.ma=e,this.ga=t,this.ya=i,this.type="where"}_apply(e){const t=Np(e.firestore),i=function(r,s,l,d,p,y,w){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new De(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){rz(w,y);const R=[];for(const P of w)R.push(iz(d,r,P));D={arrayValue:{values:R}}}else D=iz(d,r,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||rz(w,y),D=Z$(l,"where",w,"in"===y||"not-in"===y);const S=Cr.create(p,y,D);return function(R,P){if(P.dt()){const Y=KN(R);if(null!==Y&&!Y.isEqual(P.field))throw new De(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Y.toString()}' and '${P.field.toString()}'`);const Ce=YN(R);null!==Ce&&sz(0,P.field,Ce)}const H=function(Y,Ce){for(const Pe of Y.filters)if(Ce.indexOf(Pe.op)>=0)return Pe.op;return null}(R,function(Y){switch(Y){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(P.op));if(null!==H)throw new De(oe.INVALID_ARGUMENT,H===P.op?`Invalid query. You cannot use more than one '${P.op.toString()}' filter.`:`Invalid query. You cannot use '${P.op.toString()}' filters with '${H.toString()}' filters.`)}(r,S),S}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Fr(e.firestore,e.converter,function(r,s){const l=r.filters.concat([s]);return new Kc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),l,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Ute extends k0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new De(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new De(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new N_(r,s);return function(d,p){if(null===YN(d)){const y=KN(d);null!==y&&sz(0,y,p.field)}}(i,l),l}(e._query,this.ma,this.pa);return new Fr(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Kc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class J$ extends k0{constructor(e,t,i){super(),this.type=e,this.Ia=t,this.Ta=i}_apply(e){return new Fr(e.firestore,e.converter,DT(e._query,this.Ia,this.Ta))}}class ez extends k0{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=nz(e,this.type,this.Ea,this.Aa);return new Fr(e.firestore,e.converter,(r=t,new Kc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class tz extends k0{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=nz(e,this.type,this.Ea,this.Aa);return new Fr(e.firestore,e.converter,(r=t,new Kc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function nz(n,e,t,i){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof R0)return function(r,s,l,d,p){if(!d)throw new De(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const w of L_(r))if(w.field.isKeyField())y.push(Cp(s,d.key));else{const D=d.data.field(w.field);if(qN(D))throw new De(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const S=w.field.canonicalString();throw new De(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}y.push(D)}return new xd(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Np(n.firestore);return function(s,l,d,p,y,w){const D=s.explicitOrderBy;if(y.length>D.length)throw new De(oe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let R=0;R<y.length;R++){const P=y[R];if(D[R].field.isKeyField()){if("string"!=typeof P)throw new De(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof P}`);if(!QN(s)&&-1!==P.indexOf("/"))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${P}' contains a slash.`);const H=s.path.child(Jt.fromString(P));if(!Ue.isDocumentKey(H))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${H}' is not because it contains an odd number of segments.`);const Y=new Ue(H);S.push(Cp(l,Y))}else{const H=Z$(d,p,P);S.push(H)}}return new xd(S,w)}(n._query,n.firestore._databaseId,r,e,t,i)}}function iz(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new De(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QN(e)&&-1!==t.indexOf("/"))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Jt.fromString(t));if(!Ue.isDocumentKey(i))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Cp(n,new Ue(i))}if(t instanceof Bn)return Cp(n,t._key);throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qT(t)}.`)}function rz(n,e){if(!Array.isArray(n)||0===n.length)throw new De(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new De(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sz(n,e,t){if(!t.isEqual(e))throw new De(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class UF{convertValue(e,t="none"){switch(wp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const i={};return vp(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new QT(fi(e.latitude),fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=gG(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Jw(e));default:return null}}convertTimestamp(e){const t=Sd(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Jt.fromString(e);bt(m3(i));const r=new Td(i.get(1),i.get(3)),s=new Ue(i.popFirst(5));return r.isEqual(t)||vi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function iA(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Zte extends UF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class Lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tu extends R0{constructor(e,t,i,r,s,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new O0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(nA("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class O0 extends tu{data(e={}){return super.data(e)}}class Ld{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Lp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new O0(this._firestore,this._userDataWriter,i.key,i,new Lp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new O0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lp(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const d=new O0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lp(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:Yte(l.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Yte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function oz(n,e){return n instanceof tu&&e instanceof tu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ld&&e instanceof Ld&&n._firestore===e._firestore&&IF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bd extends UF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function az(n,e,t){n=Kt(n,Bn);const i=Kt(n.firestore,Vn),r=iA(n.converter,e,t);return ny(i,[JT(Np(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,zn.none())])}function lz(n,e,t,...i){n=Kt(n,Bn);const r=Kt(n.firestore,Vn),s=Np(r);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof eu?LF(s,"updateDoc",n._key,e,t,i):FF(s,"updateDoc",n._key,e),ny(r,[l.toMutation(n._key,zn.exists(!0))])}function cz(n,...e){var t,i,r;n=(0,O.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||PF(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(PF(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),e[l+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let p,y,w;if(n instanceof Bn)y=Kt(n.firestore,Vn),w=F_(n._key.path),p={next:D=>{e[l]&&e[l](HF(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=Kt(n,Fr);y=Kt(D.firestore,Vn),w=D._query;const S=new Bd(y);p={next:R=>{e[l]&&e[l](new Ld(y,S,D,R))},error:e[l+1],complete:e[l+2]},X$(n._query)}return function(D,S,R,P){const H=new ZT(P),Y=new Q1(S,H,R);return D.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return q1(yield ty(D),Y)})),()=>{H.bc(),D.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return Z1(yield ty(D),Y)}))}}(bi(y),w,d,p)}function ny(n,e){return function(t,i){const r=new Vi;return t.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function jee(n,e,t){return nF.apply(this,arguments)}(yield kF(t),i,r)})),r.promise}(bi(n),e)}function HF(n,e,t){const i=t.docs.get(e._key),r=new Bd(n);return new tu(n,r,e._key,i,new Lp(t.hasPendingWrites,t.fromCache),e.converter)}const sne={maxAttempts:5};class uz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Np(e)}set(e,t,i){this._verifyNotCommitted();const r=Vd(e,this._firestore),s=iA(r.converter,t,i),l=JT(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,zn.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Vd(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof eu?LF(this._dataReader,"WriteBatch.update",s._key,t,i,r):FF(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vd(e,this._firestore);return this._mutations=this._mutations.concat(new H_(t._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vd(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new De(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class one extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Np(e)}get(e){const t=Vd(e,this._firestore),i=new Zte(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return tt();const s=r[0];if(s.isFoundDocument())return new R0(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new R0(this._firestore,i,t._key,null,t.converter);throw tt()})}set(e,t,i){const r=Vd(e,this._firestore),s=iA(r.converter,t,i),l=JT(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const s=Vd(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof eu?LF(this._dataReader,"Transaction.update",s._key,t,i,r):FF(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Vd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vd(e,this._firestore),i=new Bd(this._firestore);return super.get(e).then(r=>new tu(this._firestore,i,t._key,r._document,new Lp(!1,!1),t.converter))}}function jF(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hz(){if("undefined"==typeof Uint8Array)throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function fz(){if(!function xX(){return"undefined"!=typeof atob}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){R_=Zt.SDK_VERSION,(0,Zt._registerComponent)(new Wi.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),l=new Vn(new yX(t.getProvider("auth-internal")),new wX(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new De(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(d.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),(0,Zt.registerVersion)(iG,"3.7.3",n),(0,Zt.registerVersion)(iG,"3.7.3","esm2017")}();class P0{constructor(e){this._delegate=e}static fromBase64String(e){return fz(),new P0(Vl.fromBase64String(e))}static fromUint8Array(e){return hz(),new P0(Vl.fromUint8Array(e))}toBase64(){return fz(),this._delegate.toBase64()}toUint8Array(){return hz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function GF(n){return function mne(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class gne{enableIndexedDbPersistence(e,t){return function Cte(n,e){$$(n=Kt(n,Vn));const t=bi(n),i=n._freezeSettings(),r=new EF;return G$(t,r,new I$(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ete(n){$$(n=Kt(n,Vn));const e=bi(n),t=n._freezeSettings(),i=new EF;return G$(e,i,new rte(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Dte(n){if(n._initialized&&!n._terminated)throw new De(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{yield(t=(0,Z.Z)(function*(i){if(!Na.C())return Promise.resolve();const r=i+"main";yield Na.delete(r)}),function(i){return t.apply(this,arguments)})(g1(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pz{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Td||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function k$(n,e,t,i={}){var r;const s=(n=Kt(n,M0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&gp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let l,d;if("string"==typeof i.mockUserToken)l=i.mockUserToken,d=Ki.MOCK_USER;else{l=(0,O.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new De(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ki(p)}n._authCredentials=new _X(new rG(l,d))}}(this._delegate,e,t,i)}enableNetwork(){return function Ste(n){return function hte(n){return n.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield B$(n),t=yield RF(n);return e.setNetworkEnabled(!0),function(i){const r=je(i);return r._u.delete(0),T0(r)}(t)}))}(bi(n=Kt(n,Vn)))}(this._delegate)}disableNetwork(){return function Tte(n){return function fte(n){return n.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield B$(n),t=yield RF(n);return e.setNetworkEnabled(!1),(i=(0,Z.Z)(function*(r){const s=je(r);s._u.add(0),yield Z_(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(bi(n=Kt(n,Vn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,S$("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ite(n){return function(e){const t=new Vi;return e.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function qee(n,e){return aF.apply(this,arguments)}(yield kF(e),t)})),t.promise}(bi(n=Kt(n,Vn)))}(this._delegate)}onSnapshotsInSync(e){return function rne(n,e){return function gte(n,e){const t=new ZT(e);return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield ty(n),r=t,je(i).Ru.add(r),void r.next();var i,r})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return i=yield ty(n),r=t,void je(i).Ru.delete(r);var i,r}))}}(bi(n=Kt(n,Vn)),PF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new iy(this,O$(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new $o(this,WT(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function ste(n,e){if(n=Kt(n,M0),DF("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fr(n,null,(t=e,new Kc(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ane(n,e,t){n=Kt(n,Vn);const i=Object.assign(Object.assign({},sne),t);return function(r){if(r.maxAttempts<1)throw new De(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,l){const d=new Vi;return r.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){const p=yield function V$(n){return YT(n).then(e=>e.datastore)}(r);new ute(r.asyncQueue,p,l,s,d).run()})),d.promise}(bi(n),r=>e(new one(n,r)),i)}(this._delegate,t=>e(new mz(this,t)))}batch(){return bi(this._delegate),new gz(new uz(this._delegate,e=>ny(this._delegate,e)))}loadBundle(e){return function Ate(n,e){const t=bi(n=Kt(n,Vn)),i=new bte;return function _te(n,e,t,i){const r=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return N$(p,y);if(p instanceof ArrayBuffer)return N$(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new ote(p,l);var p}(t,S0(e));n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){!function ite(n,e,t){const i=je(n);var r;(r=(0,Z.Z)(function*(s,l,d){try{const p=yield l.getMetadata();if(yield function(S,R){const P=je(S),H=Qi(R.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",Y=>P.Ns.getBundleMetadata(Y,R.id)).then(Y=>!!Y&&Y.createTime.compareTo(H)>=0)}(s.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(S=p).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);d._updateProgress(m$(p));const y=new Fee(p,s.localStore,l.It);let w=yield l.mc();for(;w;){const S=yield y.Fu(w);S&&d._updateProgress(S),w=yield l.mc()}const D=yield y.complete();return yield Jc(s,D.Lu,void 0),yield function(S,R){const P=je(S);return P.persistence.runTransaction("Save bundle","readwrite",H=>P.Ns.saveBundleMetadata(H,R))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Bu)}catch(p){return gp("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var S}),function(s,l,d){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield kF(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function Mte(n,e){return function yte(n,e){return n.asyncQueue.enqueue((0,Z.Z)(function*(){return function(t,i){const r=je(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield KT(n),e)}))}(bi(n=Kt(n,Vn)),e).then(t=>t?new Fr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class rA extends UF{constructor(e){super(),this.firestore=e}convertBytes(e){return new P0(new Vl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $o.forKey(t,this.firestore,null)}}class mz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new rA(e)}get(e){const t=Vp(e);return this._delegate.get(t).then(i=>new N0(this._firestore,new tu(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Vp(e);return i?(jF("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Vp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}}class gz{constructor(e){this._delegate=e}set(e,t,i){const r=Vp(e);return i?(jF("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Vp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bp{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new O0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new F0(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Bp.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Bp(e,new rA(e),t),r.set(t,s)),s}}Bp.INSTANCES=new WeakMap;class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rA(e)}static forPath(e,t,i){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $o(t,new Bn(t._delegate,i,new Ue(e)))}static forKey(e,t,i){return new $o(t,new Bn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new iy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new iy(this.firestore,O$(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof Bn&&P$(this._delegate,e)}set(e,t){t=jF("DocumentReference.set",t);try{return t?az(this._delegate,e,t):az(this._delegate,e)}catch(i){throw os(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?lz(this._delegate,e):lz(this._delegate,e,t,...i)}catch(r){throw os(r,"updateDoc()","DocumentReference.update()")}}delete(){return function nne(n){return ny(Kt(n.firestore,Vn),[new H_(n._key,zn.none())])}(this._delegate)}onSnapshot(...e){const t=_z(e),i=yz(e,r=>new N0(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return cz(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Qte(n){n=Kt(n,Bn);const e=Kt(n.firestore,Vn),t=bi(e),i=new Bd(e);return function pte(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(i=(0,Z.Z)(function*(r,s,l){try{const d=yield function(p,y){const w=je(p);return w.persistence.runTransaction("read document","readonly",D=>w.localDocuments.getDocument(D,y))}(r,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new De(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Q_(d,`Failed to get document '${s} from cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield KT(n),e,t);var i})),t.promise}(t,n._key).then(r=>new tu(e,i,n._key,r,new Lp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Xte(n){n=Kt(n,Bn);const e=Kt(n.firestore,Vn);return U$(bi(e),n._key,{source:"server"}).then(t=>HF(e,n,t))}(this._delegate):function Kte(n){n=Kt(n,Bn);const e=Kt(n.firestore,Vn);return U$(bi(e),n._key).then(t=>HF(e,n,t))}(this._delegate),t.then(i=>new N0(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function _z(n){for(const e of n)if("object"==typeof e&&!GF(e))return e;return{}}function yz(n,e){var t,i;let r;return r=GF(n[0])?n[0]:GF(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class N0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oz(this._delegate,e._delegate)}}class F0 extends N0{data(e){const t=this._delegate.data(e);return function mX(n,e){n||tt()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rA(e)}where(e,t,i){try{return new as(this.firestore,Fd(this._delegate,function Vte(n,e,t){const i=e,r=nA("where",n);return new Bte(r,i,t)}(e,t,i)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,Fd(this._delegate,function Hte(n,e="asc"){const t=e,i=nA("orderBy",n);return new Ute(i,t)}(e,t)))}catch(i){throw os(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,Fd(this._delegate,function jte(n){return M$("limit",n),new J$("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,Fd(this._delegate,function Gte(n){return M$("limitToLast",n),new J$("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,Fd(this._delegate,function $te(...n){return new ez("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,Fd(this._delegate,function zte(...n){return new ez("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,Fd(this._delegate,function qte(...n){return new tz("endBefore",n,!1)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,Fd(this._delegate,function Wte(...n){return new tz("endAt",n,!0)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return IF(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ene(n){n=Kt(n,Fr);const e=Kt(n.firestore,Vn),t=bi(e),i=new Bd(e);return function mte(n,e){const t=new Vi;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(i=(0,Z.Z)(function*(r,s,l){try{const d=yield UT(r,s,!0),p=new y$(s,d.Hi),y=p.Wu(d.documents),w=p.applyChanges(y,!1);l.resolve(w.snapshot)}catch(d){const p=Q_(d,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield KT(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Ld(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function tne(n){n=Kt(n,Fr);const e=Kt(n.firestore,Vn),t=bi(e),i=new Bd(e);return H$(t,n._query,{source:"server"}).then(r=>new Ld(e,i,n,r))}(this._delegate):function Jte(n){n=Kt(n,Fr);const e=Kt(n.firestore,Vn),t=bi(e),i=new Bd(e);return X$(n._query),H$(t,n._query).then(r=>new Ld(e,i,n,r))}(this._delegate),t.then(i=>new $F(this.firestore,new Ld(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=_z(e),i=yz(e,r=>new $F(this.firestore,new Ld(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return cz(this._delegate,t,i)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}class yne{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new F0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $F{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new F0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yne(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new F0(this._firestore,i))})}isEqual(e){return oz(this._delegate,e._delegate)}}class iy extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $o(this.firestore,e):null}doc(e){try{return new $o(this.firestore,void 0===e?WT(this._delegate):WT(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function ine(n,e){const t=Kt(n.firestore,Vn),i=WT(n),r=iA(n.converter,e);return ny(t,[JT(Np(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,zn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new $o(this.firestore,t))}isEqual(e){return P$(this._delegate,e._delegate)}withConverter(e){return new iy(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function Vp(n){return Kt(n,Bn)}class zF{constructor(...e){this._delegate=new eu(...e)}static documentId(){return new zF(di.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof eu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cne(){return new NF("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=function lne(){return new x0("deleteField")}();return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function une(...n){return new Ote("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function dne(...n){return new Pte("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function hne(n){return new Nte("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vne={Firestore:pz,GeoPoint:QT,Timestamp:$n,Blob:P0,Transaction:mz,WriteBatch:gz,DocumentReference:$o,DocumentSnapshot:N0,Query:as,QueryDocumentSnapshot:F0,QuerySnapshot:$F,CollectionReference:iy,FieldPath:zF,FieldValue:Up,setLogLevel:function _ne(n){!function pX(n){Ed.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vz(n,e){return function Cne(n,e=Ac){return new cn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function qF(n,e){return vz(n,e).pipe((0,lt.U)(t=>({payload:t,type:"query"})))}function sA(n,e){return qF(n,e).pipe(pi(void 0),JP(),(0,lt.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const p=r.find(w=>w.doc.ref.isEqual(l.ref)),y=null==t?void 0:t.payload.docs.find(w=>w.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function bz(n,e,t){return sA(n,t).pipe(Tr((i,r)=>function Dne(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Ine(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return WF(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return WF(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return WF(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Qn(),(0,lt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function WF(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function wz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function wne(n){(function bne(n,e){n.INTERNAL.registerComponent(new Wi.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},vne)))})(n,(e,t)=>new pz(e,t,new gne)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(UP.Z);class Cz{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=sA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,lt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(pi(void 0),JP(),kn(([i,r])=>r.length>0||!i),(0,lt.U)(([i,r])=>r),yi)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=wz(e);return bz(this.query,t,this.afs.schedulers.outsideAngular).pipe(yi)}valueChanges(e={}){return qF(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),yi)}get(e){return(0,fn.D)(this.query.get(e)).pipe(yi)}add(e){return this.ref.add(e)}doc(e){return new Ez(this.ref.doc(e),this.afs)}}class Ez{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=Sz(i,t);return new Cz(r,s,this.afs)}snapshotChanges(){return function Ene(n,e){return vz(n,e).pipe(pi(void 0),JP(),(0,lt.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yi)}valueChanges(e={}){return this.snapshotChanges().pipe((0,lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(yi)}}class Sne{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sA(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),kn(t=>t.length>0),yi):sA(this.query,this.afs.schedulers.outsideAngular).pipe(yi)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=wz(e);return bz(this.query,t,this.afs.schedulers.outsideAngular).pipe(yi)}valueChanges(e={}){return qF(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),yi)}get(e){return(0,fn.D)(this.query.get(e)).pipe(yi)}}const Dz=new u.OlP("angularfire2.enableFirestorePersistence"),Iz=new u.OlP("angularfire2.firestore.persistenceSettings"),Tne=new u.OlP("angularfire2.firestore.settings"),Ane=new u.OlP("angularfire2.firestore.use-emulator");function Sz(n,e=(t=>t)){return{query:e(n),ref:n}}let Mne=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,S,R,P,H,Y,Ce,Pe){this.schedulers=p;const xe=(0,Zi.on)(t,d,i),Re=w;D&&VP(xe,d,S,P,H,Y,R,Ce),[this.firestore,this.persistenceEnabled$]=(0,Zi.cc)(`${xe.name}.firestore`,"AngularFirestore",xe.name,()=>{const Xe=d.runOutsideAngular(()=>xe.firestore());if(s&&Xe.settings(s),Re&&Xe.useEmulator(...Re),r&&!Wa(l)){const rt=()=>{try{return(0,fn.D)(Xe.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(jt){return"undefined"!=typeof console&&console.warn(jt),Ye(!1)}};return[Xe,d.runOutsideAngular(rt)]}return[Xe,Ye(!1)]},[s,Re,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=Sz(r,i),d=this.schedulers.ngZone.run(()=>s);return new Cz(d,l,this)}collectionGroup(t,i){const r=i||(l=>l),s=this.firestore.collectionGroup(t);return new Sne(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new Ez(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zi.Dh),u.LFG(Zi.xv,8),u.LFG(Dz,8),u.LFG(Tne,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(SS),u.LFG(Iz,8),u.LFG(Ane,8),u.LFG(NS,8),u.LFG(OP,8),u.LFG(PP,8),u.LFG(NP,8),u.LFG(FP,8),u.LFG(LP,8),u.LFG(BP,8),u.LFG(Tw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xne=(()=>{class n{constructor(){PS.Z.registerVersion("angularfire",IS.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Dz,useValue:!0},{provide:Iz,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Mne]}),n})();const Tz="@firebase/database",Az="0.13.10";let ZF="";function Mz(n){ZF=n}class One{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Pne{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const xz=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new One(e)}}catch(e){}return new Pne},Hp=xz("localStorage"),YF=xz("sessionStorage"),ry=new Es.Yd("@firebase/database"),Rz=function(){let n=1;return function(){return n++}}(),kz=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const i=t.digest();return O.US.encodeByteArray(i)},L0=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=L0.apply(null,i):e+="object"==typeof i?(0,O.Wl)(i):i,e+=" "}return e};let jp=null,Oz=!0;const Pz=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ry.logLevel=Es.in.VERBOSE,jp=ry.log.bind(ry),e&&YF.set("logging_enabled",!0)):"function"==typeof n?jp=n:(jp=null,YF.remove("logging_enabled"))},er=function(...n){if(!0===Oz&&(Oz=!1,null===jp&&!0===YF.get("logging_enabled")&&Pz(!0)),jp){const e=L0.apply(null,n);jp(e)}},B0=function(n){return function(...e){er(n,...e)}},KF=function(...n){const e="FIREBASE INTERNAL ERROR: "+L0(...n);ry.error(e)},Ul=function(...n){const e=`FIREBASE FATAL ERROR: ${L0(...n)}`;throw ry.error(e),new Error(e)},Lr=function(...n){const e="FIREBASE WARNING: "+L0(...n);ry.warn(e)},oA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nu="[MIN_NAME]",Hl="[MAX_NAME]",Gp=function(n,e){if(n===e)return 0;if(n===nu||e===Hl)return-1;if(e===nu||n===Hl)return 1;{const t=aA(n),i=aA(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},Lne=function(n,e){return n===e?0:n<e?-1:1},V0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},QF=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,O.Wl)(e[i]),t+=":",t+=QF(n[e[i]]);return t+="}",t},Nz=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function tr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Fz=function(n){(0,O.hu)(!oA(n),"Invalid JSON number");const i=1023;let r,s,l,d,p;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const w=y.join("");let D="";for(p=0;p<64;p+=8){let S=parseInt(w.substr(p,8),2).toString(16);1===S.length&&(S="0"+S),D+=S}return D.toLowerCase()},Hne=new RegExp("^-?(0*)\\d{1,10}$"),Lz=-2147483648,XF=2147483647,aA=function(n){if(Hne.test(n)){const e=Number(n);if(e>=Lz&&e<=XF)return e}return null},sy=function(n){try{n()}catch(e){setTimeout(()=>{throw Lr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},U0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Gne{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Lr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class $ne{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(er("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lr(e)}}let H0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const jz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zz="websocket",qz="long_polling";class eL{constructor(e,t,i,r,s=!1,l="",d=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Wz(n,e,t){let i;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===zz)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==qz)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function zne(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return tr(t,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class qne{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const tL={},nL={};function iL(n){const e=n.toString();return tL[e]||(tL[e]=new qne),tL[e]}class Zne{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&sy(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ud{constructor(e,t,i,r,s,l,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=B0(e),this.stats_=iL(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Wz(t,qz,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Zne(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rL((...s)=>{const[l,d,p,y,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jz.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ud.forceAllow_=!0}static forceDisallow(){Ud.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Ud.forceAllow_&&(Ud.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,O.h$)(t),r=Nz(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class rL{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Rz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=rL.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){er("frame writing exception"),d.stack&&er(d.stack),er(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||er("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{er("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let cA=null;"undefined"!=typeof MozWebSocket?cA=MozWebSocket:"undefined"!=typeof WebSocket&&(cA=WebSocket);let oy=(()=>{class n{constructor(t,i,r,s,l,d,p){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=B0(this.connId),this.stats_=iL(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,l){const d={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&jz.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),l&&(d.p=l),Wz(t,zz,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hp.set("previous_websocket_failure",!0);try{let r;if((0,O.Yr)()){r={headers:{"User-Agent":`Firebase/5/${ZF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new cA(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==cA&&!n.forceDisallow_}static previouslyFailed(){return Hp.isInMemoryStorage||!0===Hp.get("previous_websocket_failure")}markConnectionHealthy(){Hp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,O.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,O.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Nz(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),eq=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ud,oy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=oy&&oy.isAvailable();let r=i&&!oy.previouslyFailed();if(t.webSocketOnly&&(i||Lr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[oy];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class aq{constructor(e,t,i,r,s,l,d,p,y,w){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=B0("c:"+this.id+":"),this.transportManager_=new eq(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=U0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=V0("t",e),i=V0("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=V0("t",e),i=V0("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=V0("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?KF("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KF("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Lr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),U0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lq{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class cq{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class uA extends cq{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uA}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function on(){return new pn("")}function Ut(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Hd(n){return n.pieces_.length-n.pieceNum_}function Mn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new pn(n.pieces_,e)}function oL(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function j0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function hq(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new pn(e,0)}function qn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof pn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new pn(t,0)}function Ht(n){return n.pieceNum_>=n.pieces_.length}function ls(n,e){const t=Ut(n),i=Ut(e);if(null===t)return e;if(t===i)return ls(Mn(n),Mn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function gie(n,e){const t=j0(n,0),i=j0(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=Gp(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function aL(n,e){if(Hd(n)!==Hd(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function zo(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Hd(n)>Hd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class _ie{constructor(e,t){this.errorPrefix_=t,this.parts_=j0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,O.ug)(this.parts_[i]);fq(this)}}function fq(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$p(n))}function $p(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class lL extends cq{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new lL}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const G0=1e3;let hA,zp=(()=>{class n extends lq{constructor(t,i,r,s,l,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=B0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=G0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lL.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&uA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,l={r:s,a:t,b:i};this.log_((0,O.Wl)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new O.BH,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,w=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(r,s),t.onComplete&&t.onComplete(w,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const r=(0,O.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Lr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,O.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,d=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const l={p:t};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,l){this.initConnection_();const d={p:i,d:r};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):KF("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=G0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=G0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=G0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Z.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const w=function(){y?y.close():(p=!0,s())};t.realtime_={close:w,sendRequest:function(R){(0,O.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(R)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[R,P]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);p?er("getToken() completed but was canceled"):(er("getToken() completed. Creating connection."),t.authToken_=R&&R.accessToken,t.appCheckToken_=P&&P.token,y=new aq(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,H=>{Lr(H+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(R){t.log_("Failed to get token: "+R),p||(t.repoInfo_.nodeAdmin&&Lr(R),w())}}})()}interrupt(t){er("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){er("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=G0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(l=>QF(l)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new pn(t).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){er("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){er("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,O.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+ZF.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=uA.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class dA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new zt(nu,e),r=new zt(nu,t);return 0!==this.compare(i,r)}minPost(){return zt.MIN}}class gq extends dA{static get __EMPTY_NODE(){return hA}static set __EMPTY_NODE(e){hA=e}compare(e,t){return Gp(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Hl,hA)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,hA)}toString(){return".key"}}const jl=new gq;class fA{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?i(e.key,t):1,r&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let uL,Fa=(()=>{class n{constructor(t,i,r,s,l){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:As.EMPTY_NODE,this.right=null!=l?l:As.EMPTY_NODE}copy(t,i,r,s,l){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const l=r(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return As.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return As.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class As{constructor(e,t=As.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new As(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fa.BLACK,null,null))}remove(e){return new As(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fa.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new fA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new fA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new fA(this.root_,null,this.comparator_,!0,e)}}function Iie(n,e){return Gp(n.name,e.name)}function cL(n,e){return Gp(n,e)}As.EMPTY_NODE=new class Die{copy(e,t,i,r,s){return this}insert(e,t,i){return new Fa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _q=function(n){return"number"==typeof n?"number:"+Fz(n):"string:"+n},yq=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===uL||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===uL||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let vq,bq,wq,ay=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),yq(this.priorityNode_)}static set __childrenNodeConstructor(t){vq=t}static get __childrenNodeConstructor(){return vq}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ht(t)?this:".priority"===Ut(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Ut(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,O.hu)(".priority"!==r||1===Hd(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_q(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?Fz(this.value_):this.value_,this.lazyHash_=kz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,O.hu)(s>=0,"Unknown leaf type: "+i),(0,O.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fn=new class Mie extends dA{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Gp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Hl,new ay("[PRIORITY-POST]",wq))}makePost(e,t){const i=bq(e);return new zt(t,new ay("[PRIORITY-POST]",i))}toString(){return".priority"}},xie=Math.log(2);class Rie{constructor(e){this.count=parseInt(Math.log(e+1)/xie,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pA=function(n,e,t,i){n.sort(e);const r=function(p,y){const w=y-p;let D,S;if(0===w)return null;if(1===w)return D=n[p],S=t?t(D):D,new Fa(S,D.node,Fa.BLACK,null,null);{const R=parseInt(w/2,10)+p,P=r(p,R),H=r(R+1,y);return D=n[R],S=t?t(D):D,new Fa(S,D.node,Fa.BLACK,P,H)}},d=function(p){let y=null,w=null,D=n.length;const S=function(P,H){const Y=D-P,Ce=D;D-=P;const Pe=r(Y+1,Ce),xe=n[Y],Re=t?t(xe):xe;R(new Fa(Re,xe.node,H,null,Pe))},R=function(P){y?(y.left=P,y=P):(w=P,y=P)};for(let P=0;P<p.count;++P){const H=p.nextBitIsOne(),Y=Math.pow(2,p.count-(P+1));H?S(Y,Fa.BLACK):(S(Y,Fa.BLACK),S(Y,Fa.RED))}return w}(new Rie(n.length));return new As(i||e,d)};let dL;const ly={};class iu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(ly&&Fn,"ChildrenNode.ts has not been loaded"),dL=dL||new iu({".priority":ly},{".priority":Fn}),dL}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof As?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==jl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(zt.Wrap);let d,l=s.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=s.getNext();d=r?pA(i,e.getCompare()):ly;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const w=Object.assign({},this.indexes_);return w[p]=d,new iu(w,y)}addToIndexes(e,t){const i=(0,O.UI)(this.indexes_,(r,s)=>{const l=(0,O.DV)(this.indexSet_,s);if((0,O.hu)(l,"Missing index implementation for "+s),r===ly){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator(zt.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),pA(d,l.getCompare())}return ly}{const d=t.get(e.name);let p=r;return d&&(p=p.remove(new zt(e.name,d))),p.insert(e,e.node)}});return new iu(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,O.UI)(this.indexes_,r=>{if(r===ly)return r;{const s=t.get(e.name);return s?r.remove(new zt(e.name,s)):r}});return new iu(i,this.indexSet_)}}let $0,xt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yq(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $0||($0=new n(new As(cL),null,iu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?$0:i}}getChild(t){const i=Ut(t);return null===i?this:this.getImmediateChild(i).getChild(Mn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,O.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new zt(t,i);let s,l;i.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?$0:this.priorityNode_;return new n(s,d,l)}}updateChild(t,i){const r=Ut(t);if(null===r)return i;{(0,O.hu)(".priority"!==Ut(t)||1===Hd(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Mn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(Fn,(d,p)=>{i[d]=p.val(t),r++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!t&&l&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_q(this.getPriority().val())+":"),this.forEachChild(Fn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":kz(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new zt(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new zt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new zt(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===z0?-1:0}withIndex(t){if(t===jl||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===jl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Fn),s=i.getIterator(Fn);let l=r.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=r.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===jl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const z0=new class kie extends xt{constructor(){super(new As(cL),xt.EMPTY_NODE,iu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return xt.EMPTY_NODE}isEmpty(){return!1}};function Jn(n,e=null){if(null===n)return xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ay(n,Jn(e));if(n instanceof Array){let t=xt.EMPTY_NODE;return tr(n,(i,r)=>{if((0,O.r3)(n,i)&&"."!==i.substring(0,1)){const s=Jn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Jn(e))}{const t=[];let i=!1;if(tr(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Jn(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new zt(l,p)))}}),0===t.length)return xt.EMPTY_NODE;const s=pA(t,Iie,l=>l.name,cL);if(i){const l=pA(t,Fn.getCompare());return new xt(s,Jn(e),new iu({".priority":l},{".priority":Fn}))}return new xt(s,Jn(e),iu.Default)}}Object.defineProperties(zt,{MIN:{value:new zt(nu,xt.EMPTY_NODE)},MAX:{value:new zt(Hl,z0)}}),gq.__EMPTY_NODE=xt.EMPTY_NODE,ay.__childrenNodeConstructor=xt,function Sie(n){uL=n}(z0),function Aie(n){wq=n}(z0),function Tie(n){bq=n}(Jn);class hL extends dA{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Ht(e)&&".priority"!==Ut(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Gp(e.name,t.name):s}makePost(e,t){const i=Jn(e),r=xt.EMPTY_NODE.updateChild(this.indexPath_,i);return new zt(t,r)}maxPost(){const e=xt.EMPTY_NODE.updateChild(this.indexPath_,z0);return new zt(Hl,e)}toString(){return j0(this.indexPath_,0).join("/")}}const fL=new class Pie extends dA{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Gp(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const i=Jn(e);return new zt(t,i)}toString(){return".value"}},cy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nie=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=cy.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=cy.charAt(e[r]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),Dq=function(n){if(n===""+XF)return"-";const e=aA(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return Hl;const s=cy.charAt(cy.indexOf(t[i])+1);return t[i]=s,t.slice(0,i+1).join("")},Iq=function(n){if(n===""+Lz)return nu;const e=aA(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+XF:(delete t[t.length-1],t.join("")):(t[t.length-1]=cy.charAt(cy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Sq(n){return{type:"value",snapshotNode:n}}function uy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function q0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function W0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class mL{constructor(e){this.index_=e}updateChild(e,t,i,r,s,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(q0(t,d)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(uy(t,i)):l.trackChildChange(W0(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Fn,(r,s)=>{t.hasChild(r)||i.trackChildChange(q0(r,s))}),t.isLeafNode()||t.forEachChild(Fn,(r,s)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(s)||i.trackChildChange(W0(r,s,l))}else i.trackChildChange(uy(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Z0{constructor(e){this.indexedFilter_=new mL(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Z0.getStartPost_(e),this.endPost_=Z0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,l){return this.matches(new zt(t,i))||(i=xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=xt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(xt.EMPTY_NODE);const s=this;return t.forEachChild(Fn,(l,d)=>{s.matches(new zt(l,d))||(r=r.updateImmediateChild(l,xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Lie{constructor(e){this.rangedFilter_=new Z0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,l){return this.rangedFilter_.matches(new zt(t,i))||(i=xt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,l):this.fullLimitUpdateChild_(e,t,i,s,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=xt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),l++}}else{let s,l,d,p;if(r=t.withIndex(this.index_),r=r.updatePriority(xt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(S,R)=>D(R,S)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,w=!1;for(;p.hasNext();){const D=p.getNext();!w&&d(s,D)<=0&&(w=!0),w&&y<this.limit_&&d(D,l)<=0?y++:r=r.updateImmediateChild(D.name,xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(S,R)=>D(R,S)}else l=this.index_.getCompare();const d=e;(0,O.hu)(d.numChildren()===this.limit_,"");const p=new zt(t,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(d.hasChild(t)){const D=d.getImmediateChild(t);let S=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=S&&(S.name===t||d.hasChild(S.name));)S=r.getChildAfterChild(this.index_,S,this.reverse_);const R=null==S?1:l(S,p);if(w&&!i.isEmpty()&&R>=0)return null!=s&&s.trackChildChange(W0(t,i,D)),d.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(q0(t,D));const H=d.updateImmediateChild(t,xt.EMPTY_NODE);return null!=S&&this.rangedFilter_.matches(S)?(null!=s&&s.trackChildChange(uy(S.name,S.node)),H.updateImmediateChild(S.name,S.node)):H}}return i.isEmpty()?e:w&&l(y,p)>=0?(null!=s&&(s.trackChildChange(q0(y.name,y.node)),s.trackChildChange(uy(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(y.name,xt.EMPTY_NODE)):e}}class mA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fn}copy(){const e=new mA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gL(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function _L(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function gA(n,e){const t=n.copy();return t.index_=e,t}function Tq(n){const e={};if(n.isDefault())return e;let t;return n.index_===Fn?t="$priority":n.index_===fL?t="$value":n.index_===jl?t="$key":((0,O.hu)(n.index_ instanceof hL,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_&&(e.startAt=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Aq(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Fn&&(e.i=n.index_.toString()),e}class _A extends lq{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=B0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=_A.getListenId_(e,i),d={};this.listens_[l]=d;const p=Tq(e._queryParams);this.restRequest_(s+".json",p,(y,w)=>{let D=w;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,i),(0,O.DV)(this.listens_,l)===d){let S;S=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(S,null)}})}unlisten(e,t){const i=_A.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Tq(e._queryParams),i=e._path.toString(),r=new O.BH;return this.restRequest_(i+".json",t,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,O.cI)(d.responseText)}catch(y){Lr("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Lr("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}class Gie{constructor(){this.rootNode_=xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yA(){return{value:null,children:new Map}}function dy(n,e,t){if(Ht(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Ut(e);n.children.has(i)||n.children.set(i,yA()),dy(n.children.get(i),e=Mn(e),t)}}function yL(n,e){if(Ht(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Fn,(i,r)=>{dy(n,new pn(i),r)}),yL(n,e)}}if(n.children.size>0){const t=Ut(e);return e=Mn(e),n.children.has(t)&&yL(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function vL(n,e,t){null!==n.value?t(e,n.value):function $ie(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{vL(r,new pn(e.toString()+"/"+i),t)})}class zie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&tr(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class Zie{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new zie(e);const i=1e4+2e4*Math.random();U0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;tr(e,(r,s)=>{s>0&&(0,O.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),U0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qo||(qo={})),qo))();function CL(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class vA{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=qo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ht(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pn(e));return new vA(on(),t,this.revert)}}return(0,O.hu)(Ut(this.path)===e,"operationForChild called for unrelated child."),new vA(Mn(this.path),this.affectedTree,this.revert)}}class Y0{constructor(e,t){this.source=e,this.path=t,this.type=qo.LISTEN_COMPLETE}operationForChild(e){return Ht(this.path)?new Y0(this.source,on()):new Y0(this.source,Mn(this.path))}}class qp{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=qo.OVERWRITE}operationForChild(e){return Ht(this.path)?new qp(this.source,on(),this.snap.getImmediateChild(e)):new qp(this.source,Mn(this.path),this.snap)}}class hy{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=qo.MERGE}operationForChild(e){if(Ht(this.path)){const t=this.children.subtree(new pn(e));return t.isEmpty()?null:t.value?new qp(this.source,on(),t.value):new hy(this.source,on(),t)}return(0,O.hu)(Ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hy(this.source,Mn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class jd{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ht(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ut(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Yie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function K0(n,e,t,i,r,s){const l=i.filter(d=>d.type===t);l.sort((d,p)=>function Xie(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const i=new zt(e.childName,e.snapshotNode),r=new zt(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),l.forEach(d=>{const p=function Qie(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function bA(n,e){return{eventCache:n,serverCache:e}}function Q0(n,e,t,i){return bA(new jd(e,t,i),n.serverCache)}function xq(n,e,t,i){return bA(n.eventCache,new jd(e,t,i))}function wA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let EL;class Ln{constructor(e,t=(()=>(EL||(EL=new As(Lne)),EL))()){this.value=e,this.children=t}static fromObject(e){let t=new Ln(null);return tr(e,(i,r)=>{t=t.set(new pn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:on(),value:this.value};if(Ht(e))return null;{const i=Ut(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Mn(e),t);return null!=s?{path:qn(new pn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ht(e))return this;{const t=Ut(e),i=this.children.get(t);return null!==i?i.subtree(Mn(e)):new Ln(null)}}set(e,t){if(Ht(e))return new Ln(t,this.children);{const i=Ut(e),s=(this.children.get(i)||new Ln(null)).set(Mn(e),t),l=this.children.insert(i,s);return new Ln(this.value,l)}}remove(e){if(Ht(e))return this.children.isEmpty()?new Ln(null):new Ln(null,this.children);{const t=Ut(e),i=this.children.get(t);if(i){const r=i.remove(Mn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Ln(null):new Ln(this.value,s)}return this}}get(e){if(Ht(e))return this.value;{const t=Ut(e),i=this.children.get(t);return i?i.get(Mn(e)):null}}setTree(e,t){if(Ht(e))return t;{const i=Ut(e),s=(this.children.get(i)||new Ln(null)).setTree(Mn(e),t);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Ln(this.value,l)}}fold(e){return this.fold_(on(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(qn(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,on(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Ht(e))return null;{const s=Ut(e),l=this.children.get(s);return l?l.findOnPath_(Mn(e),qn(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,on(),t)}foreachOnPath_(e,t,i){if(Ht(e))return this;{this.value&&i(t,this.value);const r=Ut(e),s=this.children.get(r);return s?s.foreachOnPath_(Mn(e),qn(t,r),i):new Ln(null)}}foreach(e){this.foreach_(on(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(qn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class La{constructor(e){this.writeTree_=e}static empty(){return new La(new Ln(null))}}function X0(n,e,t){if(Ht(e))return new La(new Ln(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const l=ls(r,e);return s=s.updateChild(l,t),new La(n.writeTree_.set(r,s))}{const r=new Ln(t),s=n.writeTree_.setTree(e,r);return new La(s)}}}function DL(n,e,t){let i=n;return tr(t,(r,s)=>{i=X0(i,qn(e,r),s)}),i}function Rq(n,e){if(Ht(e))return La.empty();{const t=n.writeTree_.setTree(e,new Ln(null));return new La(t)}}function IL(n,e){return null!=Zp(n,e)}function Zp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ls(t.path,e)):null}function kq(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fn,(i,r)=>{e.push(new zt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new zt(i,r.value))}),e}function Gd(n,e){if(Ht(e))return n;{const t=Zp(n,e);return new La(null!=t?new Ln(t):n.writeTree_.subtree(e))}}function SL(n){return n.writeTree_.isEmpty()}function fy(n,e){return Oq(on(),n.writeTree_,e)}function Oq(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,O.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=Oq(qn(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(qn(n,".priority"),i)),t}}function CA(n,e){return Bq(e,n)}function rre(n,e){if(n.snap)return zo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&zo(qn(n.path,t),e))return!0;return!1}function ore(n){return n.visible}function Pq(n,e,t){let i=La.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const l=s.path;let d;if(s.snap)zo(t,l)?(d=ls(t,l),i=X0(i,d,s.snap)):zo(l,t)&&(d=ls(l,t),i=X0(i,on(),s.snap.getChild(d)));else{if(!s.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(zo(t,l))d=ls(t,l),i=DL(i,d,s.children);else if(zo(l,t))if(d=ls(l,t),Ht(d))i=DL(i,on(),s.children);else{const p=(0,O.DV)(s.children,Ut(d));if(p){const y=p.getChild(Mn(d));i=X0(i,on(),y)}}}}}return i}function Nq(n,e,t,i,r){if(i||r){const s=Gd(n.visibleWrites,e);return!r&&SL(s)?t:r||null!=t||IL(s,on())?fy(Pq(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(zo(y.path,e)||zo(e,y.path))},e),t||xt.EMPTY_NODE):null}{const s=Zp(n.visibleWrites,e);if(null!=s)return s;{const l=Gd(n.visibleWrites,e);return SL(l)?t:null!=t||IL(l,on())?fy(l,t||xt.EMPTY_NODE):null}}}function EA(n,e,t,i){return Nq(n.writeTree,n.treePath,e,t,i)}function TL(n,e){return function are(n,e,t){let i=xt.EMPTY_NODE;const r=Zp(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Fn,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(t){const s=Gd(n.visibleWrites,e);return t.forEachChild(Fn,(l,d)=>{const p=fy(Gd(s,new pn(l)),d);i=i.updateImmediateChild(l,p)}),kq(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return kq(Gd(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function Fq(n,e,t,i){return function lre(n,e,t,i,r){(0,O.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=qn(e,t);if(IL(n.visibleWrites,s))return null;{const l=Gd(n.visibleWrites,s);return SL(l)?r.getChild(t):fy(l,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function DA(n,e){return function ure(n,e){return Zp(n.visibleWrites,e)}(n.writeTree,qn(n.treePath,e))}function AL(n,e,t){return function cre(n,e,t,i){const r=qn(e,t),s=Zp(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?fy(Gd(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Lq(n,e){return Bq(qn(n.treePath,e),n.writeTree)}function Bq(n,e){return{treePath:n,writeTree:e}}class pre{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,W0(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,q0(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,uy(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,W0(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const Vq=new class mre{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class ML{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new jd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return AL(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wp(this.viewCache_),s=function fre(n,e,t,i,r,s){return function dre(n,e,t,i,r,s,l){let d;const p=Gd(n.visibleWrites,e),y=Zp(p,on());if(null!=y)d=y;else{if(null==t)return[];d=fy(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const w=[],D=l.getCompare(),S=s?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let R=S.getNext();for(;R&&w.length<r;)0!==D(R,i)&&w.push(R),R=S.getNext();return w}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function Uq(n,e,t,i,r,s){const l=e.eventCache;if(null!=DA(i,t))return e;{let d,p;if(Ht(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Wp(e),D=TL(i,y instanceof xt?y:xt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=EA(i,Wp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Ut(t);if(".priority"===y){(0,O.hu)(1===Hd(t),"Can't have a priority with additional path components");const w=l.getNode();p=e.serverCache.getNode();const D=Fq(i,t,w,p);d=null!=D?n.filter.updatePriority(w,D):l.getNode()}else{const w=Mn(t);let D;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const S=Fq(i,t,l.getNode(),p);D=null!=S?l.getNode().getImmediateChild(y).updateChild(w,S):l.getNode().getImmediateChild(y)}else D=AL(i,y,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),y,D,w,r,s):l.getNode()}}return Q0(e,d,l.isFullyInitialized()||Ht(t),n.filter.filtersNodes())}}function IA(n,e,t,i,r,s,l,d){const p=e.serverCache;let y;const w=l?n.filter:n.filter.getIndexedFilter();if(Ht(t))y=w.updateFullNode(p.getNode(),i,null);else if(w.filtersNodes()&&!p.isFiltered()){const R=p.getNode().updateChild(t,i);y=w.updateFullNode(p.getNode(),R,null)}else{const R=Ut(t);if(!p.isCompleteForPath(t)&&Hd(t)>1)return e;const P=Mn(t),Y=p.getNode().getImmediateChild(R).updateChild(P,i);y=".priority"===R?w.updatePriority(p.getNode(),Y):w.updateChild(p.getNode(),R,Y,P,Vq,null)}const D=xq(e,y,p.isFullyInitialized()||Ht(t),w.filtersNodes());return Uq(n,D,t,r,new ML(r,D,s),d)}function xL(n,e,t,i,r,s,l){const d=e.eventCache;let p,y;const w=new ML(r,e,s);if(Ht(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,l),p=Q0(e,y,!0,n.filter.filtersNodes());else{const D=Ut(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),i),p=Q0(e,y,d.isFullyInitialized(),d.isFiltered());else{const S=Mn(t),R=d.getNode().getImmediateChild(D);let P;if(Ht(S))P=i;else{const H=w.getCompleteChild(D);P=null!=H?".priority"===oL(S)&&H.getChild(hq(S)).isEmpty()?H:H.updateChild(S,i):xt.EMPTY_NODE}p=R.equals(P)?e:Q0(e,n.filter.updateChild(d.getNode(),D,P,S,w,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function Hq(n,e){return n.eventCache.isCompleteForChild(e)}function jq(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function RL(n,e,t,i,r,s,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Ht(t)?i:new Ln(null).setTree(t,i);const w=e.serverCache.getNode();return y.children.inorderTraversal((D,S)=>{if(w.hasChild(D)){const P=jq(0,e.serverCache.getNode().getImmediateChild(D),S);p=IA(n,p,new pn(D),P,r,s,l,d)}}),y.children.inorderTraversal((D,S)=>{const R=!e.serverCache.isCompleteForChild(D)&&null===S.value;if(!w.hasChild(D)&&!R){const H=jq(0,e.serverCache.getNode().getImmediateChild(D),S);p=IA(n,p,new pn(D),H,r,s,l,d)}}),p}class Dre{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new mL(i.getIndex()),s=function Bie(n){return n.loadsAllData()?new mL(n.getIndex()):n.hasLimit()?new Lie(n):new Z0(n)}(i);this.processor_=function gre(n){return{filter:n}}(s);const l=t.serverCache,d=t.eventCache,p=r.updateFullNode(xt.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(xt.EMPTY_NODE,d.getNode(),null),w=new jd(p,l.isFullyInitialized(),r.filtersNodes()),D=new jd(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=bA(D,w),this.eventGenerator_=new Yie(this.query_)}get query(){return this.query_}}function Tre(n,e){const t=Wp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ht(e)&&!t.getImmediateChild(Ut(e)).isEmpty())?t.getChild(e):null}function Gq(n){return 0===n.eventRegistrations_.length}function $q(n,e,t){const i=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function zq(n,e,t,i){e.type===qo.MERGE&&null!==e.source.queryId&&((0,O.hu)(Wp(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(wA(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function yre(n,e,t,i,r){const s=new pre;let l,d;if(t.type===qo.OVERWRITE){const y=t;y.source.fromUser?l=xL(n,e,y.path,y.snap,i,r,s):((0,O.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Ht(y.path),l=IA(n,e,y.path,y.snap,i,r,d,s))}else if(t.type===qo.MERGE){const y=t;y.source.fromUser?l=function bre(n,e,t,i,r,s,l){let d=e;return i.foreach((p,y)=>{const w=qn(t,p);Hq(e,Ut(w))&&(d=xL(n,d,w,y,r,s,l))}),i.foreach((p,y)=>{const w=qn(t,p);Hq(e,Ut(w))||(d=xL(n,d,w,y,r,s,l))}),d}(n,e,y.path,y.children,i,r,s):((0,O.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=RL(n,e,y.path,y.children,i,r,d,s))}else if(t.type===qo.ACK_USER_WRITE){const y=t;l=y.revert?function Ere(n,e,t,i,r,s){let l;if(null!=DA(i,t))return e;{const d=new ML(i,e,r),p=e.eventCache.getNode();let y;if(Ht(t)||".priority"===Ut(t)){let w;if(e.serverCache.isFullyInitialized())w=EA(i,Wp(e));else{const D=e.serverCache.getNode();(0,O.hu)(D instanceof xt,"serverChildren would be complete if leaf node"),w=TL(i,D)}w=w,y=n.filter.updateFullNode(p,w,s)}else{const w=Ut(t);let D=AL(i,w,e.serverCache);null==D&&e.serverCache.isCompleteForChild(w)&&(D=p.getImmediateChild(w)),y=null!=D?n.filter.updateChild(p,w,D,Mn(t),d,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,xt.EMPTY_NODE,Mn(t),d,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=EA(i,Wp(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=DA(i,on()),Q0(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function wre(n,e,t,i,r,s,l){if(null!=DA(r,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=i.value){if(Ht(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return IA(n,e,t,p.getNode().getChild(t),r,s,d,l);if(Ht(t)){let y=new Ln(null);return p.getNode().forEachChild(jl,(w,D)=>{y=y.set(new pn(w),D)}),RL(n,e,t,y,r,s,d,l)}return e}{let y=new Ln(null);return i.foreach((w,D)=>{const S=qn(t,w);p.isCompleteForPath(S)&&(y=y.set(w,p.getNode().getChild(S)))}),RL(n,e,t,y,r,s,d,l)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==qo.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function Cre(n,e,t,i,r){const s=e.serverCache;return Uq(n,xq(e,s.getNode(),s.isFullyInitialized()||Ht(t),s.isFiltered()),t,i,Vq,r)}(n,e,t.path,i,s)}const p=s.getChanges();return function vre(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=wA(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Sq(wA(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,r,e,t,i);return function _re(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,O.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,qq(n,s.changes,s.viewCache.eventCache.getNode(),null)}function qq(n,e,t,i){return function Kie(n,e,t,i){const r=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function Fie(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),K0(n,r,"child_removed",e,i,t),K0(n,r,"child_added",e,i,t),K0(n,r,"child_moved",s,i,t),K0(n,r,"child_changed",e,i,t),K0(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let SA,AA;class Wq{constructor(){this.views=new Map}}function kL(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,O.hu)(null!=s,"SyncTree gave us an op for an invalid query."),zq(s,e,t,i)}{let s=[];for(const l of n.views.values())s=s.concat(zq(l,e,t,i));return s}}function Zq(n,e,t,i,r){const l=n.views.get(e._queryIdentifier);if(!l){let d=EA(t,r?i:null),p=!1;d?p=!0:i instanceof xt?(d=TL(t,i),p=!1):(d=xt.EMPTY_NODE,p=!1);const y=bA(new jd(d,p,!1),new jd(i,r,!1));return new Dre(e,y)}return l}function Yq(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function $d(n,e){let t=null;for(const i of n.views.values())t=t||Tre(i,e);return t}function Kq(n,e){return e._queryParams.loadsAllData()?TA(n):n.views.get(e._queryIdentifier)}function Qq(n,e){return null!=Kq(n,e)}function zd(n){return null!=TA(n)}function TA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Lre=1;class Xq{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ln(null),this.pendingWriteTree_=function hre(){return{visibleWrites:La.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function OL(n,e,t,i,r){return function ere(n,e,t,i,r){(0,O.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=X0(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?py(n,new qp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function qd(n,e,t=!1){const i=function nre(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function ire(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&rre(d,i.path)?r=!1:zo(i.path,d.path)&&(s=!0)),l--}return!!r&&(s?(function sre(n){n.visibleWrites=Pq(n.allWrites,ore,on()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Rq(n.visibleWrites,i.path):tr(i.children,p=>{n.visibleWrites=Rq(n.visibleWrites,qn(i.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Ln(null);return null!=i.snap?s=s.set(on(),!0):tr(i.children,l=>{s=s.set(new pn(l),!0)}),py(n,new vA(i.path,s,t))}return[]}function J0(n,e,t){return py(n,new qp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function MA(n,e,t,i,r=!1){const s=e._path,l=n.syncPointTree_.get(s);let d=[];if(l&&("default"===e._queryIdentifier||Qq(l,e))){const p=function Pre(n,e,t,i){const r=e._queryIdentifier,s=[];let l=[];const d=zd(n);if("default"===r)for(const[p,y]of n.views.entries())l=l.concat($q(y,t,i)),Gq(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(l=l.concat($q(p,t,i)),Gq(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!zd(n)&&s.push(new(function Rre(){return(0,O.hu)(SA,"Reference.ts has not been loaded"),SA}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,i);(function kre(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=p.removed;if(d=p.events,!r){const w=-1!==y.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(S,R)=>zd(R));if(w&&!D){const S=n.syncPointTree_.subtree(s);if(!S.isEmpty()){const R=function $re(n){return n.fold((e,t,i)=>{if(t&&zd(t))return[TA(t)];{let r=[];return t&&(r=Yq(t)),tr(i,(s,l)=>{r=r.concat(l)}),r}})}(S);for(let P=0;P<R.length;++P){const H=R[P],Y=H.query,Ce=nW(n,H);n.listenProvider_.startListening(tC(Y),eC(n,Y),Ce.hashFn,Ce.onComplete)}}}!D&&y.length>0&&!i&&(w?n.listenProvider_.stopListening(tC(e),null):y.forEach(S=>{const R=n.queryToTagMap.get(RA(S));n.listenProvider_.stopListening(tC(S),R)}))}!function zre(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=RA(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function Jq(n,e,t,i){const r=NL(n,i);if(null!=r){const s=FL(r),l=s.path,d=s.queryId,p=ls(l,e);return LL(n,l,new qp(CL(d),p,t))}return[]}function PL(n,e,t,i=!1){const r=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(r,(S,R)=>{const P=ls(S,r);s=s||$d(R,P),l=l||zd(R)});let p,d=n.syncPointTree_.get(r);d?(l=l||zd(d),s=s||$d(d,on())):(d=new Wq,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?p=!0:(p=!1,s=xt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((R,P)=>{const H=$d(P,on());H&&(s=s.updateImmediateChild(R,H))}));const y=Qq(d,e);if(!y&&!e._queryParams.loadsAllData()){const S=RA(e);(0,O.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const R=function qre(){return Lre++}();n.queryToTagMap.set(S,R),n.tagToQueryMap.set(R,S)}let D=function Ore(n,e,t,i,r,s){const l=Zq(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function Are(n,e){n.eventRegistrations_.push(e)}(l,t),function Mre(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Fn,(s,l)=>{i.push(uy(s,l))}),t.isFullyInitialized()&&i.push(Sq(t.getNode())),qq(n,i,t.getNode(),e)}(l,t)}(d,e,t,CA(n.pendingWriteTree_,r),s,p);if(!y&&!l&&!i){const S=Kq(d,e);D=D.concat(function Wre(n,e,t){const i=e._path,r=eC(n,e),s=nW(n,t),l=n.listenProvider_.startListening(tC(e),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,O.hu)(!zd(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,w,D)=>{if(!Ht(y)&&w&&zd(w))return[TA(w).query];{let S=[];return w&&(S=S.concat(Yq(w).map(R=>R.query))),tr(D,(R,P)=>{S=S.concat(P)}),S}});for(let y=0;y<p.length;++y){const w=p[y];n.listenProvider_.stopListening(tC(w),eC(n,w))}}return l}(n,e,S))}return D}function xA(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=$d(d,ls(l,e));if(y)return y});return Nq(r,e,s,t,!0)}function py(n,e){return eW(e,n.syncPointTree_,null,CA(n.pendingWriteTree_,on()))}function eW(n,e,t,i){if(Ht(n.path))return tW(n,e,t,i);{const r=e.get(on());null==t&&null!=r&&(t=$d(r,on()));let s=[];const l=Ut(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const y=t?t.getImmediateChild(l):null,w=Lq(i,l);s=s.concat(eW(d,p,y,w))}return r&&(s=s.concat(kL(r,n,i,t))),s}}function tW(n,e,t,i){const r=e.get(on());null==t&&null!=r&&(t=$d(r,on()));let s=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,y=Lq(i,l),w=n.operationForChild(l);w&&(s=s.concat(tW(w,d,p,y)))}),r&&(s=s.concat(kL(r,n,i,t))),s}function nW(n,e){const t=e.query,i=eC(n,t);return{hashFn:()=>(function Ire(n){return n.viewCache_.serverCache.getNode()}(e)||xt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Hre(n,e,t){const i=NL(n,t);if(i){const r=FL(i),s=r.path,l=r.queryId,d=ls(s,e);return LL(n,s,new Y0(CL(l),d))}return[]}(n,t._path,i):function Ure(n,e){return py(n,new Y0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Une(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return MA(n,t,null,s)}}}}function eC(n,e){const t=RA(e);return n.queryToTagMap.get(t)}function RA(n){return n._path.toString()+"$"+n._queryIdentifier}function NL(n,e){return n.tagToQueryMap.get(e)}function FL(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new pn(n.substr(0,e))}}function LL(n,e,t){const i=n.syncPointTree_.get(e);return(0,O.hu)(i,"Missing sync point for query tag that we're tracking"),kL(i,t,CA(n.pendingWriteTree_,e),null)}function tC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Fre(){return(0,O.hu)(AA,"Reference.ts has not been loaded"),AA}())(n._repo,n._path):n}class BL{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new BL(t)}node(){return this.node_}}class VL{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=qn(this.path_,e);return new VL(this.syncTree_,t)}node(){return xA(this.syncTree_,this.path_)}}const iW=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Yre(n[".sv"],e,t):"object"==typeof n[".sv"]?Kre(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Yre=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},Kre=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,O.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,O.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},rW=function(n,e,t,i){return HL(e,new VL(t,n),i)},UL=function(n,e,t){return HL(n,new BL(e),t)};function HL(n,e,t){const i=n.getPriority().val(),r=iW(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,d=iW(l.getValue(),e,t);return d!==l.getValue()||r!==l.getPriority().val()?new ay(d,Jn(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new ay(r))),l.forEachChild(Fn,(d,p)=>{const y=HL(p,e.getImmediateChild(d),t);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class jL{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function kA(n,e){let t=e instanceof pn?e:new pn(e),i=n,r=Ut(t);for(;null!==r;){const s=(0,O.DV)(i.node.children,r)||{children:{},childCount:0};i=new jL(r,i,s),t=Mn(t),r=Ut(t)}return i}function Yp(n){return n.node.value}function GL(n,e){n.node.value=e,$L(n)}function sW(n){return n.node.childCount>0}function OA(n,e){tr(n.node.children,(t,i)=>{e(new jL(t,n,i))})}function oW(n,e,t,i){t&&!i&&e(n),OA(n,r=>{oW(r,e,!0,i)}),t&&i&&e(n)}function nC(n){return new pn(null===n.parent?n.name:nC(n.parent)+"/"+n.name)}function $L(n){null!==n.parent&&function Jre(n,e,t){const i=function Qre(n){return void 0===Yp(n)&&!sW(n)}(t),r=(0,O.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,$L(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,$L(n))}(n.parent,n.name,n)}const ese=/[\[\].#$\/\u0000-\u001F\u007F]/,tse=/[\[\].#$\u0000-\u001F\u007F]/,zL=10485760,PA=function(n){return"string"==typeof n&&0!==n.length&&!ese.test(n)},aW=function(n){return"string"==typeof n&&0!==n.length&&!tse.test(n)},iC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!oA(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Gl=function(n,e,t,i){i&&void 0===e||rC((0,O.gK)(n,"value"),e,t)},rC=function(n,e,t){const i=t instanceof pn?new _ie(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+$p(i));if("function"==typeof e)throw new Error(n+"contains a function "+$p(i)+" with contents = "+e.toString());if(oA(e))throw new Error(n+"contains "+e.toString()+" "+$p(i));if("string"==typeof e&&e.length>zL/3&&(0,O.ug)(e)>zL)throw new Error(n+"contains a string greater than "+zL+" utf8 bytes "+$p(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(tr(e,(l,d)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!PA(l)))throw new Error(n+" contains an invalid key ("+l+") "+$p(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function yie(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),fq(n)})(i,l),rC(n,d,i),function vie(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+$p(i)+" in addition to actual children.")}},lW=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];tr(e,(l,d)=>{const p=new pn(l);if(rC(r,d,qn(t,p)),".priority"===oL(p)&&!iC(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=j0(i);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!PA(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(gie);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&zo(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},qL=function(n,e,t){if(!t||void 0!==e){if(oA(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!iC(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sC=function(n,e,t,i){if(!(i&&void 0===t||PA(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oC=function(n,e,t,i){if(!(i&&void 0===t||aW(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Wo=function(n,e){if(".info"===Ut(e))throw new Error(n+" failed = Can't modify data under /.info/")},cW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!PA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aW(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sse{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function NA(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!aL(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function uW(n,e,t){NA(n,t),dW(n,i=>aL(i,e))}function oo(n,e,t){NA(n,t),dW(n,i=>zo(i,e)||zo(e,i))}function dW(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(ose(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ose(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();jp&&er("event: "+t.toString()),sy(i)}}}const hW="repo_interrupt";class lse{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sse,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yA(),this.transactionQueueTree_=new jL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fW(n){const t=n.infoData_.getNode(new pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function aC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:fW(n)})}function pW(n,e,t,i,r){n.dataUpdateCount++;const s=new pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const p=(0,O.UI)(t,y=>Jn(y));l=function jre(n,e,t,i){const r=NL(n,i);if(r){const s=FL(r),l=s.path,d=s.queryId,p=ls(l,e),y=Ln.fromObject(t);return LL(n,l,new hy(CL(d),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Jn(t);l=Jq(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,O.UI)(t,y=>Jn(y));l=function Vre(n,e,t){const i=Ln.fromObject(t);return py(n,new hy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,p)}else{const p=Jn(t);l=J0(n.serverSyncTree_,s,p)}let d=s;l.length>0&&(d=gy(n,s)),oo(n.eventQueue_,d,l)}function mW(n,e){WL(n,"connected",e),!1===e&&function fse(n){my(n,"onDisconnectEvents");const e=aC(n),t=yA();vL(n.onDisconnect_,on(),(r,s)=>{const l=rW(r,s,n.serverSyncTree_,e);dy(t,r,l)});let i=[];vL(t,on(),(r,s)=>{i=i.concat(J0(n.serverSyncTree_,r,s));const l=QL(n,r);gy(n,l)}),n.onDisconnect_=yA(),oo(n.eventQueue_,on(),i)}(n)}function WL(n,e,t){const i=new pn("/.info/"+e),r=Jn(t);n.infoData_.updateSnapshot(i,r);const s=J0(n.infoSyncTree_,i,r);oo(n.eventQueue_,i,s)}function FA(n){return n.nextWriteId_++}function ZL(n,e,t,i,r){my(n,"set",{path:e.toString(),value:t,priority:i});const s=aC(n),l=Jn(t,i),d=xA(n.serverSyncTree_,e),p=UL(l,d,s),y=FA(n),w=OL(n.serverSyncTree_,e,p,y,!0);NA(n.eventQueue_,w),n.server_.put(e.toString(),l.val(!0),(S,R)=>{const P="ok"===S;P||Lr("set at "+e+" failed: "+S);const H=qd(n.serverSyncTree_,y,!P);oo(n.eventQueue_,e,H),Wd(0,r,S,R)});const D=QL(n,e);gy(n,D),oo(n.eventQueue_,D,[])}function pse(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&yL(n.onDisconnect_,e),Wd(0,t,i,r)})}function gW(n,e,t,i){const r=Jn(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,l)=>{"ok"===s&&dy(n.onDisconnect_,e,r),Wd(0,i,s,l)})}function YL(n,e,t){let i;i=".info"===Ut(e._path)?MA(n.infoSyncTree_,e,t):MA(n.serverSyncTree_,e,t),uW(n.eventQueue_,e._path,i)}function _W(n){n.persistentConnection_&&n.persistentConnection_.interrupt(hW)}function my(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),er(t,...e)}function Wd(n,e,t,i){e&&sy(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const l=new Error(s);l.code=r,e(l)}})}function KL(n,e,t){return xA(n.serverSyncTree_,e,t)||xt.EMPTY_NODE}function LA(n,e=n.transactionQueueTree_){if(e||BA(n,e),Yp(e)){const t=vW(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function bse(n,e,t){const i=t.map(y=>y.currentWriteId),r=KL(n,e,i);let s=r;const l=r.hash();for(let y=0;y<t.length;y++){const w=t[y];(0,O.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const D=ls(e,w.path);s=s.updateChild(D,w.currentOutputSnapshotRaw)}const d=s.val(!0),p=e;n.server_.put(p.toString(),d,y=>{my(n,"transaction put response",{path:p.toString(),status:y});let w=[];if("ok"===y){const D=[];for(let S=0;S<t.length;S++)t[S].status=2,w=w.concat(qd(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&D.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();BA(n,kA(n.transactionQueueTree_,e)),LA(n,n.transactionQueueTree_),oo(n.eventQueue_,e,w);for(let S=0;S<D.length;S++)sy(D[S])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Lr("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}gy(n,e)}},l)}(n,nC(e),t)}else sW(e)&&OA(e,t=>{LA(n,t)})}function gy(n,e){const t=yW(n,e),i=nC(t);return function wse(n,e,t){if(0===e.length)return;const i=[];let r=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=ls(t,p.path);let D,w=!1;if((0,O.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,D=p.abortReason,r=r.concat(qd(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)w=!0,D="maxretry",r=r.concat(qd(n.serverSyncTree_,p.currentWriteId,!0));else{const S=KL(n,p.path,l);p.currentInputSnapshot=S;const R=e[d].update(S.val());if(void 0!==R){rC("transaction failed: Data returned ",R,p.path);let P=Jn(R);"object"==typeof R&&null!=R&&(0,O.r3)(R,".priority")||(P=P.updatePriority(S.getPriority()));const Y=p.currentWriteId,Ce=aC(n),Pe=UL(P,S,Ce);p.currentOutputSnapshotRaw=P,p.currentOutputSnapshotResolved=Pe,p.currentWriteId=FA(n),l.splice(l.indexOf(Y),1),r=r.concat(OL(n.serverSyncTree_,p.path,Pe,p.currentWriteId,p.applyLocally)),r=r.concat(qd(n.serverSyncTree_,Y,!0))}else w=!0,D="nodata",r=r.concat(qd(n.serverSyncTree_,p.currentWriteId,!0))}oo(n.eventQueue_,t,r),r=[],w&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}BA(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)sy(i[d]);LA(n,n.transactionQueueTree_)}(n,vW(n,t),i),i}function yW(n,e){let t,i=n.transactionQueueTree_;for(t=Ut(e);null!==t&&void 0===Yp(i);)i=kA(i,t),t=Ut(e=Mn(e));return i}function vW(n,e){const t=[];return bW(n,e,t),t.sort((i,r)=>i.order-r.order),t}function bW(n,e,t){const i=Yp(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);OA(e,r=>{bW(n,r,t)})}function BA(n,e){const t=Yp(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,GL(e,t.length>0?t:void 0)}OA(e,i=>{BA(n,i)})}function QL(n,e){const t=nC(yW(n,e)),i=kA(n.transactionQueueTree_,e);return function Xre(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{XL(n,r)}),XL(n,i),oW(i,r=>{XL(n,r)}),t}function XL(n,e){const t=Yp(e);if(t){const i=[];let r=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(qd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?GL(e,void 0):t.length=s+1,oo(n.eventQueue_,nC(e),r);for(let l=0;l<i.length;l++)sy(i[l])}}const JL=function(n,e){const t=Dse(n),i=t.namespace;return"firebase.com"===t.domain&&Ul(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Ul("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Lr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new eL(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new pn(t.pathString)}},Dse=function(n){let e="",t="",i="",r="",s="",l=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(w,D)),w<D&&(r=function Cse(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(w,D)));const S=function Ese(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Lr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const R=e.slice(0,y);if("localhost"===R.toLowerCase())t="localhost";else if(R.split(".").length<=2)t=R;else{const P=e.indexOf(".");i=e.substring(0,P).toLowerCase(),t=e.substring(P+1),s=i}"ns"in S&&(s=S.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:l,scheme:d,pathString:r,namespace:s}};class wW{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class CW{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eB{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class EW{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return pse(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Wo("OnDisconnect.remove",this._path);const e=new O.BH;return gW(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Wo("OnDisconnect.set",this._path),Gl("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return gW(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Wo("OnDisconnect.setWithPriority",this._path),Gl("OnDisconnect.setWithPriority",e,this._path,!1),qL("OnDisconnect.setWithPriority",t,!1);const i=new O.BH;return function mse(n,e,t,i,r){const s=Jn(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,d)=>{"ok"===l&&dy(n.onDisconnect_,e,s),Wd(0,r,l,d)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Wo("OnDisconnect.update",this._path),lW("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function gse(n,e,t,i){if((0,O.xb)(t))return er("onDisconnect().update() called with empty data.  Don't do anything."),void Wd(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&tr(t,(l,d)=>{const p=Jn(d);dy(n.onDisconnect_,qn(e,l),p)}),Wd(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ms{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Ht(this._path)?null:oL(this._path)}get ref(){return new Zo(this._repo,this._path)}get _queryIdentifier(){const e=Aq(this._queryParams),t=QF(e);return"{}"===t?"default":t}get _queryObject(){return Aq(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof Ms))return!1;const t=this._repo===e._repo,i=aL(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function mie(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function VA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Zd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===jl){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==nu)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Hl)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Fn){if(null!=e&&!iC(e)||null!=t&&!iC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof hL||n.getIndex()===fL,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function UA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Zo extends Ms{constructor(e,t){super(e,t,new mA,!1)}get parent(){const e=hq(this._path);return null===e?null:new Zo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Kp{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new pn(e),i=Qp(this.ref,e);return new Kp(this._node.getChild(t),i,Fn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Kp(r,Qp(this.ref,i),Fn)))}hasChild(e){const t=new pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DW(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Qp(n._root,e):n._root}function IW(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=JL(e,n._repo.repoInfo_.nodeAdmin);cW("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Ul("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),DW(n,t.path.toString())}function Qp(n,e){return null===Ut((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),oC("child","path",t,!1)):oC("child","path",e,!1),new Zo(n._repo,qn(n._path,e));var t}function tB(n,e){n=(0,O.m9)(n),Wo("set",n._path),Gl("set",e,n._path,!1);const t=new O.BH;return ZL(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Mse(n,e){lW("update",e,n._path,!1);const t=new O.BH;return function hse(n,e,t,i){my(n,"update",{path:e.toString(),value:t});let r=!0;const s=aC(n),l={};if(tr(t,(d,p)=>{r=!1,l[d]=rW(qn(e,d),Jn(p),n.serverSyncTree_,s)}),r)er("update() called with empty data.  Don't do anything."),Wd(0,i,"ok",void 0);else{const d=FA(n),p=function Bre(n,e,t,i){!function tre(n,e,t,i){(0,O.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=DL(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Ln.fromObject(t);return py(n,new hy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,l,d);NA(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,w)=>{const D="ok"===y;D||Lr("update at "+e+" failed: "+y);const S=qd(n.serverSyncTree_,d,!D),R=S.length>0?gy(n,e):e;oo(n.eventQueue_,R,S),Wd(0,i,y,w)}),tr(t,y=>{const w=QL(n,qn(e,y));gy(n,w)}),oo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function xse(n){n=(0,O.m9)(n);const e=new eB(()=>{}),t=new lC(e);return function dse(n,e,t){const i=function Gre(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,w)=>{const D=ls(y,t);i=i||$d(w,D)});let r=n.syncPointTree_.get(t);r?i=i||$d(r,on()):(r=new Wq,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,l=s?new jd(i,!0,!1):null;return function Sre(n){return wA(n.viewCache_)}(Zq(r,e,CA(n.pendingWriteTree_,e._path),s?l.getNode():xt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Jn(r).withIndex(e._queryParams.getIndex());let l;if(PL(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=J0(n.serverSyncTree_,e._path,s);else{const d=eC(n.serverSyncTree_,e);l=Jq(n.serverSyncTree_,e._path,s,d)}return oo(n.eventQueue_,e._path,l),MA(n.serverSyncTree_,e,t,null,!0),s},r=>(my(n,"get for query "+(0,O.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Kp(i,new Zo(n._repo,n._path),n._queryParams.getIndex()))}class lC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new wW("value",this,new Kp(e.snapshotNode,new Zo(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CW(this,e,t):null}matches(e){return e instanceof lC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class HA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new CW(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const i=Qp(new Zo(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new wW(e.type,this,new Kp(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof HA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function cC(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=t,y=(w,D)=>{YL(n._repo,n,d),p(w,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new eB(t,s||void 0),d="value"===e?new lC(l):new HA(e,l);return function _se(n,e,t){let i;i=".info"===Ut(e._path)?PL(n.infoSyncTree_,e,t):PL(n.serverSyncTree_,e,t),uW(n.eventQueue_,e._path,i)}(n._repo,n,d),()=>YL(n._repo,n,d)}function nB(n,e,t,i){return cC(n,"value",e,t,i)}function SW(n,e,t,i){return cC(n,"child_added",e,t,i)}function TW(n,e,t,i){return cC(n,"child_changed",e,t,i)}function AW(n,e,t,i){return cC(n,"child_moved",e,t,i)}function MW(n,e,t,i){return cC(n,"child_removed",e,t,i)}function xW(n,e,t){let i=null;const r=t?new eB(t):null;"value"===e?i=new lC(r):e&&(i=new HA(e,r)),YL(n._repo,n,i)}class Ba{}class RW extends Ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("endAt",this._value,e._path,!0);const t=_L(e._queryParams,this._value,this._key);if(UA(t),Zd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ms(e._repo,e._path,t,e._orderByCalled)}}class kse extends Ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("endBefore",this._value,e._path,!1);const t=function jie(n,e,t){let i,r;return n.index_===jl?("string"==typeof e&&(e=Iq(e)),r=_L(n,e,t)):(i=null==t?nu:Iq(t),r=_L(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(UA(t),Zd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ms(e._repo,e._path,t,e._orderByCalled)}}class kW extends Ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("startAt",this._value,e._path,!0);const t=gL(e._queryParams,this._value,this._key);if(UA(t),Zd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ms(e._repo,e._path,t,e._orderByCalled)}}class Nse extends Ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("startAfter",this._value,e._path,!1);const t=function Hie(n,e,t){let i;if(n.index_===jl)"string"==typeof e&&(e=Dq(e)),i=gL(n,e,t);else{let r;r=null==t?Hl:Dq(t),i=gL(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(UA(t),Zd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ms(e._repo,e._path,t,e._orderByCalled)}}class Lse extends Ba{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ms(e._repo,e._path,function Vie(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Vse extends Ba{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ms(e._repo,e._path,function Uie(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Hse extends Ba{constructor(e){super(),this._path=e}_apply(e){VA(e,"orderByChild");const t=new pn(this._path);if(Ht(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new hL(t),r=gA(e._queryParams,i);return Zd(r),new Ms(e._repo,e._path,r,!0)}}class Gse extends Ba{_apply(e){VA(e,"orderByKey");const t=gA(e._queryParams,jl);return Zd(t),new Ms(e._repo,e._path,t,!0)}}class zse extends Ba{_apply(e){VA(e,"orderByPriority");const t=gA(e._queryParams,Fn);return Zd(t),new Ms(e._repo,e._path,t,!0)}}class Wse extends Ba{_apply(e){VA(e,"orderByValue");const t=gA(e._queryParams,fL);return Zd(t),new Ms(e._repo,e._path,t,!0)}}class Yse extends Ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Gl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new RW(this._value,this._key)._apply(new kW(this._value,this._key)._apply(e))}}function Va(n,...e){let t=(0,O.m9)(n);for(const i of e)t=i._apply(t);return t}(function xre(n){(0,O.hu)(!SA,"__referenceConstructor has already been defined"),SA=n})(Zo),function Nre(n){(0,O.hu)(!AA,"__referenceConstructor has already been defined"),AA=n}(Zo);const iB={};function PW(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Ul("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),er("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=JL(s,r),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,l=JL(s,r),d=l.repoInfo):p=!l.repoInfo.secure;const w=r&&p?new H0(H0.OWNER):new $ne(n.name,n.options,e);cW("Invalid Firebase Database URL",l),Ht(l.path)||Ul("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function eoe(n,e,t,i){let r=iB[e.name];r||(r={},iB[e.name]=r);let s=r[n.toURLString()];return s&&Ul("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new lse(n,false,t,i),r[n.toURLString()]=s,s}(d,n,w,new Gne(n.name,t));return new noe(D,n)}class noe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function cse(n,e,t){if(n.stats_=iL(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new _A(n.repoInfo_,(i,r,s,l)=>{pW(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mW(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new zp(n.repoInfo_,e,(i,r,s,l)=>{pW(n,i,r,s,l)},i=>{mW(n,i)},i=>{!function use(n,e){tr(e,(t,i)=>{WL(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Wne(n,e){const t=n.toString();return nL[t]||(nL[t]=e()),nL[t]}(n.repoInfo_,()=>new Zie(n.stats_,n.server_)),n.infoData_=new Gie,n.infoSyncTree_=new Xq({startListening:(i,r,s,l)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=J0(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),WL(n,"connected",!1),n.serverSyncTree_=new Xq({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(d,p)=>{const y=l(d,p);oo(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zo(this._repo,on())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Jse(n,e){const t=iB[e];(!t||t[n.key]!==n)&&Ul(`Database ${e}(${n.repoInfo_}) has already been deleted.`),_W(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ul("Cannot call "+e+" on a deleted database.")}}function NW(){eq.IS_TRANSPORT_INITIALIZED&&Lr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ioe(){NW(),Ud.forceDisallow()}function roe(){NW(),oy.forceDisallow(),Ud.forceAllow()}function aoe(n,e){Pz(n,e)}const coe={".sv":"timestamp"};class hoe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}zp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},zp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function loe(n){Mz(Zt.SDK_VERSION),(0,Zt._registerComponent)(new Wi.wA("database",(e,{instanceIdentifier:t})=>PW(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Zt.registerVersion)(Tz,Az,n),(0,Zt.registerVersion)(Tz,Az,"esm2017")}();const goe=new Es.Yd("@firebase/database-compat"),LW=function(n){goe.warn("FIREBASE WARNING: "+n)};class voe{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,LW("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class boe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Yd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),oC("DataSnapshot.child","path",e,!1),new Yd(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),oC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Yd(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new ao(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Er{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=Er.getCancelAndContextArgs_("Query.on",i,r),d=(y,w)=>{t.call(l.context,new Yd(this.database,y),w)};d.userCallback=t,d.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return nB(this._delegate,d,p),t;case"child_added":return SW(this._delegate,d,p),t;case"child_removed":return MW(this._delegate,d,p),t;case"child_changed":return TW(this._delegate,d,p),t;case"child_moved":return AW(this._delegate,d,p),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,xW(this._delegate,e,r)}else xW(this._delegate,e)}get(){return xse(this._delegate).then(e=>new Yd(this.database,e))}once(e,t,i,r){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const s=Er.getCancelAndContextArgs_("Query.once",i,r),l=new O.BH,d=(y,w)=>{const D=new Yd(this.database,y);t&&t.call(s.context,D,w),l.resolve(D)};d.userCallback=t,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":nB(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":SW(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":MW(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":TW(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":AW(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Er(this.database,Va(this._delegate,function Bse(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Lse(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Er(this.database,Va(this._delegate,function Use(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Vse(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Er(this.database,Va(this._delegate,function jse(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oC("orderByChild","path",n,!1),new Hse(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Er(this.database,Va(this._delegate,function $se(){return new Gse}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Er(this.database,Va(this._delegate,function qse(){return new zse}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Er(this.database,Va(this._delegate,function Zse(){return new Wse}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Er(this.database,Va(this._delegate,function Pse(n=null,e){return sC("startAt","key",e,!0),new kW(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Er(this.database,Va(this._delegate,function Fse(n,e){return sC("startAfter","key",e,!0),new Nse(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Er(this.database,Va(this._delegate,function Rse(n,e){return sC("endAt","key",e,!0),new RW(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Er(this.database,Va(this._delegate,function Ose(n,e){return sC("endBefore","key",e,!0),new kse(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Er(this.database,Va(this._delegate,function Kse(n,e){return sC("equalTo","key",e,!0),new Yse(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Er))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,O.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,O.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new ao(this.database,new Zo(this._delegate._repo,this._delegate._path))}}class ao extends Er{constructor(e,t){super(e,new Ms(t._repo,t._path,new mA,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ao(this.database,Qp(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ao(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new ao(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const i=tB(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,LW("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wo("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const i=Mse(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function Ase(n,e,t){if(Wo("setWithPriority",n._path),Gl("setWithPriority",e,n._path,!1),qL("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new O.BH;return ZL(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function Sse(n){return Wo("remove",n._path),tB(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function foe(n,e,t){var i;if(n=(0,O.m9)(n),Wo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,s=new O.BH,d=nB(n,()=>{});return function vse(n,e,t,i,r,s){my(n,"transaction on "+e);const l={path:e,update:t,onComplete:i,status:null,order:Rz(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=KL(n,e,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{rC("transaction failed: Data returned ",p,l.path),l.status=0;const y=kA(n.transactionQueueTree_,e),w=Yp(y)||[];let D;w.push(l),GL(y,w),"object"==typeof p&&null!==p&&(0,O.r3)(p,".priority")?(D=(0,O.DV)(p,".priority"),(0,O.hu)(iC(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(xA(n.serverSyncTree_,e)||xt.EMPTY_NODE).getPriority().val();const S=aC(n),R=Jn(p,D),P=UL(R,d,S);l.currentOutputSnapshotRaw=R,l.currentOutputSnapshotResolved=P,l.currentWriteId=FA(n);const H=OL(n.serverSyncTree_,e,P,l.currentWriteId,l.applyLocally);oo(n.eventQueue_,e,H),LA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,w)=>{let D=null;p?s.reject(p):(D=new Kp(w,new Zo(n._repo,n._path),Fn),s.resolve(new hoe(y,D)))},d,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new boe(s.committed,new Yd(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const i=function Tse(n,e){n=(0,O.m9)(n),Wo("setPriority",n._path),qL("setPriority",e,!1);const t=new O.BH;return ZL(n._repo,qn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const i=function Ise(n,e){n=(0,O.m9)(n),Wo("push",n._path),Gl("push",e,n._path,!0);const t=fW(n._repo),i=Nie(t),r=Qp(n,i),s=Qp(n,i);let l;return l=null!=e?tB(s,e).then(()=>s):Promise.resolve(s),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,e),r=i.then(l=>new ao(this.database,l));t&&r.then(()=>t(null),l=>t(l));const s=new ao(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Wo("Reference.onDisconnect",this._delegate._path),new voe(new EW(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ioe,forceLongPolling:roe}}useEmulator(e,t,i={}){!function FW(n,e,t,i={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ul("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Ul('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H0(H0.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,O.Sg)(i.mockUserToken,n.app.options.projectId);s=new H0(l)}!function Xse(n,e,t,i){n.repoInfo_=new eL(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof ao){const t=IW(this._delegate,e.toString());return new ao(this,t)}{const t=DW(this._delegate,e);return new ao(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const i=IW(this._delegate,e);return new ao(this,i)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function soe(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),_W(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function ooe(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function yse(n){n.persistentConnection_&&n.persistentConnection_.resume(hW)}(n._repo)}(this._delegate)}}uC.ServerValue={TIMESTAMP:function uoe(){return coe}(),increment:n=>function doe(n){return{".sv":{increment:n}}}(n)};var Coe=Object.freeze({__proto__:null,initStandalone:function woe({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){Mz(t);const l=new Wi.zt("auth-internal",new Wi.H0("database-standalone"));return l.setComponent(new Wi.wA("auth-internal",()=>i,"PRIVATE")),{instance:new uC(PW(n,l,void 0,e,s),n),namespace:r}}});const Eoe=uC.ServerValue;function BW(n){return null==n}function VW(n){return"function"==typeof n.set}function UW(n,e){return VW(e)?e:n.ref(e)}function HW(n,e){if(function Ioe(n){return"string"==typeof n}(n))return e.stringCase();if(VW(n))return e.firebaseCase();if(function Soe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function dC(n,e,t="on",i=Ac){return new cn.y(r=>{let s=null;return s=n[t](e,(l,d)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:d})}),"once"===t&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,lt.U)(r=>{const{snapshot:s,prevKey:l}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:l,key:d}}),(0,uk.B)())}function jW(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function Moe(n,e){const{payload:t,prevKey:i,key:r}=e,s=jW(n,r),l=function Aoe(n,e){if(BW(e))return 0;{const t=jW(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function GW(n){return(BW(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $W(n,e,t){return function Toe(n,e,t){return dC(n,"value","once",t).pipe(vn(i=>{const r=[Ye(i)];return e.forEach(s=>r.push(dC(n,s,"on",t))),(0,kr.T)(...r).pipe(Tr(Moe,[]))}),Qn())}(n,e=GW(e),t)}function zW(n,e,t){const i=(e=GW(e)).map(r=>dC(n,r,"on",t));return(0,kr.T)(...i)}function qW(n,e){return function(i,r){return HW(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Ooe(n){return function(t){return t?HW(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function WW(n,e){return function(){return dC(n,"value","on",e)}}!function Doe(n){n.INTERNAL.registerComponent(new Wi.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new uC(r,i)},"PUBLIC").setServiceProps({Reference:ao,Query:Er,Database:uC,DataSnapshot:Yd,enableLogging:aoe,INTERNAL:Coe,ServerValue:Eoe}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(UP.Z);const Foe=new u.OlP("angularfire2.realtimeDatabaseURL"),Loe=new u.OlP("angularfire2.database.use-emulator");let Boe=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,S,R,P,H,Y){this.schedulers=d;const Ce=p,Pe=(0,Zi.on)(t,l,i);y&&VP(Pe,l,w,S,R,P,D,H),this.database=(0,Zi.cc)(`${Pe.name}.database.${r}`,"AngularFireDatabase",Pe.name,()=>{const xe=l.runOutsideAngular(()=>Pe.database(r||void 0));return Ce&&xe.useEmulator(...Ce),xe},[Ce])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>UW(this.database,t));let s=r;return i&&(s=i(r)),function Poe(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:qW(i,"update"),set:qW(i,"set"),push:r=>i.push(r),remove:Ooe(i),snapshotChanges:r=>$W(n,r,t).pipe(yi),stateChanges:r=>zW(n,r,t).pipe(yi),auditTrail:r=>function xoe(n,e,t){return function koe(n,e,t){return function Roe(n,e){return dC(n,"value","on",e).pipe((0,lt.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function Rne(...n){const e=(0,el.jO)(n);return(0,Rn.e)((t,i)=>{const r=n.length,s=new Array(r);let l=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,$r.Xf)(n[p]).subscribe((0,sn.x)(i,y=>{s[p]=y,!d&&!l[p]&&(l[p]=!0,(d=l.every(Sr.y))&&(l=null))},cb.Z));t.subscribe((0,sn.x)(i,p=>{if(d){const y=[p,...s];i.next(e?e(...y):y)}}))})}(e),(0,lt.U)(([r,s])=>{const l=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function kne(n){return(0,Rn.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,sn.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,lt.U)(r=>r.actions))}(n,zW(n,e).pipe(Tr((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(yi),valueChanges:(r,s)=>$W(n,r,t).pipe((0,lt.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),yi)}}(s,this)}object(t){return function Noe(n,e){return{query:n,snapshotChanges:()=>WW(n,e.schedulers.outsideAngular)().pipe(yi),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>WW(n,e.schedulers.outsideAngular)().pipe(yi,(0,lt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>UW(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zi.Dh),u.LFG(Zi.xv,8),u.LFG(Foe,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(SS),u.LFG(Loe,8),u.LFG(NS,8),u.LFG(OP,8),u.LFG(PP,8),u.LFG(NP,8),u.LFG(FP,8),u.LFG(LP,8),u.LFG(BP,8),u.LFG(Tw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Voe=(()=>{class n{constructor(){PS.Z.registerVersion("angularfire",IS.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Boe]}),n})();function Uoe(n,e){}class rB{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Hoe={dialogContainer:Cl("dialogContainer",[eo("void, exit",li({opacity:0,transform:"scale(0.7)"})),eo("enter",li({transform:"none"})),Kr("* => enter",bb([Js("150ms cubic-bezier(0, 0, 0.2, 1)",li({transform:"none",opacity:1})),El("@*",Cb(),{optional:!0})])),Kr("* => void, * => exit",bb([Js("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",li({opacity:0})),El("@*",Cb(),{optional:!0})]))])};let joe=(()=>{class n extends KI{constructor(t,i,r,s,l,d,p,y){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=l,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=y,this._animationStateChanged=new u.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=w=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(w)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=wg())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=wg(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=wg();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(gb),u.Y36(u.sBO),u.Y36(le,8),u.Y36(rB),u.Y36(eD),u.Y36(u.R0b),u.Y36(kg))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,i){if(1&t&&u.Gf(rk,7),2&t){let r;u.iGM(r=u.CRH())&&(i._portalOutlet=r.first)}},features:[u.qOj]}),n})(),Goe=(()=>{class n extends joe{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&u.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(u.Ikx("id",i._id),u.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),u.d8E("@dialogContainer",i._state))},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&u.YNc(0,Uoe,0,0,"ng-template",0)},directives:[rk],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Hoe.dialogContainer]}}),n})(),$oe=0;class zoe{constructor(e,t,i="mat-dialog-"+$oe++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Mt.x,this._afterClosed=new Mt.x,this._beforeClosed=new Mt.x,this._state=0,t._id=i,t._animationStateChanged.pipe(kn(r=>"opened"===r.state),Yn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(kn(r=>"closed"===r.state),Yn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(kn(r=>27===r.keyCode&&!this.disableClose&&!Ig(r))).subscribe(r=>{r.preventDefault(),ZW(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():ZW(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(kn(t=>"closing"===t.state),Yn(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function ZW(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const qoe=new u.OlP("MatDialogData"),Woe=new u.OlP("mat-dialog-default-options"),YW=new u.OlP("mat-dialog-scroll-strategy"),Yoe={provide:YW,deps:[ip],useFactory:function Zoe(n){return()=>n.scrollStrategies.block()}};let Koe=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=l,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=w,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Mt.x,this._afterOpenedAtThisLevel=new Mt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=da(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(pi(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function Xoe(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new rB),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),l=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),s._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new ok({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=u.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:rB,useValue:i}]}),l=new gw(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){const l=new this._dialogRefConstructor(r,i,s.id);if(t instanceof u.Rgc)i.attachTemplatePortal(new YI(t,null,{$implicit:s.data,dialogRef:l}));else{const d=this._createInjector(s,l,i),p=i.attachComponentPortal(new gw(t,s.viewContainerRef,d,s.componentFactoryResolver));l.componentInstance=p.instance}return l.updateSize(s.width,s.height).updatePosition(s.position),l}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(rd,null,u.XFs.Optional))&&l.push({provide:rd,useValue:{value:t.direction,change:Ye()}}),u.zs3.create({parent:s||this._injector,providers:l})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n}),n})(),Qoe=(()=>{class n extends Koe{constructor(t,i,r,s,l,d,p,y){super(t,i,s,d,p,l,zoe,Goe,qoe,y)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ip),u.LFG(u.zs3),u.LFG(ae,8),u.LFG(Woe,8),u.LFG(YW),u.LFG(n,12),u.LFG(ak),u.LFG(Fc,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Joe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Qoe,Yoe],imports:[[lk,QI,An],An]}),n})();const rae={provide:new u.OlP("mat-select-scroll-strategy"),deps:[ip],useFactory:function iae(n){return()=>n.scrollStrategies.reposition()}};let sae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[rae],imports:[[ia,lk,ew,An],Ml,lS,ew,An]}),n})(),oae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[N8]}),n.\u0275inj=u.cJS({providers:[Xf,Jf],imports:[[aa,sae,P8,N4,pI,aa,LI,yg,l8,VI,Joe,C4,lS,BV,L8,u4,C7,d9,mZ,Voe,xne,yg,_M],yg]}),n})();(0,u.G48)(),uh().bootstrapModule(oae).catch(n=>console.error(n))},127:(Ke,me,F)=>{"use strict";F.d(me,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(Ke,me,F)=>{"use strict";F.r(me);var u=F(5861),te=F(3942),B=F(2090),he=F(9681),we=F(1877),be=F(655),le=F(4859);const Le=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ee=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new we.Yd("@firebase/auth");function et(v,...m){We.logLevel<=we.in.ERROR&&We.error(`Auth (${he.SDK_VERSION}): ${v}`,...m)}function Ie(v,...m){throw Ge(v,...m)}function ae(v,...m){return Ge(v,...m)}function pe(v,m,g){const C=Object.assign(Object.assign({},Fe()),{[m]:g});return new B.LL("auth","Firebase",C).create(m,{appName:v.name})}function Ne(v,m,g){if(!(m instanceof g))throw g.name!==m.constructor.name&&Ie(v,"argument-error"),pe(v,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...m){if("string"!=typeof v){const g=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(g,...C)}return ee.create(v,...m)}function j(v,m,...g){if(!v)throw Ge(m,...g)}function fe(v){const m="INTERNAL ASSERTION FAILED: "+v;throw et(m),new Error(m)}function W(v,m){v||fe(m)}const J=new Map;function Q(v){W(v instanceof Function,"Expected a class definition");let m=J.get(v);return m?(W(m instanceof v,"Instance stored in cache mismatched with class"),m):(m=new v,J.set(v,m),m)}function ke(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function st(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class tn{constructor(m,g){this.shortDelay=m,this.longDelay=g,W(g>m,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Nt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wn(v,m){W(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return m?`${g}${m.startsWith("/")?m.slice(1):m}`:g}class En{static initialize(m,g,C){this.fetchImpl=m,g&&(this.headersImpl=g),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Hi=new tn(3e4,6e4);function Gt(v,m){return v.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:v.tenantId}):m}function Lt(v,m,g,C){return ir.apply(this,arguments)}function ir(){return(ir=(0,u.Z)(function*(v,m,g,C,T={}){return su(v,T,(0,u.Z)(function*(){let k={},z={};C&&("GET"===m?z=C:k={body:JSON.stringify(C)});const re=(0,B.xO)(Object.assign({key:v.config.apiKey},z)).slice(1),Me=yield v._getAdditionalHeaders();return Me["Content-Type"]="application/json",v.languageCode&&(Me["X-Firebase-Locale"]=v.languageCode),En.fetch()(xs(v,v.config.apiHost,g,re),Object.assign({method:m,headers:Me,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function su(v,m,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(v,m,g){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},nn),m);try{const T=new Yo(v),k=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const z=yield k.json();if("needConfirmation"in z)throw Rs(v,"account-exists-with-different-credential",z);if(k.ok&&!("errorMessage"in z))return z;{const re=k.ok?z.errorMessage:z.error.message,[Me,ze]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw Rs(v,"credential-already-in-use",z);if("EMAIL_EXISTS"===Me)throw Rs(v,"email-already-in-use",z);if("USER_DISABLED"===Me)throw Rs(v,"user-disabled",z);const ft=C[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(ze)throw pe(v,ft,ze);Ie(v,ft)}}catch(T){if(T instanceof B.ZR)throw T;Ie(v,"network-request-failed")}})).apply(this,arguments)}function sr(v,m,g,C){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(v,m,g,C,T={}){const k=yield Lt(v,m,g,C,T);return"mfaPendingCredential"in k&&Ie(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function xs(v,m,g,C){const T=`${m}${g}?${C}`;return v.config.emulator?Wn(v.config,T):`${v.config.apiScheme}://${T}`}class Yo{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((g,C)=>{this.timer=setTimeout(()=>C(ae(this.auth,"network-request-failed")),Hi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rs(v,m,g){const C={appName:v.name};g.email&&(C.email=g.email),g.phoneNumber&&(C.phoneNumber=g.phoneNumber);const T=ae(v,m,C);return T.customData._tokenResponse=g,T}function Br(){return(Br=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Un(v,m){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ua(v,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ci(v){if(v)try{const m=new Date(Number(v));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Ko(){return(Ko=(0,u.Z)(function*(v,m=!1){const g=(0,B.m9)(v),C=yield g.getIdToken(m),T=nt(C);j(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const k="object"==typeof T.firebase?T.firebase:void 0,z=null==k?void 0:k.sign_in_provider;return{claims:T,token:C,authTime:Ci(Yt(T.auth_time)),issuedAtTime:Ci(Yt(T.iat)),expirationTime:Ci(Yt(T.exp)),signInProvider:z||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Yt(v){return 1e3*Number(v)}function nt(v){var m;const[g,C,T]=v.split(".");if(void 0===g||void 0===C||void 0===T)return et("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,B.tV)(C);return k?JSON.parse(k):(et("Failed to decode base64 JWT payload"),null)}catch(k){return et("Caught error parsing JWT payload as JSON",null===(m=k)||void 0===m?void 0:m.toString()),null}}function Mi(v,m){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(v,m,g=!1){if(g)return m;try{return yield m}catch(C){throw C instanceof B.ZR&&qt(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function qt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Qo{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var g;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(m=!1){var g=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),C)}iteration(){var m=this;return(0,u.Z)(function*(){var g;try{yield m.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(g=C)||void 0===g?void 0:g.code)&&m.schedule(!0))}m.schedule()})()}}class xi{constructor(m,g){this.createdAt=m,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ci(this.lastLoginAt),this.creationTime=Ci(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ri(v){return ht.apply(this,arguments)}function ht(){return(ht=(0,u.Z)(function*(v){var m;const g=v.auth,C=yield v.getIdToken(),T=yield Mi(v,Ua(g,{idToken:C}));j(null==T?void 0:T.users.length,g,"internal-error");const k=T.users[0];v._notifyReloadListener(k);const z=(null===(m=k.providerUserInfo)||void 0===m?void 0:m.length)?qe(k.providerUserInfo):[],re=Jo(v.providerData,z),ft=!!v.isAnonymous&&!(v.email&&k.passwordHash||(null==re?void 0:re.length)),ct={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:re,metadata:new xi(k.createdAt,k.lastLoginAt),isAnonymous:ft};Object.assign(v,ct)})).apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(function*(v){const m=(0,B.m9)(v);yield Ri(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Jo(v,m){return[...v.filter(C=>!m.some(T=>T.providerId===C.providerId)),...m]}function qe(v){return v.map(m=>{var{providerId:g}=m,C=(0,be._T)(m,["providerId"]);return{providerId:g,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function $e(){return($e=(0,u.Z)(function*(v,m){const g=yield su(v,{},(0,u.Z)(function*(){const C=(0,B.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:T,apiKey:k}=v.config,z=xs(v,T,"/v1/token",`key=${k}`),re=yield v._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",En.fetch()(z,{method:"POST",headers:re,body:C})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){j(m.idToken,"internal-error"),j(void 0!==m.idToken,"internal-error"),j(void 0!==m.refreshToken,"internal-error");const g="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function _t(v){const m=nt(v);return j(m,"internal-error"),j(void 0!==m.exp,"internal-error"),j(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,g)}getToken(m,g=!1){var C=this;return(0,u.Z)(function*(){return j(!C.accessToken||C.refreshToken,m,"user-token-expired"),g||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,g){var C=this;return(0,u.Z)(function*(){const{accessToken:T,refreshToken:k,expiresIn:z}=yield function ge(v,m){return $e.apply(this,arguments)}(m,g);C.updateTokensAndExpiration(T,k,Number(z))})()}updateTokensAndExpiration(m,g,C){this.refreshToken=g||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,g){const{refreshToken:C,accessToken:T,expirationTime:k}=g,z=new vt;return C&&(j("string"==typeof C,"internal-error",{appName:m}),z.refreshToken=C),T&&(j("string"==typeof T,"internal-error",{appName:m}),z.accessToken=T),k&&(j("number"==typeof k,"internal-error",{appName:m}),z.expirationTime=k),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return fe("not implemented")}}function yt(v,m){j("string"==typeof v||void 0===v,"internal-error",{appName:m})}class Ft{constructor(m){var{uid:g,auth:C,stsTokenManager:T}=m,k=(0,be._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=C,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new xi(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(m){var g=this;return(0,u.Z)(function*(){const C=yield Mi(g,g.stsTokenManager.getToken(g.auth,m));return j(C,g.auth,"internal-error"),g.accessToken!==C&&(g.accessToken=C,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),C})()}getIdTokenResult(m){return function ds(v){return Ko.apply(this,arguments)}(this,m)}reload(){return function Xo(v){return Bt.apply(this,arguments)}(this)}_assign(m){this!==m&&(j(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(g=>Object.assign({},g)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Ft(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,g=!1){var C=this;return(0,u.Z)(function*(){let T=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),T=!0),g&&(yield Ri(C)),yield C.auth._persistUserIfCurrent(C),T&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,u.Z)(function*(){const g=yield m.getIdToken();return yield Mi(m,function gt(v,m){return Br.apply(this,arguments)}(m.auth,{idToken:g})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,g){var C,T,k,z,re,Me,ze,ft;const ct=null!==(C=g.displayName)&&void 0!==C?C:void 0,wn=null!==(T=g.email)&&void 0!==T?T:void 0,ur=null!==(k=g.phoneNumber)&&void 0!==k?k:void 0,gl=null!==(z=g.photoURL)&&void 0!==z?z:void 0,Wm=null!==(re=g.tenantId)&&void 0!==re?re:void 0,wc=null!==(Me=g._redirectEventId)&&void 0!==Me?Me:void 0,ai=null!==(ze=g.createdAt)&&void 0!==ze?ze:void 0,Zm=null!==(ft=g.lastLoginAt)&&void 0!==ft?ft:void 0,{uid:qu,emailVerified:Po,isAnonymous:Wu,providerData:No,stsTokenManager:Da}=g;j(qu&&Da,m,"internal-error");const Kh=vt.fromJSON(this.name,Da);j("string"==typeof qu,m,"internal-error"),yt(ct,m.name),yt(wn,m.name),j("boolean"==typeof Po,m,"internal-error"),j("boolean"==typeof Wu,m,"internal-error"),yt(ur,m.name),yt(gl,m.name),yt(Wm,m.name),yt(wc,m.name),yt(ai,m.name),yt(Zm,m.name);const Cc=new Ft({uid:qu,auth:m,email:wn,emailVerified:Po,displayName:ct,isAnonymous:Wu,photoURL:gl,phoneNumber:ur,tenantId:Wm,stsTokenManager:Kh,createdAt:ai,lastLoginAt:Zm});return No&&Array.isArray(No)&&(Cc.providerData=No.map(Qh=>Object.assign({},Qh))),wc&&(Cc._redirectEventId=wc),Cc}static _fromIdTokenResponse(m,g,C=!1){return(0,u.Z)(function*(){const T=new vt;T.updateFromServerResponse(g);const k=new Ft({uid:g.localId,auth:m,stsTokenManager:T,isAnonymous:C});return yield Ri(k),k})()}}const L=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,C){var T=this;return(0,u.Z)(function*(){T.storage[g]=C})()}_get(g){var C=this;return(0,u.Z)(function*(){const T=C.storage[g];return void 0===T?null:T})()}_remove(g){var C=this;return(0,u.Z)(function*(){delete C.storage[g]})()}_addListener(g,C){}_removeListener(g,C){}}return v.type="NONE",v})();function q(v,m,g){return`firebase:${v}:${m}:${g}`}class de{constructor(m,g,C){this.persistence=m,this.auth=g,this.userKey=C;const{config:T,name:k}=this.auth;this.fullUserKey=q(this.userKey,T.apiKey,k),this.fullPersistenceKey=q("persistence",T.apiKey,k),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const g=yield m.persistence._get(m.fullUserKey);return g?Ft._fromJSON(m.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var g=this;return(0,u.Z)(function*(){if(g.persistence===m)return;const C=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=m,C?g.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,g,C="authUser"){return(0,u.Z)(function*(){if(!g.length)return new de(Q(L),m,C);const T=(yield Promise.all(g.map(function(){var ze=(0,u.Z)(function*(ft){if(yield ft._isAvailable())return ft});return function(ft){return ze.apply(this,arguments)}}()))).filter(ze=>ze);let k=T[0]||Q(L);const z=q(C,m.config.apiKey,m.name);let re=null;for(const ze of g)try{const ft=yield ze._get(z);if(ft){const ct=Ft._fromJSON(m,ft);ze!==k&&(re=ct),k=ze;break}}catch(ft){}const Me=T.filter(ze=>ze._shouldAllowMigration);return k._shouldAllowMigration&&Me.length?(k=Me[0],re&&(yield k._set(z,re.toJSON())),yield Promise.all(g.map(function(){var ze=(0,u.Z)(function*(ft){if(ft!==k)try{yield ft._remove(z)}catch(ct){}});return function(ft){return ze.apply(this,arguments)}}())),new de(k,m,C)):new de(k,m,C)})()}}function ne(v){const m=v.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Xt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Je(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(ni(m))return"Blackberry";if(Ct(m))return"Webos";if(It(m))return"Safari";if((m.includes("chrome/")||mn(m))&&!m.includes("edge/"))return"Chrome";if(dn(m))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Je(v=(0,B.z$)()){return/firefox\//i.test(v)}function It(v=(0,B.z$)()){const m=v.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function mn(v=(0,B.z$)()){return/crios\//i.test(v)}function Xt(v=(0,B.z$)()){return/iemobile/i.test(v)}function dn(v=(0,B.z$)()){return/android/i.test(v)}function ni(v=(0,B.z$)()){return/blackberry/i.test(v)}function Ct(v=(0,B.z$)()){return/webos/i.test(v)}function Dn(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ks(v=(0,B.z$)()){return Dn(v)||dn(v)||Ct(v)||ni(v)||/windows phone/i.test(v)||Xt(v)}function ou(v,m=[]){let g;switch(v){case"Browser":g=ne((0,B.z$)());break;case"Worker":g=`${ne((0,B.z$)())}-${v}`;break;default:g=v}const C=m.length?m.join(","):"FirebaseCore-web";return`${g}/JsCore/${he.SDK_VERSION}/${C}`}class Dr{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,g){const C=k=>new Promise((z,re)=>{try{z(m(k))}catch(Me){re(Me)}});C.onAbort=g,this.queue.push(C);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(m){var g=this;return(0,u.Z)(function*(){var C;if(g.auth.currentUser===m)return;const T=[];try{for(const k of g.queue)yield k(m),k.onAbort&&T.push(k.onAbort)}catch(k){T.reverse();for(const z of T)try{z()}catch(re){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=k)||void 0===C?void 0:C.message})}})()}}class He{constructor(m,g,C){this.app=m,this.heartbeatServiceProvider=g,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new an(this),this.idTokenSubscription=new an(this),this.beforeStateQueue=new Dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ee,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,g){var C=this;return g&&(this._popupRedirectResolver=Q(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var T,k;if(!C._deleted&&(C.persistenceManager=yield de.create(C,m),!C._deleted)){if(null===(T=C._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(z){}yield C.initializeCurrentUser(g),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const g=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||g){if(m.currentUser&&g&&m.currentUser.uid===g.uid)return m._currentUser._assign(g),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(g,!0)}})()}initializeCurrentUser(m){var g=this;return(0,u.Z)(function*(){var C;const T=yield g.assertedPersistence.getCurrentUser();let k=T,z=!1;if(m&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const re=null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId,Me=null==k?void 0:k._redirectEventId,ze=yield g.tryRedirectSignIn(m);(!re||re===Me)&&(null==ze?void 0:ze.user)&&(k=ze.user,z=!0)}if(!k)return g.directlySetCurrentUser(null);if(!k._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(k)}catch(re){k=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(re))}return k?g.reloadAndSetCurrentUserOrClear(k):g.directlySetCurrentUser(null)}return j(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===k._redirectEventId?g.directlySetCurrentUser(k):g.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(m){var g=this;return(0,u.Z)(function*(){let C=null;try{C=yield g._popupRedirectResolver._completeRedirectFn(g,m,!0)}catch(T){yield g._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var g=this;return(0,u.Z)(function*(){var C;try{yield Ri(m)}catch(T){if("auth/network-request-failed"!==(null===(C=T)||void 0===C?void 0:C.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Ze(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var g=this;return(0,u.Z)(function*(){const C=m?(0,B.m9)(m):null;return C&&j(C.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(C&&C._clone(g))})()}_updateCurrentUser(m,g=!1){var C=this;return(0,u.Z)(function*(){if(!C._deleted)return m&&j(C.tenantId===m.tenantId,C,"tenant-id-mismatch"),g||(yield C.beforeStateQueue.runMiddleware(m)),C.queue((0,u.Z)(function*(){yield C.directlySetCurrentUser(m),C.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(Q(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new B.LL("auth","Firebase",m())}onAuthStateChanged(m,g,C){return this.registerStateListener(this.authStateSubscription,m,g,C)}beforeAuthStateChanged(m,g){return this.beforeStateQueue.pushCallback(m,g)}onIdTokenChanged(m,g,C){return this.registerStateListener(this.idTokenSubscription,m,g,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,g){var C=this;return(0,u.Z)(function*(){const T=yield C.getOrInitRedirectPersistenceManager(g);return null===m?T.removeCurrentUser():T.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const C=m&&Q(m)||g._popupRedirectResolver;j(C,g,"argument-error"),g.redirectPersistenceManager=yield de.create(g,[Q(C._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(m){var g=this;return(0,u.Z)(function*(){var C,T;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(C=g._currentUser)||void 0===C?void 0:C._redirectEventId)===m?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===m?g.redirectUser:null})()}_persistUserIfCurrent(m){var g=this;return(0,u.Z)(function*(){if(m===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(g=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,g,C,T){if(this._deleted)return()=>{};const k="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(z,this,"internal-error"),z.then(()=>k(this.currentUser)),"function"==typeof g?m.addObserver(g,C,T):m.addObserver(g)}directlySetCurrentUser(m){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==m&&g._currentUser._stopProactiveRefresh(),m&&g.isProactiveRefreshEnabled&&m._startProactiveRefresh(),g.currentUser=m,m?yield g.assertedPersistence.setCurrentUser(m):yield g.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=ou(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var g;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const T=yield null===(g=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(C["X-Firebase-Client"]=T),C})()}}function at(v){return(0,B.m9)(v)}class an{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,B.ne)(g=>this.observer=g)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ho(v){const m=v.indexOf(":");return m<0?"":v.substr(0,m+1)}function hs(v){if(!v)return null;const m=Number(v);return isNaN(m)?null:m}class Vr{constructor(m,g){this.providerId=m,this.signInMethod=g}toJSON(){return fe("not implemented")}_getIdTokenResponse(m){return fe("not implemented")}_linkToIdToken(m,g){return fe("not implemented")}_getReauthenticationResolver(m){return fe("not implemented")}}function ta(v,m){return St.apply(this,arguments)}function St(){return(St=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:resetPassword",Gt(v,m))})).apply(this,arguments)}function Ga(v,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Xd(v,m){return fo.apply(this,arguments)}function fo(){return(fo=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:update",Gt(v,m))})).apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signInWithPassword",Gt(v,m))})).apply(this,arguments)}function mo(v,m){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:sendOobCode",Gt(v,m))})).apply(this,arguments)}function hn(v,m){return au.apply(this,arguments)}function au(){return(au=(0,u.Z)(function*(v,m){return mo(v,m)})).apply(this,arguments)}function Jd(v,m){return ki.apply(this,arguments)}function ki(){return(ki=(0,u.Z)(function*(v,m){return mo(v,m)})).apply(this,arguments)}function Ir(v,m){return zl.apply(this,arguments)}function zl(){return(zl=(0,u.Z)(function*(v,m){return mo(v,m)})).apply(this,arguments)}function eh(v,m){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(v,m){return mo(v,m)})).apply(this,arguments)}function th(){return(th=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,m))})).apply(this,arguments)}function tm(){return(tm=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,m))})).apply(this,arguments)}class Oi extends Vr{constructor(m,g,C,T=null){super("password",C),this._email=m,this._password=g,this._tenantId=T}static _fromEmailAndPassword(m,g){return new Oi(m,g,"password")}static _fromEmailAndCode(m,g,C=null){return new Oi(m,g,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const g="string"==typeof m?JSON.parse(m):m;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(m){var g=this;return(0,u.Z)(function*(){switch(g.signInMethod){case"password":return function Gi(v,m){return po.apply(this,arguments)}(m,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ur(v,m){return th.apply(this,arguments)}(m,{email:g._email,oobCode:g._password});default:Ie(m,"internal-error")}})()}_linkToIdToken(m,g){var C=this;return(0,u.Z)(function*(){switch(C.signInMethod){case"password":return Ga(m,{idToken:g,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function fC(v,m){return tm.apply(this,arguments)}(m,{idToken:g,email:C._email,oobCode:C._password});default:Ie(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function go(v,m){return nm.apply(this,arguments)}function nm(){return(nm=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signInWithIdp",Gt(v,m))})).apply(this,arguments)}class Ps extends Vr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const g=new Ps(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(g.idToken=m.idToken),m.accessToken&&(g.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(g.nonce=m.nonce),m.pendingToken&&(g.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(g.accessToken=m.oauthToken,g.secret=m.oauthTokenSecret):Ie("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const g="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:T}=g,k=(0,be._T)(g,["providerId","signInMethod"]);if(!C||!T)return null;const z=new Ps(C,T);return z.idToken=k.idToken||void 0,z.accessToken=k.accessToken||void 0,z.secret=k.secret,z.nonce=k.nonce,z.pendingToken=k.pendingToken||null,z}_getIdTokenResponse(m){return go(m,this.buildRequest())}_linkToIdToken(m,g){const C=this.buildRequest();return C.idToken=g,go(m,C)}_getReauthenticationResolver(m){const g=this.buildRequest();return g.autoCreate=!1,go(m,g)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),m.postBody=(0,B.xO)(g)}return m}}function mC(v,m){return im.apply(this,arguments)}function im(){return(im=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:sendVerificationCode",Gt(v,m))})).apply(this,arguments)}function rm(){return(rm=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,m))})).apply(this,arguments)}function sm(){return(sm=(0,u.Z)(function*(v,m){const g=yield sr(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,m));if(g.temporaryProof)throw Rs(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const yC={USER_NOT_FOUND:"user-not-found"};function om(){return(om=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,Object.assign(Object.assign({},m),{operation:"REAUTH"})),yC)})).apply(this,arguments)}class $a extends Vr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,g){return new $a({verificationId:m,verificationCode:g})}static _fromTokenResponse(m,g){return new $a({phoneNumber:m,temporaryProof:g})}_getIdTokenResponse(m){return function gC(v,m){return rm.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,g){return function _C(v,m){return sm.apply(this,arguments)}(m,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function vC(v,m){return om.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:g,verificationId:C,verificationCode:T}=this.params;return m&&g?{temporaryProof:m,phoneNumber:g}:{sessionInfo:C,code:T}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:g,verificationCode:C,phoneNumber:T,temporaryProof:k}=m;return C||g||T||k?new $a({verificationId:g,verificationCode:C,phoneNumber:T,temporaryProof:k}):null}}class lu{constructor(m){var g,C,T,k,z,re;const Me=(0,B.zd)((0,B.pd)(m)),ze=null!==(g=Me.apiKey)&&void 0!==g?g:null,ft=null!==(C=Me.oobCode)&&void 0!==C?C:null,ct=function am(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Me.mode)&&void 0!==T?T:null);j(ze&&ft&&ct,"argument-error"),this.apiKey=ze,this.operation=ct,this.code=ft,this.continueUrl=null!==(k=Me.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(z=Me.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(re=Me.tenantId)&&void 0!==re?re:null}static parseLink(m){const g=function nh(v){const m=(0,B.zd)((0,B.pd)(v)).link,g=m?(0,B.zd)((0,B.pd)(m)).deep_link_id:null,C=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(C?(0,B.zd)((0,B.pd)(C)).link:null)||C||g||m||v}(m);try{return new lu(g)}catch(C){return null}}}let lm=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,C){return Oi._fromEmailAndPassword(g,C)}static credentialWithLink(g,C){const T=lu.parseLink(C);return j(T,"argument-error"),Oi._fromEmailAndCode(g,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Pi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class za extends Pi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class fs extends za{static credentialFromJSON(m){const g="string"==typeof m?JSON.parse(m):m;return j("providerId"in g&&"signInMethod"in g,"argument-error"),Ps._fromParams(g)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return j(m.idToken||m.accessToken,"argument-error"),Ps._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return fs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return fs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:g,oauthAccessToken:C,oauthTokenSecret:T,pendingToken:k,nonce:z,providerId:re}=m;if(!C&&!T&&!g&&!k||!re)return null;try{return new fs(re)._credential({idToken:g,accessToken:C,nonce:z,pendingToken:k})}catch(Me){return null}}}let ql=(()=>{class v extends za{constructor(){super("facebook.com")}static credential(g){return Ps._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(C){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),cm=(()=>{class v extends za{constructor(){super("google.com"),this.addScope("profile")}static credential(g,C){return Ps._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:T}=g;if(!C&&!T)return null;try{return v.credential(C,T)}catch(k){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),_y=(()=>{class v extends za{constructor(){super("github.com")}static credential(g){return Ps._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(C){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class _o extends Vr{constructor(m,g){super(m,m),this.pendingToken=g}_getIdTokenResponse(m){return go(m,this.buildRequest())}_linkToIdToken(m,g){const C=this.buildRequest();return C.idToken=g,go(m,C)}_getReauthenticationResolver(m){const g=this.buildRequest();return g.autoCreate=!1,go(m,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const g="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:T,pendingToken:k}=g;return C&&T&&k&&C===T?new _o(C,k):null}static _create(m,g){return new _o(m,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qa extends Pi{constructor(m){j(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return qa.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return qa.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const g=_o.fromJSON(m);return j(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:g,providerId:C}=m;if(!g||!C)return null;try{return _o._create(C,g)}catch(T){return null}}}let um=(()=>{class v extends za{constructor(){super("twitter.com")}static credential(g,C){return Ps._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:C,oauthTokenSecret:T}=g;if(!C||!T)return null;try{return v.credential(C,T)}catch(k){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ar(v,m){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signUp",Gt(v,m))})).apply(this,arguments)}class Hr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,g,C,T=!1){return(0,u.Z)(function*(){const k=yield Ft._fromIdTokenResponse(m,C,T),z=ih(C);return new Hr({user:k,providerId:z,_tokenResponse:C,operationType:g})})()}static _forOperation(m,g,C){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const T=ih(C);return new Hr({user:m,providerId:T,_tokenResponse:C,operationType:g})})()}}function ih(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function rh(){return(rh=(0,u.Z)(function*(v){var m;const g=at(v);if(yield g._initializationPromise,null===(m=g.currentUser)||void 0===m?void 0:m.isAnonymous)return new Hr({user:g.currentUser,providerId:null,operationType:"signIn"});const C=yield ar(g,{returnSecureToken:!0}),T=yield Hr._fromIdTokenResponse(g,"signIn",C,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Za extends B.ZR{constructor(m,g,C,T){var k;super(g.code,g.message),this.operationType=C,this.user=T,Object.setPrototypeOf(this,Za.prototype),this.customData={appName:m.name,tenantId:null!==(k=m.tenantId)&&void 0!==k?k:void 0,_serverResponse:g.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,g,C,T){return new Za(m,g,C,T)}}function sh(v,m,g,C){return("reauthenticate"===m?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Za._fromErrorAndOperation(v,k,m,C):k})}function cu(v){return new Set(v.map(({providerId:m})=>m).filter(m=>!!m))}function gn(){return(gn=(0,u.Z)(function*(v,m){const g=(0,B.m9)(v);yield ln(!0,g,m);const{providerUserInfo:C}=yield Un(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[m]}),T=cu(C||[]);return g.providerData=g.providerData.filter(k=>T.has(k.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function uu(v,m){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,u.Z)(function*(v,m,g=!1){const C=yield Mi(v,m._linkToIdToken(v.auth,yield v.getIdToken()),g);return Hr._forOperation(v,"link",C)})).apply(this,arguments)}function ln(v,m,g){return oh.apply(this,arguments)}function oh(){return(oh=(0,u.Z)(function*(v,m,g){yield Ri(m);const T=!1===v?"provider-already-linked":"no-such-provider";j(cu(m.providerData).has(g)===v,m.auth,T)})).apply(this,arguments)}function du(v,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(v,m,g=!1){var C;const{auth:T}=v,k="reauthenticate";try{const z=yield Mi(v,sh(T,k,m,v),g);j(z.idToken,T,"internal-error");const re=nt(z.idToken);j(re,T,"internal-error");const{sub:Me}=re;return j(v.uid===Me,T,"user-mismatch"),Hr._forOperation(v,k,z)}catch(z){throw"auth/user-not-found"===(null===(C=z)||void 0===C?void 0:C.code)&&Ie(T,"user-mismatch"),z}})).apply(this,arguments)}function $i(v,m){return ah.apply(this,arguments)}function ah(){return(ah=(0,u.Z)(function*(v,m,g=!1){const C="signIn",T=yield sh(v,C,m),k=yield Hr._fromIdTokenResponse(v,C,T);return g||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Ka(v,m){return ps.apply(this,arguments)}function ps(){return(ps=(0,u.Z)(function*(v,m){return $i(at(v),m)})).apply(this,arguments)}function zi(v,m){return ra.apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(v,m){const g=(0,B.m9)(v);return yield ln(!1,g,m.providerId),uu(g,m)})).apply(this,arguments)}function sa(v,m){return hu.apply(this,arguments)}function hu(){return(hu=(0,u.Z)(function*(v,m){return du((0,B.m9)(v),m)})).apply(this,arguments)}function Ns(v,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(v,m){return sr(v,"POST","/v1/accounts:signInWithCustomToken",Gt(v,m))})).apply(this,arguments)}function pt(){return(pt=(0,u.Z)(function*(v,m){const g=at(v),C=yield Ns(g,{token:m,returnSecureToken:!0}),T=yield Hr._fromIdTokenResponse(g,"signIn",C);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Zl{constructor(m,g){this.factorId=m,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(m,g){return"phoneInfo"in g?pu._fromServerResponse(m,g):Ie(m,"internal-error")}}class pu extends Zl{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,g){return new pu(g)}}function Yl(v,m,g){var C;j((null===(C=g.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),j(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),m.continueUrl=g.url,m.dynamicLinkDomain=g.dynamicLinkDomain,m.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(j(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),m.iOSBundleId=g.iOS.bundleId),g.android&&(j(g.android.packageName.length>0,v,"missing-android-pkg-name"),m.androidInstallApp=g.android.installApp,m.androidMinimumVersionCode=g.android.minimumVersion,m.androidPackageName=g.android.packageName)}function mu(){return(mu=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v),T={requestType:"PASSWORD_RESET",email:m};g&&Yl(C,T,g),yield Jd(C,T)})).apply(this,arguments)}function lh(){return(lh=(0,u.Z)(function*(v,m,g){yield ta((0,B.m9)(v),{oobCode:m,newPassword:g})})).apply(this,arguments)}function Ot(){return(Ot=(0,u.Z)(function*(v,m){yield Xd((0,B.m9)(v),{oobCode:m})})).apply(this,arguments)}function dm(v,m){return yn.apply(this,arguments)}function yn(){return(yn=(0,u.Z)(function*(v,m){const g=(0,B.m9)(v),C=yield ta(g,{oobCode:m}),T=C.requestType;switch(j(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(C.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(C.mfaInfo,g,"internal-error");default:j(C.email,g,"internal-error")}let k=null;return C.mfaInfo&&(k=Zl._fromServerResponse(at(g),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:T}})).apply(this,arguments)}function oa(){return(oa=(0,u.Z)(function*(v,m){const{data:g}=yield dm((0,B.m9)(v),m);return g.email})).apply(this,arguments)}function Kl(){return(Kl=(0,u.Z)(function*(v,m,g){const C=at(v),T=yield ar(C,{returnSecureToken:!0,email:m,password:g}),k=yield Hr._fromIdTokenResponse(C,"signIn",T);return yield C._updateCurrentUser(k.user),k})).apply(this,arguments)}function _u(){return(_u=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v),T={requestType:"EMAIL_SIGNIN",email:m};j(g.handleCodeInApp,C,"argument-error"),g&&Yl(C,T,g),yield Ir(C,T)})).apply(this,arguments)}function ri(){return(ri=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v),T=lm.credentialWithLink(m,g||ke());return j(T._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Ka(C,T)})).apply(this,arguments)}function Fs(v,m){return bu.apply(this,arguments)}function bu(){return(bu=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:createAuthUri",Gt(v,m))})).apply(this,arguments)}function Gr(){return(Gr=(0,u.Z)(function*(v,m){const C={identifier:m,continueUri:st()?ke():"http://localhost"},{signinMethods:T}=yield Fs((0,B.m9)(v),C);return T||[]})).apply(this,arguments)}function wu(){return(wu=(0,u.Z)(function*(v,m){const g=(0,B.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};m&&Yl(g.auth,T,m);const{email:k}=yield hn(g.auth,T);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function uh(){return(uh=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:m};g&&Yl(C.auth,k,g);const{email:z}=yield eh(C.auth,k);z!==v.email&&(yield v.reload())})).apply(this,arguments)}function dh(v,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,u.Z)(function*(v,m){return Lt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ql(){return(Ql=(0,u.Z)(function*(v,{displayName:m,photoURL:g}){if(void 0===m&&void 0===g)return;const C=(0,B.m9)(v),k={idToken:yield C.getIdToken(),displayName:m,photoUrl:g,returnSecureToken:!0},z=yield Mi(C,dh(C.auth,k));C.displayName=z.displayName||null,C.photoURL=z.photoUrl||null;const re=C.providerData.find(({providerId:Me})=>"password"===Me);re&&(re.displayName=C.displayName,re.photoURL=C.photoURL),yield C._updateTokensIfNecessary(z)})).apply(this,arguments)}function Xl(v,m,g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(v,m,g){const{auth:C}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};m&&(k.email=m),g&&(k.password=g);const z=yield Mi(v,Ga(C,k));yield v._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Xa{constructor(m,g,C={}){this.isNewUser=m,this.providerId=g,this.profile=C}}class fm extends Xa{constructor(m,g,C,T){super(m,g,C),this.username=T}}class Jl extends Xa{constructor(m,g){super(m,"facebook.com",g)}}class vo extends fm{constructor(m,g){super(m,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Iy extends Xa{constructor(m,g){super(m,"google.com",g)}}class Ni extends fm{constructor(m,g,C){super(m,"twitter.com",g,C)}}function ms(v){const{user:m,_tokenResponse:g}=v;return m.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function hm(v){var m,g;if(!v)return null;const{providerId:C}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const z=null===(g=null===(m=nt(v.idToken))||void 0===m?void 0:m.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Xa(k,"anonymous"!==z&&"custom"!==z?z:null)}if(!C)return null;switch(C){case"facebook.com":return new Jl(k,T);case"github.com":return new vo(k,T);case"google.com":return new Iy(k,T);case"twitter.com":return new Ni(k,T,v.screenName||null);case"custom":case"anonymous":return new Xa(k,null);default:return new Xa(k,C,T)}}(g)}class Ls{constructor(m,g,C){this.type=m,this.credential=g,this.auth=C}static _fromIdtoken(m,g){return new Ls("enroll",m,g)}static _fromMfaPendingCredential(m){return new Ls("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var g,C;if(null==m?void 0:m.multiFactorSession){if(null===(g=m.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ls._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(C=m.multiFactorSession)||void 0===C?void 0:C.idToken)return Ls._fromIdtoken(m.multiFactorSession.idToken)}return null}}class tc{constructor(m,g,C){this.session=m,this.hints=g,this.signInResolver=C}static _fromError(m,g){const C=at(m),T=g.customData._serverResponse,k=(T.mfaInfo||[]).map(re=>Zl._fromServerResponse(C,re));j(T.mfaPendingCredential,C,"internal-error");const z=Ls._fromMfaPendingCredential(T.mfaPendingCredential);return new tc(z,k,function(){var re=(0,u.Z)(function*(Me){const ze=yield Me._process(C,z);delete T.mfaInfo,delete T.mfaPendingCredential;const ft=Object.assign(Object.assign({},T),{idToken:ze.idToken,refreshToken:ze.refreshToken});switch(g.operationType){case"signIn":const ct=yield Hr._fromIdTokenResponse(C,g.operationType,ft);return yield C._updateCurrentUser(ct.user),ct;case"reauthenticate":return j(g.user,C,"internal-error"),Hr._forOperation(g.user,g.operationType,ft);default:Ie(C,"internal-error")}});return function(Me){return re.apply(this,arguments)}}())}resolveSignIn(m){var g=this;return(0,u.Z)(function*(){return g.signInResolver(m)})()}}function TC(v,m){return Lt(v,"POST","/v2/accounts/mfaEnrollment:start",Gt(v,m))}class mm{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(C=>Zl._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new mm(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Ls._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,g){var C=this;return(0,u.Z)(function*(){const T=m,k=yield C.getSession(),z=yield Mi(C.user,T._process(C.user.auth,k,g));return yield C.user._updateTokensIfNecessary(z),C.user.reload()})()}unenroll(m){var g=this;return(0,u.Z)(function*(){var C;const T="string"==typeof m?m:m.uid,k=yield g.user.getIdToken(),z=yield Mi(g.user,function Eu(v,m){return Lt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(v,m))}(g.user.auth,{idToken:k,mfaEnrollmentId:T}));g.enrolledFactors=g.enrolledFactors.filter(({uid:re})=>re!==T),yield g.user._updateTokensIfNecessary(z);try{yield g.user.reload()}catch(re){if("auth/user-token-expired"!==(null===(C=re)||void 0===C?void 0:C.code))throw re}})()}}const gm=new WeakMap,Ja="__sak";class hh{constructor(m,g){this.storageRetriever=m,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ja,"1"),this.storage.removeItem(Ja),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,g){return this.storage.setItem(m,JSON.stringify(g)),Promise.resolve()}_get(m){const g=this.storage.getItem(m);return Promise.resolve(g?JSON.parse(g):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mt=(()=>{class v extends hh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,C)=>this.onStorageEvent(g,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function AC(){const v=(0,B.z$)();return It(v)||Dn(v)}()&&function Ei(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=ks(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const C of Object.keys(this.listeners)){const T=this.storage.getItem(C),k=this.localCache[C];T!==k&&g(C,k,T)}}onStorageEvent(g,C=!1){if(!g.key)return void this.forAllChangedKeys((re,Me,ze)=>{this.notifyListeners(re,ze)});const T=g.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(T);if(g.newValue!==re)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!C)return}const k=()=>{const re=this.storage.getItem(T);!C&&this.localCache[T]===re||this.notifyListeners(T,re)},z=this.storage.getItem(T);!function ja(){return(0,B.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?k():setTimeout(k,10)}notifyListeners(g,C){this.localCache[g]=C;const T=this.listeners[g];if(T)for(const k of Array.from(T))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,C,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:C,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,C){var T=()=>super._set,k=this;return(0,u.Z)(function*(){yield T().call(k,g,C),k.localCache[g]=JSON.stringify(C)})()}_get(g){var C=()=>super._get,T=this;return(0,u.Z)(function*(){const k=yield C().call(T,g);return T.localCache[g]=JSON.stringify(k),k})()}_remove(g){var C=()=>super._remove,T=this;return(0,u.Z)(function*(){yield C().call(T,g),delete T.localCache[g]})()}}return v.type="LOCAL",v})(),cn=(()=>{class v extends hh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,C){}_removeListener(g,C){}}return v.type="SESSION",v})();let ym=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const C=this.receivers.find(k=>k.isListeningto(g));if(C)return C;const T=new v(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var C=this;return(0,u.Z)(function*(){const T=g,{eventId:k,eventType:z,data:re}=T.data,Me=C.handlersMap[z];if(!(null==Me?void 0:Me.size))return;T.ports[0].postMessage({status:"ack",eventId:k,eventType:z});const ze=Array.from(Me).map(function(){var ct=(0,u.Z)(function*(wn){return wn(T.origin,re)});return function(wn){return ct.apply(this,arguments)}}()),ft=yield function _m(v){return Promise.all(v.map(function(){var m=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(C){return{fulfilled:!1,reason:C}}});return function(g){return m.apply(this,arguments)}}()))}(ze);T.ports[0].postMessage({status:"done",eventId:k,eventType:z,response:ft})})()}_subscribe(g,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(C)}_unsubscribe(g,C){this.handlersMap[g]&&C&&this.handlersMap[g].delete(C),(!C||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function gs(v="",m=10){let g="";for(let C=0;C<m;C++)g+=Math.floor(10*Math.random());return v+g}class Ay{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,g,C=50){var T=this;return(0,u.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let z,re;return new Promise((Me,ze)=>{const ft=gs("",20);k.port1.start();const ct=setTimeout(()=>{ze(new Error("unsupported_event"))},C);re={messageChannel:k,onMessage(wn){const ur=wn;if(ur.data.eventId===ft)switch(ur.data.status){case"ack":clearTimeout(ct),z=setTimeout(()=>{ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Me(ur.data.response);break;default:clearTimeout(ct),clearTimeout(z),ze(new Error("invalid_response"))}}},T.handlers.add(re),k.port1.addEventListener("message",re.onMessage),T.target.postMessage({eventType:m,eventId:ft,data:g},[k.port2])}).finally(()=>{re&&T.removeMessageHandler(re)})})()}}function _n(){return window}function Sr(){return void 0!==_n().WorkerGlobalScope&&"function"==typeof _n().importScripts}function Du(){return(Du=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const mh="firebaseLocalStorageDb",tl="firebaseLocalStorage",Iu="fbase_key";class bo{constructor(m){this.request=m}toPromise(){return new Promise((m,g)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function wo(v,m){return v.transaction([tl],m?"readwrite":"readonly").objectStore(tl)}function Bs(){const v=indexedDB.open(mh,1);return new Promise((m,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(tl,{keyPath:Iu})}catch(T){g(T)}}),v.addEventListener("success",(0,u.Z)(function*(){const C=v.result;C.objectStoreNames.contains(tl)?m(C):(C.close(),yield function lr(){const v=indexedDB.deleteDatabase(mh);return new bo(v).toPromise()}(),m(yield Bs()))}))})}function gh(v,m,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,u.Z)(function*(v,m,g){const C=wo(v,!0).put({[Iu]:m,value:g});return new bo(C).toPromise()})).apply(this,arguments)}function _h(){return(_h=(0,u.Z)(function*(v,m){const g=wo(v,!1).get(m),C=yield new bo(g).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function ic(v,m){const g=wo(v,!0).delete(m);return new bo(g).toPromise()}const si=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield Bs()),g.db})()}_withRetries(g){var C=this;return(0,u.Z)(function*(){let T=0;for(;;)try{const k=yield C._openDb();return yield g(k)}catch(k){if(T++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return Sr()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=ym._getInstance(function ph(){return Sr()?self:null}()),g.receiver._subscribe("keyChanged",function(){var C=(0,u.Z)(function*(T,k){return{keyProcessed:(yield g._poll()).includes(k.key)}});return function(T,k){return C.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var C=(0,u.Z)(function*(T,k){return["keyChanged"]});return function(T,k){return C.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var C,T;if(g.activeServiceWorker=yield function lt(){return Du.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ay(g.activeServiceWorker);const k=yield g.sender._send("ping",{},800);!k||(null===(C=k[0])||void 0===C?void 0:C.fulfilled)&&(null===(T=k[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var C=this;return(0,u.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function vm(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:g},C.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Bs();return yield gh(g,Ja,"1"),yield ic(g,Ja),!0}catch(g){}return!1})()}_withPendingWrite(g){var C=this;return(0,u.Z)(function*(){C.pendingWrites++;try{yield g()}finally{C.pendingWrites--}})()}_set(g,C){var T=this;return(0,u.Z)(function*(){return T._withPendingWrite((0,u.Z)(function*(){return yield T._withRetries(k=>gh(k,g,C)),T.localCache[g]=C,T.notifyServiceWorker(g)}))})()}_get(g){var C=this;return(0,u.Z)(function*(){const T=yield C._withRetries(k=>function nc(v,m){return _h.apply(this,arguments)}(k,g));return C.localCache[g]=T,T})()}_remove(g){var C=this;return(0,u.Z)(function*(){return C._withPendingWrite((0,u.Z)(function*(){return yield C._withRetries(T=>ic(T,g)),delete C.localCache[g],C.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const C=yield g._withRetries(z=>{const re=wo(z,!1).getAll();return new bo(re).toPromise()});if(!C)return[];if(0!==g.pendingWrites)return[];const T=[],k=new Set;for(const{fbase_key:z,value:re}of C)k.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(re)&&(g.notifyListeners(z,re),T.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!k.has(z)&&(g.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(g,C){this.localCache[g]=C;const T=this.listeners[g];if(T)for(const k of Array.from(T))k(C)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Rn(v,m){return Lt(v,"POST","/v2/accounts/mfaSignIn:start",Gt(v,m))}function vn(){return(vn=(0,u.Z)(function*(v){return(yield Lt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function pi(v){return new Promise((m,g)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=m,C.onerror=T=>{const k=ae("internal-error");k.customData=T,g(k)},C.type="text/javascript",C.charset="UTF-8",function Yn(){var v,m;return null!==(m=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==m?m:document}().appendChild(C)})}function pa(v){return`__${v}${Math.floor(1e6*Math.random())}`}const mi=1e12;class Sn{constructor(m){this.auth=m,this.counter=mi,this._widgets=new Map}render(m,g){const C=this.counter;return this._widgets.set(C,new rc(m,this.auth.name,g||{})),this.counter++,C}reset(m){var g;const C=m||mi;null===(g=this._widgets.get(C))||void 0===g||g.delete(),this._widgets.delete(C)}getResponse(m){var g;return(null===(g=this._widgets.get(m||mi))||void 0===g?void 0:g.getResponse())||""}execute(m){var g=this;return(0,u.Z)(function*(){var C;return null===(C=g._widgets.get(m||mi))||void 0===C||C.execute(),""})()}}class rc{constructor(m,g,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof m?document.getElementById(m):m;j(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yh(v){const m=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)m.push(g.charAt(Math.floor(Math.random()*g.length)));return m.join("")}(50);const{callback:m,"expired-callback":g}=this.params;if(m)try{m(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const bn=pa("rcb"),My=new tn(3e4,6e4);class MC{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(m=_n().grecaptcha)||void 0===m?void 0:m.render)}load(m,g=""){return j(function nl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),m,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(_n().grecaptcha):new Promise((C,T)=>{const k=_n().setTimeout(()=>{T(ae(m,"network-request-failed"))},My.get());_n()[bn]=()=>{_n().clearTimeout(k),delete _n()[bn];const re=_n().grecaptcha;if(!re)return void T(ae(m,"internal-error"));const Me=re.render;re.render=(ze,ft)=>{const ct=Me(ze,ft);return this.counter++,ct},this.hostLanguage=g,C(re)},pi(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:bn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(k),T(ae(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var g;return!!(null===(g=_n().grecaptcha)||void 0===g?void 0:g.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gi{load(m){return(0,u.Z)(function*(){return new Sn(m)})()}clearedOneInstance(){}}const wm="recaptcha",Co={theme:"light",type:"image"};class ma{constructor(m,g=Object.assign({},Co),C){this.parameters=g,this.type=wm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(C),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof m?document.getElementById(m):m;j(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gi:new MC,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const g=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(g)||new Promise(k=>{const z=re=>{!re||(m.tokenChangeListeners.delete(z),k(re))};m.tokenChangeListeners.add(z),m.isInvisible&&C.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return g=>{if(this.tokenChangeListeners.forEach(C=>C(g)),"function"==typeof m)m(g);else if("string"==typeof m){const C=_n()[m];"function"==typeof C&&C(g)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let g=m.container;if(!m.isInvisible){const C=document.createElement("div");g.appendChild(C),g=C}m.widgetId=m.getAssertedRecaptcha().render(g,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){j(st()&&!Sr(),m.auth,"internal-error"),yield function Su(){let v=null;return new Promise(m=>{"complete"!==document.readyState?(v=()=>m(),window.addEventListener("load",v)):m()}).catch(m=>{throw v&&window.removeEventListener("load",v),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const g=yield function bm(v){return vn.apply(this,arguments)}(m.auth);j(g,m.auth,"internal-error"),m.parameters.sitekey=g})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class On{constructor(m,g){this.verificationId=m,this.onConfirmation=g}confirm(m){const g=$a._fromVerification(this.verificationId,m);return this.onConfirmation(g)}}function ga(){return(ga=(0,u.Z)(function*(v,m,g){const C=at(v),T=yield il(C,m,(0,B.m9)(g));return new On(T,k=>Ka(C,k))})).apply(this,arguments)}function bh(){return(bh=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v);yield ln(!1,C,"phone");const T=yield il(C.auth,m,(0,B.m9)(g));return new On(T,k=>zi(C,k))})).apply(this,arguments)}function Mr(){return(Mr=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v),T=yield il(C.auth,m,(0,B.m9)(g));return new On(T,k=>sa(C,k))})).apply(this,arguments)}function il(v,m,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,u.Z)(function*(v,m,g){var C;const T=yield g.verify();try{let k;if(j("string"==typeof T,v,"argument-error"),j(g.type===wm,v,"argument-error"),k="string"==typeof m?{phoneNumber:m}:m,"session"in k){const z=k.session;if("phoneNumber"in k)return j("enroll"===z.type,v,"internal-error"),(yield TC(v,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{j("signin"===z.type,v,"internal-error");const re=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return j(re,v,"missing-multi-factor-info"),(yield Rn(v,{mfaPendingCredential:z.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield mC(v,{phoneNumber:k.phoneNumber,recaptchaToken:T});return z}}finally{g._reset()}})).apply(this,arguments)}function Tu(){return(Tu=(0,u.Z)(function*(v,m){yield uu((0,B.m9)(v),m)})).apply(this,arguments)}let oc=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=at(g)}verifyPhoneNumber(g,C){return il(this.auth,g,(0,B.m9)(C))}static credential(g,C){return $a._fromVerification(g,C)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:C,temporaryProof:T}=g;return C&&T?$a._fromTokenResponse(C,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ya(v,m){return m?Q(m):(j(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class wh extends Vr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return go(m,this._buildIdpRequest())}_linkToIdToken(m,g){return go(m,this._buildIdpRequest(g))}_getReauthenticationResolver(m){return go(m,this._buildIdpRequest())}_buildIdpRequest(m){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(g.idToken=m),g}}function Pt(v){return $i(v.auth,new wh(v),v.bypassAuthState)}function Cm(v){const{auth:m,user:g}=v;return j(g,m,"internal-error"),du(g,new wh(v),v.bypassAuthState)}function oi(v){return rl.apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(v){const{auth:m,user:g}=v;return j(g,m,"internal-error"),uu(g,new wh(v),v.bypassAuthState)})).apply(this,arguments)}class Vs{constructor(m,g,C,T,k=!1){this.auth=m,this.resolver=C,this.user=T,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var m=this;return new Promise(function(){var g=(0,u.Z)(function*(C,T){m.pendingPromise={resolve:C,reject:T};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(k){m.reject(k)}});return function(C,T){return g.apply(this,arguments)}}())}onAuthEvent(m){var g=this;return(0,u.Z)(function*(){const{urlResponse:C,sessionId:T,postBody:k,tenantId:z,error:re,type:Me}=m;if(re)return void g.reject(re);const ze={auth:g.auth,requestUri:C,sessionId:T,tenantId:z||void 0,postBody:k||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Me)(ze))}catch(ft){g.reject(ft)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Pt;case"linkViaPopup":case"linkViaRedirect":return oi;case"reauthViaPopup":case"reauthViaRedirect":return Cm;default:Ie(this.auth,"internal-error")}}resolve(m){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const RC=new tn(2e3,1e4);function Ch(){return(Ch=(0,u.Z)(function*(v,m,g){const C=at(v);Ne(v,m,Pi);const T=ya(C,g);return new Eh(C,"signInViaPopup",m,T).executeNotNull()})).apply(this,arguments)}function Au(){return(Au=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v);Ne(C.auth,m,Pi);const T=ya(C.auth,g);return new Eh(C.auth,"reauthViaPopup",m,T,C).executeNotNull()})).apply(this,arguments)}function Mu(){return(Mu=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v);Ne(C.auth,m,Pi);const T=ya(C.auth,g);return new Eh(C.auth,"linkViaPopup",m,T,C).executeNotNull()})).apply(this,arguments)}let Eh=(()=>{class v extends Vs{constructor(g,C,T,k,z){super(g,C,k,z),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const C=yield g.execute();return j(C,g.auth,"internal-error"),C})()}onExecution(){var g=this;return(0,u.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const C=gs();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],C),g.authWindow.associatedEvent=C,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(ae(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var C,T;this.pollId=(null===(T=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ae(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,RC.get())};g()}}return v.currentPopupAction=null,v})();const _i=new Map;class kC extends Vs{constructor(m,g,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,g=this;return(0,u.Z)(function*(){let C=_i.get(g.auth._key());if(!C){try{const k=(yield function ac(v,m){return sl.apply(this,arguments)}(g.resolver,g.auth))?yield m().call(g):null;C=()=>Promise.resolve(k)}catch(T){C=()=>Promise.reject(T)}_i.set(g.auth._key(),C)}return g.bypassAuthState||_i.set(g.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var g=()=>super.onAuthEvent,C=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return g().call(C,m);if("unknown"!==m.type){if(m.eventId){const T=yield C.auth._redirectUserForId(m.eventId);if(T)return C.user=T,g().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function sl(){return(sl=(0,u.Z)(function*(v,m){const g=Sh(m),C=xu(v);if(!(yield C._isAvailable()))return!1;const T="true"===(yield C._get(g));return yield C._remove(g),T})).apply(this,arguments)}function va(v,m){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,u.Z)(function*(v,m){return xu(v)._set(Sh(m),"true")})).apply(this,arguments)}function Ih(v,m){_i.set(v._key(),m)}function xu(v){return Q(v._redirectPersistence)}function Sh(v){return q("pendingRedirect",v.config.apiKey,v.name)}function Rt(){return(Rt=(0,u.Z)(function*(v,m,g){const C=at(v);Ne(v,m,Pi);const T=ya(C,g);return yield va(T,C),T._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function ys(){return(ys=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v);Ne(C.auth,m,Pi);const T=ya(C.auth,g);yield va(T,C.auth);const k=yield ll(C);return T._openRedirect(C.auth,m,"reauthViaRedirect",k)})).apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(v,m,g){const C=(0,B.m9)(v);Ne(C.auth,m,Pi);const T=ya(C.auth,g);yield ln(!1,C,m.providerId),yield va(T,C.auth);const k=yield ll(C);return T._openRedirect(C.auth,m,"linkViaRedirect",k)})).apply(this,arguments)}function al(){return(al=(0,u.Z)(function*(v,m){return yield at(v)._initializationPromise,zr(v,m,!1)})).apply(this,arguments)}function zr(v,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,u.Z)(function*(v,m,g=!1){const C=at(v),T=ya(C,m),z=yield new kC(C,T,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield C._persistUserIfCurrent(z.user),yield C._setRedirectUser(null,m)),z})).apply(this,arguments)}function ll(v){return ba.apply(this,arguments)}function ba(){return(ba=(0,u.Z)(function*(v){const m=gs(`${v.uid}:::`);return v._redirectEventId=m,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),m})).apply(this,arguments)}class cl{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let g=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(g=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Tm(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ul(v);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=m,g=!0)),g}sendToConsumer(m,g){var C;if(m.error&&!ul(m)){const T=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";g.onError(ae(this.auth,T))}else g.onAuthEvent(m)}isEventForConsumer(m,g){const C=null===g.eventId||!!m.eventId&&m.eventId===g.eventId;return g.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lc(m))}saveEventToCache(m){this.cachedEventUids.add(lc(m)),this.lastProcessedEventTime=Date.now()}}function lc(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(m=>m).join("-")}function ul({type:v,error:m}){return"unknown"===v&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Am(v){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,u.Z)(function*(v,m={}){return Lt(v,"GET","/v1/projects",m)})).apply(this,arguments)}const Us=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cc=/^https?/;function Mm(){return(Mm=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:m}=yield Am(v);for(const g of m)try{if(xm(g))return}catch(C){}Ie(v,"unauthorized-domain")})).apply(this,arguments)}function xm(v){const m=ke(),{protocol:g,hostname:C}=new URL(m);if(v.startsWith("chrome-extension://")){const z=new URL(v);return""===z.hostname&&""===C?"chrome-extension:"===g&&v.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===C}if(!cc.test(g))return!1;if(Us.test(v))return C===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(C)}const Oy=new tn(3e4,6e4);function Rm(){const v=_n().___jsl;if(null==v?void 0:v.H)for(const m of Object.keys(v.H))if(v.H[m].r=v.H[m].r||[],v.H[m].L=v.H[m].L||[],v.H[m].r=[...v.H[m].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let dl=null;function Hs(v){return dl=dl||function xh(v){return new Promise((m,g)=>{var C,T,k;function z(){Rm(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Rm(),g(ae(v,"network-request-failed"))},timeout:Oy.get()})}if(null===(T=null===(C=_n().gapi)||void 0===C?void 0:C.iframes)||void 0===T?void 0:T.Iframe)m(gapi.iframes.getContext());else{if(!(null===(k=_n().gapi)||void 0===k?void 0:k.load)){const re=pa("iframefcb");return _n()[re]=()=>{gapi.load?z():g(ae(v,"network-request-failed"))},pi(`https://apis.google.com/js/api.js?onload=${re}`).catch(Me=>g(Me))}z()}}).catch(m=>{throw dl=null,m})}(v),dl}const js=new tn(5e3,15e3),Py={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ny(v){const m=v.config;j(m.authDomain,v,"auth-domain-config-required");const g=m.emulator?Wn(m,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:v.name,v:he.SDK_VERSION},T=hl.get(v.config.apiHost);T&&(C.eid=T);const k=v._getFrameworks();return k.length&&(C.fw=k.join(",")),`${g}?${(0,B.xO)(C).slice(1)}`}function So(){return So=(0,u.Z)(function*(v){const m=yield Hs(v),g=_n().gapi;return j(g,v,"internal-error"),m.open({where:document.body,url:Ny(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Py,dontclear:!0},C=>new Promise(function(){var T=(0,u.Z)(function*(k,z){yield C.restyle({setHideOnLeave:!1});const re=ae(v,"network-request-failed"),Me=_n().setTimeout(()=>{z(re)},js.get());function ze(){_n().clearTimeout(Me),k(C)}C.ping(ze).then(ze,()=>{z(re)})});return function(k,z){return T.apply(this,arguments)}}()))}),So.apply(this,arguments)}const Rh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class km{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function qr(v,m,g,C,T,k){j(v.config.authDomain,v,"auth-domain-config-required"),j(v.config.apiKey,v,"invalid-api-key");const z={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:C,v:he.SDK_VERSION,eventId:T};if(m instanceof Pi){m.setDefaultLanguage(v.languageCode),z.providerId=m.providerId||"",(0,B.xb)(m.getCustomParameters())||(z.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Me,ze]of Object.entries(k||{}))z[Me]=ze}if(m instanceof za){const Me=m.getScopes().filter(ze=>""!==ze);Me.length>0&&(z.scopes=Me.join(","))}v.tenantId&&(z.tid=v.tenantId);const re=z;for(const Me of Object.keys(re))void 0===re[Me]&&delete re[Me];return`${function fl({config:v}){return v.emulator?Wn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(re).slice(1)}`}const dc="webStorageSupport";class hc extends class By{constructor(m){this.factorId=m}_process(m,g,C){switch(g.type){case"enroll":return this._finalizeEnroll(m,g.credential,C);case"signin":return this._finalizeSignIn(m,g.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new hc(m)}_finalizeEnroll(m,g,C){return function la(v,m){return Lt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(v,m))}(m,{idToken:g,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,g){return function fa(v,m){return Lt(v,"POST","/v2/accounts/mfaSignIn:finalize",Gt(v,m))}(m,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pm=(()=>{class v{constructor(){}static assertion(g){return hc._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Nm="@firebase/auth",Fm="0.20.11";class Lm{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const g=this.auth.onIdTokenChanged(C=>{var T;m((null===(T=C)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,g),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const g=this.internalListeners.get(m);!g||(this.internalListeners.delete(m),g(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function To(){return window}function zs(){return(zs=(0,u.Z)(function*(v,m,g){var C;const{BuildInfo:T}=To();W(m.sessionId,"AuthEvent did not contain a session ID");const k=yield Vu(m.sessionId),z={};return Dn()?z.ibi=T.packageName:dn()?z.apn=T.packageName:Ie(v,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=k,qr(v,g,m.type,void 0,null!==(C=m.eventId)&&void 0!==C?C:void 0,z)})).apply(this,arguments)}function Ao(){return(Ao=(0,u.Z)(function*(v){const{BuildInfo:m}=To(),g={};Dn()?g.iosBundleId=m.packageName:dn()?g.androidPackageName=m.packageName:Ie(v,"operation-not-supported-in-this-environment"),yield Am(v,g)})).apply(this,arguments)}function pc(){return(pc=(0,u.Z)(function*(v,m,g){const{cordova:C}=To();let T=()=>{};try{yield new Promise((k,z)=>{let re=null;function Me(){var ct;k();const wn=null===(ct=C.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof wn&&wn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function ze(){re||(re=window.setTimeout(()=>{z(ae(v,"redirect-cancelled-by-user"))},2e3))}function ft(){"visible"===(null==document?void 0:document.visibilityState)&&ze()}m.addPassiveListener(Me),document.addEventListener("resume",ze,!1),dn()&&document.addEventListener("visibilitychange",ft,!1),T=()=>{m.removePassiveListener(Me),document.removeEventListener("resume",ze,!1),document.removeEventListener("visibilitychange",ft,!1),re&&window.clearTimeout(re)}})}finally{T()}})).apply(this,arguments)}function Vu(v){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,u.Z)(function*(v){const m=Vy(v),g=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Vy(v){if(W(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const m=new ArrayBuffer(v.length),g=new Uint8Array(m);for(let C=0;C<v.length;C++)g[C]=v.charCodeAt(C);return g}(0,B.Pz)("authIdTokenMaxAge"),function OC(v){(0,he._registerComponent)(new le.wA("auth",(m,{options:g})=>{const C=m.getProvider("app").getImmediate(),T=m.getProvider("heartbeat"),{apiKey:k,authDomain:z}=C.options;return((re,Me)=>{j(k&&!k.includes(":"),"invalid-api-key",{appName:re.name}),j(!(null==z?void 0:z.includes(":")),"argument-error",{appName:re.name});const ze={apiKey:k,authDomain:z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ou(v)},ft=new He(re,Me,ze);return function se(v,m){const g=(null==m?void 0:m.persistence)||[],C=(Array.isArray(g)?g:[g]).map(Q);(null==m?void 0:m.errorMap)&&v._updateErrorMap(m.errorMap),v._initializeWithPersistence(C,null==m?void 0:m.popupRedirectResolver)}(ft,g),ft})(C,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,g,C)=>{m.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new le.wA("auth-internal",m=>{const g=at(m.getProvider("auth").getImmediate());return new Lm(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(Nm,Fm,function Nu(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,he.registerVersion)(Nm,Fm,"esm2017")}("Browser");class Bh extends cl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(m)),super.onEvent(m)}initialized(){var m=this;return(0,u.Z)(function*(){yield m.initPromise})()}}function pl(v){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,u.Z)(function*(v){const m=yield $t()._get(Hu(v));return m&&(yield $t()._remove(Hu(v))),m})).apply(this,arguments)}function Hh(){const v=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const C=Math.floor(Math.random()*m.length);v.push(m.charAt(C))}return v.join("")}function $t(){return Q(Mt)}function Hu(v){return q("authEvent",v.config.apiKey,v.name)}function xo(v){if(!(null==v?void 0:v.includes("?")))return{};const[m,...g]=v.split("?");return(0,B.zd)(g.join("?"))}function Um(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ae("no-auth-event")}}function Hn(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function Gu(v=(0,B.z$)()){return!("file:"!==Hn()&&"ionic:"!==Hn()&&"capacitor:"!==Hn()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function jm(){try{const v=self.localStorage,m=gs();if(v)return v.setItem(m,"1"),v.removeItem(m),!function jh(v=(0,B.z$)()){return function Di(){return(0,B.w1)()&&11===(null==document?void 0:document.documentMode)}()||function gc(v=(0,B.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,B.hl)()}catch(v){return _c()&&(0,B.hl)()}return!1}function _c(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $u(){return(function Ca(){return"http:"===Hn()||"https:"===Hn()}()||(0,B.ru)()||Gu())&&!function Hm(){return(0,B.b$)()||(0,B.UG)()}()&&jm()&&!_c()}function Gh(){return Gu()&&"undefined"!=typeof document}function $h(){return($h=(0,u.Z)(function*(){return!!Gh()&&new Promise(v=>{const m=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),v(!0)})})})).apply(this,arguments)}const Ii={LOCAL:"local",NONE:"none",SESSION:"session"},vc=j,ko="persistence";function zh(v){return qs.apply(this,arguments)}function qs(){return(qs=(0,u.Z)(function*(v){yield v._initializationPromise;const m=$m(),g=q(ko,v.config.apiKey,v.name);m&&m.setItem(g,v._getPersistence())})).apply(this,arguments)}function $m(){var v;try{return(null===(v=function Gm(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(m){return null}}const zu=j;class Oo{constructor(){this.browserResolver=Q(class Om{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cn,this._completeRedirectFn=zr,this._overrideRedirectResult=Ih}_openPopup(m,g,C,T){var k=this;return(0,u.Z)(function*(){var z;W(null===(z=k.eventManagers[m._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const re=qr(m,g,C,ke(),T);return function uc(v,m,g,C=500,T=600){const k=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-C)/2,0).toString();let re="";const Me=Object.assign(Object.assign({},Rh),{width:C.toString(),height:T.toString(),top:k,left:z}),ze=(0,B.z$)().toLowerCase();g&&(re=mn(ze)?"_blank":g),Je(ze)&&(m=m||"http://localhost",Me.scrollbars="yes");const ft=Object.entries(Me).reduce((wn,[ur,gl])=>`${wn}${ur}=${gl},`,"");if(function ea(v=(0,B.z$)()){var m;return Dn(v)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(ze)&&"_self"!==re)return function Fy(v,m){const g=document.createElement("a");g.href=v,g.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(C)}(m||"",re),new km(null);const ct=window.open(m||"",re,ft);j(ct,v,"popup-blocked");try{ct.focus()}catch(wn){}return new km(ct)}(m,re,gs())})()}_openRedirect(m,g,C,T){var k=this;return(0,u.Z)(function*(){return yield k._originValidation(m),function fh(v){_n().location.href=v}(qr(m,g,C,ke(),T)),new Promise(()=>{})})()}_initialize(m){const g=m._key();if(this.eventManagers[g]){const{manager:T,promise:k}=this.eventManagers[g];return T?Promise.resolve(T):(W(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(m);return this.eventManagers[g]={promise:C},C.catch(()=>{delete this.eventManagers[g]}),C}initAndGetManager(m){var g=this;return(0,u.Z)(function*(){const C=yield function Ou(v){return So.apply(this,arguments)}(m),T=new cl(m);return C.register("authEvent",k=>(j(null==k?void 0:k.authEvent,m,"invalid-auth-event"),{status:T.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[m._key()]={manager:T},g.iframes[m._key()]=C,T})()}_isIframeWebStorageSupported(m,g){this.iframes[m._key()].send(dc,{type:dc},T=>{var k;const z=null===(k=null==T?void 0:T[0])||void 0===k?void 0:k[dc];void 0!==z&&g(!!z),Ie(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const g=m._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ky(v){return Mm.apply(this,arguments)}(m)),this.originValidationPromises[g]}get _shouldInitProactively(){return ks()||It()||Dn()}}),this.cordovaResolver=Q(class jy{constructor(){this._redirectPersistence=cn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zr,this._overrideRedirectResult=Ih}_initialize(m){var g=this;return(0,u.Z)(function*(){const C=m._key();let T=g.eventManagers.get(C);return T||(T=new Bh(m),g.eventManagers.set(C,T),g.attachCallbackListeners(m,T)),T})()}_openPopup(m){Ie(m,"operation-not-supported-in-this-environment")}_openRedirect(m,g,C,T){var k=this;return(0,u.Z)(function*(){!function NC(v){var m,g,C,T,k,z,re,Me,ze,ft;const ct=To();j("function"==typeof(null===(m=null==ct?void 0:ct.universalLinks)||void 0===m?void 0:m.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(g=null==ct?void 0:ct.BuildInfo)||void 0===g?void 0:g.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(k=null===(T=null===(C=null==ct?void 0:ct.cordova)||void 0===C?void 0:C.plugins)||void 0===T?void 0:T.browsertab)||void 0===k?void 0:k.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Me=null===(re=null===(z=null==ct?void 0:ct.cordova)||void 0===z?void 0:z.plugins)||void 0===re?void 0:re.browsertab)||void 0===Me?void 0:Me.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(ft=null===(ze=null==ct?void 0:ct.cordova)||void 0===ze?void 0:ze.InAppBrowser)||void 0===ft?void 0:ft.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const z=yield k._initialize(m);yield z.initialized(),z.resetRedirect(),function Im(){_i.clear()}(),yield k._originValidation(m);const re=function Uy(v,m,g=null){return{type:m,eventId:g,urlResponse:null,sessionId:Hh(),postBody:null,tenantId:v.tenantId,error:ae(v,"no-auth-event")}}(m,C,T);yield function Vh(v,m){return $t()._set(Hu(v),m)}(m,re);const Me=yield function Bu(v,m,g){return zs.apply(this,arguments)}(m,re,g),ze=yield function Fh(v){const{cordova:m}=To();return new Promise(g=>{m.plugins.browsertab.isAvailable(C=>{let T=null;C?m.plugins.browsertab.openUrl(v):T=m.InAppBrowser.open(v,function uo(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(T)})})}(Me);return function Lh(v,m,g){return pc.apply(this,arguments)}(m,z,ze)})()}_isIframeWebStorageSupported(m,g){throw new Error("Method not implemented.")}_originValidation(m){const g=m._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function PC(v){return Ao.apply(this,arguments)}(m)),this.originValidationPromises[g]}attachCallbackListeners(m,g){const{universalLinks:C,handleOpenURL:T,BuildInfo:k}=To(),z=setTimeout((0,u.Z)(function*(){yield pl(m),g.onEvent(Um())}),500),re=function(){var ft=(0,u.Z)(function*(ct){clearTimeout(z);const wn=yield pl(m);let ur=null;wn&&(null==ct?void 0:ct.url)&&(ur=function Uh(v,m){var g,C;const T=function ml(v){const m=xo(v),g=m.link?decodeURIComponent(m.link):void 0,C=xo(g).link,T=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return xo(T).link||T||C||g||v}(m);if(T.includes("/__/auth/callback")){const k=xo(T),z=k.firebaseError?function Vm(v){try{return JSON.parse(v)}catch(m){return null}}(decodeURIComponent(k.firebaseError)):null,re=null===(C=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===C?void 0:C[1],Me=re?ae(re):null;return Me?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:T,postBody:null}}return null}(wn,ct.url)),g.onEvent(ur||Um())});return function(wn){return ft.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,re);const Me=T,ze=`${k.packageName.toLowerCase()}://`;To().handleOpenURL=function(){var ft=(0,u.Z)(function*(ct){if(ct.toLowerCase().startsWith(ze)&&re({url:ct}),"function"==typeof Me)try{Me(ct)}catch(wn){console.error(wn)}});return function(ct){return ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=cn,this._completeRedirectFn=zr,this._overrideRedirectResult=Ih}_initialize(m){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,g,C,T){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(m,g,C,T)})()}_openRedirect(m,g,C,T){var k=this;return(0,u.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(m,g,C,T)})()}_isIframeWebStorageSupported(m,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,g)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Gh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,u.Z)(function*(){if(m.underlyingResolver)return;const g=yield function yc(){return $h.apply(this,arguments)}();m.underlyingResolver=g?m.cordovaResolver:m.browserResolver})()}}function zm(v){return v.unwrap()}function Yy(v){return qh(v)}function qh(v){const{_tokenResponse:m}=v instanceof B.ZR?v.customData:v;if(!m)return null;if(!(v instanceof B.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return oc.credentialFromResult(v);const g=m.providerId;if(!g||"password"===g)return null;let C;switch(g){case"google.com":C=cm;break;case"facebook.com":C=ql;break;case"github.com":C=_y;break;case"twitter.com":C=um;break;default:const{oauthIdToken:T,oauthAccessToken:k,oauthTokenSecret:z,pendingToken:re,nonce:Me}=m;return k||z||T||re?re?g.startsWith("saml.")?_o._create(g,re):Ps._fromParams({providerId:g,signInMethod:g,pendingToken:re,idToken:T,accessToken:k}):new fs(g).credential({idToken:T,accessToken:k,rawNonce:Me}):null}return v instanceof B.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function Li(v,m){return m.catch(g=>{throw g instanceof B.ZR&&function Ky(v,m){var g,C;const T=null===(g=m.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(C=m)||void 0===C?void 0:C.code))m.resolver=new Qy(v,function Ty(v,m){var g;const C=(0,B.m9)(v),T=m;return j(m.customData.operationType,C,"argument-error"),j(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,C,"argument-error"),tc._fromError(C,T)}(v,m));else if(T){const k=qh(m),z=m;k&&(z.credential=k,z.tenantId=T.tenantId||void 0,z.email=T.email||void 0,z.phoneNumber=T.phoneNumber||void 0)}}(v,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Yy(g),additionalUserInfo:ms(g),user:Ws.getOrCreate(T)}})}function Wh(v,m){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,u.Z)(function*(v,m){const g=yield m;return{verificationId:g.verificationId,confirm:C=>Li(v,g.confirm(C))}})).apply(this,arguments)}class Qy{constructor(m,g){this.resolver=g,this.auth=function Zy(v){return v.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Li(zm(this.auth),this.resolver.resolveSignIn(m))}}class Ws{constructor(m){this._delegate=m,this.multiFactor=function ca(v){const m=(0,B.m9)(v);return gm.has(m)||gm.set(m,mm._fromUser(m)),gm.get(m)}(m)}static getOrCreate(m){return Ws.USER_MAP.has(m)||Ws.USER_MAP.set(m,new Ws(m)),Ws.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var g=this;return(0,u.Z)(function*(){return Li(g.auth,zi(g._delegate,m))})()}linkWithPhoneNumber(m,g){var C=this;return(0,u.Z)(function*(){return Wh(C.auth,function xC(v,m,g){return bh.apply(this,arguments)}(C._delegate,m,g))})()}linkWithPopup(m){var g=this;return(0,u.Z)(function*(){return Li(g.auth,function Dm(v,m,g){return Mu.apply(this,arguments)}(g._delegate,m,Oo))})()}linkWithRedirect(m){var g=this;return(0,u.Z)(function*(){return yield zh(at(g.auth)),function Th(v,m,g){return function ol(v,m,g){return Ru.apply(this,arguments)}(v,m,g)}(g._delegate,m,Oo)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var g=this;return(0,u.Z)(function*(){return Li(g.auth,sa(g._delegate,m))})()}reauthenticateWithPhoneNumber(m,g){return Wh(this.auth,function Ar(v,m,g){return Mr.apply(this,arguments)}(this._delegate,m,g))}reauthenticateWithPopup(m){return Li(this.auth,function _s(v,m,g){return Au.apply(this,arguments)}(this._delegate,m,Oo))}reauthenticateWithRedirect(m){var g=this;return(0,u.Z)(function*(){return yield zh(at(g.auth)),function Pn(v,m,g){return function Sm(v,m,g){return ys.apply(this,arguments)}(v,m,g)}(g._delegate,m,Oo)})()}sendEmailVerification(m){return function wy(v,m){return wu.apply(this,arguments)}(this._delegate,m)}unlink(m){var g=this;return(0,u.Z)(function*(){return yield function jA(v,m){return gn.apply(this,arguments)}(g._delegate,m),g})()}updateEmail(m){return function EC(v,m){return Xl((0,B.m9)(v),m,null)}(this._delegate,m)}updatePassword(m){return function Dy(v,m){return Xl((0,B.m9)(v),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function sc(v,m){return Tu.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function Ey(v,m){return Ql.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,g){return function Cy(v,m,g){return uh.apply(this,arguments)}(this._delegate,m,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ws.USER_MAP=new WeakMap;const bc=j;let Yh=(()=>{class v{constructor(g,C){if(this.app=g,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;bc(T,"invalid-api-key",{appName:g.name}),bc(T,"invalid-api-key",{appName:g.name});const k="undefined"!=typeof window?Oo:void 0;this._delegate=C.initialize({options:{persistence:Ea(T,g.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(Le),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ws.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,C){!function ji(v,m,g){const C=at(v);j(C._canInitEmulator,C,"emulator-config-failed"),j(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),k=ho(m),{host:z,port:re}=function ii(v){const m=ho(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(m.length));if(!g)return{host:"",port:null};const C=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(C);if(T){const k=T[1];return{host:k,port:hs(C.substr(k.length+1))}}{const[k,z]=C.split(":");return{host:k,port:hs(z)}}}(m);C.config.emulator={url:`${k}//${z}${null===re?"":`:${re}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:z,port:re,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function In(){function v(){const m=document.createElement("p"),g=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,C)}applyActionCode(g){return function ve(v,m){return Ot.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return dm(this._delegate,g)}confirmPasswordReset(g,C){return function by(v,m,g){return lh.apply(this,arguments)}(this._delegate,g,C)}createUserWithEmailAndPassword(g,C){var T=this;return(0,u.Z)(function*(){return Li(T._delegate,function jr(v,m,g){return Kl.apply(this,arguments)}(T._delegate,g,C))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Qa(v,m){return Gr.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function yu(v,m){const g=lu.parseLink(m);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){bc($u(),g._delegate,"operation-not-supported-in-this-environment");const C=yield function Ry(v,m){return al.apply(this,arguments)}(g._delegate,Oo);return C?Li(g._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function ju(v,m){at(v)._logFramework(m)}(this._delegate,g)}onAuthStateChanged(g,C,T){const{next:k,error:z,complete:re}=Xy(g,C,T);return this._delegate.onAuthStateChanged(k,z,re)}onIdTokenChanged(g,C,T){const{next:k,error:z,complete:re}=Xy(g,C,T);return this._delegate.onIdTokenChanged(k,z,re)}sendSignInLinkToEmail(g,C){return function CC(v,m,g){return _u.apply(this,arguments)}(this._delegate,g,C)}sendPasswordResetEmail(g,C){return function vy(v,m,g){return mu.apply(this,arguments)}(this._delegate,g,C||void 0)}setPersistence(g){var C=this;return(0,u.Z)(function*(){let T;switch(function qy(v,m){vc(Object.values(Ii).includes(m),v,"invalid-persistence-type"),(0,B.b$)()?vc(m!==Ii.SESSION,v,"unsupported-persistence-type"):(0,B.UG)()?vc(m===Ii.NONE,v,"unsupported-persistence-type"):_c()?vc(m===Ii.NONE||m===Ii.LOCAL&&(0,B.hl)(),v,"unsupported-persistence-type"):vc(m===Ii.NONE||jm(),v,"unsupported-persistence-type")}(C._delegate,g),g){case Ii.SESSION:T=cn;break;case Ii.LOCAL:T=(yield Q(si)._isAvailable())?si:Mt;break;case Ii.NONE:T=L;break;default:return Ie("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Li(this._delegate,function wC(v){return rh.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Li(this._delegate,Ka(this._delegate,g))}signInWithCustomToken(g){return Li(this._delegate,function fu(v,m){return pt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,C){return Li(this._delegate,function ch(v,m,g){return Ka((0,B.m9)(v),lm.credential(m,g))}(this._delegate,g,C))}signInWithEmailLink(g,C){return Li(this._delegate,function vu(v,m,g){return ri.apply(this,arguments)}(this._delegate,g,C))}signInWithPhoneNumber(g,C){return Wh(this._delegate,function vh(v,m,g){return ga.apply(this,arguments)}(this._delegate,g,C))}signInWithPopup(g){var C=this;return(0,u.Z)(function*(){return bc($u(),C._delegate,"operation-not-supported-in-this-environment"),Li(C._delegate,function Em(v,m,g){return Ch.apply(this,arguments)}(C._delegate,g,Oo))})()}signInWithRedirect(g){var C=this;return(0,u.Z)(function*(){return bc($u(),C._delegate,"operation-not-supported-in-this-environment"),yield zh(C._delegate),function Eo(v,m,g){return function Do(v,m,g){return Rt.apply(this,arguments)}(v,m,g)}(C._delegate,g,Oo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function gu(v,m){return oa.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ii,v})();function Xy(v,m,g){let C=v;"function"!=typeof v&&({next:C,error:m,complete:g}=v);const T=C;return{next:z=>T(z&&Ws.getOrCreate(z)),error:m,complete:g}}function Ea(v,m){const g=function Wy(v,m){const g=$m();if(!g)return[];const C=q(ko,v,m);switch(g.getItem(C)){case Ii.NONE:return[L];case Ii.LOCAL:return[si,cn];case Ii.SESSION:return[cn];default:return[]}}(v,m);if("undefined"!=typeof self&&!g.includes(si)&&g.push(si),"undefined"!=typeof window)for(const C of[Mt,cn])g.includes(C)||g.push(C);return g.includes(L)||g.push(L),g}class cr{constructor(){this.providerId="phone",this._delegate=new oc(zm(te.Z.auth()))}static credential(m,g){return oc.credential(m,g)}verifyPhoneNumber(m,g){return this._delegate.verifyPhoneNumber(m,g)}unwrap(){return this._delegate}}cr.PHONE_SIGN_IN_METHOD=oc.PHONE_SIGN_IN_METHOD,cr.PROVIDER_ID=oc.PROVIDER_ID;const Jy=j;class ev{constructor(m,g,C=te.Z.app()){var T;Jy(null===(T=C.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new ma(m,g,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function FC(v){v.INTERNAL.registerComponent(new le.wA("auth-compat",m=>{const g=m.getProvider("app-compat").getImmediate(),C=m.getProvider("auth");return new Yh(g,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:lm,FacebookAuthProvider:ql,GithubAuthProvider:_y,GoogleAuthProvider:cm,OAuthProvider:fs,SAMLAuthProvider:qa,PhoneAuthProvider:cr,PhoneMultiFactorGenerator:Pm,RecaptchaVerifier:ev,TwitterAuthProvider:um,Auth:Yh,AuthCredential:Vr,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.24")}(te.Z)},8306:(Ke,me,F)=>{"use strict";F.d(me,{y:()=>G});var u=F(930),te=F(727),B=F(8822),he=F(4671);var le=F(2416),_e=F(576),Se=F(2806);let G=(()=>{class Te{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const ee=new Te;return ee.source=this,ee.operator=Fe,ee}subscribe(Fe,ee,Ee){const We=function Be(Te){return Te&&Te instanceof u.Lv||function X(Te){return Te&&(0,_e.m)(Te.next)&&(0,_e.m)(Te.error)&&(0,_e.m)(Te.complete)}(Te)&&(0,te.Nn)(Te)}(Fe)?Fe:new u.Hp(Fe,ee,Ee);return(0,Se.x)(()=>{const{operator:et,source:Ie}=this;We.add(et?et.call(We,Ie):Ie?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(ee){Fe.error(ee)}}forEach(Fe,ee){return new(ee=$(ee))((Ee,We)=>{const et=new u.Hp({next:Ie=>{try{Fe(Ie)}catch(ae){We(ae),et.unsubscribe()}},error:We,complete:Ee});this.subscribe(et)})}_subscribe(Fe){var ee;return null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(Fe)}[B.L](){return this}pipe(...Fe){return function be(Te){return 0===Te.length?he.y:1===Te.length?Te[0]:function(Fe){return Te.reduce((ee,Ee)=>Ee(ee),Fe)}}(Fe)(this)}toPromise(Fe){return new(Fe=$(Fe))((ee,Ee)=>{let We;this.subscribe(et=>We=et,et=>Ee(et),()=>ee(We))})}}return Te.create=Le=>new Te(Le),Te})();function $(Te){var Le;return null!==(Le=null!=Te?Te:le.v.Promise)&&void 0!==Le?Le:Promise}},7579:(Ke,me,F)=>{"use strict";F.d(me,{x:()=>le});var u=F(8306),te=F(727);const he=(0,F(3888).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=F(8737),be=F(2806);let le=(()=>{class Se extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const X=new _e(this,this);return X.operator=$,X}_throwIfClosed(){if(this.closed)throw new he}next($){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next($)}})}error($){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:X}=this;for(;X.length;)X.shift().error($)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:X,isStopped:Be,observers:Te}=this;return X||Be?te.Lc:(this.currentObservers=null,Te.push($),new te.w0(()=>{this.currentObservers=null,(0,we.P)(Te,$)}))}_checkFinalizedStatuses($){const{hasError:X,thrownError:Be,isStopped:Te}=this;X?$.error(Be):Te&&$.complete()}asObservable(){const $=new u.y;return $.source=this,$}}return Se.create=(G,$)=>new _e(G,$),Se})();class _e extends le{constructor(G,$){super(),this.destination=G,this.source=$}next(G){var $,X;null===(X=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===X||X.call($,G)}error(G){var $,X;null===(X=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===X||X.call($,G)}complete(){var G,$;null===($=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===$||$.call(G)}_subscribe(G){var $,X;return null!==(X=null===($=this.source)||void 0===$?void 0:$.subscribe(G))&&void 0!==X?X:te.Lc}}},930:(Ke,me,F)=>{"use strict";F.d(me,{Hp:()=>Fe,Lv:()=>X});var u=F(576),te=F(727),B=F(2416),he=F(7849),we=F(5032);const be=Se("C",void 0,void 0);function Se(Ie,ae,pe){return{kind:Ie,value:ae,error:pe}}var G=F(3410),$=F(2806);class X extends te.w0{constructor(ae){super(),this.isStopped=!1,ae?(this.destination=ae,(0,te.Nn)(ae)&&ae.add(this)):this.destination=et}static create(ae,pe,Ne){return new Fe(ae,pe,Ne)}next(ae){this.isStopped?We(function _e(Ie){return Se("N",Ie,void 0)}(ae),this):this._next(ae)}error(ae){this.isStopped?We(function le(Ie){return Se("E",void 0,Ie)}(ae),this):(this.isStopped=!0,this._error(ae))}complete(){this.isStopped?We(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ae){this.destination.next(ae)}_error(ae){try{this.destination.error(ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Te(Ie,ae){return Be.call(Ie,ae)}class Le{constructor(ae){this.partialObserver=ae}next(ae){const{partialObserver:pe}=this;if(pe.next)try{pe.next(ae)}catch(Ne){ee(Ne)}}error(ae){const{partialObserver:pe}=this;if(pe.error)try{pe.error(ae)}catch(Ne){ee(Ne)}else ee(ae)}complete(){const{partialObserver:ae}=this;if(ae.complete)try{ae.complete()}catch(pe){ee(pe)}}}class Fe extends X{constructor(ae,pe,Ne){let Ge;if(super(),(0,u.m)(ae)||!ae)Ge={next:null!=ae?ae:void 0,error:null!=pe?pe:void 0,complete:null!=Ne?Ne:void 0};else{let j;this&&B.v.useDeprecatedNextContext?(j=Object.create(ae),j.unsubscribe=()=>this.unsubscribe(),Ge={next:ae.next&&Te(ae.next,j),error:ae.error&&Te(ae.error,j),complete:ae.complete&&Te(ae.complete,j)}):Ge=ae}this.destination=new Le(Ge)}}function ee(Ie){B.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ie):(0,he.h)(Ie)}function We(Ie,ae){const{onStoppedNotification:pe}=B.v;pe&&G.z.setTimeout(()=>pe(Ie,ae))}const et={closed:!0,next:we.Z,error:function Ee(Ie){throw Ie},complete:we.Z}},727:(Ke,me,F)=>{"use strict";F.d(me,{Lc:()=>be,w0:()=>we,Nn:()=>le});var u=F(576);const B=(0,F(3888).d)(Se=>function($){Se(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((X,Be)=>`${Be+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var he=F(8737);class we{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Te of $)Te.remove(this);else $.remove(this);const{initialTeardown:X}=this;if((0,u.m)(X))try{X()}catch(Te){G=Te instanceof B?Te.errors:[Te]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Te of Be)try{_e(Te)}catch(Le){G=null!=G?G:[],Le instanceof B?G=[...G,...Le.errors]:G.push(Le)}}if(G)throw new B(G)}}add(G){var $;if(G&&G!==this)if(this.closed)_e(G);else{if(G instanceof we){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(G)}}_hasParent(G){const{_parentage:$}=this;return $===G||Array.isArray($)&&$.includes(G)}_addParent(G){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(G),$):$?[$,G]:G}_removeParent(G){const{_parentage:$}=this;$===G?this._parentage=null:Array.isArray($)&&(0,he.P)($,G)}remove(G){const{_finalizers:$}=this;$&&(0,he.P)($,G),G instanceof we&&G._removeParent(this)}}we.EMPTY=(()=>{const Se=new we;return Se.closed=!0,Se})();const be=we.EMPTY;function le(Se){return Se instanceof we||Se&&"closed"in Se&&(0,u.m)(Se.remove)&&(0,u.m)(Se.add)&&(0,u.m)(Se.unsubscribe)}function _e(Se){(0,u.m)(Se)?Se():Se.unsubscribe()}},2416:(Ke,me,F)=>{"use strict";F.d(me,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ke,me,F)=>{"use strict";F.d(me,{E:()=>te});const te=new(F(8306).y)(we=>we.complete())},8996:(Ke,me,F)=>{"use strict";F.d(me,{D:()=>ae});var u=F(8421),te=F(5363),B=F(9468),be=F(8306),_e=F(2202),Se=F(576),G=F(9672);function X(pe,Ne){if(!pe)throw new Error("Iterable cannot be null");return new be.y(Ge=>{(0,G.f)(Ge,Ne,()=>{const j=pe[Symbol.asyncIterator]();(0,G.f)(Ge,Ne,()=>{j.next().then(fe=>{fe.done?Ge.complete():Ge.next(fe.value)})},0,!0)})})}var Be=F(3670),Te=F(8239),Le=F(1144),Fe=F(6495),ee=F(2206),Ee=F(4532),We=F(3260);function ae(pe,Ne){return Ne?function Ie(pe,Ne){if(null!=pe){if((0,Be.c)(pe))return function he(pe,Ne){return(0,u.Xf)(pe).pipe((0,B.R)(Ne),(0,te.Q)(Ne))}(pe,Ne);if((0,Le.z)(pe))return function le(pe,Ne){return new be.y(Ge=>{let j=0;return Ne.schedule(function(){j===pe.length?Ge.complete():(Ge.next(pe[j++]),Ge.closed||this.schedule())})})}(pe,Ne);if((0,Te.t)(pe))return function we(pe,Ne){return(0,u.Xf)(pe).pipe((0,B.R)(Ne),(0,te.Q)(Ne))}(pe,Ne);if((0,ee.D)(pe))return X(pe,Ne);if((0,Fe.T)(pe))return function $(pe,Ne){return new be.y(Ge=>{let j;return(0,G.f)(Ge,Ne,()=>{j=pe[_e.h](),(0,G.f)(Ge,Ne,()=>{let fe,W;try{({value:fe,done:W}=j.next())}catch(J){return void Ge.error(J)}W?Ge.complete():Ge.next(fe)},0,!0)}),()=>(0,Se.m)(null==j?void 0:j.return)&&j.return()})}(pe,Ne);if((0,We.L)(pe))return function et(pe,Ne){return X((0,We.Q)(pe),Ne)}(pe,Ne)}throw(0,Ee.z)(pe)}(pe,Ne):(0,u.Xf)(pe)}},8421:(Ke,me,F)=>{"use strict";F.d(me,{Xf:()=>Be});var u=F(655),te=F(1144),B=F(8239),he=F(8306),we=F(3670),be=F(2206),le=F(4532),_e=F(6495),Se=F(3260),G=F(576),$=F(7849),X=F(8822);function Be(Ie){if(Ie instanceof he.y)return Ie;if(null!=Ie){if((0,we.c)(Ie))return function Te(Ie){return new he.y(ae=>{const pe=Ie[X.L]();if((0,G.m)(pe.subscribe))return pe.subscribe(ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,te.z)(Ie))return function Le(Ie){return new he.y(ae=>{for(let pe=0;pe<Ie.length&&!ae.closed;pe++)ae.next(Ie[pe]);ae.complete()})}(Ie);if((0,B.t)(Ie))return function Fe(Ie){return new he.y(ae=>{Ie.then(pe=>{ae.closed||(ae.next(pe),ae.complete())},pe=>ae.error(pe)).then(null,$.h)})}(Ie);if((0,be.D)(Ie))return Ee(Ie);if((0,_e.T)(Ie))return function ee(Ie){return new he.y(ae=>{for(const pe of Ie)if(ae.next(pe),ae.closed)return;ae.complete()})}(Ie);if((0,Se.L)(Ie))return function We(Ie){return Ee((0,Se.Q)(Ie))}(Ie)}throw(0,le.z)(Ie)}function Ee(Ie){return new he.y(ae=>{(function et(Ie,ae){var pe,Ne,Ge,j;return(0,u.mG)(this,void 0,void 0,function*(){try{for(pe=(0,u.KL)(Ie);!(Ne=yield pe.next()).done;)if(ae.next(Ne.value),ae.closed)return}catch(fe){Ge={error:fe}}finally{try{Ne&&!Ne.done&&(j=pe.return)&&(yield j.call(pe))}finally{if(Ge)throw Ge.error}}ae.complete()})})(Ie,ae).catch(pe=>ae.error(pe))})}},6451:(Ke,me,F)=>{"use strict";F.d(me,{T:()=>be});var u=F(8189),te=F(8421),B=F(515),he=F(3269),we=F(8996);function be(...le){const _e=(0,he.yG)(le),Se=(0,he._6)(le,1/0),G=le;return G.length?1===G.length?(0,te.Xf)(G[0]):(0,u.J)(Se)((0,we.D)(G,_e)):B.E}},5403:(Ke,me,F)=>{"use strict";F.d(me,{x:()=>te});var u=F(930);function te(he,we,be,le,_e){return new B(he,we,be,le,_e)}class B extends u.Lv{constructor(we,be,le,_e,Se,G){super(we),this.onFinalize=Se,this.shouldUnsubscribe=G,this._next=be?function($){try{be($)}catch(X){we.error(X)}}:super._next,this._error=_e?function($){try{_e($)}catch(X){we.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){we.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4004:(Ke,me,F)=>{"use strict";F.d(me,{U:()=>B});var u=F(4482),te=F(5403);function B(he,we){return(0,u.e)((be,le)=>{let _e=0;be.subscribe((0,te.x)(le,Se=>{le.next(he.call(we,Se,_e++))}))})}},8189:(Ke,me,F)=>{"use strict";F.d(me,{J:()=>B});var u=F(5577),te=F(4671);function B(he=1/0){return(0,u.z)(te.y,he)}},5577:(Ke,me,F)=>{"use strict";F.d(me,{z:()=>_e});var u=F(4004),te=F(8421),B=F(4482),he=F(9672),we=F(5403),le=F(576);function _e(Se,G,$=1/0){return(0,le.m)(G)?_e((X,Be)=>(0,u.U)((Te,Le)=>G(X,Te,Be,Le))((0,te.Xf)(Se(X,Be))),$):("number"==typeof G&&($=G),(0,B.e)((X,Be)=>function be(Se,G,$,X,Be,Te,Le,Fe){const ee=[];let Ee=0,We=0,et=!1;const Ie=()=>{et&&!ee.length&&!Ee&&G.complete()},ae=Ne=>Ee<X?pe(Ne):ee.push(Ne),pe=Ne=>{Te&&G.next(Ne),Ee++;let Ge=!1;(0,te.Xf)($(Ne,We++)).subscribe((0,we.x)(G,j=>{null==Be||Be(j),Te?ae(j):G.next(j)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(Ee--;ee.length&&Ee<X;){const j=ee.shift();Le?(0,he.f)(G,Le,()=>pe(j)):pe(j)}Ie()}catch(j){G.error(j)}}))};return Se.subscribe((0,we.x)(G,ae,()=>{et=!0,Ie()})),()=>{null==Fe||Fe()}}(X,Be,Se,$)))}},5363:(Ke,me,F)=>{"use strict";F.d(me,{Q:()=>he});var u=F(9672),te=F(4482),B=F(5403);function he(we,be=0){return(0,te.e)((le,_e)=>{le.subscribe((0,B.x)(_e,Se=>(0,u.f)(_e,we,()=>_e.next(Se),be),()=>(0,u.f)(_e,we,()=>_e.complete(),be),Se=>(0,u.f)(_e,we,()=>_e.error(Se),be)))})}},3099:(Ke,me,F)=>{"use strict";F.d(me,{B:()=>we});var u=F(8421),te=F(7579),B=F(930),he=F(4482);function we(le={}){const{connector:_e=(()=>new te.x),resetOnError:Se=!0,resetOnComplete:G=!0,resetOnRefCountZero:$=!0}=le;return X=>{let Be,Te,Le,Fe=0,ee=!1,Ee=!1;const We=()=>{null==Te||Te.unsubscribe(),Te=void 0},et=()=>{We(),Be=Le=void 0,ee=Ee=!1},Ie=()=>{const ae=Be;et(),null==ae||ae.unsubscribe()};return(0,he.e)((ae,pe)=>{Fe++,!Ee&&!ee&&We();const Ne=Le=null!=Le?Le:_e();pe.add(()=>{Fe--,0===Fe&&!Ee&&!ee&&(Te=be(Ie,$))}),Ne.subscribe(pe),!Be&&Fe>0&&(Be=new B.Hp({next:Ge=>Ne.next(Ge),error:Ge=>{Ee=!0,We(),Te=be(et,Se,Ge),Ne.error(Ge)},complete:()=>{ee=!0,We(),Te=be(et,G),Ne.complete()}}),(0,u.Xf)(ae).subscribe(Be))})(X)}}function be(le,_e,...Se){if(!0===_e)return void le();if(!1===_e)return;const G=new B.Hp({next:()=>{G.unsubscribe(),le()}});return _e(...Se).subscribe(G)}},9468:(Ke,me,F)=>{"use strict";F.d(me,{R:()=>te});var u=F(4482);function te(B,he=0){return(0,u.e)((we,be)=>{be.add(B.schedule(()=>we.subscribe(be),he))})}},3410:(Ke,me,F)=>{"use strict";F.d(me,{z:()=>u});const u={setTimeout(te,B,...he){const{delegate:we}=u;return(null==we?void 0:we.setTimeout)?we.setTimeout(te,B,...he):setTimeout(te,B,...he)},clearTimeout(te){const{delegate:B}=u;return((null==B?void 0:B.clearTimeout)||clearTimeout)(te)},delegate:void 0}},2202:(Ke,me,F)=>{"use strict";F.d(me,{h:()=>te});const te=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ke,me,F)=>{"use strict";F.d(me,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ke,me,F)=>{"use strict";F.d(me,{jO:()=>he,yG:()=>we,_6:()=>be});var u=F(576),te=F(3532);function B(le){return le[le.length-1]}function he(le){return(0,u.m)(B(le))?le.pop():void 0}function we(le){return(0,te.K)(B(le))?le.pop():void 0}function be(le,_e){return"number"==typeof B(le)?le.pop():_e}},8737:(Ke,me,F)=>{"use strict";function u(te,B){if(te){const he=te.indexOf(B);0<=he&&te.splice(he,1)}}F.d(me,{P:()=>u})},3888:(Ke,me,F)=>{"use strict";function u(te){const he=te(we=>{Error.call(we),we.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}F.d(me,{d:()=>u})},2806:(Ke,me,F)=>{"use strict";F.d(me,{x:()=>B,O:()=>he});var u=F(2416);let te=null;function B(we){if(u.v.useDeprecatedSynchronousErrorHandling){const be=!te;if(be&&(te={errorThrown:!1,error:null}),we(),be){const{errorThrown:le,error:_e}=te;if(te=null,le)throw _e}}else we()}function he(we){u.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=we)}},9672:(Ke,me,F)=>{"use strict";function u(te,B,he,we=0,be=!1){const le=B.schedule(function(){he(),be?te.add(this.schedule(null,we)):this.unsubscribe()},we);if(te.add(le),!be)return le}F.d(me,{f:()=>u})},4671:(Ke,me,F)=>{"use strict";function u(te){return te}F.d(me,{y:()=>u})},1144:(Ke,me,F)=>{"use strict";F.d(me,{z:()=>u});const u=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(Ke,me,F)=>{"use strict";F.d(me,{D:()=>te});var u=F(576);function te(B){return Symbol.asyncIterator&&(0,u.m)(null==B?void 0:B[Symbol.asyncIterator])}},576:(Ke,me,F)=>{"use strict";function u(te){return"function"==typeof te}F.d(me,{m:()=>u})},3670:(Ke,me,F)=>{"use strict";F.d(me,{c:()=>B});var u=F(8822),te=F(576);function B(he){return(0,te.m)(he[u.L])}},6495:(Ke,me,F)=>{"use strict";F.d(me,{T:()=>B});var u=F(2202),te=F(576);function B(he){return(0,te.m)(null==he?void 0:he[u.h])}},8239:(Ke,me,F)=>{"use strict";F.d(me,{t:()=>te});var u=F(576);function te(B){return(0,u.m)(null==B?void 0:B.then)}},3260:(Ke,me,F)=>{"use strict";F.d(me,{Q:()=>B,L:()=>he});var u=F(655),te=F(576);function B(we){return(0,u.FC)(this,arguments,function*(){const le=we.getReader();try{for(;;){const{value:_e,done:Se}=yield(0,u.qq)(le.read());if(Se)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(_e)}}finally{le.releaseLock()}})}function he(we){return(0,te.m)(null==we?void 0:we.getReader)}},3532:(Ke,me,F)=>{"use strict";F.d(me,{K:()=>te});var u=F(576);function te(B){return B&&(0,u.m)(B.schedule)}},4482:(Ke,me,F)=>{"use strict";F.d(me,{A:()=>te,e:()=>B});var u=F(576);function te(he){return(0,u.m)(null==he?void 0:he.lift)}function B(he){return we=>{if(te(we))return we.lift(function(be){try{return he(be,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ke,me,F)=>{"use strict";function u(){}F.d(me,{Z:()=>u})},7849:(Ke,me,F)=>{"use strict";F.d(me,{h:()=>B});var u=F(2416),te=F(3410);function B(he){te.z.setTimeout(()=>{const{onUnhandledError:we}=u.v;if(!we)throw he;we(he)})}},4532:(Ke,me,F)=>{"use strict";function u(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(me,{z:()=>u})},9185:Ke=>{Ke.exports=function(F){return!!/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(F)}},655:(Ke,me,F)=>{"use strict";function he(W,J){var Q={};for(var ce in W)Object.prototype.hasOwnProperty.call(W,ce)&&J.indexOf(ce)<0&&(Q[ce]=W[ce]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(ce=Object.getOwnPropertySymbols(W);se<ce.length;se++)J.indexOf(ce[se])<0&&Object.prototype.propertyIsEnumerable.call(W,ce[se])&&(Q[ce[se]]=W[ce[se]])}return Q}function _e(W,J,Q,ce){return new(Q||(Q=Promise))(function(ke,st){function Qt(tn){try{Ze(ce.next(tn))}catch(Wn){st(Wn)}}function Nt(tn){try{Ze(ce.throw(tn))}catch(Wn){st(Wn)}}function Ze(tn){tn.done?ke(tn.value):function se(ke){return ke instanceof Q?ke:new Q(function(st){st(ke)})}(tn.value).then(Qt,Nt)}Ze((ce=ce.apply(W,J||[])).next())})}function ee(W){return this instanceof ee?(this.v=W,this):new ee(W)}function Ee(W,J,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,ce=Q.apply(W,J||[]),ke=[];return se={},st("next"),st("throw"),st("return"),se[Symbol.asyncIterator]=function(){return this},se;function st(En){ce[En]&&(se[En]=function(nn){return new Promise(function(Hi,Gt){ke.push([En,nn,Hi,Gt])>1||Qt(En,nn)})})}function Qt(En,nn){try{!function Nt(En){En.value instanceof ee?Promise.resolve(En.value.v).then(Ze,tn):Wn(ke[0][2],En)}(ce[En](nn))}catch(Hi){Wn(ke[0][3],Hi)}}function Ze(En){Qt("next",En)}function tn(En){Qt("throw",En)}function Wn(En,nn){En(nn),ke.shift(),ke.length&&Qt(ke[0][0],ke[0][1])}}function et(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,J=W[Symbol.asyncIterator];return J?J.call(W):(W=function X(W){var J="function"==typeof Symbol&&Symbol.iterator,Q=J&&W[J],ce=0;if(Q)return Q.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ce>=W.length&&(W=void 0),{value:W&&W[ce++],done:!W}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),Q={},ce("next"),ce("throw"),ce("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function ce(ke){Q[ke]=W[ke]&&function(st){return new Promise(function(Qt,Nt){!function se(ke,st,Qt,Nt){Promise.resolve(Nt).then(function(Ze){ke({value:Ze,done:Qt})},st)}(Qt,Nt,(st=W[ke](st)).done,st.value)})}}}F.d(me,{_T:()=>he,mG:()=>_e,qq:()=>ee,FC:()=>Ee,KL:()=>et})},5e3:(Ke,me,F)=>{"use strict";F.d(me,{deG:()=>My,tb:()=>nw,AFp:()=>PR,ip1:()=>OR,CZH:()=>TI,hGG:()=>ik,z2F:()=>FI,sBO:()=>KR,Sil:()=>UR,_Vd:()=>Hf,EJc:()=>LR,SBq:()=>md,qLn:()=>zu,vpe:()=>Xr,tBr:()=>zr,XFs:()=>gt,OlP:()=>bn,zs3:()=>Bo,ZZ4:()=>WI,aQg:()=>ZI,soG:()=>iw,YKP:()=>qD,h0i:()=>Oc,PXZ:()=>zR,R0b:()=>pr,FiY:()=>Io,Lbi:()=>tw,g9A:()=>ew,n_E:()=>qf,Qsj:()=>Xx,FYo:()=>jD,JOm:()=>v,q3G:()=>$t,tp0:()=>ba,Rgc:()=>gd,dDg:()=>sw,GfV:()=>Al,s_b:()=>Jg,ifc:()=>Yt,eFA:()=>ow,G48:()=>Jf,Gpc:()=>$,f3M:()=>ys,X6Q:()=>Xf,_c5:()=>YV,VLi:()=>RV,c2e:()=>MI,zSh:()=>$v,wAp:()=>ut,vHH:()=>Le,EiD:()=>Uu,mCW:()=>fc,qzn:()=>qr,JVY:()=>dc,pB0:()=>hc,eBb:()=>Ph,L6k:()=>Om,LAX:()=>By,cg1:()=>Og,kL8:()=>Eb,yhl:()=>fl,dqk:()=>qt,sIi:()=>yf,CqO:()=>ZM,QGY:()=>jE,F4k:()=>WM,RDi:()=>sh,AaK:()=>_e,z3N:()=>$s,qOj:()=>Xv,TTD:()=>fs,_Bn:()=>Vf,xp6:()=>cv,uIk:()=>nb,ekj:()=>hb,Suo:()=>hI,Xpm:()=>yt,lG2:()=>It,Yz7:()=>nn,cJS:()=>Gt,oAB:()=>de,Yjl:()=>mn,Y36:()=>Dg,_UZ:()=>UE,GkF:()=>HE,BQk:()=>ab,ynx:()=>ob,qZA:()=>sb,TgZ:()=>rb,EpF:()=>qM,n5z:()=>bm,Ikx:()=>cD,LFG:()=>Pn,$8M:()=>Yn,$Z:()=>zM,NdJ:()=>GE,CRH:()=>fI,O4$:()=>Sy,oxw:()=>QM,Hsn:()=>JM,F$t:()=>XM,Q6J:()=>BE,DdM:()=>YD,VKq:()=>KD,iGM:()=>uI,MAs:()=>PM,CHM:()=>dm,LSH:()=>ml,Udp:()=>XE,WFA:()=>$E,d8E:()=>Kr,YNc:()=>OM,_uU:()=>iD,Oqu:()=>gb,hij:()=>_b,Gf:()=>dI});var u=F(7579),te=F(727),B=F(8306),he=F(6451),we=F(3099);function be(o){for(let a in o)if(o[a]===be)return a;throw Error("Could not find renamed property on target object.")}function le(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function _e(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(_e).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function Se(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const G=be({__forward_ref__:be});function $(o){return o.__forward_ref__=$,o.toString=function(){return _e(this())},o}function X(o){return Be(o)?o():o}function Be(o){return"function"==typeof o&&o.hasOwnProperty(G)&&o.__forward_ref__===$}class Le extends Error{constructor(a,c){super(function Fe(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,c)),this.code=a}}function ee(o){return"string"==typeof o?o:null==o?"":String(o)}function Ee(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ee(o)}function ae(o,a){const c=a?` in ${a}`:"";throw new Le(-201,`No provider for ${Ee(o)} found${c}`)}function Nt(o,a){null==o&&function Ze(o,a,c,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${c} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function nn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Gt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Lt(o){return ir(o,us)||ir(o,Yo)}function ir(o,a){return o.hasOwnProperty(a)?o[a]:null}function sr(o){return o&&(o.hasOwnProperty(xs)||o.hasOwnProperty(Rs))?o[xs]:null}const us=be({\u0275prov:be}),xs=be({\u0275inj:be}),Yo=be({ngInjectableDef:be}),Rs=be({ngInjectorDef:be});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let Br;function Ai(o){const a=Br;return Br=o,a}function Ua(o,a,c){const h=Lt(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&gt.Optional?null:void 0!==a?a:void ae(_e(o),"Injector")}function Ci(o){return{toString:o}.toString()}var ti=(()=>((ti=ti||{})[ti.OnPush=0]="OnPush",ti[ti.Default=1]="Default",ti))(),Yt=(()=>{return(o=Yt||(Yt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Yt;var o})();const nt="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,Mi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,qt=nt||"undefined"!=typeof global&&global||_t||Mi,Ri={},ht=[],Xo=be({\u0275cmp:be}),Bt=be({\u0275dir:be}),Jo=be({\u0275pipe:be}),qe=be({\u0275mod:be}),ge=be({\u0275fac:be}),$e=be({__NG_ELEMENT_ID__:be});let vt=0;function yt(o){return Ci(()=>{const c={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===ti.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||ht,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Yt.Emulated,id:"c",styles:o.styles||ht,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,_=o.features,b=o.pipes;return h.id+=vt++,h.inputs=Je(o.inputs,c),h.outputs=Je(o.outputs),_&&_.forEach(E=>E(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(U):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map(L):null,h})}function U(o){return Xt(o)||function dn(o){return o[Bt]||null}(o)}function L(o){return function ni(o){return o[Jo]||null}(o)}const q={};function de(o){return Ci(()=>{const a={type:o.type,bootstrap:o.bootstrap||ht,declarations:o.declarations||ht,imports:o.imports||ht,exports:o.exports||ht,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(q[o.id]=o.type),a})}function Je(o,a){if(null==o)return Ri;const c={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),c[f]=h,a&&(a[f]=_)}return c}const It=yt;function mn(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function Xt(o){return o[Xo]||null}function Ct(o,a){const c=o[qe]||null;if(!c&&!0===a)throw new Error(`Type ${_e(o)} does not have '\u0275mod' property.`);return c}function ki(o){return Array.isArray(o)&&"object"==typeof o[1]}function Ir(o){return Array.isArray(o)&&!0===o[1]}function zl(o){return 0!=(8&o.flags)}function eh(o){return 2==(2&o.flags)}function na(o){return 1==(1&o.flags)}function Ur(o){return null!==o.template}function th(o){return 0!=(512&o[2])}function Pi(o,a){return o.hasOwnProperty(ge)?o[ge]:null}class za{constructor(a,c,h){this.previousValue=a,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function fs(){return ql}function ql(o){return o.type.prototype.ngOnChanges&&(o.setInput=_y),cm}function cm(){const o=_o(this),a=null==o?void 0:o.current;if(a){const c=o.previous;if(c===Ri)o.previous=a;else for(let h in a)c[h]=a[h];o.current=null,this.ngOnChanges(a)}}function _y(o,a,c,h){const f=_o(o)||function yy(o,a){return o[ia]=a}(o,{previous:Ri,current:null}),_=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[c],I=b[E];_[E]=new za(I&&I.currentValue,a,b===Ri),o[h]=a}fs.ngInherit=!0;const ia="__ngSimpleChanges__";function _o(o){return o[ia]||null}let Za;function sh(o){Za=o}function gn(o){return!!o.listen}const uu={createRenderer:(o,a)=>function cu(){return void 0!==Za?Za:"undefined"!=typeof document?document:void 0}()};function ln(o){for(;Array.isArray(o);)o=o[0];return o}function Ya(o,a){return ln(a[o])}function $i(o,a){return ln(a[o.index])}function Ka(o,a){return o.data[a]}function zi(o,a){const c=a[o];return ki(c)?c:c[0]}function ra(o){return 4==(4&o[2])}function sa(o){return 128==(128&o[2])}function Ns(o,a){return null==a?null:o[a]}function yo(o){o[18]=0}function fu(o,a){o[5]+=a;let c=o,h=o[3];for(;null!==h&&(1===a&&1===c[5]||-1===a&&0===c[5]);)h[5]+=a,c=h,h=h[3]}const pt={lFrame:hm(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function mu(){return pt.bindingsEnabled}function ve(){return pt.lFrame.lView}function Ot(){return pt.lFrame.tView}function dm(o){return pt.lFrame.contextLView=o,o[8]}function yn(){let o=gu();for(;null!==o&&64===o.type;)o=o.parent;return o}function gu(){return pt.lFrame.currentTNode}function jr(o,a){const c=pt.lFrame;c.currentTNode=o,c.isParent=a}function Kl(){return pt.lFrame.isParent}function ch(){pt.lFrame.isParent=!1}function yu(){return pt.isInCheckNoChangesMode}function vu(o){pt.isInCheckNoChangesMode=o}function ri(){const o=pt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Qa(){return pt.lFrame.bindingIndex++}function Cy(o,a){const c=pt.lFrame;c.bindingIndex=c.bindingRootIndex=o,dh(a)}function dh(o){pt.lFrame.currentDirectiveIndex=o}function aa(o){const a=pt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Ey(){return pt.lFrame.currentQueryIndex}function Ql(o){pt.lFrame.currentQueryIndex=o}function EC(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Dy(o,a,c){if(c&gt.SkipSelf){let f=a,_=o;for(;!(f=f.parent,null!==f||c&gt.Host||(f=EC(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;a=f,o=_}const h=pt.lFrame=Cu();return h.currentTNode=a,h.lView=o,!0}function Xl(o){const a=Cu(),c=o[1];pt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Cu(){const o=pt.lFrame,a=null===o?null:o.child;return null===a?hm(o):a}function hm(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Xa(){const o=pt.lFrame;return pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const fm=Xa;function Jl(){const o=Xa();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Ni(){return pt.lFrame.selectedIndex}function ms(o){pt.lFrame.selectedIndex=o}function xn(){const o=pt.lFrame;return Ka(o.tView,o.selectedIndex)}function Sy(){pt.lFrame.currentNamespace="svg"}function pm(o,a){for(let c=a.directiveStart,h=a.directiveEnd;c<h;c++){const _=o.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:x}=_;b&&(o.contentHooks||(o.contentHooks=[])).push(-c,b),E&&((o.contentHooks||(o.contentHooks=[])).push(c,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,E)),I&&(o.viewHooks||(o.viewHooks=[])).push(-c,I),M&&((o.viewHooks||(o.viewHooks=[])).push(c,M),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,M)),null!=x&&(o.destroyHooks||(o.destroyHooks=[])).push(c,x)}}function ec(o,a,c){Ty(o,a,3,c)}function Ls(o,a,c,h){(3&o[2])===c&&Ty(o,a,c,h)}function tc(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function Ty(o,a,c,h){const _=null!=h?h:-1,b=a.length-1;let E=0;for(let I=void 0!==h?65535&o[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=h&&E>=h)break}else a[I]<0&&(o[18]+=65536),(E<_||-1==_)&&(TC(o,c,a,I),o[18]=(4294901760&o[18])+I+2),I++}function TC(o,a,c,h){const f=c[h]<0,_=c[h+1],E=o[f?-c[h]:c[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(E)}finally{}}}else try{_.call(E)}finally{}}class Eu{constructor(a,c,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Ye(o,a,c){const h=gn(o);let f=0;for(;f<c.length;){const _=c[f];if("number"==typeof _){if(0!==_)break;f++;const b=c[f++],E=c[f++],I=c[f++];h?o.setAttribute(a,E,I,b):a.setAttributeNS(b,E,I)}else{const b=_,E=c[++f];Fi(b)?h&&o.setProperty(a,b,E):h?o.setAttribute(a,b,E):a.setAttribute(b,E),f++}}return f}function Mt(o){return 3===o||4===o||6===o}function Fi(o){return 64===o.charCodeAt(0)}function cn(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?c=f:0===c||_m(o,c,f,null,-1===c||2===c?a[++h]:null)}}return o}function _m(o,a,c,h,f){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const E=o[_++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=_-1;break}}}for(;_<o.length;){const E=o[_];if("number"==typeof E)break;if(E===c){if(null===h)return void(null!==f&&(o[_+1]=f));if(h===o[_+1])return void(o[_+2]=f)}_++,null!==h&&_++,null!==f&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,c),null!==h&&o.splice(_++,0,h),null!==f&&o.splice(_++,0,f)}function ym(o){return-1!==o}function gs(o){return 32767&o}function _n(o,a){let c=function Ay(o){return o>>16}(o),h=a;for(;c>0;)h=h[15],c--;return h}let fh=!0;function Sr(o){const a=fh;return fh=o,a}let ph=0;function sn(o,a){const c=Iu(o,a);if(-1!==c)return c;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,tl(h.data,o),tl(a,null),tl(h.blueprint,null));const f=bo(o,a),_=o.injectorIndex;if(ym(f)){const b=gs(f),E=_n(f,a),I=E[1].data;for(let M=0;M<8;M++)a[_+M]=E[b+M]|I[b+M]}return a[_+8]=f,_}function tl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Iu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function bo(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,h=null,f=a;for(;null!==f;){const _=f[1],b=_.type;if(h=2===b?_.declTNode:1===b?f[6]:null,null===h)return-1;if(c++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return-1}function wo(o,a,c){!function mh(o,a,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty($e)&&(h=c[$e]),null==h&&(h=c[$e]=ph++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function Bs(o,a,c){if(c&gt.Optional)return o;ae(a,"NodeInjector")}function gh(o,a,c,h){if(c&gt.Optional&&void 0===h&&(h=null),0==(c&(gt.Self|gt.Host))){const f=o[9],_=Ai(void 0);try{return f?f.get(a,h,c&gt.Optional):Ua(a,h,c&gt.Optional)}finally{Ai(_)}}return Bs(h,a,c)}function ua(o,a,c,h=gt.Default,f){if(null!==o){const _=function ha(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty($e)?o[$e]:void 0;return"number"==typeof a?a>=0?255&a:_h:a}(c);if("function"==typeof _){if(!Dy(a,o,h))return h&gt.Host?Bs(f,c,h):gh(a,c,h,f);try{const b=_(h);if(null!=b||h&gt.Optional)return b;ae(c)}finally{fm()}}else if("number"==typeof _){let b=null,E=Iu(o,a),I=-1,M=h&gt.Host?a[16][6]:null;for((-1===E||h&gt.SkipSelf)&&(I=-1===E?bo(o,a):a[E+8],-1!==I&&Rn(h,!1)?(b=a[1],E=gs(I),a=_n(I,a)):E=-1);-1!==E;){const x=a[1];if(si(_,E,x.data)){const N=ic(E,a,c,b,h,M);if(N!==nc)return N}I=a[E+8],-1!==I&&Rn(h,a[1].data[E+8]===M)&&si(_,E,a)?(b=x,E=gs(I),a=_n(I,a)):E=-1}}}return gh(a,c,h,f)}const nc={};function _h(){return new fa(yn(),ve())}function ic(o,a,c,h,f,_){const b=a[1],E=b.data[o+8],x=$r(E,b,c,null==h?eh(E)&&fh:h!=b&&0!=(3&E.type),f&gt.Host&&_===E);return null!==x?da(a,b,x,E):nc}function $r(o,a,c,h,f){const _=o.providerIndexes,b=a.data,E=1048575&_,I=o.directiveStart,x=_>>20,V=f?E+x:o.directiveEnd;for(let K=h?E:E+x;K<V;K++){const ue=b[K];if(K<I&&c===ue||K>=I&&ue.type===c)return K}if(f){const K=b[I];if(K&&Ur(K)&&K.type===c)return I}return null}function da(o,a,c,h){let f=o[c];const _=a.data;if(function mm(o){return o instanceof Eu}(f)){const b=f;b.resolving&&function We(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Le(-200,`Circular dependency in DI detected for ${o}${c}`)}(Ee(_[c]));const E=Sr(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?Ai(b.injectImpl):null;Dy(o,h,gt.Default);try{f=o[c]=b.factory(void 0,_,o,h),a.firstCreatePass&&c>=h.directiveStart&&function SC(o,a,c){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(h){const b=ql(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,b)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),_&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,_))}(c,_[c],a)}finally{null!==I&&Ai(I),Sr(E),b.resolving=!1,fm()}}return f}function si(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function Rn(o,a){return!(o&gt.Self||o&gt.Host&&a)}class fa{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,h){return ua(this._tNode,this._lView,a,h,c)}}function bm(o){return Ci(()=>{const a=o.prototype.constructor,c=a[ge]||vn(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const _=f[ge]||vn(f);if(_&&_!==c)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function vn(o){return Be(o)?()=>{const a=vn(X(o));return a&&a()}:Pi(o)}function Yn(o){return function lr(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const h=c.length;let f=0;for(;f<h;){const _=c[f];if(Mt(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<h&&"string"==typeof c[f];)f++;else{if(_===a)return c[f+1];f+=2}}}return null}(yn(),o)}const pa="__parameters__";function Sn(o,a,c){return Ci(()=>{const h=function mi(o){return function(...c){if(o){const h=o(...c);for(const f in h)this[f]=h[f]}}}(a);function f(..._){if(this instanceof f)return h.apply(this,_),this;const b=new f(..._);return E.annotation=b,E;function E(I,M,x){const N=I.hasOwnProperty(pa)?I[pa]:Object.defineProperty(I,pa,{value:[]})[pa];for(;N.length<=x;)N.push(null);return(N[x]=N[x]||[]).push(b),I}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class bn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=nn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const My=new bn("AnalyzeForEntryComponents");function Ar(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let h=o[c];Array.isArray(h)?(a===o&&(a=o.slice(0,c)),Ar(h,a)):a!==o&&a.push(h)}return a}function Mr(o,a){o.forEach(c=>Array.isArray(c)?Mr(c,a):a(c))}function il(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function _a(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function sc(o,a){const c=[];for(let h=0;h<o;h++)c.push(a);return c}function oi(o,a,c){let h=Vs(o,a);return h>=0?o[1|h]=c:(h=~h,function ya(o,a,c,h){let f=o.length;if(f==a)o.push(c,h);else if(1===f)o.push(h,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=h}}(o,h,a,c)),h}function rl(o,a){const c=Vs(o,a);if(c>=0)return o[1|c]}function Vs(o,a){return function Em(o,a,c){let h=0,f=o.length>>c;for(;f!==h;){const _=h+(f-h>>1),b=o[_<<c];if(a===b)return _<<c;b>a?f=_:h=_+1}return~(f<<c)}(o,a,1)}const ac={},sl="__NG_DI_FLAG__",va="ngTempTokenPath",Im=/\n/gm,xu="__source",Sh=be({provide:String,useValue:be});let Eo;function Do(o){const a=Eo;return Eo=o,a}function Rt(o,a=gt.Default){if(void 0===Eo)throw new Le(203,"");return null===Eo?Ua(o,void 0,a):Eo.get(o,a&gt.Optional?null:void 0,a)}function Pn(o,a=gt.Default){return(function Un(){return Br}()||Rt)(X(o),a)}const ys=Pn;function Th(o){const a=[];for(let c=0;c<o.length;c++){const h=X(o[c]);if(Array.isArray(h)){if(0===h.length)throw new Le(900,"");let f,_=gt.Default;for(let b=0;b<h.length;b++){const E=h[b],I=Ru(E);"number"==typeof I?-1===I?f=E.token:_|=I:f=E}a.push(Pn(f,_))}else a.push(Pn(h))}return a}function ol(o,a){return o[sl]=a,o.prototype[sl]=a,o}function Ru(o){return o[sl]}const zr=ol(Sn("Inject",o=>({token:o})),-1),Io=ol(Sn("Optional"),8),ba=ol(Sn("SkipSelf"),4);let js;function wa(o){var a;return(null===(a=function ku(){if(void 0===js&&(js=null,qt.trustedTypes))try{js=qt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return js}())||void 0===a?void 0:a.createHTML(o))||o}class Gs{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Oh extends Gs{getTypeName(){return"HTML"}}class km extends Gs{getTypeName(){return"Style"}}class uc extends Gs{getTypeName(){return"Script"}}class Fy extends Gs{getTypeName(){return"URL"}}class Ly extends Gs{getTypeName(){return"ResourceURL"}}function $s(o){return o instanceof Gs?o.changingThisBreaksApplicationSecurity:o}function qr(o,a){const c=fl(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}function fl(o){return o instanceof Gs&&o.getTypeName()||null}function dc(o){return new Oh(o)}function Om(o){return new km(o)}function Ph(o){return new uc(o)}function By(o){return new Fy(o)}function hc(o){return new Ly(o)}class Nm{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(wa(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class Fm{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const h=this.inertDocument.createElement("body");c.appendChild(h)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=wa(a),c;const h=this.inertDocument.createElement("body");return h.innerHTML=wa(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const b=c.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Nu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Nh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fc(o){return(o=String(o)).match(Nu)||o.match(Nh)?o:"unsafe:"+o}function Wr(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function Lu(...o){const a={};for(const c of o)for(const h in c)c.hasOwnProperty(h)&&(a[h]=!0);return a}const To=Wr("area,br,col,hr,img,wbr"),Bm=Wr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Bu=Wr("rp,rt"),Fh=Lu(To,Lu(Bm,Wr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Lu(Bu,Wr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Lu(Bu,Bm)),Lh=Wr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pc=Wr("srcset"),Mo=Lu(Lh,pc,Wr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Vy=Wr("script,style,template");class mc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,h=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?h=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,h&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!Fh.hasOwnProperty(c))return this.sanitizedSomething=!0,!Vy.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const h=a.attributes;for(let f=0;f<h.length;f++){const _=h.item(f),b=_.name,E=b.toLowerCase();if(!Mo.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=_.value;Lh[E]&&(I=fc(I)),pc[E]&&(o=I,I=(o=String(o)).split(",").map(a=>fc(a.trim())).join(", ")),this.buf.push(" ",b,'="',Vh(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();Fh.hasOwnProperty(c)&&!To.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(Vh(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const Bh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Uy=/([^\#-~ |!])/g;function Vh(o){return o.replace(/&/g,"&amp;").replace(Bh,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Uy,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pl;function Uu(o,a){let c=null;try{pl=pl||function Pm(o){const a=new Fm(o);return function Lm(){try{return!!(new window.DOMParser).parseFromString(wa(""),"text/html")}catch(o){return!1}}()?new Nm(a):a}(o);let h=a?String(a):"";c=pl.getInertBodyElement(h);let f=5,_=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=_,_=c.innerHTML,c=pl.getInertBodyElement(h)}while(h!==_);return wa((new mc).sanitizeChildren(Uh(c)||c))}finally{if(c){const h=Uh(c)||c;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Uh(o){return"content"in o&&function Hh(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var $t=(()=>(($t=$t||{})[$t.NONE=0]="NONE",$t[$t.HTML=1]="HTML",$t[$t.STYLE=2]="STYLE",$t[$t.SCRIPT=3]="SCRIPT",$t[$t.URL=4]="URL",$t[$t.RESOURCE_URL=5]="RESOURCE_URL",$t))();function ml(o){const a=function Ro(){const o=ve();return o&&o[12]}();return a?a.sanitize($t.URL,o)||"":qr(o,"URL")?$s(o):fc(ee(o))}const Hm="__ngContext__";function Di(o,a){o[Hm]=a}function jh(o){const a=function gc(o){return o[Hm]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function qs(o){return o.ngOriginalError}function $m(o,...a){o.error(...a)}class zu{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a),h=function Wy(o){return o&&o.ngErrorLogger||$m}(a);h(this._console,"ERROR",a),c&&h(this._console,"ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&qs(a);for(;c&&qs(c);)c=qs(c);return c||null}}const Ws=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(qt))();function cr(o){return o instanceof Function?o():o}var v=(()=>((v=v||{})[v.Important=1]="Important",v[v.DashCase=2]="DashCase",v))();function g(o,a){return undefined(o,a)}function k(o){const a=o[3];return Ir(a)?a[3]:a}function Me(o){return ft(o[13])}function ze(o){return ft(o[4])}function ft(o){for(;null!==o&&!Ir(o);)o=o[4];return o}function wn(o,a,c,h,f){if(null!=h){let _,b=!1;Ir(h)?_=h:ki(h)&&(b=!0,h=h[0]);const E=ln(h);0===o&&null!==c?null==f?tv(a,c,E):Zr(a,c,E,f||null,!0):1===o&&null!==c?Zr(a,c,E,f||null,!0):2===o?function sv(o,a,c){const h=Xh(o,a);h&&function qA(o,a,c,h){gn(o)?o.removeChild(a,c,h):a.removeChild(c)}(o,h,a,c)}(a,E,b):3===o&&a.destroyNode(E),null!=_&&function Ec(o,a,c,h,f){const _=c[7];_!==ln(c)&&wn(a,o,h,_,f);for(let E=10;E<c.length;E++){const I=c[E];Qm(I[1],I,o,a,h,_)}}(a,o,_,c,f)}}function wc(o,a,c){if(gn(o))return o.createElement(a,c);{const h=null!==c?function rh(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(c):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function Da(o,a){const c=o[9],h=c.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,fu(f,-1)),c.splice(h,1)}function Kh(o,a){if(o.length<=10)return;const c=10+a,h=o[c];if(h){const f=h[17];null!==f&&f!==o&&Da(f,h),a>0&&(o[c-1][4]=h[4]);const _=_a(o,10+a);!function ai(o,a){Qm(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=_[19];null!==b&&b.detachView(_[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Cc(o,a){if(!(256&a[2])){const c=a[11];gn(c)&&c.destroyNode&&Qm(o,a,c,3,null,null),function Po(o){let a=o[13];if(!a)return Qh(o[1],o);for(;a;){let c=null;if(ki(a))c=a[13];else{const h=a[10];h&&(c=h)}if(!c){for(;a&&!a[4]&&a!==o;)ki(a)&&Qh(a[1],a),a=a[3];null===a&&(a=o),ki(a)&&Qh(a[1],a),c=a&&a[4]}a=c}}(a)}}function Qh(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function BC(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let h=0;h<c.length;h+=2){const f=a[c[h]];if(!(f instanceof Eu)){const _=c[h+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const E=f[_[b]],I=_[b+1];try{I.call(E)}finally{}}else try{_.call(f)}finally{}}}}(o,a),function LC(o,a){const c=o.cleanup,h=a[7];let f=-1;if(null!==c)for(let _=0;_<c.length-1;_+=2)if("string"==typeof c[_]){const b=c[_+1],E="function"==typeof b?b(a):ln(a[b]),I=h[f=c[_+2]],M=c[_+3];"boolean"==typeof M?E.removeEventListener(c[_],I,M):M>=0?h[f=M]():h[f=-M].unsubscribe(),_+=2}else{const b=h[f=c[_+1]];c[_].call(b)}if(null!==h){for(let _=f+1;_<h.length;_++)h[_]();a[7]=null}}(o,a),1===a[1].type&&gn(a[11])&&a[11].destroy();const c=a[17];if(null!==c&&Ir(a[3])){c!==a[3]&&Da(c,a);const h=a[19];null!==h&&h.detachView(o)}}}function Ym(o,a,c){return function zA(o,a,c){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return c[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Yt.None||f===Yt.Emulated)return null}return $i(h,c)}(o,a.parent,c)}function Zr(o,a,c,h,f){gn(o)?o.insertBefore(a,c,h,f):a.insertBefore(c,h,f)}function tv(o,a,c){gn(o)?o.appendChild(a,c):a.appendChild(c)}function VC(o,a,c,h,f){null!==h?Zr(o,a,c,h,f):tv(o,a,c)}function Xh(o,a){return gn(o)?o.parentNode(a):a.parentNode}function UC(o,a,c){return nv(o,a,c)}let nv=function HC(o,a,c){return 40&o.type?$i(o,c):null};function Km(o,a,c,h){const f=Ym(o,h,a),_=a[11],E=UC(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(c))for(let I=0;I<c.length;I++)VC(_,f,c[I],E,!1);else VC(_,f,c,E,!1)}function Zu(o,a){if(null!==a){const c=a.type;if(3&c)return $i(a,o);if(4&c)return rv(-1,o[a.index]);if(8&c){const h=a.child;if(null!==h)return Zu(o,h);{const f=o[a.index];return Ir(f)?rv(-1,f):ln(f)}}if(32&c)return g(a,o)()||ln(o[a.index]);{const h=GC(o,a);return null!==h?Array.isArray(h)?h[0]:Zu(k(o[16]),h):Zu(o,a.next)}}return null}function GC(o,a){return null!==a?o[16][6].projection[a.projection]:null}function rv(o,a){const c=10+o+1;if(c<a.length){const h=a[c],f=h[1].firstChild;if(null!==f)return Zu(h,f)}return a[7]}function ov(o,a,c,h,f,_,b){for(;null!=c;){const E=h[c.index],I=c.type;if(b&&0===a&&(E&&Di(ln(E),h),c.flags|=4),64!=(64&c.flags))if(8&I)ov(o,a,c.child,h,f,_,!1),wn(a,o,f,E,_);else if(32&I){const M=g(c,h);let x;for(;x=M();)wn(a,o,f,x,_);wn(a,o,f,E,_)}else 16&I?av(o,a,h,c,f,_):wn(a,o,f,E,_);c=b?c.projectionNext:c.next}}function Qm(o,a,c,h,f,_){ov(c,h,o.firstChild,a,f,_,!1)}function av(o,a,c,h,f,_){const b=c[16],I=b[6].projection[h.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)wn(a,o,f,I[M],_);else ov(o,a,I,b[3],f,_,!0)}function zC(o,a,c){gn(o)?o.setAttribute(a,"style",c):a.style.cssText=c}function Xm(o,a,c){gn(o)?""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c):a.className=c}function qC(o,a,c){let h=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=a.length;if(f+_===h||o.charCodeAt(f+_)<=32)return f}c=f+1}}const WC="ng-template";function Yu(o,a,c){let h=0;for(;h<o.length;){let f=o[h++];if(c&&"class"===f){if(f=o[h],-1!==qC(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Ia(o){return 4===o.type&&o.value!==WC}function ZC(o,a,c){return a===(4!==o.type||c?o.value:WC)}function qi(o,a,c){let h=4;const f=o.attrs||[],_=function KC(o){for(let a=0;a<o.length;a++)if(Mt(o[a]))return a;return o.length}(f);let b=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!b)if(4&h){if(h=2|1&h,""!==I&&!ZC(o,I,c)||""===I&&1===a.length){if(Si(h))return!1;b=!0}}else{const M=8&h?I:a[++E];if(8&h&&null!==o.attrs){if(!Yu(o.attrs,M,c)){if(Si(h))return!1;b=!0}continue}const N=ZA(8&h?"class":I,f,Ia(o),c);if(-1===N){if(Si(h))return!1;b=!0;continue}if(""!==M){let V;V=N>_?"":f[N+1].toLowerCase();const K=8&h?V:null;if(K&&-1!==qC(K,M,0)||2&h&&M!==V){if(Si(h))return!1;b=!0}}}}else{if(!b&&!Si(h)&&!Si(I))return!1;if(b&&Si(I))continue;b=!1,h=I|1&h}}return Si(h)||b}function Si(o){return 0==(1&o)}function ZA(o,a,c,h){if(null===a)return-1;let f=0;if(h||!c){let _=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function QC(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const h=o[c];if("number"==typeof h)return-1;if(h===a)return c;c++}return-1}(a,o)}function Jm(o,a,c=!1){for(let h=0;h<a.length;h++)if(qi(o,a[h],c))return!0;return!1}function XC(o,a){e:for(let c=0;c<a.length;c++){const h=a[c];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function lv(o,a){return o?":not("+a.trim()+")":a}function JC(o){let a=o[0],c=1,h=2,f="",_=!1;for(;c<o.length;){let b=o[c];if("string"==typeof b)if(2&h){const E=o[++c];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!Si(b)&&(a+=lv(_,f),f=""),h=b,_=_||!Si(h);c++}return""!==f&&(a+=lv(_,f)),a}const Et={};function cv(o){uv(Ot(),ve(),Ni()+o,yu())}function uv(o,a,c,h){if(!h)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&ec(a,_,c)}else{const _=o.preOrderHooks;null!==_&&Ls(a,_,0,c)}ms(c)}function Jh(o,a){return o<<17|a<<2}function Zs(o){return o>>17&32767}function ef(o){return 2|o}function Lo(o){return(131068&o)>>2}function tf(o,a){return-131069&o|a<<2}function eg(o){return 1|o}function vv(o,a){const c=o.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const f=c[h],_=c[h+1];if(-1!==_){const b=o.data[_];Ql(f),b.contentQueries(2,a[_],_)}}}function sf(o,a,c,h,f,_,b,E,I,M){const x=a.blueprint.slice();return x[0]=f,x[2]=140|h,yo(x),x[3]=x[15]=o,x[8]=c,x[10]=b||o&&o[10],x[11]=E||o&&o[11],x[12]=I||o&&o[12]||null,x[9]=M||o&&o[9]||null,x[6]=_,x[16]=2==a.type?o[16]:x,x}function Dc(o,a,c,h,f){let _=o.data[a];if(null===_)_=function af(o,a,c,h,f){const _=gu(),b=Kl(),I=o.data[a]=function iM(o,a,c,h,f,_){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,c,a,h,f);return null===o.firstChild&&(o.firstChild=I),null!==_&&(b?null==_.child&&null!==I.parent&&(_.child=I):null===_.next&&(_.next=I)),I}(o,a,c,h,f),function wy(){return pt.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=c,_.value=h,_.attrs=f;const b=function oa(){const o=pt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return jr(_,!0),_}function yl(o,a,c,h){if(0===c)return-1;const f=a.length;for(let _=0;_<c;_++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function lg(o,a,c){Xl(a);try{const h=o.viewQuery;null!==h&&Uv(1,h,c);const f=o.template;null!==f&&cf(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&vv(o,a),o.staticViewQueries&&Uv(2,o.viewQuery,c);const _=o.components;null!==_&&function bv(o,a){for(let c=0;c<a.length;c++)fg(o,a[c])}(a,_)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Jl()}}function vl(o,a,c,h){const f=a[2];if(256==(256&f))return;Xl(a);const _=yu();try{yo(a),function bu(o){return pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&cf(o,a,c,2,h);const b=3==(3&f);if(!_)if(b){const M=o.preOrderCheckHooks;null!==M&&ec(a,M,null)}else{const M=o.preOrderHooks;null!==M&&Ls(a,M,0,null),tc(a,0)}if(function cM(o){for(let a=Me(o);null!==a;a=ze(a)){if(!a[2])continue;const c=a[9];for(let h=0;h<c.length;h++){const f=c[h],_=f[3];0==(1024&f[2])&&fu(_,1),f[2]|=1024}}}(a),function Ov(o){for(let a=Me(o);null!==a;a=ze(a))for(let c=10;c<a.length;c++){const h=a[c],f=h[1];sa(h)&&vl(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&vv(o,a),!_)if(b){const M=o.contentCheckHooks;null!==M&&ec(a,M)}else{const M=o.contentHooks;null!==M&&Ls(a,M,1),tc(a,1)}!function nM(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const f=c[h];if(f<0)ms(~f);else{const _=f,b=c[++h],E=c[++h];Cy(b,_),E(2,a[_])}}}finally{ms(-1)}}(o,a);const E=o.components;null!==E&&function pB(o,a){for(let c=0;c<a.length;c++)Pv(o,a[c])}(a,E);const I=o.viewQuery;if(null!==I&&Uv(2,I,h),!_)if(b){const M=o.viewCheckHooks;null!==M&&ec(a,M)}else{const M=o.viewHooks;null!==M&&Ls(a,M,2),tc(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),_||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,fu(a[3],-1))}finally{Jl()}}function lf(o,a,c,h){const f=a[10],_=!yu(),b=ra(a);try{_&&!b&&f.begin&&f.begin(),b&&lg(o,a,h),vl(o,a,c,h)}finally{_&&!b&&f.end&&f.end()}}function cf(o,a,c,h,f){const _=Ni(),b=2&h;try{ms(-1),b&&a.length>20&&uv(o,a,20,yu()),c(h,f)}finally{ms(_)}}function Ic(o,a,c){if(zl(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,c[_],_)}}}function Sc(o,a,c){!mu()||(function yB(o,a,c,h){const f=c.directiveStart,_=c.directiveEnd;o.firstCreatePass||sn(c,a),Di(h,a);const b=c.initialInputs;for(let E=f;E<_;E++){const I=o.data[E],M=Ur(I);M&&aM(a,c,I);const x=da(a,o,E,c);Di(x,a),null!==b&&lM(0,E-f,x,I,0,b),M&&(zi(c.index,a)[8]=x)}}(o,a,c,$i(c,a)),128==(128&c.flags)&&function sM(o,a,c){const h=c.directiveStart,f=c.directiveEnd,b=c.index,E=function uh(){return pt.lFrame.currentDirectiveIndex}();try{ms(b);for(let I=h;I<f;I++){const M=o.data[I],x=a[I];dh(I),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Mv(M,x)}}finally{ms(-1),dh(E)}}(o,a,c))}function wv(o,a,c=$i){const h=a.localNames;if(null!==h){let f=a.index+1;for(let _=0;_<h.length;_+=2){const b=h[_+1],E=-1===b?c(a,o):o[b];o[f++]=E}}}function cg(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=uf(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function uf(o,a,c,h,f,_,b,E,I,M){const x=20+h,N=x+f,V=function Cv(o,a){const c=[];for(let h=0;h<a;h++)c.push(h<o?null:Et);return c}(x,N),K="function"==typeof M?M():M;return V[1]={type:o,blueprint:V,template:c,queries:null,viewQuery:E,declTNode:a,data:V.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:K,incompleteFirstPass:!1}}function ug(o,a,c,h){const f=_E(a);null===c?f.push(h):(f.push(c),o.firstCreatePass&&Hv(o).push(h,f.length-1))}function Sv(o,a,c){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(c=null===c?{}:c).hasOwnProperty(h)?c[h].push(a,f):c[h]=[a,f]}return c}function dr(o,a,c,h,f,_,b,E){const I=$i(a,c);let x,M=a.inputs;!E&&null!=M&&(x=M[h])?(mg(o,c,x,h,f),eh(a)&&function Tv(o,a){const c=zi(a,o);16&c[2]||(c[2]|=64)}(c,a.index)):3&a.type&&(h=function uE(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=b?b(f,a.value||"",h):f,gn(_)?_.setProperty(I,h,f):Fi(h)||(I.setProperty?I.setProperty(h,f):I[h]=f))}function hE(o,a,c,h){let f=!1;if(mu()){const _=function oM(o,a,c){const h=o.directiveRegistry;let f=null;if(h)for(let _=0;_<h.length;_++){const b=h[_];Jm(c,b.selectors,!1)&&(f||(f=[]),wo(sn(c,a),o,b.type),Ur(b)?(xv(o,c),f.unshift(b)):f.push(b))}return f}(o,a,c),b=null===h?null:{"":-1};if(null!==_){f=!0,fE(c,o.data.length,_.length);for(let x=0;x<_.length;x++){const N=_[x];N.providersResolver&&N.providersResolver(N)}let E=!1,I=!1,M=yl(o,a,_.length,null);for(let x=0;x<_.length;x++){const N=_[x];c.mergedAttrs=cn(c.mergedAttrs,N.hostAttrs),Rv(o,c,a,M,N),dg(M,N,b),null!==N.contentQueries&&(c.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(c.flags|=128);const V=N.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),I=!0),M++}!function cE(o,a){const h=a.directiveEnd,f=o.data,_=a.attrs,b=[];let E=null,I=null;for(let M=a.directiveStart;M<h;M++){const x=f[M],N=x.inputs,V=null===_||Ia(a)?null:pE(N,_);b.push(V),E=Sv(N,M,E),I=Sv(x.outputs,M,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=I}(o,c)}b&&function df(o,a,c){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const _=c[a[f+1]];if(null==_)throw new Le(-301,!1);h.push(a[f],_)}}}(c,h,b)}return c.mergedAttrs=cn(c.mergedAttrs,c.attrs),f}function rM(o,a,c,h,f,_){const b=_.hostBindings;if(b){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const I=~a.index;(function _B(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(E)!=I&&E.push(I),E.push(h,f,b)}}function Mv(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function xv(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function dg(o,a,c){if(c){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)c[a.exportAs[h]]=o;Ur(a)&&(c[""]=o)}}function fE(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function Rv(o,a,c,h,f){o.data[h]=f;const _=f.factory||(f.factory=Pi(f.type)),b=new Eu(_,Ur(f),null);o.blueprint[h]=b,c[h]=b,rM(o,a,0,h,yl(o,c,f.hostVars,Et),f)}function aM(o,a,c){const h=$i(a,o),f=cg(c),_=o[10],b=ed(o,sf(o,f,null,c.onPush?64:16,h,a,_,_.createRenderer(h,c),null,null));o[a.index]=b}function Sa(o,a,c,h,f,_){const b=$i(o,a);!function hg(o,a,c,h,f,_,b){if(null==_)gn(o)?o.removeAttribute(a,f,c):a.removeAttribute(f);else{const E=null==b?ee(_):b(_,h||"",f);gn(o)?o.setAttribute(a,f,E,c):c?a.setAttributeNS(c,f,E):a.setAttribute(f,E)}}(a[11],b,_,o.value,c,h,f)}function lM(o,a,c,h,f,_){const b=_[a];if(null!==b){const E=h.setInput;for(let I=0;I<b.length;){const M=b[I++],x=b[I++],N=b[I++];null!==E?h.setInput(c,N,M,x):c[x]=N}}}function pE(o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return c}function kv(o,a,c,h){return new Array(o,!0,!1,a,null,0,h,c,null,null)}function Pv(o,a){const c=zi(a,o);if(sa(c)){const h=c[1];80&c[2]?vl(h,c,h.template,c[8]):c[5]>0&&Nv(c)}}function Nv(o){for(let h=Me(o);null!==h;h=ze(h))for(let f=10;f<h.length;f++){const _=h[f];if(1024&_[2]){const b=_[1];vl(b,_,b.template,_[8])}else _[5]>0&&Nv(_)}const c=o[1].components;if(null!==c)for(let h=0;h<c.length;h++){const f=zi(c[h],o);sa(f)&&f[5]>0&&Nv(f)}}function fg(o,a){const c=zi(a,o),h=c[1];(function uM(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(h,c),lg(h,c,c[8])}function ed(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Fv(o){for(;o;){o[2]|=64;const a=k(o);if(th(o)&&!a)return o;o=a}return null}function Bv(o,a,c){const h=a[10];h.begin&&h.begin();try{vl(o,a,o.template,c)}catch(f){throw fM(a,f),f}finally{h.end&&h.end()}}function Vv(o){!function pg(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],h=jh(c),f=h[1];lf(f,h,f.template,c)}}(o[8])}function Uv(o,a,c){Ql(0),a(o,c)}const hM=(()=>Promise.resolve(null))();function _E(o){return o[7]||(o[7]=[])}function Hv(o){return o.cleanup||(o.cleanup=[])}function yE(o,a,c){return(null===o||Ur(o))&&(c=function oh(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(c[a.index])),c[11]}function fM(o,a){const c=o[9],h=c?c.get(zu,null):null;h&&h.handleError(a)}function mg(o,a,c,h,f){for(let _=0;_<c.length;){const b=c[_++],E=c[_++],I=a[b],M=o.data[b];null!==M.setInput?M.setInput(I,f,h,E):I[E]=f}}function Ta(o,a,c){const h=Ya(a,o);!function gl(o,a,c){gn(o)?o.setValue(a,c):a.textContent=c}(o[11],h,c)}function hf(o,a,c){let h=c?o.styles:null,f=c?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?_=E:1==_?f=Se(f,E):2==_&&(h=Se(h,E+": "+a[++b]+";"))}c?o.styles=h:o.stylesWithoutHost=h,c?o.classes=f:o.classesWithoutHost=f}const jv=new bn("INJECTOR",-1);class Gv{get(a,c=ac){if(c===ac){const h=new Error(`NullInjectorError: No provider for ${_e(a)}!`);throw h.name="NullInjectorError",h}return c}}const $v=new bn("Set Injector scope."),nd={},mM={};let zv;function Tc(){return void 0===zv&&(zv=new Gv),zv}function qv(o,a=null,c=null,h){const f=bE(o,a,c,h);return f._resolveInjectorDefTypes(),f}function bE(o,a=null,c=null,h){return new gg(o,c,a||Tc(),h)}class gg{constructor(a,c,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];c&&Mr(c,E=>this.processProvider(E,a,c)),Mr([a],E=>this.processInjectorType(E,[],_)),this.records.set(jv,id(void 0,this));const b=this.records.get($v);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:_e(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,c=ac,h=gt.Default){this.assertNotDestroyed();const f=Do(this),_=Ai(void 0);try{if(!(h&gt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=function CB(o){return"function"==typeof o||"object"==typeof o&&o instanceof bn}(a)&&Lt(a);E=I&&this.injectableDefInScope(I)?id(Wv(a),nd):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(h&gt.Self?Tc():this.parent).get(a,c=h&gt.Optional&&c===ac?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[va]=b[va]||[]).unshift(_e(a)),f)throw b;return function Ry(o,a,c,h){const f=o[va];throw a[xu]&&f.unshift(a[xu]),o.message=function al(o,a,c,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=_e(a);if(Array.isArray(a))f=a.map(_e).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];_.push(b+":"+("string"==typeof E?JSON.stringify(E):_e(E)))}f=`{${_.join(", ")}}`}return`${c}${h?"("+h+")":""}[${f}]: ${o.replace(Im,"\n  ")}`}("\n"+o.message,f,c,h),o.ngTokenPath=f,o[va]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{Ai(_),Do(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(_e(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(a,c,h){if(!(a=X(a)))return!1;let f=sr(a);const _=null==f&&a.ngModule||void 0,b=void 0===_?a:_,E=-1!==h.indexOf(b);if(void 0!==_&&(f=sr(_)),null==f)return!1;if(null!=f.imports&&!E){let x;h.push(b);try{Mr(f.imports,N=>{this.processInjectorType(N,c,h)&&(void 0===x&&(x=[]),x.push(N))})}finally{}if(void 0!==x)for(let N=0;N<x.length;N++){const{ngModule:V,providers:K}=x[N];Mr(K,ue=>this.processProvider(ue,V,K||ht))}}this.injectorDefTypes.add(b);const I=Pi(b)||(()=>new b);this.records.set(b,id(I,nd));const M=f.providers;if(null!=M&&!E){const x=a;Mr(M,N=>this.processProvider(N,x,M))}return void 0!==_&&void 0!==a.providers}processProvider(a,c,h){let f=ff(a=X(a))?a:X(a&&a.provide);const _=function gM(o,a,c){return Yv(o)?id(void 0,o.useValue):id(Zv(o),nd)}(a);if(ff(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=id(void 0,nd,!0),b.factory=()=>Th(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,_)}hydrate(a,c){return c.value===nd&&(c.value=mM,c.value=c.factory()),"object"==typeof c.value&&c.value&&function _M(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=X(a.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function Wv(o){const a=Lt(o),c=null!==a?a.factory:Pi(o);if(null!==c)return c;if(o instanceof bn)throw new Le(204,!1);if(o instanceof Function)return function _g(o){const a=o.length;if(a>0)throw sc(a,"?"),new Le(204,!1);const c=function su(o){const a=o&&(o[us]||o[Yo]);if(a){const c=function rr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Le(204,!1)}function Zv(o,a,c){let h;if(ff(o)){const f=X(o);return Pi(f)||Wv(f)}if(Yv(o))h=()=>X(o.useValue);else if(function wB(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...Th(o.deps||[]));else if(function bB(o){return!(!o||!o.useExisting)}(o))h=()=>Pn(X(o.useExisting));else{const f=X(o&&(o.useClass||o.provide));if(!function yg(o){return!!o.deps}(o))return Pi(f)||Wv(f);h=()=>new f(...Th(o.deps))}return h}function id(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function Yv(o){return null!==o&&"object"==typeof o&&Sh in o}function ff(o){return"function"==typeof o}let Bo=(()=>{class o{static create(c,h){var f;if(Array.isArray(c))return qv({name:""},h,c,"");{const _=null!==(f=c.name)&&void 0!==f?f:"";return qv({name:_},c.parent,c.providers,_)}}}return o.THROW_IF_NOT_FOUND=ac,o.NULL=new Gv,o.\u0275prov=nn({token:o,providedIn:"any",factory:()=>Pn(jv)}),o.__NG_ELEMENT_ID__=-1,o})();function Qv(o,a){pm(jh(o)[1],yn())}function Xv(o){let a=function bM(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const h=[o];for(;a;){let f;if(Ur(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Le(903,"");f=a.\u0275dir}if(f){if(c){h.push(f);const b=o;b.inputs=Jv(o.inputs),b.declaredInputs=Jv(o.declaredInputs),b.outputs=Jv(o.outputs);const E=f.hostBindings;E&&EM(o,E);const I=f.viewQuery,M=f.contentQueries;if(I&&wM(o,I),M&&CM(o,M),le(o.inputs,f.inputs),le(o.declaredInputs,f.declaredInputs),le(o.outputs,f.outputs),Ur(f)&&f.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const E=_[b];E&&E.ngInherit&&E(o),E===Xv&&(c=!1)}}a=Object.getPrototypeOf(a)}!function SB(o){let a=0,c=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=cn(f.hostAttrs,c=cn(c,f.hostAttrs))}}(h)}function Jv(o){return o===Ri?{}:o===ht?[]:o}function wM(o,a){const c=o.viewQuery;o.viewQuery=c?(h,f)=>{a(h,f),c(h,f)}:a}function CM(o,a){const c=o.contentQueries;o.contentQueries=c?(h,f,_)=>{a(h,f,_),c(h,f,_)}:a}function EM(o,a){const c=o.hostBindings;o.hostBindings=c?(h,f)=>{a(h,f),c(h,f)}:a}let Cg=null;function _f(){if(!Cg){const o=qt.Symbol;if(o&&o.iterator)Cg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const h=a[c];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Cg=h)}}}return Cg}function yf(o){return!!Eg(o)&&(Array.isArray(o)||!(o instanceof Map)&&_f()in o)}function Eg(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function vs(o,a,c){return o[a]=c}function hr(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function nb(o,a,c,h){const f=ve();return hr(f,Qa(),a)&&(Ot(),Sa(xn(),f,o,a,c,h)),nb}function OM(o,a,c,h,f,_,b,E){const I=ve(),M=Ot(),x=o+20,N=M.firstCreatePass?function xB(o,a,c,h,f,_,b,E,I){const M=a.consts,x=Dc(a,o,4,b||null,Ns(M,E));hE(a,c,x,Ns(M,I)),pm(a,x);const N=x.tViews=uf(2,x,h,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,x),N.queries=a.queries.embeddedTView(x)),x}(x,M,I,a,c,h,f,_,b):M.data[x];jr(N,!1);const V=I[11].createComment("");Km(M,I,V,N),Di(V,I),ed(I,I[x]=kv(V,I,V,N)),na(N)&&Sc(M,I,N),null!=b&&wv(I,N,E)}function PM(o){return function ps(o,a){return o[a]}(function _u(){return pt.lFrame.contextLView}(),20+o)}function Dg(o,a=gt.Default){const c=ve();return null===c?Pn(o,a):ua(yn(),c,X(o),a)}function zM(){throw new Error("invalid")}function BE(o,a,c){const h=ve();return hr(h,Qa(),a)&&dr(Ot(),xn(),h,o,a,h[11],c,!1),BE}function VE(o,a,c,h,f){const b=f?"class":"style";mg(o,c,a.inputs[b],b,h)}function rb(o,a,c,h){const f=ve(),_=Ot(),b=20+o,E=f[11],I=f[b]=wc(E,a,function $A(){return pt.lFrame.currentNamespace}()),M=_.firstCreatePass?function KB(o,a,c,h,f,_,b){const E=a.consts,M=Dc(a,o,2,f,Ns(E,_));return hE(a,c,M,Ns(E,b)),null!==M.attrs&&hf(M,M.attrs,!1),null!==M.mergedAttrs&&hf(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,_,f,0,a,c,h):_.data[b];jr(M,!0);const x=M.mergedAttrs;null!==x&&Ye(E,I,x);const N=M.classes;null!==N&&Xm(E,I,N);const V=M.styles;return null!==V&&zC(E,I,V),64!=(64&M.flags)&&Km(_,f,I,M),0===function pu(){return pt.lFrame.elementDepthCount}()&&Di(I,f),function Yl(){pt.lFrame.elementDepthCount++}(),na(M)&&(Sc(_,f,M),Ic(_,M,f)),null!==h&&wv(f,M),rb}function sb(){let o=yn();Kl()?ch():(o=o.parent,jr(o,!1));const a=o;!function vy(){pt.lFrame.elementDepthCount--}();const c=Ot();return c.firstCreatePass&&(pm(c,o),zl(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function hh(o){return 0!=(16&o.flags)}(a)&&VE(c,a,ve(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function AC(o){return 0!=(32&o.flags)}(a)&&VE(c,a,ve(),a.stylesWithoutHost,!1),sb}function UE(o,a,c,h){return rb(o,a,c,h),sb(),UE}function ob(o,a,c){const h=ve(),f=Ot(),_=o+20,b=f.firstCreatePass?function QB(o,a,c,h,f){const _=a.consts,b=Ns(_,h),E=Dc(a,o,8,"ng-container",b);return null!==b&&hf(E,b,!0),hE(a,c,E,Ns(_,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(_,f,h,a,c):f.data[_];jr(b,!0);const E=h[_]=h[11].createComment("");return Km(f,h,E,b),Di(E,h),na(b)&&(Sc(f,h,b),Ic(f,b,h)),null!=c&&wv(h,b),ob}function ab(){let o=yn();const a=Ot();return Kl()?ch():(o=o.parent,jr(o,!1)),a.firstCreatePass&&(pm(a,o),zl(o)&&a.queries.elementEnd(o)),ab}function HE(o,a,c){return ob(o,a,c),ab(),HE}function qM(){return ve()}function jE(o){return!!o&&"function"==typeof o.then}function WM(o){return!!o&&"function"==typeof o.subscribe}const ZM=WM;function GE(o,a,c,h){const f=ve(),_=Ot(),b=yn();return YM(_,f,f[11],b,o,a,!!c,h),GE}function $E(o,a){const c=yn(),h=ve(),f=Ot();return YM(f,h,yE(aa(f.data),c,h),c,o,a,!1),$E}function YM(o,a,c,h,f,_,b,E){const I=na(h),x=o.firstCreatePass&&Hv(o),N=a[8],V=_E(a);let K=!0;if(3&h.type||E){const Ve=$i(h,a),Qe=E?E(Ve):Ve,ye=V.length,dt=E?Vt=>E(ln(Vt[h.index])):h.index;if(gn(c)){let Vt=null;if(!E&&I&&(Vt=function XB(o,a,c,h){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===c&&f[_+1]===h){const E=a[7],I=f[_+2];return E.length>I?E[I]:null}"string"==typeof b&&(_+=2)}return null}(o,a,f,h.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=_,Vt.__ngLastListenerFn__=_,K=!1;else{_=zE(h,a,N,_,!1);const un=c.listen(Qe,f,_);V.push(_,un),x&&x.push(f,dt,ye,ye+1)}}else _=zE(h,a,N,_,!0),Qe.addEventListener(f,_,b),V.push(_),x&&x.push(f,dt,ye,b)}else _=zE(h,a,N,_,!1);const ue=h.outputs;let Oe;if(K&&null!==ue&&(Oe=ue[f])){const Ve=Oe.length;if(Ve)for(let Qe=0;Qe<Ve;Qe+=2){const Jr=a[Oe[Qe]][Oe[Qe+1]].subscribe(_),Oa=V.length;V.push(_,Jr),x&&x.push(f,h.index,Oa,-(Oa+1))}}}function KM(o,a,c,h){try{return!1!==c(h)}catch(f){return fM(o,f),!1}}function zE(o,a,c,h,f){return function _(b){if(b===Function)return h;const E=2&o.flags?zi(o.index,a):a;0==(32&a[2])&&Fv(E);let I=KM(a,0,h,b),M=_.__ngNextListenerFn__;for(;M;)I=KM(a,0,M,b)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function QM(o=1){return function vo(o){return(pt.lFrame.contextLView=function Iy(o,a){for(;o>0;)a=a[15],o--;return a}(o,pt.lFrame.contextLView))[8]}(o)}function JB(o,a){let c=null;const h=function YC(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const _=a[f];if("*"!==_){if(null===h?Jm(o,_,!0):XC(h,_))return f}else c=f}return c}function XM(o){const a=ve()[16][6];if(!a.projection){const h=a.projection=sc(o?o.length:1,null),f=h.slice();let _=a.child;for(;null!==_;){const b=o?JB(_,o):0;null!==b&&(f[b]?f[b].projectionNext=_:h[b]=_,f[b]=_),_=_.next}}}function JM(o,a=0,c){const h=ve(),f=Ot(),_=Dc(f,20+o,16,null,c||null);null===_.projection&&(_.projection=a),ch(),64!=(64&_.flags)&&function $C(o,a,c){av(a[11],0,a,c,Ym(o,c,a),UC(c.parent||a[6],c,a))}(f,h,_)}function Tg(o,a,c,h,f){const _=o[c+1],b=null===a;let E=h?Zs(_):Lo(_),I=!1;for(;0!==E&&(!1===I||b);){const x=o[E+1];nx(o[E],a)&&(I=!0,o[E+1]=h?eg(x):ef(x)),E=h?Zs(x):Lo(x)}I&&(o[c+1]=h?ef(_):eg(_))}function nx(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Vs(o,a)>=0}function XE(o,a,c){return Uo(o,a,c,!1),XE}function hb(o,a){return Uo(o,a,null,!0),hb}function Uo(o,a,c,h){const f=ve(),_=Ot(),b=function Gr(o){const a=pt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);_.firstUpdatePass&&function JE(o,a,c,h){const f=o.data;if(null===f[c+1]){const _=f[Ni()],b=function ax(o,a){return a>=o.expandoStartIndex}(o,c);(function nD(o,a){return 0!=(o.flags&(a?16:32))})(_,h)&&null===a&&!b&&(a=!1),a=function iV(o,a,c,h){const f=aa(o);let _=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(c=xf(c=fb(null,o,a,c,h),a.attrs,h),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(c=fb(f,o,a,c,h),null===_){let I=function eD(o,a,c){const h=c?a.classBindings:a.styleBindings;if(0!==Lo(h))return o[Zs(h)]}(o,a,h);void 0!==I&&Array.isArray(I)&&(I=fb(null,o,a,I[1],h),I=xf(I,a.attrs,h),function lx(o,a,c,h){o[Zs(c?a.classBindings:a.styleBindings)]=h}(o,a,h,I))}else _=function cx(o,a,c){let h;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)h=xf(h,o[_].hostAttrs,c);return xf(h,a.attrs,c)}(o,a,h)}return void 0!==_&&(h?a.residualClasses=_:a.residualStyles=_),c}(f,_,a,h),function Ac(o,a,c,h,f,_){let b=_?a.classBindings:a.styleBindings,E=Zs(b),I=Lo(b);o[h]=c;let x,M=!1;if(Array.isArray(c)){const N=c;x=N[1],(null===x||Vs(N,x)>0)&&(M=!0)}else x=c;if(f)if(0!==I){const V=Zs(o[E+1]);o[h+1]=Jh(V,E),0!==V&&(o[V+1]=tf(o[V+1],h)),o[E+1]=function nE(o,a){return 131071&o|a<<17}(o[E+1],h)}else o[h+1]=Jh(E,0),0!==E&&(o[E+1]=tf(o[E+1],h)),E=h;else o[h+1]=Jh(I,0),0===E?E=h:o[I+1]=tf(o[I+1],h),I=h;M&&(o[h+1]=ef(o[h+1])),Tg(o,x,h,!0),Tg(o,x,h,!1),function tx(o,a,c,h,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&Vs(_,a)>=0&&(c[h+1]=eg(c[h+1]))}(a,x,o,h,_),b=Jh(E,I),_?a.classBindings=b:a.styleBindings=b}(f,_,a,c,b,h)}}(_,o,b,h),a!==Et&&hr(f,b,a)&&function pb(o,a,c,h,f,_,b,E){if(!(3&a.type))return;const I=o.data,M=I[E+1];Ag(function fv(o){return 1==(1&o)}(M)?mb(I,a,c,f,Lo(M),b):void 0)||(Ag(_)||function hv(o){return 2==(2&o)}(M)&&(_=mb(I,null,c,f,E,b)),function Fo(o,a,c,h,f){const _=gn(o);if(a)f?_?o.addClass(c,h):c.classList.add(h):_?o.removeClass(c,h):c.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:v.DashCase;if(null==f)_?o.removeStyle(c,h,b):c.style.removeProperty(h);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),b|=v.Important),_?o.setStyle(c,h,f,b):c.style.setProperty(h,f,E?"important":"")}}}(h,b,Ya(Ni(),c),f,_))}(_,_.data[Ni()],f,f[11],o,f[b+1]=function hx(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=_e($s(o)))),o}(a,c),h,b)}function fb(o,a,c,h,f){let _=null;const b=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<b&&(_=a[E],h=xf(h,_.hostAttrs,f),_!==o);)E++;return null!==o&&(c.directiveStylingLast=E),h}function xf(o,a,c){const h=c?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?f=b:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),oi(o,b,!!c||a[++_]))}return void 0===o?null:o}function mb(o,a,c,h,f,_){const b=null===a;let E;for(;f>0;){const I=o[f],M=Array.isArray(I),x=M?I[1]:I,N=null===x;let V=c[f+1];V===Et&&(V=N?ht:void 0);let K=N?rl(V,h):x===h?V:void 0;if(M&&!Ag(K)&&(K=rl(I,h)),Ag(K)&&(E=K,b))return E;const ue=o[f+1];f=b?Zs(ue):Lo(ue)}if(null!==a){let I=_?a.residualClasses:a.residualStyles;null!=I&&(E=rl(I,h))}return E}function Ag(o){return void 0!==o}function iD(o,a=""){const c=ve(),h=Ot(),f=o+20,_=h.firstCreatePass?Dc(h,f,1,a,null):h.data[f],b=c[f]=function ur(o,a){return gn(o)?o.createText(a):o.createTextNode(a)}(c[11],a);Km(h,c,b,_),jr(_,!1)}function gb(o){return _b("",o,""),gb}function _b(o,a,c){const h=ve(),f=function bf(o,a,c,h){return hr(o,Qa(),c)?a+ee(c)+h:Et}(h,o,a,c);return f!==Et&&Ta(h,Ni(),f),_b}function cD(o,a,c){const h=ve();return hr(h,Qa(),a)&&dr(Ot(),xn(),h,o,a,h[11],c,!0),cD}function Kr(o,a,c){const h=ve();if(hr(h,Qa(),a)){const _=Ot(),b=xn();dr(_,b,h,o,a,yE(aa(_.data),b,h),c,!0)}return Kr}const dd=void 0;var uV=["en",[["a","p"],["AM","PM"],dd],[["AM","PM"],dd,dd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dd,"{1} 'at' {0}",dd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Cb(o){const c=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let El={};function Og(o){const a=function uD(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Ng(a);if(c)return c;const h=a.split("-")[0];if(c=Ng(h),c)return c;if("en"===h)return uV;throw new Error(`Missing locale data for the locale "${o}".`)}function Eb(o){return Og(o)[ut.PluralCase]}function Ng(o){return o in El||(El[o]=qt.ng&&qt.ng.common&&qt.ng.common.locales&&qt.ng.common.locales[o]),El[o]}var ut=(()=>((ut=ut||{})[ut.LocaleId=0]="LocaleId",ut[ut.DayPeriodsFormat=1]="DayPeriodsFormat",ut[ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",ut[ut.DaysFormat=3]="DaysFormat",ut[ut.DaysStandalone=4]="DaysStandalone",ut[ut.MonthsFormat=5]="MonthsFormat",ut[ut.MonthsStandalone=6]="MonthsStandalone",ut[ut.Eras=7]="Eras",ut[ut.FirstDayOfWeek=8]="FirstDayOfWeek",ut[ut.WeekendRange=9]="WeekendRange",ut[ut.DateFormat=10]="DateFormat",ut[ut.TimeFormat=11]="TimeFormat",ut[ut.DateTimeFormat=12]="DateTimeFormat",ut[ut.NumberSymbols=13]="NumberSymbols",ut[ut.NumberFormats=14]="NumberFormats",ut[ut.CurrencyCode=15]="CurrencyCode",ut[ut.CurrencySymbol=16]="CurrencySymbol",ut[ut.CurrencyName=17]="CurrencyName",ut[ut.Currencies=18]="Currencies",ut[ut.Directionality=19]="Directionality",ut[ut.PluralCase=20]="PluralCase",ut[ut.ExtraData=21]="ExtraData",ut))();const Fg="en-US";let dD=Fg;function qg(o,a,c,h,f){if(o=X(o),Array.isArray(o))for(let _=0;_<o.length;_++)qg(o[_],a,c,h,f);else{const _=Ot(),b=ve();let E=ff(o)?o:X(o.provide),I=Zv(o);const M=yn(),x=1048575&M.providerIndexes,N=M.directiveStart,V=M.providerIndexes>>20;if(ff(o)||!o.multi){const K=new Eu(I,f,Dg),ue=Rb(E,a,f?x:x+V,N);-1===ue?(wo(sn(M,b),_,E),pd(_,o,a.length),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(K),b.push(K)):(c[ue]=K,b[ue]=K)}else{const K=Rb(E,a,x+V,N),ue=Rb(E,a,x,x+V),Oe=K>=0&&c[K],Ve=ue>=0&&c[ue];if(f&&!Ve||!f&&!Oe){wo(sn(M,b),_,E);const Qe=function pV(o,a,c,h,f){const _=new Eu(o,c,Dg);return _.multi=[],_.index=a,_.componentProviders=0,Bf(_,f,h&&!c),_}(f?Wx:qx,c.length,f,h,I);!f&&Ve&&(c[ue].providerFactory=Qe),pd(_,o,a.length,0),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(Qe),b.push(Qe)}else pd(_,o,K>-1?K:ue,Bf(c[f?ue:K],I,!f&&h));!f&&h&&Ve&&c[ue].componentProviders++}}}function pd(o,a,c,h){const f=ff(a),_=function wE(o){return!!o.useClass}(a);if(f||_){const I=(_?X(a.useClass):a).prototype.ngOnDestroy;if(I){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const x=M.indexOf(c);-1===x?M.push(c,[h,I]):M[x+1].push(h,I)}else M.push(c,I)}}}function Bf(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Rb(o,a,c,h){for(let f=c;f<h;f++)if(a[f]===o)return f;return-1}function qx(o,a,c,h){return VD(this.multi,[])}function Wx(o,a,c,h){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=da(c,c[1],this.providerFactory.index,h);_=E.slice(0,b),VD(f,_);for(let I=b;I<E.length;I++)_.push(E[I])}else _=[],VD(f,_);return _}function VD(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function Vf(o,a=[]){return c=>{c.providersResolver=(h,f)=>function Qr(o,a,c){const h=Ot();if(h.firstCreatePass){const f=Ur(o);qg(c,h.data,h.blueprint,f,!0),qg(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class UD{}class HD{resolveComponentFactory(a){throw function Yx(o){const a=Error(`No component factory found for ${_e(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Hf=(()=>{class o{}return o.NULL=new HD,o})();function Kx(){return Tl(yn(),ve())}function Tl(o,a){return new md($i(o,a))}let md=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=Kx,o})();function Qx(o){return o instanceof md?o.nativeElement:o}class jD{}let Xx=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Wg(){const o=ve(),c=zi(yn().index,o);return function Jx(o){return o[11]}(ki(c)?c:o)}(),o})(),eR=(()=>{class o{}return o.\u0275prov=nn({token:o,providedIn:"root",factory:()=>null}),o})();class Al{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Ob=new Al("13.2.7"),jf={};function kc(o,a,c,h,f=!1){for(;null!==c;){const _=a[c.index];if(null!==_&&h.push(ln(_)),Ir(_))for(let E=10;E<_.length;E++){const I=_[E],M=I[1].firstChild;null!==M&&kc(I[1],I,M,h)}const b=c.type;if(8&b)kc(o,a,c.child,h);else if(32&b){const E=g(c,a);let I;for(;I=E();)h.push(I)}else if(16&b){const E=GC(a,c);if(Array.isArray(E))h.push(...E);else{const I=k(a[16]);kc(I[1],I,E,h,!0)}}c=f?c.projectionNext:c.next}return h}class Gf{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return kc(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ir(a)){const c=a[8],h=c?c.indexOf(this):-1;h>-1&&(Kh(a,h),_a(c,h))}this._attachedToViewContainer=!1}Cc(this._lView[1],this._lView)}onDestroy(a){ug(this._lView[1],this._lView,null,a)}markForCheck(){Fv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function dM(o,a,c){vu(!0);try{Bv(o,a,c)}finally{vu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qu(o,a){Qm(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=a}}class tR extends Gf{constructor(a){super(a),this._view=a}detectChanges(){Vv(this._view)}checkNoChanges(){!function mE(o){vu(!0);try{Vv(o)}finally{vu(!1)}}(this._view)}get context(){return null}}class GD extends Hf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Xt(a);return new Nb(c,this.ngModule)}}function $D(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class Nb extends UD{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function eE(o){return o.map(JC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return $D(this.componentDef.inputs)}get outputs(){return $D(this.componentDef.outputs)}create(a,c,h,f){const _=(f=f||this.ngModule)?function Pb(o,a){return{get:(c,h,f)=>{const _=o.get(c,jf,f);return _!==jf||h===jf?_:a.get(c,h,f)}}}(a,f.injector):a,b=_.get(jD,uu),E=_.get(eR,null),I=b.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",x=h?function Iv(o,a,c){if(gn(o))return o.selectRootElement(a,c===Yt.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(I,h,this.componentDef.encapsulation):wc(b.createRenderer(null,this.componentDef),M,function nR(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),N=this.componentDef.onPush?576:528,V=function wl(o,a){return{components:[],scheduler:o||Ws,clean:hM,playerHandler:a||null,flags:0}}(),K=uf(0,null,null,1,0,null,null,null,null,null),ue=sf(null,K,V,N,null,null,b,I,E,_);let Oe,Ve;Xl(ue);try{const Qe=function xE(o,a,c,h,f,_){const b=c[1];c[20]=o;const I=Dc(b,20,2,"#host",null),M=I.mergedAttrs=a.hostAttrs;null!==M&&(hf(I,M,!0),null!==o&&(Ye(f,o,M),null!==I.classes&&Xm(f,o,I.classes),null!==I.styles&&zC(f,o,I.styles)));const x=h.createRenderer(o,a),N=sf(c,cg(a),null,a.onPush?64:16,c[20],I,h,x,_||null,null);return b.firstCreatePass&&(wo(sn(I,c),b,a.type),xv(b,I),fE(I,c.length,1)),ed(c,N),c[20]=N}(x,this.componentDef,ue,b,I);if(x)if(h)Ye(I,x,["ng-version",Ob.full]);else{const{attrs:ye,classes:dt}=function tE(o){const a=[],c=[];let h=1,f=2;for(;h<o.length;){let _=o[h];if("string"==typeof _)2===f?""!==_&&a.push(_,o[++h]):8===f&&c.push(_);else{if(!Si(f))break;f=_}h++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);ye&&Ye(I,x,ye),dt&&dt.length>0&&Xm(I,x,dt.join(" "))}if(Ve=Ka(K,20),void 0!==c){const ye=Ve.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const Vt=c[dt];ye.push(null!=Vt?Array.from(Vt):null)}}Oe=function wg(o,a,c,h,f){const _=c[1],b=function dE(o,a,c){const h=yn();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Rv(o,h,a,yl(o,a,1,null),c));const f=da(a,o,h.directiveStart,h);Di(f,a);const _=$i(h,a);return _&&Di(_,a),f}(_,c,a);if(h.components.push(b),o[8]=b,f&&f.forEach(I=>I(b,a)),a.contentQueries){const I=yn();a.contentQueries(1,b,I.directiveStart)}const E=yn();return!_.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ms(E.index),rM(c[1],E,0,E.directiveStart,E.directiveEnd,a),Mv(a,b)),b}(Qe,this.componentDef,ue,V,[Qv]),lg(K,ue,null)}finally{Jl()}return new Yg(this.componentType,Oe,Tl(Ve,ue),ue,Ve)}}class Yg extends class Zx{}{constructor(a,c,h,f,_){super(),this.location=h,this._rootLView=f,this._tNode=_,this.instance=c,this.hostView=this.changeDetectorRef=new tR(f),this.componentType=a}get injector(){return new fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Oc{}class qD{}const $f=new Map;class Kg extends Oc{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new GD(this);const h=Ct(a);this._bootstrapComponents=cr(h.bootstrap),this._r3Injector=bE(a,c,[{provide:Oc,useValue:this},{provide:Hf,useValue:this.componentFactoryResolver}],_e(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,c=Bo.THROW_IF_NOT_FOUND,h=gt.Default){return a===Bo||a===Oc||a===jv?this:this._r3Injector.get(a,c,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Qg extends qD{constructor(a){super(),this.moduleType=a,null!==Ct(a)&&function sR(o){const a=new Set;!function c(h){const f=Ct(h,!0),_=f.id;null!==_&&(function rR(o,a,c){if(a&&a!==c)throw new Error(`Duplicate module registered for ${o} - ${_e(a)} vs ${_e(a.name)}`)}(_,$f.get(_),h),$f.set(_,h));const b=cr(f.imports);for(const E of b)a.has(E)||(a.add(E),c(E))}(o)}(a)}create(a){return new Kg(this.moduleType,a)}}function YD(o,a,c){const h=ri()+o,f=ve();return f[h]===Et?vs(f,h,c?a.call(c):a()):function od(o,a){return o[a]}(f,h)}function KD(o,a,c,h){return function JD(o,a,c,h,f,_){const b=a+c;return hr(o,b,f)?vs(o,b+1,_?h.call(_,f):h(f)):function Pc(o,a){const c=o[a];return c===Et?void 0:c}(o,b+1)}(ve(),ri(),o,a,c,h)}function Vb(o){return a=>{setTimeout(o,void 0,a)}}const Xr=class gR extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,h){var f,_,b;let E=a,I=c||(()=>null),M=h;if(a&&"object"==typeof a){const N=a;E=null===(f=N.next)||void 0===f?void 0:f.bind(N),I=null===(_=N.error)||void 0===_?void 0:_.bind(N),M=null===(b=N.complete)||void 0===b?void 0:b.bind(N)}this.__isAsync&&(I=Vb(I),E&&(E=Vb(E)),M&&(M=Vb(M)));const x=super.subscribe({next:E,error:I,complete:M});return a instanceof te.w0&&a.add(x),x}};function _R(){return this._results[_f()]()}class qf{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=_f(),h=qf.prototype;h[c]||(h[c]=_R)}get changes(){return this._changes||(this._changes=new Xr)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const h=this;h.dirty=!1;const f=Ar(a);(this._changesDetected=!function bh(o,a,c){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],_=a[h];if(c&&(f=c(f),_=c(_)),_!==f)return!1}return!0}(h._results,f,c))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let gd=(()=>{class o{}return o.__NG_ELEMENT_ID__=_d,o})();const iI=gd,Cs=class extends iI{constructor(a,c,h){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(a){const c=this._declarationTContainer.tViews,h=sf(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(c)),lg(c,h,a),new Gf(h)}};function _d(){return Xg(yn(),ve())}function Xg(o,a){return 4&o.type?new Cs(a,o,Tl(o,a)):null}let Jg=(()=>{class o{}return o.__NG_ELEMENT_ID__=rI,o})();function rI(){return sI(yn(),ve())}const yR=Jg,Ub=class extends yR{constructor(a,c,h){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=h}get element(){return Tl(this._hostTNode,this._hostLView)}get injector(){return new fa(this._hostTNode,this._hostLView)}get parentInjector(){const a=bo(this._hostTNode,this._hostLView);if(ym(a)){const c=_n(a,this._hostLView),h=gs(a);return new fa(c[1].data[h+8],c)}return new fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Wf(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,h){const f=a.createEmbeddedView(c||{});return this.insert(f,h),f}createComponent(a,c,h,f,_){const b=a&&!function ga(o){return"function"==typeof o}(a);let E;if(b)E=c;else{const N=c||{};E=N.index,h=N.injector,f=N.projectableNodes,_=N.ngModuleRef}const I=b?a:new Nb(Xt(a)),M=h||this.parentInjector;if(!_&&null==I.ngModule){const V=(b?M:this.parentInjector).get(Oc,null);V&&(_=V)}const x=I.create(M,f,void 0,_);return this.insert(x.hostView,E),x}insert(a,c){const h=a._lView,f=h[1];if(function hu(o){return Ir(o[3])}(h)){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const N=h[3],V=new Ub(N,N[6],N[3]);V.detach(V.indexOf(a))}}const _=this._adjustIndex(c),b=this._lContainer;!function Wu(o,a,c,h){const f=10+h,_=c.length;h>0&&(c[f-1][4]=a),h<_-10?(a[4]=c[f],il(c,10+h,a)):(c.push(a),a[4]=null),a[3]=c;const b=a[17];null!==b&&c!==b&&function No(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,h,b,_);const E=rv(_,b),I=h[11],M=Xh(I,b[7]);return null!==M&&function Zm(o,a,c,h,f,_){h[0]=f,h[6]=a,Qm(o,h,c,1,f,_)}(f,b[6],I,h,M,E),a.attachToViewContainerRef(),il(Hb(b),_,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Wf(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),h=Kh(this._lContainer,c);h&&(_a(Hb(this._lContainer),c),Cc(h[1],h))}detach(a){const c=this._adjustIndex(a,-1),h=Kh(this._lContainer,c);return h&&null!=_a(Hb(this._lContainer),c)?new Gf(h):null}_adjustIndex(a,c=0){return null==a?this.length+c:a}};function Wf(o){return o[8]}function Hb(o){return o[8]||(o[8]=[])}function sI(o,a){let c;const h=a[o.index];if(Ir(h))c=h;else{let f;if(8&o.type)f=ln(h);else{const _=a[11];f=_.createComment("");const b=$i(o,a);Zr(_,Xh(_,b),f,function WA(o,a){return gn(o)?o.nextSibling(a):a.nextSibling}(_,b),!1)}a[o.index]=c=kv(h,a,f,o),ed(a,c)}return new Ub(c,o,a)}class Gb{constructor(a){this.queryList=a,this.matches=null}clone(){return new Gb(this.queryList)}setDirty(){this.queryList.setDirty()}}class $b{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const h=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let _=0;_<h;_++){const b=c.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new $b(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==pI(a,c).matches&&this.queries[c].setDirty()}}class oI{constructor(a,c,h=null){this.predicate=a,this.flags=c,this.read=h}}class zb{constructor(a=[]){this.queries=a}elementStart(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let h=0;h<this.length;h++){const f=null!==c?c.length:0,_=this.getByIndex(h).embeddedTView(a,f);_&&(_.indexInDeclarationView=h,null!==c?c.push(_):c=[_])}return null!==c?new zb(c):null}template(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class e_{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new e_(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const _=h[f];this.matchTNodeWithReadOption(a,c,t_(c,_)),this.matchTNodeWithReadOption(a,c,$r(c,a,_,!1,!1))}else h===gd?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,$r(c,a,h,!1,!1))}matchTNodeWithReadOption(a,c,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===md||f===Jg||f===gd&&4&c.type)this.addMatch(c.index,-2);else{const _=$r(c,a,f,!1,!1);null!==_&&this.addMatch(c.index,_)}else this.addMatch(c.index,h)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function t_(o,a){const c=o.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===a)return c[h+1];return null}function wR(o,a,c,h){return-1===c?function aI(o,a){return 11&o.type?Tl(o,a):4&o.type?Xg(o,a):null}(a,o):-2===c?function lI(o,a,c){return c===md?Tl(a,o):c===gd?Xg(a,o):c===Jg?sI(a,o):void 0}(o,a,h):da(o,o[1],c,a)}function cI(o,a,c,h){const f=a[19].queries[h];if(null===f.matches){const _=o.data,b=c.matches,E=[];for(let I=0;I<b.length;I+=2){const M=b[I];E.push(M<0?null:wR(a,_[M],b[I+1],c.metadata.read))}f.matches=E}return f.matches}function qb(o,a,c,h){const f=o.queries.getByIndex(c),_=f.matches;if(null!==_){const b=cI(o,a,f,c);for(let E=0;E<_.length;E+=2){const I=_[E];if(I>0)h.push(b[E/2]);else{const M=_[E+1],x=a[-I];for(let N=10;N<x.length;N++){const V=x[N];V[17]===V[3]&&qb(V[1],V,M,h)}if(null!==x[9]){const N=x[9];for(let V=0;V<N.length;V++){const K=N[V];qb(K[1],K,M,h)}}}}}return h}function uI(o){const a=ve(),c=Ot(),h=Ey();Ql(h+1);const f=pI(c,h);if(o.dirty&&ra(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?qb(c,a,h,[]):cI(c,a,f,h);o.reset(_,Qx),o.notifyOnChanges()}return!0}return!1}function dI(o,a,c){const h=Ot();h.firstCreatePass&&(Zb(h,new oI(o,a,c),-1),2==(2&a)&&(h.staticViewQueries=!0)),Wb(h,ve(),a)}function hI(o,a,c,h){const f=Ot();if(f.firstCreatePass){const _=yn();Zb(f,new oI(a,c,h),_.index),function CR(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}Wb(f,ve(),c)}function fI(){return function Fc(o,a){return o[19].queries[a].queryList}(ve(),Ey())}function Wb(o,a,c){const h=new qf(4==(4&c));ug(o,a,h,h.destroy),null===a[19]&&(a[19]=new $b),a[19].queries.push(new Gb(h))}function Zb(o,a,c){null===o.queries&&(o.queries=new zb),o.queries.track(new e_(a,c))}function pI(o,a){return o.queries.getByIndex(a)}function Jb(...o){}const OR=new bn("Application Initializer");let TI=(()=>{class o{constructor(c){this.appInits=c,this.resolve=Jb,this.reject=Jb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(jE(_))c.push(_);else if(ZM(_)){const b=new Promise((E,I)=>{_.subscribe({complete:E,error:I})});c.push(b)}}Promise.all(c).then(()=>{h()}).catch(f=>{this.reject(f)}),0===c.length&&h(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Pn(OR,8))},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const PR=new bn("AppId",{providedIn:"root",factory:function NR(){return`${AI()}${AI()}${AI()}`}});function AI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ew=new bn("Platform Initializer"),tw=new bn("Platform ID"),nw=new bn("appBootstrapListener");let MI=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();const iw=new bn("LocaleId",{providedIn:"root",factory:()=>ys(iw,gt.Optional|gt.SkipSelf)||function FR(){return"undefined"!=typeof $localize&&$localize.locale||Fg}()}),LR=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class MV{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let UR=(()=>{class o{compileModuleSync(c){return new Qg(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),_=cr(Ct(c).declarations).reduce((b,E)=>{const I=Xt(E);return I&&b.push(new Nb(I)),b},[]);return new MV(h,_)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const xI=(()=>Promise.resolve(0))();function s_(o){"undefined"==typeof Zone?xI.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class pr{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xr(!1),this.onMicrotaskEmpty=new Xr(!1),this.onStable=new Xr(!1),this.onError=new Xr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&c,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function GR(){let o=qt.requestAnimationFrame,a=qt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function o_(o){const a=()=>{!function rw(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(qt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,a_(o),o.isCheckStableRunning=!0,Kf(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),a_(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,f,_,b,E)=>{try{return l_(o),c.invokeTask(f,_,b,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),Qf(o)}},onInvoke:(c,h,f,_,b,E,I)=>{try{return l_(o),c.invoke(f,_,b,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),Qf(o)}},onHasTask:(c,h,f,_)=>{c.hasTask(f,_),h===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,a_(o),Kf(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(c,h,f,_)=>(c.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,c,h){return this._inner.run(a,c,h)}runTask(a,c,h,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,a,ci,Jb,Jb);try{return _.runTask(b,c,h)}finally{_.cancelTask(b)}}runGuarded(a,c,h){return this._inner.runGuarded(a,c,h)}runOutsideAngular(a){return this._outer.run(a)}}const ci={};function Kf(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function a_(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function l_(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Qf(o){o._nesting--,Kf(o)}class RI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xr,this.onMicrotaskEmpty=new Xr,this.onStable=new Xr,this.onError=new Xr}run(a,c,h){return a.apply(c,h)}runGuarded(a,c,h){return a.apply(c,h)}runOutsideAngular(a){return a()}runTask(a,c,h,f){return a.apply(c,h)}}let sw=(()=>{class o{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pr.assertNotInAngularZone(),s_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())s_(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,f){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:_,updateCb:f})}whenStable(c,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,h,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Pn(pr))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})(),kI=(()=>{class o{constructor(){this._applications=new Map,OI.addToWindow(this)}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return OI.findTestabilityInTree(this,c,h)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();class xV{addToWindow(a){}findTestabilityInTree(a,c,h){return null}}function RV(o){OI=o}let Go,OI=new xV;const $R=new bn("AllowMultipleToken");class zR{constructor(a,c){this.name=a,this.token=c}}function ow(o,a,c=[]){const h=`Platform: ${a}`,f=new bn(h);return(_=[])=>{let b=lw();if(!b||b.injector.get($R,!1))if(o)o(c.concat(_).concat({provide:f,useValue:!0}));else{const E=c.concat(_).concat({provide:f,useValue:!0},{provide:$v,useValue:"platform"});!function qR(o){if(Go&&!Go.destroyed&&!Go.injector.get($R,!1))throw new Le(400,"");Go=o.get(NI);const a=o.get(ew,null);a&&a.forEach(c=>c())}(Bo.create({providers:E,name:h}))}return function aw(o){const a=lw();if(!a)throw new Le(401,"");return a}()}}function lw(){return Go&&!Go.destroyed?Go:null}let NI=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const E=function cw(o,a){let c;return c="noop"===o?new RI:("zone.js"===o?void 0:o)||new pr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),c}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),I=[{provide:pr,useValue:E}];return E.run(()=>{const M=Bo.create({providers:I,parent:this.injector,name:c.moduleType.name}),x=c.create(M),N=x.injector.get(zu,null);if(!N)throw new Le(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:K=>{N.handleError(K)}});x.onDestroy(()=>{uw(this._modules,x),V.unsubscribe()})}),function WR(o,a,c){try{const h=c();return jE(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(N,E,()=>{const V=x.injector.get(TI);return V.runInitializers(),V.donePromise.then(()=>(function Sx(o){Nt(o,"Expected localeId to be defined"),"string"==typeof o&&(dD=o.toLowerCase().replace(/_/g,"-"))}(x.injector.get(iw,Fg)||Fg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(c,h=[]){const f=ZR({},h);return function kV(o,a,c){const h=new Qg(c);return Promise.resolve(h)}(0,0,c).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(c){const h=c.injector.get(FI);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Le(403,"");c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Pn(Bo))},o.\u0275prov=nn({token:o,factory:o.\u0275fac}),o})();function ZR(o,a){return Array.isArray(a)?a.reduce(ZR,o):Object.assign(Object.assign({},o),a)}let FI=(()=>{class o{constructor(c,h,f,_,b){this._zone=c,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=_,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new B.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),I=new B.y(M=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{pr.assertNotInAngularZone(),s_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{pr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{x.unsubscribe(),N.unsubscribe()}});this.isStable=(0,he.T)(E,I.pipe((0,we.B)()))}bootstrap(c,h){if(!this._initStatus.done)throw new Le(405,"");let f;f=c instanceof UD?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(f.componentType);const _=function OV(o){return o.isBoundToModule}(f)?void 0:this._injector.get(Oc),E=f.create(Bo.NULL,[],h||f.selector,_),I=E.location.nativeElement,M=E.injector.get(sw,null),x=M&&E.injector.get(kI);return M&&x&&x.registerApplication(I,M),E.onDestroy(()=>{this.detachView(E.hostView),uw(this.components,E),x&&x.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;uw(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(nw,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(c){return new(c||o)(Pn(pr),Pn(Bo),Pn(zu),Pn(Hf),Pn(TI))},o.\u0275prov=nn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function uw(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let YR=!0,dw=!1;function Xf(){return dw=!0,YR}function Jf(){if(dw)throw new Error("Cannot enable prod mode after platform setup.");YR=!1}let KR=(()=>{class o{}return o.__NG_ELEMENT_ID__=QR,o})();function QR(o){return function LV(o,a,c){if(eh(o)&&!c){const h=zi(o.index,a);return new Gf(h,h)}return 47&o.type?new Gf(a[16],a):null}(yn(),ve(),16==(16&o))}class h_{constructor(){}supports(a){return yf(a)}create(a){return new JR(a)}}const qV=(o,a)=>a;class JR{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||qV}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,h=this._removalsHead,f=0,_=null;for(;c||h;){const b=!h||c&&c.currentIndex<zI(h,f,_)?c:h,E=zI(b,f,_),I=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{_||(_=[]);const M=E-f,x=I-f;if(M!=x){for(let V=0;V<M;V++){const K=V<_.length?_[V]:_[V]=0,ue=K+V;x<=ue&&ue<M&&(_[V]=K+1)}_[b.previousIndex]=x-M}}E!==I&&a(b,E,I)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!yf(a))throw new Le(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,b,c=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)_=a[E],b=this._trackByFn(E,_),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,_,b,E)),Object.is(c.item,_)||this._addIdentityChange(c,_)):(c=this._mismatch(c,_,b,E),h=!0),c=c._next}else f=0,function eb(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[_f()]();let h;for(;!(h=c.next()).done;)a(h.value)}}(a,E=>{b=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,E,b,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,b,f),h=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,h,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,_,f)):a=this._addAfter(new ek(c,h),_,f),a}_verifyReinsertion(a,c,h,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,c,h),this._addToMoves(a,h),a}_moveAfter(a,c,h){return this._unlink(a),this._insertAfter(a,c,h),this._addToMoves(a,h),a}_addAfter(a,c,h){return this._insertAfter(a,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,h){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new $I),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,h=a._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $I),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class ek{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class GI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const c=a._prevDup,h=a._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class $I{constructor(){this.map=new Map}put(a){const c=a.trackById;let h=this.map.get(c);h||(h=new GI,this.map.set(c,h)),h.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zI(o,a,c){const h=o.previousIndex;if(null===h)return h;let f=0;return c&&h<c.length&&(f=c[h]),h+a+f}class pw{constructor(){}supports(a){return a instanceof Map||Eg(a)}create(){return new qI}}class qI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Eg(a)))throw new Le(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const _=this._getOrCreateRecordForKey(f,h);c=this._insertBeforeOrAppend(c,_)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const h=a._prev;return c._next=a,c._prev=h,a._prev=c,h&&(h._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const h=new WV(a);return this._records.set(a,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(h=>c(a[h],h))}}class WV{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tk(){return new WI([new h_])}let WI=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(null!=h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||tk()),deps:[[o,new ba,new Io]]}}find(c){const h=this.factories.find(f=>f.supports(c));if(null!=h)return h;throw new Le(901,"")}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:tk}),o})();function nk(){return new ZI([new pw])}let ZI=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||nk()),deps:[[o,new ba,new Io]]}}find(c){const h=this.factories.find(_=>_.supports(c));if(h)return h;throw new Le(901,"")}}return o.\u0275prov=nn({token:o,providedIn:"root",factory:nk}),o})();const YV=ow(null,"core",[{provide:tw,useValue:"unknown"},{provide:NI,deps:[Bo]},{provide:kI,deps:[]},{provide:MI,deps:[]}]);let ik=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Pn(FI))},o.\u0275mod=de({type:o}),o.\u0275inj=Gt({}),o})()},3942:(Ke,me,F)=>{"use strict";F.d(me,{Z:()=>Le});var u=F(2090),te=F(4859),B=F(9681),he=F(1877);class we{constructor(ee,Ee){this._delegate=ee,this.firebase=Ee,(0,B._addComponent)(ee,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this._delegate.automaticDataCollectionEnabled=ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ee=>{this._delegate.checkDestroyed(),ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ee,Ee=B._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(ee);return!et.isInitialized()&&"EXPLICIT"===(null===(We=et.getComponent())||void 0===We?void 0:We.instantiationMode)&&et.initialize(),et.getImmediate({identifier:Ee})}_removeServiceInstance(ee,Ee=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ee).clearInstance(Ee)}_addComponent(ee){(0,B._addComponent)(this._delegate,ee)}_addOrOverwriteComponent(ee){(0,B._addOrOverwriteComponent)(this._delegate,ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function Se(){const Fe=function _e(Fe){const ee={},Ee={__esModule:!0,initializeApp:function Ie(Ge,j={}){const fe=B.initializeApp(Ge,j);if((0,u.r3)(ee,fe.name))return ee[fe.name];const W=new Fe(fe,Ee);return ee[fe.name]=W,W},app:et,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function pe(Ge){const j=Ge.name,fe=j.replace("-compat","");if(B._registerComponent(Ge)&&"PUBLIC"===Ge.type){const W=(J=et())=>{if("function"!=typeof J[fe])throw le.create("invalid-app-argument",{appName:j});return J[fe]()};void 0!==Ge.serviceProps&&(0,u.ZB)(W,Ge.serviceProps),Ee[fe]=W,Fe.prototype[fe]=function(...J){return this._getService.bind(this,j).apply(this,Ge.multipleInstances?J:[])}}return"PUBLIC"===Ge.type?Ee[fe]:null},removeApp:function We(Ge){delete ee[Ge]},useAsService:function Ne(Ge,j){return"serverAuth"===j?null:j},modularAPIs:B}};function et(Ge){if(!(0,u.r3)(ee,Ge=Ge||B._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Ge});return ee[Ge]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function ae(){return Object.keys(ee).map(Ge=>ee[Ge])}}),et.App=Fe,Ee}(we);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function ee(Ee){(0,u.ZB)(Fe,Ee)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Fe}(),$=new he.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=G;!function Te(Fe){(0,B.registerVersion)("@firebase/app-compat","0.1.39",Fe)}()},9681:(Ke,me,F)=>{"use strict";F.r(me),F.d(me,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>us,_DEFAULT_ENTRY_NAME:()=>Nt,_addComponent:()=>En,_addOrOverwriteComponent:()=>nn,_apps:()=>tn,_clearComponents:()=>ir,_components:()=>Wn,_getProvider:()=>Gt,_registerComponent:()=>Hi,_removeServiceInstance:()=>Lt,deleteApp:()=>gt,getApp:()=>Yo,getApps:()=>Rs,initializeApp:()=>xs,onLog:()=>Ai,registerVersion:()=>Un,setLogLevel:()=>Ua});var u=F(5861),te=F(4859),B=F(1877),he=F(2090),we=F(8766);class be{constructor(ge){this.container=ge}getPlatformInfoString(){return this.container.getProviders().map($e=>{if(function le(qe){const ge=qe.getComponent();return"VERSION"===(null==ge?void 0:ge.type)}($e)){const vt=$e.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter($e=>$e).join(" ")}}const _e="@firebase/app",G=new B.Yd("@firebase/app"),Nt="[DEFAULT]",Ze={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Wn=new Map;function En(qe,ge){try{qe.container.addComponent(ge)}catch($e){G.debug(`Component ${ge.name} failed to register with FirebaseApp ${qe.name}`,$e)}}function nn(qe,ge){qe.container.addOrOverwriteComponent(ge)}function Hi(qe){const ge=qe.name;if(Wn.has(ge))return G.debug(`There were multiple attempts to register component ${ge}.`),!1;Wn.set(ge,qe);for(const $e of tn.values())En($e,qe);return!0}function Gt(qe,ge){const $e=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return $e&&$e.triggerHeartbeat(),qe.container.getProvider(ge)}function Lt(qe,ge,$e=Nt){Gt(qe,ge).clearInstance($e)}function ir(){Wn.clear()}const rr=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class sr{constructor(ge,$e,vt){this._isDeleted=!1,this._options=Object.assign({},ge),this._config=Object.assign({},$e),this._name=$e.name,this._automaticDataCollectionEnabled=$e.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ge){this._isDeleted=ge}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}const us="9.14.0";function xs(qe,ge={}){let $e=qe;"object"!=typeof ge&&(ge={name:ge});const vt=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},ge),yt=vt.name;if("string"!=typeof yt||!yt)throw rr.create("bad-app-name",{appName:String(yt)});if($e||($e=(0,he.aH)()),!$e)throw rr.create("no-options");const Ft=tn.get(yt);if(Ft){if((0,he.vZ)($e,Ft.options)&&(0,he.vZ)(vt,Ft.config))return Ft;throw rr.create("duplicate-app",{appName:yt})}const U=new te.H0(yt);for(const q of Wn.values())U.addComponent(q);const L=new sr($e,vt,U);return tn.set(yt,L),L}function Yo(qe=Nt){const ge=tn.get(qe);if(!ge&&qe===Nt)return xs();if(!ge)throw rr.create("no-app",{appName:qe});return ge}function Rs(){return Array.from(tn.values())}function gt(qe){return Br.apply(this,arguments)}function Br(){return(Br=(0,u.Z)(function*(qe){const ge=qe.name;tn.has(ge)&&(tn.delete(ge),yield Promise.all(qe.container.getProviders().map($e=>$e.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function Un(qe,ge,$e){var vt;let yt=null!==(vt=Ze[qe])&&void 0!==vt?vt:qe;$e&&(yt+=`-${$e}`);const Ft=yt.match(/\s|\//),U=ge.match(/\s|\//);if(Ft||U){const L=[`Unable to register library "${yt}" with version "${ge}":`];return Ft&&L.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),Ft&&U&&L.push("and"),U&&L.push(`version name "${ge}" contains illegal characters (whitespace or "/")`),void G.warn(L.join(" "))}Hi(new te.wA(`${yt}-version`,()=>({library:yt,version:ge}),"VERSION"))}function Ai(qe,ge){if(null!==qe&&"function"!=typeof qe)throw rr.create("invalid-log-argument");(0,B.Am)(qe,ge)}function Ua(qe){(0,B.Ub)(qe)}const ti="firebase-heartbeat-store";let ds=null;function Ko(){return ds||(ds=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(qe,ge)=>{0===ge&&qe.createObjectStore(ti)}}).catch(qe=>{throw rr.create("idb-open",{originalErrorMessage:qe.message})})),ds}function nt(){return(nt=(0,u.Z)(function*(qe){var ge;try{return(yield Ko()).transaction(ti).objectStore(ti).get(or(qe))}catch($e){if($e instanceof he.ZR)G.warn($e.message);else{const vt=rr.create("idb-get",{originalErrorMessage:null===(ge=$e)||void 0===ge?void 0:ge.message});G.warn(vt.message)}}})).apply(this,arguments)}function _t(qe,ge){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,u.Z)(function*(qe,ge){var $e;try{const yt=(yield Ko()).transaction(ti,"readwrite");return yield yt.objectStore(ti).put(ge,or(qe)),yt.done}catch(vt){if(vt instanceof he.ZR)G.warn(vt.message);else{const yt=rr.create("idb-set",{originalErrorMessage:null===($e=vt)||void 0===$e?void 0:$e.message});G.warn(yt.message)}}})).apply(this,arguments)}function or(qe){return`${qe.name}!${qe.options.appId}`}class xi{constructor(ge){this.container=ge,this._heartbeatsCache=null;const $e=this.container.getProvider("app").getImmediate();this._storage=new Xo($e),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var ge=this;return(0,u.Z)(function*(){const vt=ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=Ri();if(null===ge._heartbeatsCache&&(ge._heartbeatsCache=yield ge._heartbeatsCachePromise),ge._heartbeatsCache.lastSentHeartbeatDate!==yt&&!ge._heartbeatsCache.heartbeats.some(Ft=>Ft.date===yt))return ge._heartbeatsCache.heartbeats.push({date:yt,agent:vt}),ge._heartbeatsCache.heartbeats=ge._heartbeatsCache.heartbeats.filter(Ft=>{const U=new Date(Ft.date).valueOf();return Date.now()-U<=2592e6}),ge._storage.overwrite(ge._heartbeatsCache)})()}getHeartbeatsHeader(){var ge=this;return(0,u.Z)(function*(){if(null===ge._heartbeatsCache&&(yield ge._heartbeatsCachePromise),null===ge._heartbeatsCache||0===ge._heartbeatsCache.heartbeats.length)return"";const $e=Ri(),{heartbeatsToSend:vt,unsentEntries:yt}=function ht(qe,ge=1024){const $e=[];let vt=qe.slice();for(const yt of qe){const Ft=$e.find(U=>U.agent===yt.agent);if(Ft){if(Ft.dates.push(yt.date),Bt($e)>ge){Ft.dates.pop();break}}else if($e.push({agent:yt.agent,dates:[yt.date]}),Bt($e)>ge){$e.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:$e,unsentEntries:vt}}(ge._heartbeatsCache.heartbeats),Ft=(0,he.L)(JSON.stringify({version:2,heartbeats:vt}));return ge._heartbeatsCache.lastSentHeartbeatDate=$e,yt.length>0?(ge._heartbeatsCache.heartbeats=yt,yield ge._storage.overwrite(ge._heartbeatsCache)):(ge._heartbeatsCache.heartbeats=[],ge._storage.overwrite(ge._heartbeatsCache)),Ft})()}}function Ri(){return(new Date).toISOString().substring(0,10)}class Xo{constructor(ge){this.app=ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ge=this;return(0,u.Z)(function*(){return(yield ge._canUseIndexedDBPromise)&&(yield function Yt(qe){return nt.apply(this,arguments)}(ge.app))||{heartbeats:[]}})()}overwrite(ge){var $e=this;return(0,u.Z)(function*(){var vt;if(yield $e._canUseIndexedDBPromise){const Ft=yield $e.read();return _t($e.app,{lastSentHeartbeatDate:null!==(vt=ge.lastSentHeartbeatDate)&&void 0!==vt?vt:Ft.lastSentHeartbeatDate,heartbeats:ge.heartbeats})}})()}add(ge){var $e=this;return(0,u.Z)(function*(){var vt;if(yield $e._canUseIndexedDBPromise){const Ft=yield $e.read();return _t($e.app,{lastSentHeartbeatDate:null!==(vt=ge.lastSentHeartbeatDate)&&void 0!==vt?vt:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...ge.heartbeats]})}})()}}function Bt(qe){return(0,he.L)(JSON.stringify({version:2,heartbeats:qe})).length}!function Jo(qe){Hi(new te.wA("platform-logger",ge=>new be(ge),"PRIVATE")),Hi(new te.wA("heartbeat",ge=>new xi(ge),"PRIVATE")),Un(_e,"0.8.4",qe),Un(_e,"0.8.4","esm2017"),Un("fire-js","")}("")},4859:(Ke,me,F)=>{"use strict";F.d(me,{wA:()=>B,H0:()=>_e,zt:()=>we});var u=F(5861),te=F(2090);class B{constructor(G,$,X){this.name=G,this.instanceFactory=$,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const he="[DEFAULT]";class we{constructor(G,$){this.name=G,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const $=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has($)){const X=new te.BH;if(this.instancesDeferred.set($,X),this.isInitialized($)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:$});Be&&X.resolve(Be)}catch(Be){}}return this.instancesDeferred.get($).promise}getImmediate(G){var $;const X=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),Be=null!==($=null==G?void 0:G.optional)&&void 0!==$&&$;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Te){if(Be)return null;throw Te}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function le(Se){return"EAGER"===Se.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:he})}catch($){}for(const[$,X]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier($);try{const Te=this.getOrInitializeService({instanceIdentifier:Be});X.resolve(Te)}catch(Te){}}}}clearInstance(G=he){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,u.Z)(function*(){const $=Array.from(G.instances.values());yield Promise.all([...$.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...$.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=he){return this.instances.has(G)}getOptions(G=he){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:$={}}=G,X=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:X,options:$});for(const[Te,Le]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Te)&&Le.resolve(Be);return Be}onInit(G,$){var X;const Be=this.normalizeInstanceIdentifier($),Te=null!==(X=this.onInitCallbacks.get(Be))&&void 0!==X?X:new Set;Te.add(G),this.onInitCallbacks.set(Be,Te);const Le=this.instances.get(Be);return Le&&G(Le,Be),()=>{Te.delete(G)}}invokeOnInitCallbacks(G,$){const X=this.onInitCallbacks.get($);if(X)for(const Be of X)try{Be(G,$)}catch(Te){}}getOrInitializeService({instanceIdentifier:G,options:$={}}){let X=this.instances.get(G);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=G,Se===he?void 0:Se),options:$}),this.instances.set(G,X),this.instancesOptions.set(G,$),this.invokeOnInitCallbacks(X,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,X)}catch(Be){}var Se;return X||null}normalizeInstanceIdentifier(G=he){return this.component?this.component.multipleInstances?G:he:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const $=this.getProvider(G.name);if($.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);$.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const $=new we(G,this);return this.providers.set(G,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(Ke,me,F)=>{"use strict";F.d(me,{in:()=>te,Yd:()=>le,Ub:()=>_e,Am:()=>Se});const u=[];var te=(()=>{return(G=te||(te={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",te;var G})();const B={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},he=te.INFO,we={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},be=(G,$,...X)=>{if($<G.logLevel)return;const Be=(new Date).toISOString(),Te=we[$];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Te](`[${Be}]  ${G.name}:`,...X)};class le{constructor($){this.name=$,this._logLevel=he,this._logHandler=be,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in te))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?B[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...$),this._logHandler(this,te.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...$),this._logHandler(this,te.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,te.INFO,...$),this._logHandler(this,te.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,te.WARN,...$),this._logHandler(this,te.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...$),this._logHandler(this,te.ERROR,...$)}}function _e(G){u.forEach($=>{$.setLogLevel(G)})}function Se(G,$){for(const X of u){let Be=null;$&&$.level&&(Be=B[$.level]),X.userLogHandler=null===G?null:(Te,Le,...Fe)=>{const ee=Fe.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(We){return null}}).filter(Ee=>Ee).join(" ");Le>=(null!=Be?Be:Te.logLevel)&&G({level:te[Le].toLowerCase(),message:ee,args:Fe,type:Te.name})}}}},8766:(Ke,me,F)=>{"use strict";F.d(me,{Lj:()=>Ie,X3:()=>et});var u=F(5861);let B,he;const le=new WeakMap,_e=new WeakMap,Se=new WeakMap,G=new WeakMap,$=new WeakMap;let Te={get(j,fe,W){if(j instanceof IDBTransaction){if("done"===fe)return _e.get(j);if("objectStoreNames"===fe)return j.objectStoreNames||Se.get(j);if("store"===fe)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return Ee(j[fe])},set:(j,fe,W)=>(j[fe]=W,!0),has:(j,fe)=>j instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in j};function ee(j){return"function"==typeof j?function Fe(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...fe){return j.apply(We(this),fe),Ee(le.get(this))}:function(...fe){return Ee(j.apply(We(this),fe))}:function(fe,...W){const J=j.call(We(this),fe,...W);return Se.set(J,fe.sort?fe.sort():[fe]),Ee(J)}}(j):(j instanceof IDBTransaction&&function Be(j){if(_e.has(j))return;const fe=new Promise((W,J)=>{const Q=()=>{j.removeEventListener("complete",ce),j.removeEventListener("error",se),j.removeEventListener("abort",se)},ce=()=>{W(),Q()},se=()=>{J(j.error||new DOMException("AbortError","AbortError")),Q()};j.addEventListener("complete",ce),j.addEventListener("error",se),j.addEventListener("abort",se)});_e.set(j,fe)}(j),((j,fe)=>fe.some(W=>j instanceof W))(j,function we(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Te):j)}function Ee(j){if(j instanceof IDBRequest)return function X(j){const fe=new Promise((W,J)=>{const Q=()=>{j.removeEventListener("success",ce),j.removeEventListener("error",se)},ce=()=>{W(Ee(j.result)),Q()},se=()=>{J(j.error),Q()};j.addEventListener("success",ce),j.addEventListener("error",se)});return fe.then(W=>{W instanceof IDBCursor&&le.set(W,j)}).catch(()=>{}),$.set(fe,j),fe}(j);if(G.has(j))return G.get(j);const fe=ee(j);return fe!==j&&(G.set(j,fe),$.set(fe,j)),fe}const We=j=>$.get(j);function et(j,fe,{blocked:W,upgrade:J,blocking:Q,terminated:ce}={}){const se=indexedDB.open(j,fe),ke=Ee(se);return J&&se.addEventListener("upgradeneeded",st=>{J(Ee(se.result),st.oldVersion,st.newVersion,Ee(se.transaction))}),W&&se.addEventListener("blocked",()=>W()),ke.then(st=>{ce&&st.addEventListener("close",()=>ce()),Q&&st.addEventListener("versionchange",()=>Q())}).catch(()=>{}),ke}function Ie(j,{blocked:fe}={}){const W=indexedDB.deleteDatabase(j);return fe&&W.addEventListener("blocked",()=>fe()),Ee(W).then(()=>{})}const ae=["get","getKey","getAll","getAllKeys","count"],pe=["put","add","delete","clear"],Ne=new Map;function Ge(j,fe){if(!(j instanceof IDBDatabase)||fe in j||"string"!=typeof fe)return;if(Ne.get(fe))return Ne.get(fe);const W=fe.replace(/FromIndex$/,""),J=fe!==W,Q=pe.includes(W);if(!(W in(J?IDBIndex:IDBObjectStore).prototype)||!Q&&!ae.includes(W))return;const ce=function(){var se=(0,u.Z)(function*(ke,...st){const Qt=this.transaction(ke,Q?"readwrite":"readonly");let Nt=Qt.store;return J&&(Nt=Nt.index(st.shift())),(yield Promise.all([Nt[W](...st),Q&&Qt.done]))[0]});return function(st){return se.apply(this,arguments)}}();return Ne.set(fe,ce),ce}!function Le(j){Te=j(Te)}(j=>r6(i6({},j),{get:(fe,W,J)=>Ge(fe,W)||j.get(fe,W,J),has:(fe,W)=>!!Ge(fe,W)||j.has(fe,W)}))},5861:(Ke,me,F)=>{"use strict";function u(B,he,we,be,le,_e,Se){try{var G=B[_e](Se),$=G.value}catch(X){return void we(X)}G.done?he($):Promise.resolve($).then(be,le)}function te(B){return function(){var he=this,we=arguments;return new Promise(function(be,le){var _e=B.apply(he,we);function Se($){u(_e,be,le,Se,G,"next",$)}function G($){u(_e,be,le,Se,G,"throw",$)}Se(void 0)})}}F.d(me,{Z:()=>te})}},Ke=>{Ke(Ke.s=859)}]);